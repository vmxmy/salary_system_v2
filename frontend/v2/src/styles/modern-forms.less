// =============================================================================
// ğŸ“ ç°ä»£åŒ–è¡¨å•æ ·å¼ (Modern Form Styles)
// =============================================================================
// ä¸“é—¨é’ˆå¯¹è¡¨å•ç»„ä»¶çš„ç°ä»£åŒ–æ ·å¼ä¼˜åŒ–

@import './modern-design-system.less';

// =============================================================================
// ğŸ”¸ åŸºç¡€è¡¨å•æ ·å¼ (Basic Form Styles)
// =============================================================================

.ant-form {
  font-family: @font-family-primary;
  
  // è¡¨å•é¡¹é—´è·ä¼˜åŒ–
  .ant-form-item {
    margin-bottom: @space-6;
    
    // æ ‡ç­¾æ ·å¼
    .ant-form-item-label {
      padding-bottom: @space-2;
      
      > label {
        .typography-caption-strong();
        color: @text-secondary;
        height: auto;
        
        &.ant-form-item-required {
          &::before {
            color: @error-500;
            font-size: @font-size-sm;
          }
        }
      }
    }
    
    // æ§ä»¶åŒ…è£…å™¨
    .ant-form-item-control {
      .ant-form-item-control-input {
        min-height: 40px;
        
        .ant-form-item-control-input-content {
          // ç¡®ä¿è¾“å…¥æ§ä»¶å¯¹é½
        }
      }
    }
    
    // é”™è¯¯æç¤ºæ ·å¼
    .ant-form-item-explain-error {
      .typography-caption();
      color: @error-600;
      margin-top: @space-1;
      display: flex;
      align-items: center;
      gap: @space-1;
      
      .anticon {
        font-size: @font-size-xs;
      }
    }
    
    // å¸®åŠ©æ–‡æœ¬æ ·å¼
    .ant-form-item-extra {
      .typography-caption();
      color: @text-tertiary;
      margin-top: @space-1;
    }
    
    // ç´§å‡‘æ¨¡å¼
    &.ant-form-item-compact {
      margin-bottom: @space-4;
    }
  }
  
  // è¡¨å•å¸ƒå±€ä¼˜åŒ–
  &.ant-form-horizontal {
    .ant-form-item {
      .ant-form-item-label {
        text-align: left;
        
        > label {
          height: 40px;
          line-height: 40px;
        }
      }
    }
  }
  
  &.ant-form-vertical {
    .ant-form-item {
      .ant-form-item-label {
        padding-bottom: @space-2;
        
        > label {
          padding: 0;
        }
      }
    }
  }
}

// =============================================================================
// ğŸ”¸ è¾“å…¥æ§ä»¶ç°ä»£åŒ– (Modern Input Controls)
// =============================================================================

// åŸºç¡€è¾“å…¥æ¡†
.ant-input {
  border-radius: @radius-md !important;
  border-color: @border-default !important;
  padding: @space-3 @space-4 !important;
  font-size: @font-size-sm !important;
  line-height: @line-height-normal !important;
  transition: all @duration-base @ease-out !important;
  
  &::placeholder {
    color: @text-quaternary;
    font-style: italic;
  }
  
  &:hover {
    border-color: @primary-300 !important;
  }
  
  &:focus,
  &.ant-input-focused {
    border-color: @primary-500 !important;
    box-shadow: 0 0 0 3px fade(@primary-500, 15%) !important;
  }
  
  &.ant-input-disabled {
    background: @neutral-100 !important;
    color: @text-quaternary !important;
    cursor: not-allowed;
  }
  
  // è¾“å…¥æ¡†å°ºå¯¸å˜ä½“
  &.ant-input-lg {
    padding: @space-4 @space-5 !important;
    font-size: @font-size-base !important;
    min-height: 48px !important;
  }
  
  &.ant-input-sm {
    padding: @space-2 @space-3 !important;
    font-size: @font-size-xs !important;
    min-height: 32px !important;
  }
}

// æ–‡æœ¬åŸŸ
.ant-input {
  &.ant-input {
    resize: vertical;
    min-height: 80px;
    
    &:focus {
      box-shadow: 0 0 0 3px fade(@primary-500, 15%) !important;
    }
  }
}

// è¾“å…¥ç»„åˆ
.ant-input-group {
  .ant-input-group-addon {
    background: @bg-secondary;
    border-color: @border-default;
    color: @text-secondary;
    border-radius: @radius-md;
    
    .anticon {
      color: @text-tertiary;
    }
  }
}

// æœç´¢è¾“å…¥æ¡†
.ant-input-search {
  .ant-input-search-button {
    background: @primary-500 !important;
    border-color: @primary-500 !important;
    border-radius: 0 @radius-md @radius-md 0 !important;
    
    &:hover {
      background: @primary-600 !important;
      border-color: @primary-600 !important;
    }
    
    .anticon {
      color: @text-inverse;
    }
  }
}

// =============================================================================
// ğŸ”¸ é€‰æ‹©å™¨ç°ä»£åŒ– (Modern Selectors)
// =============================================================================

// ä¸‹æ‹‰é€‰æ‹©å™¨
.ant-select {
  .ant-select-selector {
    border-radius: @radius-md !important;
    border-color: @border-default !important;
    padding: @space-2 @space-4 !important;
    min-height: 40px !important;
    transition: all @duration-base @ease-out !important;
    
    .ant-select-selection-search-input {
      height: 36px !important;
      font-size: @font-size-sm !important;
    }
    
    .ant-select-selection-item {
      .typography-body();
      color: @text-primary;
    }
    
    .ant-select-selection-placeholder {
      color: @text-quaternary;
      font-style: italic;
    }
  }
  
  &:hover .ant-select-selector {
    border-color: @primary-300 !important;
  }
  
  &.ant-select-focused .ant-select-selector {
    border-color: @primary-500 !important;
    box-shadow: 0 0 0 3px fade(@primary-500, 15%) !important;
  }
  
  &.ant-select-disabled .ant-select-selector {
    background: @neutral-100 !important;
    color: @text-quaternary !important;
  }
  
  // é€‰æ‹©å™¨ç®­å¤´
  .ant-select-arrow {
    color: @text-tertiary;
    
    .anticon {
      transition: transform @duration-base @ease-out;
    }
  }
  
  &.ant-select-open .ant-select-arrow .anticon {
    transform: rotate(180deg);
  }
  
  // å¤šé€‰æ ‡ç­¾
  .ant-select-selection-item {
    background: @primary-50;
    border: 1px solid @primary-200;
    border-radius: @radius-base;
    color: @primary-700;
    font-size: @font-size-xs;
    
    .ant-select-selection-item-remove {
      color: @primary-500;
      
      &:hover {
        color: @primary-700;
      }
    }
  }
}

// ä¸‹æ‹‰é¢æ¿
.ant-select-dropdown {
  border-radius: @radius-lg !important;
  box-shadow: @shadow-lg !important;
  border: 1px solid @border-default !important;
  
  .ant-select-item {
    padding: @space-3 @space-4 !important;
    .typography-body();
    transition: all @duration-base @ease-out !important;
    
    &:hover {
      background: @bg-secondary !important;
    }
    
    &.ant-select-item-option-selected {
      background: @primary-50 !important;
      color: @primary-700 !important;
      font-weight: @font-weight-medium !important;
    }
  }
  
  .ant-select-item-empty {
    .typography-caption();
    color: @text-tertiary;
    text-align: center;
    padding: @space-8 !important;
  }
}

// =============================================================================
// ğŸ”¸ æ—¥æœŸé€‰æ‹©å™¨ç°ä»£åŒ– (Modern Date Pickers)
// =============================================================================

.ant-picker {
  border-radius: @radius-md !important;
  border-color: @border-default !important;
  padding: @space-3 @space-4 !important;
  min-height: 40px !important;
  transition: all @duration-base @ease-out !important;
  
  .ant-picker-input {
    > input {
      .typography-body();
      color: @text-primary;
      
      &::placeholder {
        color: @text-quaternary;
        font-style: italic;
      }
    }
  }
  
  .ant-picker-suffix {
    color: @text-tertiary;
  }
  
  &:hover {
    border-color: @primary-300 !important;
  }
  
  &.ant-picker-focused {
    border-color: @primary-500 !important;
    box-shadow: 0 0 0 3px fade(@primary-500, 15%) !important;
  }
  
  // èŒƒå›´é€‰æ‹©å™¨
  &.ant-picker-range {
    .ant-picker-separator {
      color: @text-tertiary;
    }
    
    .ant-picker-range-separator .ant-picker-separator {
      color: @text-tertiary;
    }
  }
}

// æ—¥æœŸé¢æ¿
.ant-picker-dropdown {
  .ant-picker-panel {
    border-radius: @radius-lg;
    box-shadow: @shadow-lg;
    border: 1px solid @border-default;
    
    .ant-picker-header {
      border-bottom-color: @border-light;
      
      .ant-picker-header-view {
        .typography-heading-3();
        color: @text-primary;
      }
    }
    
    .ant-picker-content {
      th {
        .typography-caption-strong();
        color: @text-secondary;
      }
      
      td {
        .ant-picker-cell-inner {
          border-radius: @radius-base;
          transition: all @duration-base @ease-out;
          
          &:hover {
            background: @primary-50;
            color: @primary-700;
          }
        }
        
        &.ant-picker-cell-selected .ant-picker-cell-inner {
          background: @primary-500;
          color: @text-inverse;
        }
        
        &.ant-picker-cell-today .ant-picker-cell-inner {
          border-color: @primary-400;
        }
      }
    }
  }
}

// =============================================================================
// ğŸ”¸ å¼€å…³å’Œå¤é€‰æ¡†ç°ä»£åŒ– (Modern Switches & Checkboxes)
// =============================================================================

// å¼€å…³
.ant-switch {
  background: @neutral-300 !important;
  border-radius: @radius-full !important;
  transition: all @duration-base @ease-out !important;
  
  &:hover {
    background: @neutral-400 !important;
  }
  
  &.ant-switch-checked {
    background: @primary-500 !important;
    
    &:hover {
      background: @primary-600 !important;
    }
  }
  
  .ant-switch-handle {
    &::before {
      border-radius: @radius-full;
      box-shadow: @shadow-sm;
    }
  }
  
  &.ant-switch-disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
}

// å¤é€‰æ¡†
.ant-checkbox {
  .ant-checkbox-inner {
    border-radius: @radius-sm !important;
    border-color: @border-medium !important;
    transition: all @duration-base @ease-out !important;
    
    &:hover {
      border-color: @primary-400 !important;
    }
  }
  
  &.ant-checkbox-checked {
    .ant-checkbox-inner {
      background-color: @primary-500 !important;
      border-color: @primary-500 !important;
    }
  }
  
  &.ant-checkbox-indeterminate {
    .ant-checkbox-inner {
      background-color: @primary-500 !important;
      border-color: @primary-500 !important;
    }
  }
  
  .ant-checkbox-input:focus + .ant-checkbox-inner {
    border-color: @primary-500 !important;
    box-shadow: 0 0 0 3px fade(@primary-500, 15%) !important;
  }
  
  + span {
    .typography-body();
    color: @text-primary;
    padding-left: @space-2;
  }
}

// å•é€‰æ¡†
.ant-radio {
  .ant-radio-inner {
    border-color: @border-medium !important;
    transition: all @duration-base @ease-out !important;
    
    &:hover {
      border-color: @primary-400 !important;
    }
  }
  
  &.ant-radio-checked {
    .ant-radio-inner {
      border-color: @primary-500 !important;
      
      &::after {
        background-color: @primary-500 !important;
      }
    }
  }
  
  .ant-radio-input:focus + .ant-radio-inner {
    border-color: @primary-500 !important;
    box-shadow: 0 0 0 3px fade(@primary-500, 15%) !important;
  }
  
  + span {
    .typography-body();
    color: @text-primary;
    padding-left: @space-2;
  }
}

// =============================================================================
// ğŸ”¸ è¡¨å•æŒ‰é’®ç»„ (Form Button Groups)
// =============================================================================

.ant-form-item {
  .ant-form-item-control-input-content {
    .ant-btn-group {
      .ant-btn + .ant-btn {
        margin-left: @space-3;
      }
    }
    
    // è¡¨å•åº•éƒ¨æŒ‰é’®
    .form-actions {
      display: flex;
      gap: @space-3;
      justify-content: flex-end;
      padding-top: @space-6;
      border-top: 1px solid @border-light;
      margin-top: @space-6;
      
      &.form-actions-left {
        justify-content: flex-start;
      }
      
      &.form-actions-center {
        justify-content: center;
      }
      
      &.form-actions-between {
        justify-content: space-between;
      }
      
      .ant-btn {
        min-width: 80px;
      }
    }
  }
}

// =============================================================================
// ğŸ“± è¡¨å•å“åº”å¼ä¼˜åŒ– (Form Responsive Optimizations)
// =============================================================================

@media (max-width: 768px) {
  .ant-form {
    .ant-form-item {
      margin-bottom: @space-4;
      
      // ç§»åŠ¨ç«¯æ ‡ç­¾æ ·å¼
      .ant-form-item-label {
        padding-bottom: @space-1;
        
        > label {
          font-size: @font-size-sm;
        }
      }
      
      // ç§»åŠ¨ç«¯æ§ä»¶ä¼˜åŒ–
      .ant-form-item-control {
        .ant-form-item-control-input {
          min-height: 44px; // è§¦æ§ä¼˜åŒ–
        }
      }
    }
    
    // ç§»åŠ¨ç«¯æ°´å¹³å¸ƒå±€è°ƒæ•´
    &.ant-form-horizontal {
      .ant-form-item {
        .ant-form-item-label {
          > label {
            height: 44px;
            line-height: 44px;
          }
        }
      }
    }
  }
  
  // ç§»åŠ¨ç«¯è¾“å…¥æ§ä»¶
  .ant-input,
  .ant-select .ant-select-selector,
  .ant-picker {
    min-height: 44px !important;
    font-size: @font-size-base !important;
  }
  
  // ç§»åŠ¨ç«¯è¡¨å•æŒ‰é’®
  .ant-form-item .form-actions {
    flex-direction: column-reverse;
    gap: @space-2;
    
    .ant-btn {
      width: 100%;
      min-height: 44px;
    }
  }
}

// =============================================================================
// ğŸŒ™ è¡¨å•æš—è‰²æ¨¡å¼ (Form Dark Mode)
// =============================================================================

[data-theme="dark"] {
  .ant-form {
    .ant-form-item {
      .ant-form-item-label > label {
        color: @neutral-300;
      }
      
      .ant-form-item-explain-error {
        color: @error-400;
      }
      
      .ant-form-item-extra {
        color: @neutral-400;
      }
    }
  }
  
  // æš—è‰²æ¨¡å¼è¾“å…¥æ§ä»¶
  .ant-input {
    background: @neutral-800 !important;
    border-color: @neutral-600 !important;
    color: @neutral-100 !important;
    
    &::placeholder {
      color: @neutral-500;
    }
    
    &:hover {
      border-color: @primary-400 !important;
    }
    
    &:focus {
      border-color: @primary-500 !important;
      box-shadow: 0 0 0 3px fade(@primary-500, 20%) !important;
    }
  }
  
  // æš—è‰²æ¨¡å¼é€‰æ‹©å™¨
  .ant-select .ant-select-selector {
    background: @neutral-800 !important;
    border-color: @neutral-600 !important;
    color: @neutral-100 !important;
  }
  
  .ant-select-dropdown {
    background: @neutral-800 !important;
    border-color: @neutral-600 !important;
    
    .ant-select-item {
      color: @neutral-100 !important;
      
      &:hover {
        background: @neutral-700 !important;
      }
      
      &.ant-select-item-option-selected {
        background: @primary-900 !important;
        color: @primary-300 !important;
      }
    }
  }
}