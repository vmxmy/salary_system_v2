import{M as e,s as t,j as a,C as n,r as l,t as r,I as o,a as s,u as i,S as d,B as c,au as m,aB as p,R as h,av as x,o as y}from"./antd-vendor-DWzn6iQK.js";import{u,b as g,R as j}from"./react-vendor-D9vUlElp.js";import{u as k}from"./useEmployeeManagement-DfP8-Vln.js";import{e as w,T as _}from"./hr-management-D97vxp0y.js";import{u as C}from"./i18n-vendor-DF0Yg0Xi.js";import"./employee-service-D8n0hVPx.js";import"./state-vendor-BIBp6L7x.js";import"./utils-vendor-CFhz7Dje.js";const{Search:S}=o,{Option:f}=i,v=e=>({"在职":"green","离职":"red","试用":"blue","停薪":"orange","退休":"gray"}[e]||"default"),T=()=>{const{t:o}=C(["employeeManagement","common"]),T=u(),{employees:b,loading:E,pagination:I,setPagination:$,setSorter:z,deleteEmployee:B,batchDeleteEmployees:O,refreshEmployees:D,searchEmployees:M,resetFilters:R}=k(),[K,L]=g.useState([]),[P,q]=g.useState(""),[A,F]=g.useState(),[J,Q]=g.useState(),[U,V]=g.useState([]),[Y,G]=g.useState([]);j.useEffect((()=>{(async()=>{try{const[e,t]=await Promise.all([w.getDepartments(),w.getLookupValues("EMPLOYEE_STATUS")]);V(e),G(t)}catch(e){}})()}),[]);const H=g.useCallback((e=>{q(e),M({full_name_contains:e,employee_code_contains:e})}),[M]),N=g.useCallback((e=>{F(e),M({department_id:e})}),[M]),W=g.useCallback((e=>{Q(e),M({employee_status_equals:e})}),[M]),X=g.useCallback((()=>{q(""),F(void 0),Q(void 0),R()}),[R]),Z=g.useCallback((t=>{e.confirm({title:"确认删除",content:"确定要删除这个员工吗？此操作不可撤销。",okText:"确定",okType:"danger",cancelText:"取消",onOk:()=>B(t)})}),[B]),ee=g.useCallback((()=>{0!==K.length?e.confirm({title:"确认批量删除",content:`确定要删除选中的 ${K.length} 个员工吗？此操作不可撤销。`,okText:"确定",okType:"danger",cancelText:"取消",onOk:async()=>{await O(K),L([])}}):t.warning("请选择要删除的员工")}),[K,O]),te=[{title:"员工编号",dataIndex:"employee_code",key:"employee_code",width:120,sorter:!0,render:e=>e||"-"},{title:"姓名",dataIndex:"full_name",key:"full_name",width:120,sorter:!0,render:(e,t,n)=>a.jsx(c,{type:"link",size:"small",onClick:()=>T(`/employee-management/${t.id}`),children:e})},{title:"邮箱",dataIndex:"email",key:"email",width:180,sorter:!0,render:e=>e||"-"},{title:"电话",dataIndex:"phone_number",key:"phone_number",width:130,sorter:!0,render:e=>e||"-"},{title:"部门",dataIndex:"department_name",key:"department_name",width:150,sorter:!0,render:e=>e||"-"},{title:"职位",dataIndex:"position_name",key:"position_name",width:150,sorter:!0,render:e=>e||"-"},{title:"人员类别",dataIndex:"personnel_category_name",key:"personnel_category_name",width:130,sorter:!0,render:e=>e||"-"},{title:"状态",dataIndex:"employee_status",key:"employee_status",width:100,sorter:!0,render:e=>a.jsx(y,{color:v(e),children:e})},{title:"入职日期",dataIndex:"hire_date",key:"hire_date",width:120,sorter:!0,render:e=>e?new Date(e).toLocaleDateString():"-"},{title:"操作",key:"action",width:150,fixed:"right",render:(e,t,n)=>a.jsxs(d,{size:"small",children:[a.jsx(_,{actionType:"view",onClick:()=>T(`/employee-management/${t.id}`),tooltipTitle:"查看详情"}),a.jsx(_,{actionType:"edit",onClick:()=>T(`/employee-management/${t.id}/edit`),tooltipTitle:"编辑"}),a.jsx(_,{actionType:"delete",danger:!0,onClick:()=>Z(t.id),tooltipTitle:"删除"})]})}];return a.jsxs("div",{style:{padding:"24px"},children:[a.jsx(n,{title:"员工管理",style:{marginBottom:16},extra:a.jsx(d,{children:a.jsx(c,{type:"primary",icon:a.jsx(h,{}),onClick:()=>T("/employee-management/create"),children:"新增员工"})}),children:a.jsxs(l,{gutter:16,style:{marginBottom:16},children:[a.jsx(r,{span:6,children:a.jsx(S,{placeholder:"搜索员工姓名或编号",allowClear:!0,enterButton:a.jsx(s,{}),value:P,onChange:e=>q(e.target.value),onSearch:H})}),a.jsx(r,{span:4,children:a.jsx(i,{placeholder:"选择部门",allowClear:!0,value:A,onChange:N,style:{width:"100%"},children:U.map((e=>a.jsx(f,{value:e.id,children:e.name},e.id)))})}),a.jsx(r,{span:4,children:a.jsx(i,{placeholder:"选择状态",allowClear:!0,value:J,onChange:W,style:{width:"100%"},children:Y.map((e=>a.jsx(f,{value:e.label,children:e.label},e.id)))})}),a.jsx(r,{span:10,children:a.jsxs(d,{children:[a.jsx(c,{onClick:X,children:"重置筛选"}),a.jsx(c,{icon:a.jsx(m,{}),onClick:D,children:"刷新"}),K.length>0&&a.jsxs(c,{danger:!0,onClick:ee,children:["批量删除 (",K.length,")"]}),a.jsx(c,{icon:a.jsx(p,{}),children:"导出Excel"})]})})]})}),a.jsx(n,{children:a.jsx(x,{columns:te,dataSource:b,loading:E,rowKey:"id",scroll:{x:1500},pagination:{...I,showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,t)=>`第 ${t[0]}-${t[1]} 条，共 ${e} 条`,pageSizeOptions:["10","20","50","100"]},rowSelection:{selectedRowKeys:K,onChange:L,preserveSelectedRowKeys:!0},onChange:(e,t,a)=>{$({current:e.current||1,pageSize:e.pageSize||20,total:I.total}),a&&z({field:a.field,order:a.order})}})})]})};export{T as default};
