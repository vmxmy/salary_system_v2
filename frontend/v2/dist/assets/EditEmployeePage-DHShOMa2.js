import{j as e,n as s,T as n,B as t,C as a,S as i,ba as l,bd as r,s as m}from"./antd-vendor-DWzn6iQK.js";import{k as o,u as c,b as d}from"./react-vendor-D9vUlElp.js";import{E as p}from"./EmployeeForm-vU_E_HKg.js";import{u as j}from"./useEmployeeManagement-DfP8-Vln.js";import{e as y}from"./hr-management-D97vxp0y.js";import{u as x}from"./i18n-vendor-DF0Yg0Xi.js";import"./employee-service-D8n0hVPx.js";import"./state-vendor-BIBp6L7x.js";import"./utils-vendor-CFhz7Dje.js";const{Title:u}=n,g=()=>{const{id:n}=o(),g=c(),{t:f}=x(["employeeManagement","common"]),{updateEmployee:h}=j(),[v,b]=d.useState(null),[C,E]=d.useState(!0),k=d.useRef(null);d.useEffect((()=>{(async()=>{if(n)try{E(!0);const e=await y.getEmployeeById(n);b(e)}catch(e){m.error("获取员工详情失败"),g("/employee-management/list")}finally{E(!1)}})()}),[n,g]);return C?e.jsx("div",{style:{textAlign:"center",padding:"50px"},children:e.jsx(s,{size:"large"})}):v?e.jsxs("div",{style:{padding:"24px"},children:[e.jsx(a,{style:{marginBottom:16},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(i,{children:[e.jsx(t,{icon:e.jsx(l,{}),onClick:()=>g(`/employee-management/${n}`),children:"返回详情"}),e.jsxs(u,{level:3,style:{margin:0},children:["编辑员工 - ",v.full_name]})]}),e.jsxs(i,{children:[e.jsx(t,{onClick:()=>g(`/employee-management/${n}`),children:"取消"}),e.jsx(t,{type:"primary",icon:e.jsx(r,{}),onClick:()=>{k.current&&k.current.submit()},children:"保存"})]})]})}),e.jsx(p,{mode:"edit",initialValues:v,onSubmit:async e=>{if(n)try{await h(n,e),m.success("员工更新成功"),g(`/employee-management/${n}`)}catch(s){}},ref:k})]}):e.jsxs("div",{style:{textAlign:"center",padding:"50px"},children:[e.jsx(u,{level:3,children:"员工不存在"}),e.jsx(t,{onClick:()=>g("/employee-management/list"),children:"返回员工列表"})]})};export{g as default};
