const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-ponyfill-C3VuJUT6.js","assets/react-vendor-D9vUlElp.js","assets/EmployeeListPageModern-DKPsnbJl.js","assets/antd-vendor-C1V4cVms.js","assets/hr-management-Bxz25n3J.js","assets/employee-service-EoGCXWnj.js","assets/state-vendor-BIBp6L7x.js","assets/utils-vendor-CFhz7Dje.js","assets/i18n-vendor-DF0Yg0Xi.js","assets/hr-management-DTNwHUu_.css","assets/useRenderCount-CIqEsBom.js","assets/admin-management-B_B4TQCC.js","assets/payroll-management-BhhUn9Iu.js","assets/payroll-management-Bl2KAowS.css","assets/admin-management-DbdH7lzr.css","assets/EmployeeListPageUniversal-D0jGF0kd.js","assets/FileSaver.min-BepjGbTF.js","assets/exceljs.min-BdG9S1UE.js","assets/excel-vendor-BHR_E30J.js","assets/EmployeeListPageUniversal-CIAEP1KB.css","assets/CreateEmployeePageModern-ClHo9Lvo.js","assets/EditEmployeePageModern-BpTDv80M.js","assets/EmployeeDetailPageModern-BxvZ_0fI.js","assets/EmployeeManagementPage-BNCtQ-sV.js","assets/useEmployeeManagement-VuG4VnGI.js","assets/EmployeeDetailPage-CKUjPZ9d.js","assets/CreateEmployeePage-CqcH9p5v.js","assets/EmployeeForm-DY3pxVUB.js","assets/EditEmployeePage-X_Z9Nsny.js","assets/index-BV2Mekaf.js","assets/index-l76Joh5R.css"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,n,r)=>((t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r)(t,"symbol"!=typeof n?n+"":n,r);import{j as n,A as r,n as a,aP as o,T as i,z as s,aQ as l,aR as c,aS as d,a1 as u,aT as p,F as m,aU as f,aV as h,J as _,a0 as y,aW as g,aX as v,O as x,aY as b,aZ as w,a_ as j,S as k,_ as S,B as C,a$ as E,b0 as T,b1 as I,D as P,b2 as N,Z as A,aq as O,r as M,t as D,C as L,I as R,b3 as z,ay as $,m as F,u as q,M as B,aw as U,s as V,o as Y,b4 as H,q as K,b5 as Z,y as W,a9 as G,b6 as J,b7 as X,h as Q,as as ee,b8 as te,d as ne,w as re,v as ae,b9 as oe,P as ie,R as se,b as le,p as ce,L as de,E as ue,ba as pe,e as me,bb as fe,av as he,az as _e,N as ye,aA as ge,l as ve,aH as xe,bc as be,X as we,bd as je,V as ke,be as Se,bf as Ce,bg as Ee,aK as Te,au as Ie,k as Pe,H as Ne,bh as Ae,bi as Oe,x as Me,G as De,ab as Le,i as Re,bj as ze,a as $e,at as Fe,bk as qe,bl as Be,bm as Ue}from"./antd-vendor-C1V4cVms.js";import{i as Ve,g as Ye,b as He,j as Ke,h as Ze,N as We,R as Ge,u as Je,O as Xe,k as Qe,l as et}from"./react-vendor-D9vUlElp.js";import{d as tt,u as nt,P as rt}from"./state-vendor-BIBp6L7x.js";import{e as at,a as ot,s as it,t as st,v as lt,w as ct,x as dt,y as ut,z as pt,A as mt,j as ft,B as ht,C as _t,D as yt,E as gt,F as vt,G as xt,b as bt,H as wt,I as jt,J as kt,K as St,L as Ct}from"./employee-service-EoGCXWnj.js";import{Q as Et,a as Tt,u as It,A as Pt}from"./admin-management-B_B4TQCC.js";import{u as Nt,P as At,a as Ot,b as Mt,c as Dt,g as Lt,d as Rt,e as zt,f as $t,h as Ft,i as qt,j as Bt,k as Ut,l as Vt,m as Yt,p as Ht,n as Kt,o as Zt,q as Wt,r as Gt,s as Jt,t as Xt,v as Qt,w as en,x as tn,O as nn,y as rn,z as an,A as on,B as sn,C as ln,D as cn,E as dn,F as un,G as pn,H as mn}from"./payroll-management-BhhUn9Iu.js";import{c as fn,u as hn,_ as _n,a as yn,b as gn,O as vn,T as xn,d as bn,f as wn,e as jn,n as kn,s as Sn}from"./hr-management-Bxz25n3J.js";import{u as Cn,i as En,a as Tn}from"./i18n-vendor-DF0Yg0Xi.js";import"./utils-vendor-CFhz7Dje.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var In,Pn={};const Nn=Ye(function(){if(In)return Pn;In=1;var e=Ve();return Pn.createRoot=e.createRoot,Pn.hydrateRoot=e.hydrateRoot,Pn}());var An,On,Mn,Dn,Ln,Rn,zn,$n,Fn,qn,Bn,Un,Vn={},Yn=[],Hn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Kn=Array.isArray;function Zn(e,t){for(var n in t)e[n]=t[n];return e}function Wn(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Gn(e,t,n){var r,a,o,i={};for(o in t)"key"==o?r=t[o]:"ref"==o?a=t[o]:i[o]=t[o];if(arguments.length>2&&(i.children=arguments.length>3?An.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)null==i[o]&&(i[o]=e.defaultProps[o]);return Jn(e,i,r,a,null)}function Jn(e,t,n,r,a){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==a?++Mn:a,__i:-1,__u:0};return null==a&&null!=On.vnode&&On.vnode(o),o}function Xn(){return{current:null}}function Qn(e){return e.children}function er(e,t){this.props=e,this.context=t}function tr(e,t){if(null==t)return e.__?tr(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?tr(e):null}function nr(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return nr(e)}}function rr(e){(!e.__d&&(e.__d=!0)&&Dn.push(e)&&!ar.__r++||Ln!=On.debounceRendering)&&((Ln=On.debounceRendering)||Rn)(ar)}function ar(){for(var e,t,n,r,a,o,i,s=1;Dn.length;)Dn.length>s&&Dn.sort(zn),e=Dn.shift(),s=Dn.length,e.__d&&(n=void 0,a=(r=(t=e).__v).__e,o=[],i=[],t.__P&&((n=Zn({},r)).__v=r.__v+1,On.vnode&&On.vnode(n),pr(t.__P,n,r,t.__n,t.__P.namespaceURI,32&r.__u?[a]:null,o,null==a?tr(r):a,!!(32&r.__u),i),n.__v=r.__v,n.__.__k[n.__i]=n,mr(o,n,i),n.__e!=a&&nr(n)));ar.__r=0}function or(e,t,n,r,a,o,i,s,l,c,d){var u,p,m,f,h,_,y=r&&r.__k||Yn,g=t.length;for(l=function(e,t,n,r,a){var o,i,s,l,c,d=n.length,u=d,p=0;for(e.__k=new Array(a),o=0;o<a;o++)null!=(i=t[o])&&"boolean"!=typeof i&&"function"!=typeof i?(l=o+p,(i=e.__k[o]="string"==typeof i||"number"==typeof i||"bigint"==typeof i||i.constructor==String?Jn(null,i,null,null,null):Kn(i)?Jn(Qn,{children:i},null,null,null):null==i.constructor&&i.__b>0?Jn(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=e,i.__b=e.__b+1,s=null,-1!=(c=i.__i=lr(i,n,l,u))&&(u--,(s=n[c])&&(s.__u|=2)),null==s||null==s.__v?(-1==c&&(a>d?p--:a<d&&p++),"function"!=typeof i.type&&(i.__u|=4)):c!=l&&(c==l-1?p--:c==l+1?p++:(c>l?p--:p++,i.__u|=4))):e.__k[o]=null;if(u)for(o=0;o<d;o++)null!=(s=n[o])&&!(2&s.__u)&&(s.__e==r&&(r=tr(s)),_r(s,s));return r}(n,t,y,l,g),u=0;u<g;u++)null!=(m=n.__k[u])&&(p=-1==m.__i?Vn:y[m.__i]||Vn,m.__i=u,_=pr(e,m,p,a,o,i,s,l,c,d),f=m.__e,m.ref&&p.ref!=m.ref&&(p.ref&&hr(p.ref,null,m),d.push(m.ref,m.__c||f,m)),null==h&&null!=f&&(h=f),4&m.__u||p.__k===m.__k?l=ir(m,l,e):"function"==typeof m.type&&void 0!==_?l=_:f&&(l=f.nextSibling),m.__u&=-7);return n.__e=h,l}function ir(e,t,n){var r,a;if("function"==typeof e.type){for(r=e.__k,a=0;r&&a<r.length;a++)r[a]&&(r[a].__=e,t=ir(r[a],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=tr(e)),n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8==t.nodeType);return t}function sr(e,t){return t=t||[],null==e||"boolean"==typeof e||(Kn(e)?e.some((function(e){sr(e,t)})):t.push(e)),t}function lr(e,t,n,r){var a,o,i=e.key,s=e.type,l=t[n];if(null===l&&null==e.key||l&&i==l.key&&s==l.type&&!(2&l.__u))return n;if(r>(null==l||2&l.__u?0:1))for(a=n-1,o=n+1;a>=0||o<t.length;){if(a>=0){if((l=t[a])&&!(2&l.__u)&&i==l.key&&s==l.type)return a;a--}if(o<t.length){if((l=t[o])&&!(2&l.__u)&&i==l.key&&s==l.type)return o;o++}}return-1}function cr(e,t,n){"-"==t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||Hn.test(t)?n:n+"px"}function dr(e,t,n,r,a){var o;e:if("style"==t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||cr(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||cr(e.style,t,n[t])}else if("o"==t[0]&&"n"==t[1])o=t!=(t=t.replace($n,"$1")),t=t.toLowerCase()in e||"onFocusOut"==t||"onFocusIn"==t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r?n.u=r.u:(n.u=Fn,e.addEventListener(t,o?Bn:qn,o)):e.removeEventListener(t,o?Bn:qn,o);else{if("http://www.w3.org/2000/svg"==a)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(i){}"function"==typeof n||(null==n||!1===n&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function ur(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=Fn++;else if(t.t<n.u)return;return n(On.event?On.event(t):t)}}}function pr(e,t,n,r,a,o,i,s,l,c){var d,u,p,m,f,h,_,y,g,v,x,b,w,j,k,S,C,E=t.type;if(null!=t.constructor)return null;128&n.__u&&(l=!!(32&n.__u),o=[s=t.__e=n.__e]),(d=On.__b)&&d(t);e:if("function"==typeof E)try{if(y=t.props,g="prototype"in E&&E.prototype.render,v=(d=E.contextType)&&r[d.__c],x=d?v?v.props.value:d.__:r,n.__c?_=(u=t.__c=n.__c).__=u.__E:(g?t.__c=u=new E(y,x):(t.__c=u=new er(y,x),u.constructor=E,u.render=yr),v&&v.sub(u),u.props=y,u.state||(u.state={}),u.context=x,u.__n=r,p=u.__d=!0,u.__h=[],u._sb=[]),g&&null==u.__s&&(u.__s=u.state),g&&null!=E.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=Zn({},u.__s)),Zn(u.__s,E.getDerivedStateFromProps(y,u.__s))),m=u.props,f=u.state,u.__v=t,p)g&&null==E.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),g&&null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(g&&null==E.getDerivedStateFromProps&&y!==m&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(y,x),!u.__e&&null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(y,u.__s,x)||t.__v==n.__v){for(t.__v!=n.__v&&(u.props=y,u.state=u.__s,u.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some((function(e){e&&(e.__=t)})),b=0;b<u._sb.length;b++)u.__h.push(u._sb[b]);u._sb=[],u.__h.length&&i.push(u);break e}null!=u.componentWillUpdate&&u.componentWillUpdate(y,u.__s,x),g&&null!=u.componentDidUpdate&&u.__h.push((function(){u.componentDidUpdate(m,f,h)}))}if(u.context=x,u.props=y,u.__P=e,u.__e=!1,w=On.__r,j=0,g){for(u.state=u.__s,u.__d=!1,w&&w(t),d=u.render(u.props,u.state,u.context),k=0;k<u._sb.length;k++)u.__h.push(u._sb[k]);u._sb=[]}else do{u.__d=!1,w&&w(t),d=u.render(u.props,u.state,u.context),u.state=u.__s}while(u.__d&&++j<25);u.state=u.__s,null!=u.getChildContext&&(r=Zn(Zn({},r),u.getChildContext())),g&&!p&&null!=u.getSnapshotBeforeUpdate&&(h=u.getSnapshotBeforeUpdate(m,f)),S=d,null!=d&&d.type===Qn&&null==d.key&&(S=fr(d.props.children)),s=or(e,Kn(S)?S:[S],t,n,r,a,o,i,s,l,c),u.base=t.__e,t.__u&=-161,u.__h.length&&i.push(u),_&&(u.__E=u.__=null)}catch(T){if(t.__v=null,l||null!=o)if(T.then){for(t.__u|=l?160:128;s&&8==s.nodeType&&s.nextSibling;)s=s.nextSibling;o[o.indexOf(s)]=null,t.__e=s}else for(C=o.length;C--;)Wn(o[C]);else t.__e=n.__e,t.__k=n.__k;On.__e(T,t,n)}else null==o&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):s=t.__e=function(e,t,n,r,a,o,i,s,l){var c,d,u,p,m,f,h,_=n.props,y=t.props,g=t.type;if("svg"==g?a="http://www.w3.org/2000/svg":"math"==g?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),null!=o)for(c=0;c<o.length;c++)if((m=o[c])&&"setAttribute"in m==!!g&&(g?m.localName==g:3==m.nodeType)){e=m,o[c]=null;break}if(null==e){if(null==g)return document.createTextNode(y);e=document.createElementNS(a,g,y.is&&y),s&&(On.__m&&On.__m(t,o),s=!1),o=null}if(null==g)_===y||s&&e.data==y||(e.data=y);else{if(o=o&&An.call(e.childNodes),_=n.props||Vn,!s&&null!=o)for(_={},c=0;c<e.attributes.length;c++)_[(m=e.attributes[c]).name]=m.value;for(c in _)if(m=_[c],"children"==c);else if("dangerouslySetInnerHTML"==c)u=m;else if(!(c in y)){if("value"==c&&"defaultValue"in y||"checked"==c&&"defaultChecked"in y)continue;dr(e,c,null,m,a)}for(c in y)m=y[c],"children"==c?p=m:"dangerouslySetInnerHTML"==c?d=m:"value"==c?f=m:"checked"==c?h=m:s&&"function"!=typeof m||_[c]===m||dr(e,c,m,_[c],a);if(d)s||u&&(d.__html==u.__html||d.__html==e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(u&&(e.innerHTML=""),or("template"==t.type?e.content:e,Kn(p)?p:[p],t,n,r,"foreignObject"==g?"http://www.w3.org/1999/xhtml":a,o,i,o?o[0]:n.__k&&tr(n,0),s,l),null!=o)for(c=o.length;c--;)Wn(o[c]);s||(c="value","progress"==g&&null==f?e.removeAttribute("value"):null!=f&&(f!==e[c]||"progress"==g&&!f||"option"==g&&f!=_[c])&&dr(e,c,f,_[c],a),c="checked",null!=h&&h!=e[c]&&dr(e,c,h,_[c],a))}return e}(n.__e,t,n,r,a,o,i,l,c);return(d=On.diffed)&&d(t),128&t.__u?void 0:s}function mr(e,t,n){for(var r=0;r<n.length;r++)hr(n[r],n[++r],n[++r]);On.__c&&On.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(n){On.__e(n,t.__v)}}))}function fr(e){return"object"!=typeof e||null==e||e.__b&&e.__b>0?e:Kn(e)?e.map(fr):Zn({},e)}function hr(e,t,n){try{if("function"==typeof e){var r="function"==typeof e.__u;r&&e.__u(),r&&null==t||(e.__u=e(t))}else e.current=t}catch(a){On.__e(a,n)}}function _r(e,t,n){var r,a;if(On.unmount&&On.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||hr(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){On.__e(o,t)}r.base=r.__P=null}if(r=e.__k)for(a=0;a<r.length;a++)r[a]&&_r(r[a],t,n||"function"!=typeof e.type);n||Wn(e.__e),e.__c=e.__=e.__e=void 0}function yr(e,t,n){return this.constructor(e,n)}function gr(e,t,n){var r,a,o,i;t==document&&(t=document.documentElement),On.__&&On.__(e,t),a=(r="function"==typeof n)?null:n&&n.__k||t.__k,o=[],i=[],pr(t,e=(!r&&n||t).__k=Gn(Qn,null,[e]),a||Vn,Vn,t.namespaceURI,!r&&n?[n]:a?null:t.firstChild?An.call(t.childNodes):null,o,!r&&n?n:a?a.__e:t.firstChild,r,i),mr(o,e,i)}function vr(e,t){gr(e,t,vr)}function xr(e,t,n){var r,a,o,i,s=Zn({},e.props);for(o in e.type&&e.type.defaultProps&&(i=e.type.defaultProps),t)"key"==o?r=t[o]:"ref"==o?a=t[o]:s[o]=null==t[o]&&null!=i?i[o]:t[o];return arguments.length>2&&(s.children=arguments.length>3?An.call(arguments,2):n),Jn(e.type,s,r||e.key,a||e.ref,null)}function br(e){function t(e){var n,r;return this.getChildContext||(n=new Set,(r={})[t.__c]=this,this.getChildContext=function(){return r},this.componentWillUnmount=function(){n=null},this.shouldComponentUpdate=function(e){this.props.value!=e.value&&n.forEach((function(e){e.__e=!0,rr(e)}))},this.sub=function(e){n.add(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n&&n.delete(e),t&&t.call(e)}}),e.children}return t.__c="__cC"+Un++,t.__=e,t.Provider=t.__l=(t.Consumer=function(e,t){return e.children(t)}).contextType=t,t}An=Yn.slice,On={__e:function(e,t,n,r){for(var a,o,i;t=t.__;)if((a=t.__c)&&!a.__)try{if((o=a.constructor)&&null!=o.getDerivedStateFromError&&(a.setState(o.getDerivedStateFromError(e)),i=a.__d),null!=a.componentDidCatch&&(a.componentDidCatch(e,r||{}),i=a.__d),i)return a.__E=a}catch(s){e=s}throw e}},Mn=0,er.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=Zn({},this.state),"function"==typeof e&&(e=e(Zn({},n),this.props)),e&&Zn(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),rr(this))},er.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),rr(this))},er.prototype.render=Qn,Dn=[],Rn="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,zn=function(e,t){return e.__v.__b-t.__v.__b},ar.__r=0,$n=/(PointerCapture)$|Capture$/i,Fn=0,qn=ur(!1),Bn=ur(!0),Un=0;var wr=0;function jr(e,t,n,r,a,o){t||(t={});var i,s,l=t;if("ref"in l)for(s in l={},t)"ref"==s?i=t[s]:l[s]=t[s];var c={type:e,props:l,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--wr,__i:-1,__u:0,__source:a,__self:o};if("function"==typeof e&&(i=e.defaultProps))for(s in i)void 0===l[s]&&(l[s]=i[s]);return On.vnode&&On.vnode(c),c}var kr,Sr,Cr,Er,Tr=0,Ir=[],Pr=On,Nr=Pr.__b,Ar=Pr.__r,Or=Pr.diffed,Mr=Pr.__c,Dr=Pr.unmount,Lr=Pr.__;function Rr(e,t){Pr.__h&&Pr.__h(Sr,e,Tr||t),Tr=0;var n=Sr.__H||(Sr.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function zr(e){return Tr=1,$r(ta,e)}function $r(e,t,n){var r=Rr(kr++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):ta(void 0,t),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=Sr,!Sr.__f)){var a=function(e,t,n){if(!r.__c.__H)return!0;var a=r.__c.__H.__.filter((function(e){return!!e.__c}));if(a.every((function(e){return!e.__N})))return!o||o.call(this,e,t,n);var i=r.__c.props!==e;return a.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(i=!0)}})),o&&o.call(this,e,t,n)||i};Sr.__f=!0;var o=Sr.shouldComponentUpdate,i=Sr.componentWillUpdate;Sr.componentWillUpdate=function(e,t,n){if(this.__e){var r=o;o=void 0,a(e,t,n),o=r}i&&i.call(this,e,t,n)},Sr.shouldComponentUpdate=a}return r.__N||r.__}function Fr(e,t){var n=Rr(kr++,3);!Pr.__s&&ea(n.__H,t)&&(n.__=e,n.u=t,Sr.__H.__h.push(n))}function qr(e,t){var n=Rr(kr++,4);!Pr.__s&&ea(n.__H,t)&&(n.__=e,n.u=t,Sr.__h.push(n))}function Br(e){return Tr=5,Vr((function(){return{current:e}}),[])}function Ur(e,t,n){Tr=6,qr((function(){if("function"==typeof e){var n=e(t());return function(){e(null),n&&"function"==typeof n&&n()}}if(e)return e.current=t(),function(){return e.current=null}}),null==n?n:n.concat(e))}function Vr(e,t){var n=Rr(kr++,7);return ea(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function Yr(e,t){return Tr=8,Vr((function(){return e}),t)}function Hr(e){var t=Sr.context[e.__c],n=Rr(kr++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(Sr)),t.props.value):e.__}function Kr(e,t){Pr.useDebugValue&&Pr.useDebugValue(t?t(e):e)}function Zr(){var e=Rr(kr++,11);if(!e.__){for(var t=Sr.__v;null!==t&&!t.__m&&null!==t.__;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function Wr(){for(var e;e=Ir.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Xr),e.__H.__h.forEach(Qr),e.__H.__h=[]}catch(t){e.__H.__h=[],Pr.__e(t,e.__v)}}Pr.__b=function(e){Sr=null,Nr&&Nr(e)},Pr.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Lr&&Lr(e,t)},Pr.__r=function(e){Ar&&Ar(e),kr=0;var t=(Sr=e.__c).__H;t&&(Cr===Sr?(t.__h=[],Sr.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0}))):(t.__h.forEach(Xr),t.__h.forEach(Qr),t.__h=[],kr=0)),Cr=Sr},Pr.diffed=function(e){Or&&Or(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==Ir.push(t)&&Er===Pr.requestAnimationFrame||((Er=Pr.requestAnimationFrame)||Jr)(Wr)),t.__H.__.forEach((function(e){e.u&&(e.__H=e.u),e.u=void 0}))),Cr=Sr=null},Pr.__c=function(e,t){t.some((function(e){try{e.__h.forEach(Xr),e.__h=e.__h.filter((function(e){return!e.__||Qr(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],Pr.__e(n,e.__v)}})),Mr&&Mr(e,t)},Pr.unmount=function(e){Dr&&Dr(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{Xr(e)}catch(n){t=n}})),n.__H=void 0,t&&Pr.__e(t,n.__v))};var Gr="function"==typeof requestAnimationFrame;function Jr(e){var t,n=function(){clearTimeout(r),Gr&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Gr&&(t=requestAnimationFrame(n))}function Xr(e){var t=Sr,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),Sr=t}function Qr(e){var t=Sr;e.__c=e.__(),Sr=t}function ea(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function ta(e,t){return"function"==typeof t?t(e):t}function na(e,t){for(var n in t)e[n]=t[n];return e}function ra(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}function aa(e,t){var n=t(),r=zr({t:{__:n,u:t}}),a=r[0].t,o=r[1];return qr((function(){a.__=n,a.u=t,oa(a)&&o({t:a})}),[e,n,t]),Fr((function(){return oa(a)&&o({t:a}),e((function(){oa(a)&&o({t:a})}))}),[e]),n}function oa(e){var t,n,r=e.u,a=e.__;try{var o=r();return!((t=a)===(n=o)&&(0!==t||1/t==1/n)||t!=t&&n!=n)}catch(i){return!0}}function ia(e){e()}function sa(e){return e}function la(){return[!1,ia]}var ca=qr;function da(e,t){this.props=e,this.context=t}(da.prototype=new er).isPureReactComponent=!0,da.prototype.shouldComponentUpdate=function(e,t){return ra(this.props,e)||ra(this.state,t)};var ua=On.__b;On.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),ua&&ua(e)};var pa="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function ma(e){function t(t){var n=na({},t);return delete n.ref,e(n,t.ref||null)}return t.$$typeof=pa,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var fa=function(e,t){return null==e?null:sr(sr(e).map(t))},ha={map:fa,forEach:fa,count:function(e){return e?sr(e).length:0},only:function(e){var t=sr(e);if(1!==t.length)throw"Children.only";return t[0]},toArray:sr},_a=On.__e;On.__e=function(e,t,n,r){if(e.then)for(var a,o=t;o=o.__;)if((a=o.__c)&&a.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),a.__c(e,t);_a(e,t,n,r)};var ya=On.unmount;function ga(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach((function(e){"function"==typeof e.__c&&e.__c()})),e.__c.__H=null),null!=(e=na({},e)).__c&&(e.__c.__P===n&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map((function(e){return ga(e,t,n)}))),e}function va(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map((function(e){return va(e,t,n)})),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function xa(){this.__u=0,this.o=null,this.__b=null}function ba(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function wa(){this.i=null,this.l=null}On.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),ya&&ya(e)},(xa.prototype=new er).__c=function(e,t){var n=t.__c,r=this;null==r.o&&(r.o=[]),r.o.push(n);var a=ba(r.__v),o=!1,i=function(){o||(o=!0,n.__R=null,a?a(s):s())};n.__R=i;var s=function(){if(! --r.__u){if(r.state.__a){var e=r.state.__a;r.__v.__k[0]=va(e,e.__c.__P,e.__c.__O)}var t;for(r.setState({__a:r.__b=null});t=r.o.pop();)t.forceUpdate()}};r.__u++||32&t.__u||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(i,i)},xa.prototype.componentWillUnmount=function(){this.o=[]},xa.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=ga(this.__b,n,r.__O=r.__P)}this.__b=null}var a=t.__a&&Gn(Qn,null,e.fallback);return a&&(a.__u&=-33),[Gn(Qn,null,t.__a?null:e.children),a]};var ja=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};function ka(e){return this.getChildContext=function(){return e.context},e.children}function Sa(e){var t=this,n=e.h;if(t.componentWillUnmount=function(){gr(null,t.v),t.v=null,t.h=null},t.h&&t.h!==n&&t.componentWillUnmount(),!t.v){for(var r=t.__v;null!==r&&!r.__m&&null!==r.__;)r=r.__;t.h=n,t.v={nodeType:1,parentNode:n,childNodes:[],__k:{__m:r.__m},contains:function(){return!0},appendChild:function(e){this.childNodes.push(e),t.h.appendChild(e)},insertBefore:function(e,n){this.childNodes.push(e),t.h.insertBefore(e,n)},removeChild:function(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),t.h.removeChild(e)}}}gr(Gn(ka,{context:t.context},e.__v),t.v)}(wa.prototype=new er).__a=function(e){var t=this,n=ba(t.__v),r=t.l.get(e);return r[0]++,function(a){var o=function(){t.props.revealOrder?(r.push(a),ja(t,e,r)):a()};n?n(o):o()}},wa.prototype.render=function(e){this.i=null,this.l=new Map;var t=sr(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},wa.prototype.componentDidUpdate=wa.prototype.componentDidMount=function(){var e=this;this.l.forEach((function(t,n){ja(e,n,t)}))};var Ca="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Ea=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ta=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Ia=/[A-Z0-9]/g,Pa="undefined"!=typeof document,Na=function(e){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/:/fil|che|ra/).test(e)};er.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(e){Object.defineProperty(er.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}));var Aa=On.event;function Oa(){}function Ma(){return this.cancelBubble}function Da(){return this.defaultPrevented}On.event=function(e){return Aa&&(e=Aa(e)),e.persist=Oa,e.isPropagationStopped=Ma,e.isDefaultPrevented=Da,e.nativeEvent=e};var La,Ra={enumerable:!1,configurable:!0,get:function(){return this.class}},za=On.vnode;On.vnode=function(e){"string"==typeof e.type&&function(e){var t=e.props,n=e.type,r={},a=-1===n.indexOf("-");for(var o in t){var i=t[o];if(!("value"===o&&"defaultValue"in t&&null==i||Pa&&"children"===o&&"noscript"===n||"class"===o||"className"===o)){var s=o.toLowerCase();"defaultValue"===o&&"value"in t&&null==t.value?o="value":"download"===o&&!0===i?i="":"translate"===s&&"no"===i?i=!1:"o"===s[0]&&"n"===s[1]?"ondoubleclick"===s?o="ondblclick":"onchange"!==s||"input"!==n&&"textarea"!==n||Na(t.type)?"onfocus"===s?o="onfocusin":"onblur"===s?o="onfocusout":Ta.test(o)&&(o=s):s=o="oninput":a&&Ea.test(o)?o=o.replace(Ia,"-$&").toLowerCase():null===i&&(i=void 0),"oninput"===s&&r[o=s]&&(o="oninputCapture"),r[o]=i}}"select"==n&&r.multiple&&Array.isArray(r.value)&&(r.value=sr(t.children).forEach((function(e){e.props.selected=-1!=r.value.indexOf(e.props.value)}))),"select"==n&&null!=r.defaultValue&&(r.value=sr(t.children).forEach((function(e){e.props.selected=r.multiple?-1!=r.defaultValue.indexOf(e.props.value):r.defaultValue==e.props.value}))),t.class&&!t.className?(r.class=t.class,Object.defineProperty(r,"className",Ra)):(t.className&&!t.class||t.class&&t.className)&&(r.class=r.className=t.className),e.props=r}(e),e.$$typeof=Ca,za&&za(e)};var $a=On.__r;On.__r=function(e){$a&&$a(e),La=e.__c};var Fa=On.diffed;function qa(e){return!!e&&e.$$typeof===Ca}function Ba(e){return qa(e)?xr.apply(null,arguments):e}On.diffed=function(e){Fa&&Fa(e);var t=e.props,n=e.__e;null!=n&&"textarea"===e.type&&"value"in t&&t.value!==n.value&&(n.value=null==t.value?"":t.value),La=null};var Ua,Va,Ya,Ha={useState:zr,useId:Zr,useReducer:$r,useEffect:Fr,useLayoutEffect:qr,useInsertionEffect:ca,useTransition:la,useDeferredValue:sa,useSyncExternalStore:aa,startTransition:ia,useRef:Br,useImperativeHandle:Ur,useMemo:Vr,useCallback:Yr,useContext:Hr,useDebugValue:Kr,version:"18.3.1",Children:ha,render:function(e,t,n){return null==t.__k&&(t.textContent=""),gr(e,t),"function"==typeof n&&n(),e?e.__c:null},hydrate:function(e,t,n){return vr(e,t),"function"==typeof n&&n(),e?e.__c:null},unmountComponentAtNode:function(e){return!!e.__k&&(gr(null,e),!0)},createPortal:function(e,t){var n=Gn(Sa,{__v:e,h:t});return n.containerInfo=t,n},createElement:Gn,createContext:br,createFactory:function(e){return Gn.bind(null,e)},cloneElement:Ba,createRef:Xn,Fragment:Qn,isValidElement:qa,isElement:qa,isFragment:function(e){return qa(e)&&e.type===Qn},isMemo:function(e){return!!e&&!!e.displayName&&("string"==typeof e.displayName||e.displayName instanceof String)&&e.displayName.startsWith("Memo(")},findDOMNode:function(e){return e&&(e.base||1===e.nodeType&&e)||null},Component:er,PureComponent:da,memo:function(e,t){function n(e){var n=this.props.ref,r=n==e.ref;return!r&&n&&(n.call?n(null):n.current=null),t?!t(this.props,e)||!r:ra(this.props,e)}function r(t){return this.shouldComponentUpdate=n,Gn(e,t)}return r.displayName="Memo("+(e.displayName||e.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r},forwardRef:ma,flushSync:function(e,t){return e(t)},unstable_batchedUpdates:function(e,t){return e(t)},StrictMode:Qn,Suspense:xa,SuspenseList:wa,lazy:function(e){var t,n,r;function a(a){if(t||(t=e()).then((function(e){n=e.default||e}),(function(e){r=e})),r)throw r;if(!n)throw t;return Gn(n,a)}return a.displayName="Lazy",a.__f=!0,a},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:{current:{readContext:function(e){return La.__n[e.__c].props.value},useCallback:Yr,useContext:Hr,useDebugValue:Kr,useDeferredValue:sa,useEffect:Fr,useId:Zr,useImperativeHandle:Ur,useInsertionEffect:ca,useLayoutEffect:qr,useMemo:Vr,useReducer:$r,useRef:Br,useState:zr,useSyncExternalStore:aa,useTransition:la}}}};(Va=Ua||(Ua={})).assertEqual=e=>e,Va.assertIs=function(e){},Va.assertNever=function(e){throw new Error},Va.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},Va.getValidEnumValues=e=>{const t=Va.objectKeys(e).filter((t=>"number"!=typeof e[e[t]])),n={};for(const r of t)n[r]=e[r];return Va.objectValues(n)},Va.objectValues=e=>Va.objectKeys(e).map((function(t){return e[t]})),Va.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},Va.find=(e,t)=>{for(const n of e)if(t(n))return n},Va.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,Va.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},Va.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(Ya||(Ya={})).mergeShapes=(e,t)=>({...e,...t});const Ka=Ua.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Za=e=>{switch(typeof e){case"undefined":return Ka.undefined;case"string":return Ka.string;case"number":return isNaN(e)?Ka.nan:Ka.number;case"boolean":return Ka.boolean;case"function":return Ka.function;case"bigint":return Ka.bigint;case"symbol":return Ka.symbol;case"object":return Array.isArray(e)?Ka.array:null===e?Ka.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?Ka.promise:"undefined"!=typeof Map&&e instanceof Map?Ka.map:"undefined"!=typeof Set&&e instanceof Set?Ka.set:"undefined"!=typeof Date&&e instanceof Date?Ka.date:Ka.object;default:return Ka.unknown}},Wa=Ua.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ga extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(const a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(r);else if("invalid_return_type"===a.code)r(a.returnTypeError);else if("invalid_arguments"===a.code)r(a.argumentsError);else if(0===a.path.length)n._errors.push(t(a));else{let e=n,r=0;for(;r<a.path.length;){const n=a.path[r];r===a.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(a))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}static assert(e){if(!(e instanceof Ga))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ua.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},n=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}Ga.create=e=>new Ga(e);const Ja=(e,t)=>{let n;switch(e.code){case Wa.invalid_type:n=e.received===Ka.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case Wa.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Ua.jsonStringifyReplacer)}`;break;case Wa.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ua.joinValues(e.keys,", ")}`;break;case Wa.invalid_union:n="Invalid input";break;case Wa.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ua.joinValues(e.options)}`;break;case Wa.invalid_enum_value:n=`Invalid enum value. Expected ${Ua.joinValues(e.options)}, received '${e.received}'`;break;case Wa.invalid_arguments:n="Invalid function arguments";break;case Wa.invalid_return_type:n="Invalid function return type";break;case Wa.invalid_date:n="Invalid date";break;case Wa.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Ua.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case Wa.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case Wa.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case Wa.custom:n="Invalid input";break;case Wa.invalid_intersection_types:n="Intersection results could not be merged";break;case Wa.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Wa.not_finite:n="Number must be finite";break;default:n=t.defaultError,Ua.assertNever(e)}return{message:n}};let Xa=Ja;function Qa(){return Xa}const eo=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,o=[...n,...a.path||[]],i={...a,path:o};if(void 0!==a.message)return{...a,path:o,message:a.message};let s="";const l=r.filter((e=>!!e)).slice().reverse();for(const c of l)s=c(i,{data:t,defaultError:s}).message;return{...a,path:o,message:s}};function to(e,t){const n=Qa(),r=eo({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Ja?void 0:Ja].filter((e=>!!e))});e.common.issues.push(r)}class no{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if("aborted"===r.status)return ro;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const r of t){const e=await r.key,t=await r.value;n.push({key:e,value:t})}return no.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:t,value:a}=r;if("aborted"===t.status)return ro;if("aborted"===a.status)return ro;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),"__proto__"===t.value||void 0===a.value&&!r.alwaysSet||(n[t.value]=a.value)}return{status:e.value,value:n}}}const ro=Object.freeze({status:"aborted"}),ao=e=>({status:"dirty",value:e}),oo=e=>({status:"valid",value:e}),io=e=>"aborted"===e.status,so=e=>"dirty"===e.status,lo=e=>"valid"===e.status,co=e=>"undefined"!=typeof Promise&&e instanceof Promise;function uo(e,t,n,r){if("function"==typeof t||!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function po(e,t,n,r,a){if("function"==typeof t||!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var mo,fo,ho,_o;"function"==typeof SuppressedError&&SuppressedError,(fo=mo||(mo={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},fo.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;class yo{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const go=(e,t)=>{if(lo(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Ga(e.common.issues);return this._error=t,this._error}}};function vo(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:a};return{errorMap:(t,a)=>{var o,i;const{message:s}=e;return"invalid_enum_value"===t.code?{message:null!=s?s:a.defaultError}:void 0===a.data?{message:null!==(o=null!=s?s:r)&&void 0!==o?o:a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:null!==(i=null!=s?s:n)&&void 0!==i?i:a.defaultError}},description:a}}class xo{get description(){return this._def.description}_getType(e){return Za(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Za(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new no,ctx:{common:e.parent.common,data:e.data,parsedType:Za(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(co(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const r={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Za(e)},a=this._parseSync({data:e,path:r.path,parent:r});return go(r,a)}"~validate"(e){var t,n;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Za(e)};if(!this["~standard"].async)try{const t=this._parseSync({data:e,path:[],parent:r});return lo(t)?{value:t.value}:{issues:r.common.issues}}catch(a){(null===(n=null===(t=null==a?void 0:a.message)||void 0===t?void 0:t.toLowerCase())||void 0===n?void 0:n.includes("encountered"))&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then((e=>lo(e)?{value:e.value}:{issues:r.common.issues}))}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Za(e)},r=this._parse({data:e,path:n.path,parent:n}),a=await(co(r)?r:Promise.resolve(r));return go(n,a)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,r)=>{const a=e(t),o=()=>r.addIssue({code:Wa.custom,...n(t)});return"undefined"!=typeof Promise&&a instanceof Promise?a.then((e=>!!e||(o(),!1))):!!a||(o(),!1)}))}refinement(e,t){return this._refinement(((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1)))}_refinement(e){return new xi({schema:this,typeName:Oi.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return bi.create(this,this._def)}nullable(){return wi.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ti.create(this)}promise(){return vi.create(this,this._def)}or(e){return ai.create([this,e],this._def)}and(e){return li.create(this,e,this._def)}transform(e){return new xi({...vo(this._def),schema:this,typeName:Oi.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new ji({...vo(this._def),innerType:this,defaultValue:t,typeName:Oi.ZodDefault})}brand(){return new Ei({typeName:Oi.ZodBranded,type:this,...vo(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new ki({...vo(this._def),innerType:this,catchValue:t,typeName:Oi.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Ti.create(this,e)}readonly(){return Ii.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const bo=/^c[^\s-]{8,}$/i,wo=/^[0-9a-z]+$/,jo=/^[0-9A-HJKMNP-TV-Z]{26}$/i,ko=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,So=/^[a-z0-9_-]{21}$/i,Co=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Eo=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,To=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let Io;const Po=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,No=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Ao=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Oo=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Mo=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Do=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Lo="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Ro=new RegExp(`^${Lo}$`);function zo(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function $o(e){let t=`${Lo}T${zo(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function Fo(e,t){if(!Co.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return"object"==typeof a&&null!==a&&(!(!a.typ||!a.alg)&&(!t||a.alg===t))}catch(n){return!1}}function qo(e,t){return!("v4"!==t&&t||!No.test(e))||!("v6"!==t&&t||!Oo.test(e))}class Bo extends xo{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==Ka.string){const t=this._getOrReturnCtx(e);return to(t,{code:Wa.invalid_type,expected:Ka.string,received:t.parsedType}),ro}const t=new no;let n;for(const i of this._def.checks)if("min"===i.kind)e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),to(n,{code:Wa.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("max"===i.kind)e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),to(n,{code:Wa.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("length"===i.kind){const r=e.data.length>i.value,a=e.data.length<i.value;(r||a)&&(n=this._getOrReturnCtx(e,n),r?to(n,{code:Wa.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&to(n,{code:Wa.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),t.dirty())}else if("email"===i.kind)To.test(e.data)||(n=this._getOrReturnCtx(e,n),to(n,{validation:"email",code:Wa.invalid_string,message:i.message}),t.dirty());else if("emoji"===i.kind)Io||(Io=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Io.test(e.data)||(n=this._getOrReturnCtx(e,n),to(n,{validation:"emoji",code:Wa.invalid_string,message:i.message}),t.dirty());else if("uuid"===i.kind)ko.test(e.data)||(n=this._getOrReturnCtx(e,n),to(n,{validation:"uuid",code:Wa.invalid_string,message:i.message}),t.dirty());else if("nanoid"===i.kind)So.test(e.data)||(n=this._getOrReturnCtx(e,n),to(n,{validation:"nanoid",code:Wa.invalid_string,message:i.message}),t.dirty());else if("cuid"===i.kind)bo.test(e.data)||(n=this._getOrReturnCtx(e,n),to(n,{validation:"cuid",code:Wa.invalid_string,message:i.message}),t.dirty());else if("cuid2"===i.kind)wo.test(e.data)||(n=this._getOrReturnCtx(e,n),to(n,{validation:"cuid2",code:Wa.invalid_string,message:i.message}),t.dirty());else if("ulid"===i.kind)jo.test(e.data)||(n=this._getOrReturnCtx(e,n),to(n,{validation:"ulid",code:Wa.invalid_string,message:i.message}),t.dirty());else if("url"===i.kind)try{new URL(e.data)}catch(o){n=this._getOrReturnCtx(e,n),to(n,{validation:"url",code:Wa.invalid_string,message:i.message}),t.dirty()}else if("regex"===i.kind){i.regex.lastIndex=0;i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),to(n,{validation:"regex",code:Wa.invalid_string,message:i.message}),t.dirty())}else if("trim"===i.kind)e.data=e.data.trim();else if("includes"===i.kind)e.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(e,n),to(n,{code:Wa.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),t.dirty());else if("toLowerCase"===i.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===i.kind)e.data=e.data.toUpperCase();else if("startsWith"===i.kind)e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),to(n,{code:Wa.invalid_string,validation:{startsWith:i.value},message:i.message}),t.dirty());else if("endsWith"===i.kind)e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),to(n,{code:Wa.invalid_string,validation:{endsWith:i.value},message:i.message}),t.dirty());else if("datetime"===i.kind){$o(i).test(e.data)||(n=this._getOrReturnCtx(e,n),to(n,{code:Wa.invalid_string,validation:"datetime",message:i.message}),t.dirty())}else if("date"===i.kind){Ro.test(e.data)||(n=this._getOrReturnCtx(e,n),to(n,{code:Wa.invalid_string,validation:"date",message:i.message}),t.dirty())}else if("time"===i.kind){new RegExp(`^${zo(i)}$`).test(e.data)||(n=this._getOrReturnCtx(e,n),to(n,{code:Wa.invalid_string,validation:"time",message:i.message}),t.dirty())}else"duration"===i.kind?Eo.test(e.data)||(n=this._getOrReturnCtx(e,n),to(n,{validation:"duration",code:Wa.invalid_string,message:i.message}),t.dirty()):"ip"===i.kind?(r=e.data,("v4"!==(a=i.version)&&a||!Po.test(r))&&("v6"!==a&&a||!Ao.test(r))&&(n=this._getOrReturnCtx(e,n),to(n,{validation:"ip",code:Wa.invalid_string,message:i.message}),t.dirty())):"jwt"===i.kind?Fo(e.data,i.alg)||(n=this._getOrReturnCtx(e,n),to(n,{validation:"jwt",code:Wa.invalid_string,message:i.message}),t.dirty()):"cidr"===i.kind?qo(e.data,i.version)||(n=this._getOrReturnCtx(e,n),to(n,{validation:"cidr",code:Wa.invalid_string,message:i.message}),t.dirty()):"base64"===i.kind?Mo.test(e.data)||(n=this._getOrReturnCtx(e,n),to(n,{validation:"base64",code:Wa.invalid_string,message:i.message}),t.dirty()):"base64url"===i.kind?Do.test(e.data)||(n=this._getOrReturnCtx(e,n),to(n,{validation:"base64url",code:Wa.invalid_string,message:i.message}),t.dirty()):Ua.assertNever(i);var r,a;return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement((t=>e.test(t)),{validation:t,code:Wa.invalid_string,...mo.errToObj(n)})}_addCheck(e){return new Bo({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...mo.errToObj(e)})}url(e){return this._addCheck({kind:"url",...mo.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...mo.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...mo.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...mo.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...mo.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...mo.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...mo.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...mo.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...mo.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...mo.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...mo.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...mo.errToObj(e)})}datetime(e){var t,n;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(n=null==e?void 0:e.local)&&void 0!==n&&n,...mo.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...mo.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...mo.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...mo.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...mo.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...mo.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...mo.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...mo.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...mo.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...mo.errToObj(t)})}nonempty(e){return this.min(1,mo.errToObj(e))}trim(){return new Bo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Bo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Bo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isCIDR(){return!!this._def.checks.find((e=>"cidr"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get isBase64url(){return!!this._def.checks.find((e=>"base64url"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Uo(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r;return parseInt(e.toFixed(a).replace(".",""))%parseInt(t.toFixed(a).replace(".",""))/Math.pow(10,a)}Bo.create=e=>{var t;return new Bo({checks:[],typeName:Oi.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...vo(e)})};class Vo extends xo{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==Ka.number){const t=this._getOrReturnCtx(e);return to(t,{code:Wa.invalid_type,expected:Ka.number,received:t.parsedType}),ro}let t;const n=new no;for(const r of this._def.checks)if("int"===r.kind)Ua.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),to(t,{code:Wa.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty());else if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),to(t,{code:Wa.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),to(t,{code:Wa.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else"multipleOf"===r.kind?0!==Uo(e.data,r.value)&&(t=this._getOrReturnCtx(e,t),to(t,{code:Wa.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),to(t,{code:Wa.not_finite,message:r.message}),n.dirty()):Ua.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,mo.toString(t))}gt(e,t){return this.setLimit("min",e,!1,mo.toString(t))}lte(e,t){return this.setLimit("max",e,!0,mo.toString(t))}lt(e,t){return this.setLimit("max",e,!1,mo.toString(t))}setLimit(e,t,n,r){return new Vo({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:mo.toString(r)}]})}_addCheck(e){return new Vo({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:mo.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:mo.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:mo.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:mo.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:mo.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:mo.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:mo.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:mo.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:mo.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&Ua.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Vo.create=e=>new Vo({checks:[],typeName:Oi.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...vo(e)});class Yo extends xo{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(r){return this._getInvalidInput(e)}if(this._getType(e)!==Ka.bigint)return this._getInvalidInput(e);let t;const n=new no;for(const a of this._def.checks)if("min"===a.kind){(a.inclusive?e.data<a.value:e.data<=a.value)&&(t=this._getOrReturnCtx(e,t),to(t,{code:Wa.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty())}else if("max"===a.kind){(a.inclusive?e.data>a.value:e.data>=a.value)&&(t=this._getOrReturnCtx(e,t),to(t,{code:Wa.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty())}else"multipleOf"===a.kind?e.data%a.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),to(t,{code:Wa.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):Ua.assertNever(a);return{status:n.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return to(t,{code:Wa.invalid_type,expected:Ka.bigint,received:t.parsedType}),ro}gte(e,t){return this.setLimit("min",e,!0,mo.toString(t))}gt(e,t){return this.setLimit("min",e,!1,mo.toString(t))}lte(e,t){return this.setLimit("max",e,!0,mo.toString(t))}lt(e,t){return this.setLimit("max",e,!1,mo.toString(t))}setLimit(e,t,n,r){return new Yo({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:mo.toString(r)}]})}_addCheck(e){return new Yo({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:mo.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:mo.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:mo.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:mo.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:mo.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Yo.create=e=>{var t;return new Yo({checks:[],typeName:Oi.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...vo(e)})};class Ho extends xo{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==Ka.boolean){const t=this._getOrReturnCtx(e);return to(t,{code:Wa.invalid_type,expected:Ka.boolean,received:t.parsedType}),ro}return oo(e.data)}}Ho.create=e=>new Ho({typeName:Oi.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...vo(e)});class Ko extends xo{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==Ka.date){const t=this._getOrReturnCtx(e);return to(t,{code:Wa.invalid_type,expected:Ka.date,received:t.parsedType}),ro}if(isNaN(e.data.getTime())){return to(this._getOrReturnCtx(e),{code:Wa.invalid_date}),ro}const t=new no;let n;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(n=this._getOrReturnCtx(e,n),to(n,{code:Wa.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(n=this._getOrReturnCtx(e,n),to(n,{code:Wa.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):Ua.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ko({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:mo.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:mo.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Ko.create=e=>new Ko({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:Oi.ZodDate,...vo(e)});class Zo extends xo{_parse(e){if(this._getType(e)!==Ka.symbol){const t=this._getOrReturnCtx(e);return to(t,{code:Wa.invalid_type,expected:Ka.symbol,received:t.parsedType}),ro}return oo(e.data)}}Zo.create=e=>new Zo({typeName:Oi.ZodSymbol,...vo(e)});class Wo extends xo{_parse(e){if(this._getType(e)!==Ka.undefined){const t=this._getOrReturnCtx(e);return to(t,{code:Wa.invalid_type,expected:Ka.undefined,received:t.parsedType}),ro}return oo(e.data)}}Wo.create=e=>new Wo({typeName:Oi.ZodUndefined,...vo(e)});class Go extends xo{_parse(e){if(this._getType(e)!==Ka.null){const t=this._getOrReturnCtx(e);return to(t,{code:Wa.invalid_type,expected:Ka.null,received:t.parsedType}),ro}return oo(e.data)}}Go.create=e=>new Go({typeName:Oi.ZodNull,...vo(e)});class Jo extends xo{constructor(){super(...arguments),this._any=!0}_parse(e){return oo(e.data)}}Jo.create=e=>new Jo({typeName:Oi.ZodAny,...vo(e)});class Xo extends xo{constructor(){super(...arguments),this._unknown=!0}_parse(e){return oo(e.data)}}Xo.create=e=>new Xo({typeName:Oi.ZodUnknown,...vo(e)});class Qo extends xo{_parse(e){const t=this._getOrReturnCtx(e);return to(t,{code:Wa.invalid_type,expected:Ka.never,received:t.parsedType}),ro}}Qo.create=e=>new Qo({typeName:Oi.ZodNever,...vo(e)});class ei extends xo{_parse(e){if(this._getType(e)!==Ka.undefined){const t=this._getOrReturnCtx(e);return to(t,{code:Wa.invalid_type,expected:Ka.void,received:t.parsedType}),ro}return oo(e.data)}}ei.create=e=>new ei({typeName:Oi.ZodVoid,...vo(e)});class ti extends xo{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==Ka.array)return to(t,{code:Wa.invalid_type,expected:Ka.array,received:t.parsedType}),ro;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,a=t.data.length<r.exactLength.value;(e||a)&&(to(t,{code:e?Wa.too_big:Wa.too_small,minimum:a?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(to(t,{code:Wa.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(to(t,{code:Wa.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,n)=>r.type._parseAsync(new yo(t,e,t.path,n))))).then((e=>no.mergeArray(n,e)));const a=[...t.data].map(((e,n)=>r.type._parseSync(new yo(t,e,t.path,n))));return no.mergeArray(n,a)}get element(){return this._def.type}min(e,t){return new ti({...this._def,minLength:{value:e,message:mo.toString(t)}})}max(e,t){return new ti({...this._def,maxLength:{value:e,message:mo.toString(t)}})}length(e,t){return new ti({...this._def,exactLength:{value:e,message:mo.toString(t)}})}nonempty(e){return this.min(1,e)}}function ni(e){if(e instanceof ri){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=bi.create(ni(r))}return new ri({...e._def,shape:()=>t})}return e instanceof ti?new ti({...e._def,type:ni(e.element)}):e instanceof bi?bi.create(ni(e.unwrap())):e instanceof wi?wi.create(ni(e.unwrap())):e instanceof ci?ci.create(e.items.map((e=>ni(e)))):e}ti.create=(e,t)=>new ti({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Oi.ZodArray,...vo(t)});class ri extends xo{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=Ua.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==Ka.object){const t=this._getOrReturnCtx(e);return to(t,{code:Wa.invalid_type,expected:Ka.object,received:t.parsedType}),ro}const{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof Qo&&"strip"===this._def.unknownKeys))for(const s in n.data)a.includes(s)||o.push(s);const i=[];for(const s of a){const e=r[s],t=n.data[s];i.push({key:{status:"valid",value:s},value:e._parse(new yo(n,t,n.path,s)),alwaysSet:s in n.data})}if(this._def.catchall instanceof Qo){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of o)i.push({key:{status:"valid",value:t},value:{status:"valid",value:n.data[t]}});else if("strict"===e)o.length>0&&(to(n,{code:Wa.unrecognized_keys,keys:o}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of o){const r=n.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new yo(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of i){const n=await t.key,r=await t.value;e.push({key:n,value:r,alwaysSet:t.alwaysSet})}return e})).then((e=>no.mergeObjectSync(t,e))):no.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return mo.errToObj,new ri({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var r,a,o,i;const s=null!==(o=null===(a=(r=this._def).errorMap)||void 0===a?void 0:a.call(r,t,n).message)&&void 0!==o?o:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(i=mo.errToObj(e).message)&&void 0!==i?i:s}:{message:s}}}:{}})}strip(){return new ri({...this._def,unknownKeys:"strip"})}passthrough(){return new ri({...this._def,unknownKeys:"passthrough"})}extend(e){return new ri({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ri({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Oi.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ri({...this._def,catchall:e})}pick(e){const t={};return Ua.objectKeys(e).forEach((n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])})),new ri({...this._def,shape:()=>t})}omit(e){const t={};return Ua.objectKeys(this.shape).forEach((n=>{e[n]||(t[n]=this.shape[n])})),new ri({...this._def,shape:()=>t})}deepPartial(){return ni(this)}partial(e){const t={};return Ua.objectKeys(this.shape).forEach((n=>{const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()})),new ri({...this._def,shape:()=>t})}required(e){const t={};return Ua.objectKeys(this.shape).forEach((n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof bi;)e=e._def.innerType;t[n]=e}})),new ri({...this._def,shape:()=>t})}keyof(){return _i(Ua.objectKeys(this.shape))}}ri.create=(e,t)=>new ri({shape:()=>e,unknownKeys:"strip",catchall:Qo.create(),typeName:Oi.ZodObject,...vo(t)}),ri.strictCreate=(e,t)=>new ri({shape:()=>e,unknownKeys:"strict",catchall:Qo.create(),typeName:Oi.ZodObject,...vo(t)}),ri.lazycreate=(e,t)=>new ri({shape:e,unknownKeys:"strip",catchall:Qo.create(),typeName:Oi.ZodObject,...vo(t)});class ai extends xo{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map((async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const n=e.map((e=>new Ga(e.ctx.common.issues)));return to(t,{code:Wa.invalid_union,unionErrors:n}),ro}));{let e;const r=[];for(const o of n){const n={...t,common:{...t.common,issues:[]},parent:null},a=o._parseSync({data:t.data,path:t.path,parent:n});if("valid"===a.status)return a;"dirty"!==a.status||e||(e={result:a,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const a=r.map((e=>new Ga(e)));return to(t,{code:Wa.invalid_union,unionErrors:a}),ro}}get options(){return this._def.options}}ai.create=(e,t)=>new ai({options:e,typeName:Oi.ZodUnion,...vo(t)});const oi=e=>e instanceof fi?oi(e.schema):e instanceof xi?oi(e.innerType()):e instanceof hi?[e.value]:e instanceof yi?e.options:e instanceof gi?Ua.objectValues(e.enum):e instanceof ji?oi(e._def.innerType):e instanceof Wo?[void 0]:e instanceof Go?[null]:e instanceof bi?[void 0,...oi(e.unwrap())]:e instanceof wi?[null,...oi(e.unwrap())]:e instanceof Ei||e instanceof Ii?oi(e.unwrap()):e instanceof ki?oi(e._def.innerType):[];class ii extends xo{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ka.object)return to(t,{code:Wa.invalid_type,expected:Ka.object,received:t.parsedType}),ro;const n=this.discriminator,r=t.data[n],a=this.optionsMap.get(r);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(to(t,{code:Wa.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ro)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const r=new Map;for(const a of t){const t=oi(a.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const n of t){if(r.has(n))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(n)}`);r.set(n,a)}}return new ii({typeName:Oi.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...vo(n)})}}function si(e,t){const n=Za(e),r=Za(t);if(e===t)return{valid:!0,data:e};if(n===Ka.object&&r===Ka.object){const n=Ua.objectKeys(t),r=Ua.objectKeys(e).filter((e=>-1!==n.indexOf(e))),a={...e,...t};for(const o of r){const n=si(e[o],t[o]);if(!n.valid)return{valid:!1};a[o]=n.data}return{valid:!0,data:a}}if(n===Ka.array&&r===Ka.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let r=0;r<e.length;r++){const a=si(e[r],t[r]);if(!a.valid)return{valid:!1};n.push(a.data)}return{valid:!0,data:n}}return n===Ka.date&&r===Ka.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}class li extends xo{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(io(e)||io(r))return ro;const a=si(e.value,r.value);return a.valid?((so(e)||so(r))&&t.dirty(),{status:t.value,value:a.data}):(to(n,{code:Wa.invalid_intersection_types}),ro)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([e,t])=>r(e,t))):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}li.create=(e,t,n)=>new li({left:e,right:t,typeName:Oi.ZodIntersection,...vo(n)});class ci extends xo{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ka.array)return to(n,{code:Wa.invalid_type,expected:Ka.array,received:n.parsedType}),ro;if(n.data.length<this._def.items.length)return to(n,{code:Wa.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ro;!this._def.rest&&n.data.length>this._def.items.length&&(to(n,{code:Wa.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map(((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new yo(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(r).then((e=>no.mergeArray(t,e))):no.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new ci({...this._def,rest:e})}}ci.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ci({items:e,typeName:Oi.ZodTuple,rest:null,...vo(t)})};class di extends xo{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ka.object)return to(n,{code:Wa.invalid_type,expected:Ka.object,received:n.parsedType}),ro;const r=[],a=this._def.keyType,o=this._def.valueType;for(const i in n.data)r.push({key:a._parse(new yo(n,i,n.path,i)),value:o._parse(new yo(n,n.data[i],n.path,i)),alwaysSet:i in n.data});return n.common.async?no.mergeObjectAsync(t,r):no.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return new di(t instanceof xo?{keyType:e,valueType:t,typeName:Oi.ZodRecord,...vo(n)}:{keyType:Bo.create(),valueType:e,typeName:Oi.ZodRecord,...vo(t)})}}class ui extends xo{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ka.map)return to(n,{code:Wa.invalid_type,expected:Ka.map,received:n.parsedType}),ro;const r=this._def.keyType,a=this._def.valueType,o=[...n.data.entries()].map((([e,t],o)=>({key:r._parse(new yo(n,e,n.path,[o,"key"])),value:a._parse(new yo(n,t,n.path,[o,"value"]))})));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const n of o){const r=await n.key,a=await n.value;if("aborted"===r.status||"aborted"===a.status)return ro;"dirty"!==r.status&&"dirty"!==a.status||t.dirty(),e.set(r.value,a.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of o){const r=n.key,a=n.value;if("aborted"===r.status||"aborted"===a.status)return ro;"dirty"!==r.status&&"dirty"!==a.status||t.dirty(),e.set(r.value,a.value)}return{status:t.value,value:e}}}}ui.create=(e,t,n)=>new ui({valueType:t,keyType:e,typeName:Oi.ZodMap,...vo(n)});class pi extends xo{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ka.set)return to(n,{code:Wa.invalid_type,expected:Ka.set,received:n.parsedType}),ro;const r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(to(n,{code:Wa.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(to(n,{code:Wa.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const a=this._def.valueType;function o(e){const n=new Set;for(const r of e){if("aborted"===r.status)return ro;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}const i=[...n.data.values()].map(((e,t)=>a._parse(new yo(n,e,n.path,t))));return n.common.async?Promise.all(i).then((e=>o(e))):o(i)}min(e,t){return new pi({...this._def,minSize:{value:e,message:mo.toString(t)}})}max(e,t){return new pi({...this._def,maxSize:{value:e,message:mo.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}pi.create=(e,t)=>new pi({valueType:e,minSize:null,maxSize:null,typeName:Oi.ZodSet,...vo(t)});class mi extends xo{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ka.function)return to(t,{code:Wa.invalid_type,expected:Ka.function,received:t.parsedType}),ro;function n(e,n){return eo({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Qa(),Ja].filter((e=>!!e)),issueData:{code:Wa.invalid_arguments,argumentsError:n}})}function r(e,n){return eo({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Qa(),Ja].filter((e=>!!e)),issueData:{code:Wa.invalid_return_type,returnTypeError:n}})}const a={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof vi){const e=this;return oo((async function(...t){const i=new Ga([]),s=await e._def.args.parseAsync(t,a).catch((e=>{throw i.addIssue(n(t,e)),i})),l=await Reflect.apply(o,this,s);return await e._def.returns._def.type.parseAsync(l,a).catch((e=>{throw i.addIssue(r(l,e)),i}))}))}{const e=this;return oo((function(...t){const i=e._def.args.safeParse(t,a);if(!i.success)throw new Ga([n(t,i.error)]);const s=Reflect.apply(o,this,i.data),l=e._def.returns.safeParse(s,a);if(!l.success)throw new Ga([r(s,l.error)]);return l.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new mi({...this._def,args:ci.create(e).rest(Xo.create())})}returns(e){return new mi({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new mi({args:e||ci.create([]).rest(Xo.create()),returns:t||Xo.create(),typeName:Oi.ZodFunction,...vo(n)})}}class fi extends xo{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}fi.create=(e,t)=>new fi({getter:e,typeName:Oi.ZodLazy,...vo(t)});class hi extends xo{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return to(t,{received:t.data,code:Wa.invalid_literal,expected:this._def.value}),ro}return{status:"valid",value:e.data}}get value(){return this._def.value}}function _i(e,t){return new yi({values:e,typeName:Oi.ZodEnum,...vo(t)})}hi.create=(e,t)=>new hi({value:e,typeName:Oi.ZodLiteral,...vo(t)});class yi extends xo{constructor(){super(...arguments),ho.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return to(t,{expected:Ua.joinValues(n),received:t.parsedType,code:Wa.invalid_type}),ro}if(uo(this,ho)||po(this,ho,new Set(this._def.values)),!uo(this,ho).has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return to(t,{received:t.data,code:Wa.invalid_enum_value,options:n}),ro}return oo(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return yi.create(e,{...this._def,...t})}exclude(e,t=this._def){return yi.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}ho=new WeakMap,yi.create=_i;class gi extends xo{constructor(){super(...arguments),_o.set(this,void 0)}_parse(e){const t=Ua.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Ka.string&&n.parsedType!==Ka.number){const e=Ua.objectValues(t);return to(n,{expected:Ua.joinValues(e),received:n.parsedType,code:Wa.invalid_type}),ro}if(uo(this,_o)||po(this,_o,new Set(Ua.getValidEnumValues(this._def.values))),!uo(this,_o).has(e.data)){const e=Ua.objectValues(t);return to(n,{received:n.data,code:Wa.invalid_enum_value,options:e}),ro}return oo(e.data)}get enum(){return this._def.values}}_o=new WeakMap,gi.create=(e,t)=>new gi({values:e,typeName:Oi.ZodNativeEnum,...vo(t)});class vi extends xo{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ka.promise&&!1===t.common.async)return to(t,{code:Wa.invalid_type,expected:Ka.promise,received:t.parsedType}),ro;const n=t.parsedType===Ka.promise?t.data:Promise.resolve(t.data);return oo(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}vi.create=(e,t)=>new vi({type:e,typeName:Oi.ZodPromise,...vo(t)});class xi extends xo{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Oi.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,a={addIssue:e=>{to(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===r.type){const e=r.transform(n.data,a);if(n.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return ro;const r=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===r.status?ro:"dirty"===r.status||"dirty"===t.value?ao(r.value):r}));{if("aborted"===t.value)return ro;const r=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===r.status?ro:"dirty"===r.status||"dirty"===t.value?ao(r.value):r}}if("refinement"===r.type){const e=e=>{const t=r.refinement(e,a);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?ro:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?ro:("dirty"===n.status&&t.dirty(),e(n.value).then((()=>({status:t.value,value:n.value}))))))}if("transform"===r.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!lo(e))return e;const o=r.transform(e.value,a);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>lo(e)?Promise.resolve(r.transform(e.value,a)).then((e=>({status:t.value,value:e}))):e))}Ua.assertNever(r)}}xi.create=(e,t,n)=>new xi({schema:e,typeName:Oi.ZodEffects,effect:t,...vo(n)}),xi.createWithPreprocess=(e,t,n)=>new xi({schema:t,effect:{type:"preprocess",transform:e},typeName:Oi.ZodEffects,...vo(n)});class bi extends xo{_parse(e){return this._getType(e)===Ka.undefined?oo(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}bi.create=(e,t)=>new bi({innerType:e,typeName:Oi.ZodOptional,...vo(t)});class wi extends xo{_parse(e){return this._getType(e)===Ka.null?oo(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}wi.create=(e,t)=>new wi({innerType:e,typeName:Oi.ZodNullable,...vo(t)});class ji extends xo{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===Ka.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ji.create=(e,t)=>new ji({innerType:e,typeName:Oi.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...vo(t)});class ki extends xo{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return co(r)?r.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new Ga(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new Ga(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}ki.create=(e,t)=>new ki({innerType:e,typeName:Oi.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...vo(t)});class Si extends xo{_parse(e){if(this._getType(e)!==Ka.nan){const t=this._getOrReturnCtx(e);return to(t,{code:Wa.invalid_type,expected:Ka.nan,received:t.parsedType}),ro}return{status:"valid",value:e.data}}}Si.create=e=>new Si({typeName:Oi.ZodNaN,...vo(e)});const Ci=Symbol("zod_brand");class Ei extends xo{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Ti extends xo{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?ro:"dirty"===e.status?(t.dirty(),ao(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?ro:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new Ti({in:e,out:t,typeName:Oi.ZodPipeline})}}class Ii extends xo{_parse(e){const t=this._def.innerType._parse(e),n=e=>(lo(e)&&(e.value=Object.freeze(e.value)),e);return co(t)?t.then((e=>n(e))):n(t)}unwrap(){return this._def.innerType}}function Pi(e,t){const n="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof n?{message:n}:n}function Ni(e,t={},n){return e?Jo.create().superRefine(((r,a)=>{var o,i;const s=e(r);if(s instanceof Promise)return s.then((e=>{var o,i;if(!e){const e=Pi(t,r),s=null===(i=null!==(o=e.fatal)&&void 0!==o?o:n)||void 0===i||i;a.addIssue({code:"custom",...e,fatal:s})}}));if(!s){const e=Pi(t,r),s=null===(i=null!==(o=e.fatal)&&void 0!==o?o:n)||void 0===i||i;a.addIssue({code:"custom",...e,fatal:s})}})):Jo.create()}Ii.create=(e,t)=>new Ii({innerType:e,typeName:Oi.ZodReadonly,...vo(t)});const Ai={object:ri.lazycreate};var Oi,Mi;(Mi=Oi||(Oi={})).ZodString="ZodString",Mi.ZodNumber="ZodNumber",Mi.ZodNaN="ZodNaN",Mi.ZodBigInt="ZodBigInt",Mi.ZodBoolean="ZodBoolean",Mi.ZodDate="ZodDate",Mi.ZodSymbol="ZodSymbol",Mi.ZodUndefined="ZodUndefined",Mi.ZodNull="ZodNull",Mi.ZodAny="ZodAny",Mi.ZodUnknown="ZodUnknown",Mi.ZodNever="ZodNever",Mi.ZodVoid="ZodVoid",Mi.ZodArray="ZodArray",Mi.ZodObject="ZodObject",Mi.ZodUnion="ZodUnion",Mi.ZodDiscriminatedUnion="ZodDiscriminatedUnion",Mi.ZodIntersection="ZodIntersection",Mi.ZodTuple="ZodTuple",Mi.ZodRecord="ZodRecord",Mi.ZodMap="ZodMap",Mi.ZodSet="ZodSet",Mi.ZodFunction="ZodFunction",Mi.ZodLazy="ZodLazy",Mi.ZodLiteral="ZodLiteral",Mi.ZodEnum="ZodEnum",Mi.ZodEffects="ZodEffects",Mi.ZodNativeEnum="ZodNativeEnum",Mi.ZodOptional="ZodOptional",Mi.ZodNullable="ZodNullable",Mi.ZodDefault="ZodDefault",Mi.ZodCatch="ZodCatch",Mi.ZodPromise="ZodPromise",Mi.ZodBranded="ZodBranded",Mi.ZodPipeline="ZodPipeline",Mi.ZodReadonly="ZodReadonly";const Di=Bo.create,Li=Vo.create,Ri=Si.create,zi=Yo.create,$i=Ho.create,Fi=Ko.create,qi=Zo.create,Bi=Wo.create,Ui=Go.create,Vi=Jo.create,Yi=Xo.create,Hi=Qo.create,Ki=ei.create,Zi=ti.create,Wi=ri.create,Gi=ri.strictCreate,Ji=ai.create,Xi=ii.create,Qi=li.create,es=ci.create,ts=di.create,ns=ui.create,rs=pi.create,as=mi.create,os=fi.create,is=hi.create,ss=yi.create,ls=gi.create,cs=vi.create,ds=xi.create,us=bi.create,ps=wi.create,ms=xi.createWithPreprocess,fs=Ti.create,hs={string:e=>Bo.create({...e,coerce:!0}),number:e=>Vo.create({...e,coerce:!0}),boolean:e=>Ho.create({...e,coerce:!0}),bigint:e=>Yo.create({...e,coerce:!0}),date:e=>Ko.create({...e,coerce:!0})},_s=ro;var ys=Object.freeze({__proto__:null,defaultErrorMap:Ja,setErrorMap:function(e){Xa=e},getErrorMap:Qa,makeIssue:eo,EMPTY_PATH:[],addIssueToContext:to,ParseStatus:no,INVALID:ro,DIRTY:ao,OK:oo,isAborted:io,isDirty:so,isValid:lo,isAsync:co,get util(){return Ua},get objectUtil(){return Ya},ZodParsedType:Ka,getParsedType:Za,ZodType:xo,datetimeRegex:$o,ZodString:Bo,ZodNumber:Vo,ZodBigInt:Yo,ZodBoolean:Ho,ZodDate:Ko,ZodSymbol:Zo,ZodUndefined:Wo,ZodNull:Go,ZodAny:Jo,ZodUnknown:Xo,ZodNever:Qo,ZodVoid:ei,ZodArray:ti,ZodObject:ri,ZodUnion:ai,ZodDiscriminatedUnion:ii,ZodIntersection:li,ZodTuple:ci,ZodRecord:di,ZodMap:ui,ZodSet:pi,ZodFunction:mi,ZodLazy:fi,ZodLiteral:hi,ZodEnum:yi,ZodNativeEnum:gi,ZodPromise:vi,ZodEffects:xi,ZodTransformer:xi,ZodOptional:bi,ZodNullable:wi,ZodDefault:ji,ZodCatch:ki,ZodNaN:Si,BRAND:Ci,ZodBranded:Ei,ZodPipeline:Ti,ZodReadonly:Ii,custom:Ni,Schema:xo,ZodSchema:xo,late:Ai,get ZodFirstPartyTypeKind(){return Oi},coerce:hs,any:Vi,array:Zi,bigint:zi,boolean:$i,date:Fi,discriminatedUnion:Xi,effect:ds,enum:ss,function:as,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>Ni((t=>t instanceof e),t),intersection:Qi,lazy:os,literal:is,map:ns,nan:Ri,nativeEnum:ls,never:Hi,null:Ui,nullable:ps,number:Li,object:Wi,oboolean:()=>$i().optional(),onumber:()=>Li().optional(),optional:us,ostring:()=>Di().optional(),pipeline:fs,preprocess:ms,promise:cs,record:ts,set:rs,strictObject:Gi,string:Di,symbol:qi,transformer:ds,tuple:es,undefined:Bi,union:Ji,unknown:Yi,void:Ki,NEVER:_s,ZodIssueCode:Wa,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:Ga});function gs(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=gs(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}ys.object({}),ys.object({sessionId:ys.string().optional(),appName:ys.string().describe('The name of the application, e.g. "VS Code" or "Cursor"'),displayName:ys.string().describe("Human-readable window identifier for UI display"),port:ys.number().describe("Port number this VS Code instance is running on")}),ys.object({}),ys.object({sessionId:ys.string().optional(),prompt:ys.string(),model:ys.string().optional().describe("The model to use for the agent prompt"),files:ys.array(ys.string()).optional().describe("Link project files to the agent prompt"),mode:ys.enum(["agent","ask","manual"]).optional().describe("The mode to use for the agent prompt"),images:ys.array(ys.string()).optional().describe("Upload files like images, videos, etc.")}),ys.object({sessionId:ys.string().optional(),result:ys.object({success:ys.boolean(),error:ys.string().optional(),output:ys.string().optional()})}),ys.object({sessionId:ys.string().optional(),updateText:ys.string()}),br({bridge:null,isConnecting:!1,error:null}),br({windows:[],isDiscovering:!1,discoveryError:null,selectedSession:void 0,discover:async()=>{},selectSession:()=>{},refreshSession:async()=>{},appName:void 0}),br({plugins:[],toolbarContext:{sendPrompt:()=>{}}});const vs=e=>{const t=js(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{const n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),xs(n,t)||ws(e)},getConflictingClassGroupIds:(e,t)=>{const a=n[e]||[];return t&&r[e]?[...a,...r[e]]:a}}},xs=(e,t)=>{var n;if(0===e.length)return t.classGroupId;const r=e[0],a=t.nextPart.get(r),o=a?xs(e.slice(1),a):void 0;if(o)return o;if(0===t.validators.length)return;const i=e.join("-");return null==(n=t.validators.find((({validator:e})=>e(i))))?void 0:n.classGroupId},bs=/^\[(.+)\]$/,ws=e=>{if(bs.test(e)){const t=bs.exec(e)[1],n=null==t?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},js=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const a in n)ks(n[a],r,a,t);return r},ks=(e,t,n,r)=>{e.forEach((e=>{if("string"!=typeof e){if("function"==typeof e)return Cs(e)?void ks(e(r),t,n,r):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach((([e,a])=>{ks(a,Ss(t,e),n,r)}))}else{(""===e?t:Ss(t,e)).classGroupId=n}}))},Ss=(e,t)=>{let n=e;return t.split("-").forEach((e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)})),n},Cs=e=>e.isThemeGetter,Es=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(a,o)=>{n.set(a,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(a(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):a(e,t)}}},Ts=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=e=>{const t=[];let n,r=0,a=0,o=0;for(let l=0;l<e.length;l++){let i=e[l];if(0===r&&0===a){if(":"===i){t.push(e.slice(o,l)),o=l+1;continue}if("/"===i){n=l;continue}}"["===i?r++:"]"===i?r--:"("===i?a++:")"===i&&a--}const i=0===t.length?e:e.substring(o),s=Is(i);return{modifiers:t,hasImportantModifier:s!==i,baseClassName:s,maybePostfixModifierPosition:n&&n>o?n-o:void 0}};if(t){const e=t+":",n=r;r=t=>t.startsWith(e)?n(t.substring(e.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:t,maybePostfixModifierPosition:void 0}}if(n){const e=r;r=t=>n({className:t,parseClassName:e})}return r},Is=e=>e.endsWith("!")?e.substring(0,e.length-1):e.startsWith("!")?e.substring(1):e,Ps=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map((e=>[e,!0])));return e=>{if(e.length<=1)return e;const n=[];let r=[];return e.forEach((e=>{"["===e[0]||t[e]?(n.push(...r.sort(),e),r=[]):r.push(e)})),n.push(...r.sort()),n}},Ns=/\s+/;function As(){let e,t,n=0,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Os(e))&&(r&&(r+=" "),r+=t);return r}const Os=e=>{if("string"==typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Os(e[r]))&&(n&&(n+=" "),n+=t);return n};function Ms(e,...t){let n,r,a,o=function(s){const l=t.reduce(((e,t)=>t(e)),e());return n=(e=>({cache:Es(e.cacheSize),parseClassName:Ts(e),sortModifiers:Ps(e),...vs(e)}))(l),r=n.cache.get,a=n.cache.set,o=i,i(s)};function i(e){const t=r(e);if(t)return t;const o=((e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:o}=t,i=[],s=e.trim().split(Ns);let l="";for(let c=s.length-1;c>=0;c-=1){const e=s[c],{isExternal:t,modifiers:d,hasImportantModifier:u,baseClassName:p,maybePostfixModifierPosition:m}=n(e);if(t){l=e+(l.length>0?" "+l:l);continue}let f=!!m,h=r(f?p.substring(0,m):p);if(!h){if(!f){l=e+(l.length>0?" "+l:l);continue}if(h=r(p),!h){l=e+(l.length>0?" "+l:l);continue}f=!1}const _=o(d).join(":"),y=u?_+"!":_,g=y+h;if(i.includes(g))continue;i.push(g);const v=a(h,f);for(let n=0;n<v.length;++n){const e=v[n];i.push(y+e)}l=e+(l.length>0?" "+l:l)}return l})(e,n);return a(e,o),o}return function(){return o(As.apply(null,arguments))}}const Ds=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},Ls=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Rs=/^\((?:(\w[\w-]*):)?(.+)\)$/i,zs=/^\d+\/\d+$/,$s=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Fs=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,qs=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Bs=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Us=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Vs=e=>zs.test(e),Ys=e=>!!e&&!Number.isNaN(Number(e)),Hs=e=>!!e&&Number.isInteger(Number(e)),Ks=e=>e.endsWith("%")&&Ys(e.slice(0,-1)),Zs=e=>$s.test(e),Ws=()=>!0,Gs=e=>Fs.test(e)&&!qs.test(e),Js=()=>!1,Xs=e=>Bs.test(e),Qs=e=>Us.test(e),el=e=>!nl(e)&&!ll(e),tl=e=>hl(e,vl,Js),nl=e=>Ls.test(e),rl=e=>hl(e,xl,Gs),al=e=>hl(e,bl,Ys),ol=e=>hl(e,yl,Js),il=e=>hl(e,gl,Qs),sl=e=>hl(e,jl,Xs),ll=e=>Rs.test(e),cl=e=>_l(e,xl),dl=e=>_l(e,wl),ul=e=>_l(e,yl),pl=e=>_l(e,vl),ml=e=>_l(e,gl),fl=e=>_l(e,jl,!0),hl=(e,t,n)=>{const r=Ls.exec(e);return!!r&&(r[1]?t(r[1]):n(r[2]))},_l=(e,t,n=!1)=>{const r=Rs.exec(e);return!!r&&(r[1]?t(r[1]):n)},yl=e=>"position"===e||"percentage"===e,gl=e=>"image"===e||"url"===e,vl=e=>"length"===e||"size"===e||"bg-size"===e,xl=e=>"length"===e,bl=e=>"number"===e,wl=e=>"family-name"===e,jl=e=>"shadow"===e,kl=()=>{const e=Ds("color"),t=Ds("font"),n=Ds("text"),r=Ds("font-weight"),a=Ds("tracking"),o=Ds("leading"),i=Ds("breakpoint"),s=Ds("container"),l=Ds("spacing"),c=Ds("radius"),d=Ds("shadow"),u=Ds("inset-shadow"),p=Ds("text-shadow"),m=Ds("drop-shadow"),f=Ds("blur"),h=Ds("perspective"),_=Ds("aspect"),y=Ds("ease"),g=Ds("animate"),v=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",ll,nl],x=()=>[ll,nl,l],b=()=>[Vs,"full","auto",...x()],w=()=>[Hs,"none","subgrid",ll,nl],j=()=>["auto",{span:["full",Hs,ll,nl]},Hs,ll,nl],k=()=>[Hs,"auto",ll,nl],S=()=>["auto","min","max","fr",ll,nl],C=()=>["auto",...x()],E=()=>[Vs,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...x()],T=()=>[e,ll,nl],I=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",ul,ol,{position:[ll,nl]}],P=()=>["auto","cover","contain",pl,tl,{size:[ll,nl]}],N=()=>[Ks,cl,rl],A=()=>["","none","full",c,ll,nl],O=()=>["",Ys,cl,rl],M=()=>[Ys,Ks,ul,ol],D=()=>["","none",f,ll,nl],L=()=>["none",Ys,ll,nl],R=()=>["none",Ys,ll,nl],z=()=>[Ys,ll,nl],$=()=>[Vs,"full",...x()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Zs],breakpoint:[Zs],color:[Ws],container:[Zs],"drop-shadow":[Zs],ease:["in","out","in-out"],font:[el],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Zs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Zs],shadow:[Zs],spacing:["px",Ys],text:[Zs],"text-shadow":[Zs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Vs,nl,ll,_]}],container:["container"],columns:[{columns:[Ys,nl,ll,s]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:v()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:b()}],"inset-x":[{"inset-x":b()}],"inset-y":[{"inset-y":b()}],start:[{start:b()}],end:[{end:b()}],top:[{top:b()}],right:[{right:b()}],bottom:[{bottom:b()}],left:[{left:b()}],visibility:["visible","invisible","collapse"],z:[{z:[Hs,"auto",ll,nl]}],basis:[{basis:[Vs,"full","auto",s,...x()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ys,Vs,"auto","initial","none",nl]}],grow:[{grow:["",Ys,ll,nl]}],shrink:[{shrink:["",Ys,ll,nl]}],order:[{order:[Hs,"first","last","none",ll,nl]}],"grid-cols":[{"grid-cols":w()}],"col-start-end":[{col:j()}],"col-start":[{"col-start":k()}],"col-end":[{"col-end":k()}],"grid-rows":[{"grid-rows":w()}],"row-start-end":[{row:j()}],"row-start":[{"row-start":k()}],"row-end":[{"row-end":k()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":S()}],"auto-rows":[{"auto-rows":S()}],gap:[{gap:x()}],"gap-x":[{"gap-x":x()}],"gap-y":[{"gap-y":x()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:x()}],px:[{px:x()}],py:[{py:x()}],ps:[{ps:x()}],pe:[{pe:x()}],pt:[{pt:x()}],pr:[{pr:x()}],pb:[{pb:x()}],pl:[{pl:x()}],m:[{m:C()}],mx:[{mx:C()}],my:[{my:C()}],ms:[{ms:C()}],me:[{me:C()}],mt:[{mt:C()}],mr:[{mr:C()}],mb:[{mb:C()}],ml:[{ml:C()}],"space-x":[{"space-x":x()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":x()}],"space-y-reverse":["space-y-reverse"],size:[{size:E()}],w:[{w:[s,"screen",...E()]}],"min-w":[{"min-w":[s,"screen","none",...E()]}],"max-w":[{"max-w":[s,"screen","none","prose",{screen:[i]},...E()]}],h:[{h:["screen",...E()]}],"min-h":[{"min-h":["screen","none",...E()]}],"max-h":[{"max-h":["screen",...E()]}],"font-size":[{text:["base",n,cl,rl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ll,al]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Ks,nl]}],"font-family":[{font:[dl,nl,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,ll,nl]}],"line-clamp":[{"line-clamp":[Ys,"none",ll,al]}],leading:[{leading:[o,...x()]}],"list-image":[{"list-image":["none",ll,nl]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ll,nl]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:T()}],"text-color":[{text:T()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[Ys,"from-font","auto",ll,rl]}],"text-decoration-color":[{decoration:T()}],"underline-offset":[{"underline-offset":[Ys,"auto",ll,nl]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:x()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ll,nl]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ll,nl]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:I()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:P()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Hs,ll,nl],radial:["",ll,nl],conic:[Hs,ll,nl]},ml,il]}],"bg-color":[{bg:T()}],"gradient-from-pos":[{from:N()}],"gradient-via-pos":[{via:N()}],"gradient-to-pos":[{to:N()}],"gradient-from":[{from:T()}],"gradient-via":[{via:T()}],"gradient-to":[{to:T()}],rounded:[{rounded:A()}],"rounded-s":[{"rounded-s":A()}],"rounded-e":[{"rounded-e":A()}],"rounded-t":[{"rounded-t":A()}],"rounded-r":[{"rounded-r":A()}],"rounded-b":[{"rounded-b":A()}],"rounded-l":[{"rounded-l":A()}],"rounded-ss":[{"rounded-ss":A()}],"rounded-se":[{"rounded-se":A()}],"rounded-ee":[{"rounded-ee":A()}],"rounded-es":[{"rounded-es":A()}],"rounded-tl":[{"rounded-tl":A()}],"rounded-tr":[{"rounded-tr":A()}],"rounded-br":[{"rounded-br":A()}],"rounded-bl":[{"rounded-bl":A()}],"border-w":[{border:O()}],"border-w-x":[{"border-x":O()}],"border-w-y":[{"border-y":O()}],"border-w-s":[{"border-s":O()}],"border-w-e":[{"border-e":O()}],"border-w-t":[{"border-t":O()}],"border-w-r":[{"border-r":O()}],"border-w-b":[{"border-b":O()}],"border-w-l":[{"border-l":O()}],"divide-x":[{"divide-x":O()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":O()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:T()}],"border-color-x":[{"border-x":T()}],"border-color-y":[{"border-y":T()}],"border-color-s":[{"border-s":T()}],"border-color-e":[{"border-e":T()}],"border-color-t":[{"border-t":T()}],"border-color-r":[{"border-r":T()}],"border-color-b":[{"border-b":T()}],"border-color-l":[{"border-l":T()}],"divide-color":[{divide:T()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[Ys,ll,nl]}],"outline-w":[{outline:["",Ys,cl,rl]}],"outline-color":[{outline:T()}],shadow:[{shadow:["","none",d,fl,sl]}],"shadow-color":[{shadow:T()}],"inset-shadow":[{"inset-shadow":["none",u,fl,sl]}],"inset-shadow-color":[{"inset-shadow":T()}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:T()}],"ring-offset-w":[{"ring-offset":[Ys,rl]}],"ring-offset-color":[{"ring-offset":T()}],"inset-ring-w":[{"inset-ring":O()}],"inset-ring-color":[{"inset-ring":T()}],"text-shadow":[{"text-shadow":["none",p,fl,sl]}],"text-shadow-color":[{"text-shadow":T()}],opacity:[{opacity:[Ys,ll,nl]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ys]}],"mask-image-linear-from-pos":[{"mask-linear-from":M()}],"mask-image-linear-to-pos":[{"mask-linear-to":M()}],"mask-image-linear-from-color":[{"mask-linear-from":T()}],"mask-image-linear-to-color":[{"mask-linear-to":T()}],"mask-image-t-from-pos":[{"mask-t-from":M()}],"mask-image-t-to-pos":[{"mask-t-to":M()}],"mask-image-t-from-color":[{"mask-t-from":T()}],"mask-image-t-to-color":[{"mask-t-to":T()}],"mask-image-r-from-pos":[{"mask-r-from":M()}],"mask-image-r-to-pos":[{"mask-r-to":M()}],"mask-image-r-from-color":[{"mask-r-from":T()}],"mask-image-r-to-color":[{"mask-r-to":T()}],"mask-image-b-from-pos":[{"mask-b-from":M()}],"mask-image-b-to-pos":[{"mask-b-to":M()}],"mask-image-b-from-color":[{"mask-b-from":T()}],"mask-image-b-to-color":[{"mask-b-to":T()}],"mask-image-l-from-pos":[{"mask-l-from":M()}],"mask-image-l-to-pos":[{"mask-l-to":M()}],"mask-image-l-from-color":[{"mask-l-from":T()}],"mask-image-l-to-color":[{"mask-l-to":T()}],"mask-image-x-from-pos":[{"mask-x-from":M()}],"mask-image-x-to-pos":[{"mask-x-to":M()}],"mask-image-x-from-color":[{"mask-x-from":T()}],"mask-image-x-to-color":[{"mask-x-to":T()}],"mask-image-y-from-pos":[{"mask-y-from":M()}],"mask-image-y-to-pos":[{"mask-y-to":M()}],"mask-image-y-from-color":[{"mask-y-from":T()}],"mask-image-y-to-color":[{"mask-y-to":T()}],"mask-image-radial":[{"mask-radial":[ll,nl]}],"mask-image-radial-from-pos":[{"mask-radial-from":M()}],"mask-image-radial-to-pos":[{"mask-radial-to":M()}],"mask-image-radial-from-color":[{"mask-radial-from":T()}],"mask-image-radial-to-color":[{"mask-radial-to":T()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[Ys]}],"mask-image-conic-from-pos":[{"mask-conic-from":M()}],"mask-image-conic-to-pos":[{"mask-conic-to":M()}],"mask-image-conic-from-color":[{"mask-conic-from":T()}],"mask-image-conic-to-color":[{"mask-conic-to":T()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:I()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:P()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ll,nl]}],filter:[{filter:["","none",ll,nl]}],blur:[{blur:D()}],brightness:[{brightness:[Ys,ll,nl]}],contrast:[{contrast:[Ys,ll,nl]}],"drop-shadow":[{"drop-shadow":["","none",m,fl,sl]}],"drop-shadow-color":[{"drop-shadow":T()}],grayscale:[{grayscale:["",Ys,ll,nl]}],"hue-rotate":[{"hue-rotate":[Ys,ll,nl]}],invert:[{invert:["",Ys,ll,nl]}],saturate:[{saturate:[Ys,ll,nl]}],sepia:[{sepia:["",Ys,ll,nl]}],"backdrop-filter":[{"backdrop-filter":["","none",ll,nl]}],"backdrop-blur":[{"backdrop-blur":D()}],"backdrop-brightness":[{"backdrop-brightness":[Ys,ll,nl]}],"backdrop-contrast":[{"backdrop-contrast":[Ys,ll,nl]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ys,ll,nl]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ys,ll,nl]}],"backdrop-invert":[{"backdrop-invert":["",Ys,ll,nl]}],"backdrop-opacity":[{"backdrop-opacity":[Ys,ll,nl]}],"backdrop-saturate":[{"backdrop-saturate":[Ys,ll,nl]}],"backdrop-sepia":[{"backdrop-sepia":["",Ys,ll,nl]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":x()}],"border-spacing-x":[{"border-spacing-x":x()}],"border-spacing-y":[{"border-spacing-y":x()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ll,nl]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ys,"initial",ll,nl]}],ease:[{ease:["linear","initial",y,ll,nl]}],delay:[{delay:[Ys,ll,nl]}],animate:[{animate:["none",g,ll,nl]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[h,ll,nl]}],"perspective-origin":[{"perspective-origin":v()}],rotate:[{rotate:L()}],"rotate-x":[{"rotate-x":L()}],"rotate-y":[{"rotate-y":L()}],"rotate-z":[{"rotate-z":L()}],scale:[{scale:R()}],"scale-x":[{"scale-x":R()}],"scale-y":[{"scale-y":R()}],"scale-z":[{"scale-z":R()}],"scale-3d":["scale-3d"],skew:[{skew:z()}],"skew-x":[{"skew-x":z()}],"skew-y":[{"skew-y":z()}],transform:[{transform:[ll,nl,"","none","gpu","cpu"]}],"transform-origin":[{origin:v()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:$()}],"translate-x":[{"translate-x":$()}],"translate-y":[{"translate-y":$()}],"translate-z":[{"translate-z":$()}],"translate-none":["translate-none"],accent:[{accent:T()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:T()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ll,nl]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":x()}],"scroll-mx":[{"scroll-mx":x()}],"scroll-my":[{"scroll-my":x()}],"scroll-ms":[{"scroll-ms":x()}],"scroll-me":[{"scroll-me":x()}],"scroll-mt":[{"scroll-mt":x()}],"scroll-mr":[{"scroll-mr":x()}],"scroll-mb":[{"scroll-mb":x()}],"scroll-ml":[{"scroll-ml":x()}],"scroll-p":[{"scroll-p":x()}],"scroll-px":[{"scroll-px":x()}],"scroll-py":[{"scroll-py":x()}],"scroll-ps":[{"scroll-ps":x()}],"scroll-pe":[{"scroll-pe":x()}],"scroll-pt":[{"scroll-pt":x()}],"scroll-pr":[{"scroll-pr":x()}],"scroll-pb":[{"scroll-pb":x()}],"scroll-pl":[{"scroll-pl":x()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ll,nl]}],fill:[{fill:["none",...T()]}],"stroke-w":[{stroke:[Ys,cl,rl,al]}],stroke:[{stroke:["none",...T()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Sl=(e,t,n)=>{void 0!==n&&(e[t]=n)},Cl=(e,t)=>{if(t)for(const n in t)Sl(e,n,t[n])},El=(e,t)=>{if(t)for(const n in t)Tl(e,t,n)},Tl=(e,t,n)=>{const r=t[n];void 0!==r&&(e[n]=e[n]?e[n].concat(r):r)},Il=((e,...t)=>"function"==typeof e?Ms(kl,e,...t):Ms((()=>((e,{cacheSize:t,prefix:n,experimentalParseClassName:r,extend:a={},override:o={}})=>(Sl(e,"cacheSize",t),Sl(e,"prefix",n),Sl(e,"experimentalParseClassName",r),Cl(e.theme,o.theme),Cl(e.classGroups,o.classGroups),Cl(e.conflictingClassGroups,o.conflictingClassGroups),Cl(e.conflictingClassGroupModifiers,o.conflictingClassGroupModifiers),Sl(e,"orderSensitiveModifiers",o.orderSensitiveModifiers),El(e.theme,a.theme),El(e.classGroups,a.classGroups),El(e.conflictingClassGroups,a.conflictingClassGroups),El(e.conflictingClassGroupModifiers,a.conflictingClassGroupModifiers),Tl(e,a,"orderSensitiveModifiers"),e))(kl(),e)),...t))({extend:{classGroups:{"bg-image":["bg-gradient","bg-gradient-light-1","bg-gradient-light-2","bg-gradient-light-3"]}}});function Pl(...e){return Il(function(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=gs(e))&&(r&&(r+=" "),r+=t);return r}(e))}const Nl=e=>{let t;const n=new Set,r=(e,r)=>{const a="function"==typeof e?e(t):e;if(!Object.is(a,t)){const e=t;t=(null!=r?r:"object"!=typeof a||null===a)?a:Object.assign({},t,a),n.forEach((n=>n(t,e)))}},a=()=>t,o={setState:r,getState:a,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e))},i=t=e(r,a,o);return o},Al=e=>e;const Ol=e=>{const t=(e=>e?Nl(e):Nl)(e),n=e=>function(e,t=Al){const n=Ha.useSyncExternalStore(e.subscribe,(()=>t(e.getState())),(()=>t(e.getInitialState())));return Ha.useDebugValue(n),n}(t,e);return Object.assign(n,t),n};class Ml{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(e,t){this.keyToValue.set(e,t),this.valueToKey.set(t,e)}getByKey(e){return this.keyToValue.get(e)}getByValue(e){return this.valueToKey.get(e)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}}class Dl{constructor(e){this.generateIdentifier=e,this.kv=new Ml}register(e,t){this.kv.getByValue(e)||(t||(t=this.generateIdentifier(e)),this.kv.set(t,e))}clear(){this.kv.clear()}getIdentifier(e){return this.kv.getByValue(e)}getValue(e){return this.kv.getByKey(e)}}class Ll extends Dl{constructor(){super((e=>e.name)),this.classToAllowedProps=new Map}register(e,t){"object"==typeof t?(t.allowProps&&this.classToAllowedProps.set(e,t.allowProps),super.register(e,t.identifier)):super.register(e,t)}getAllowedProps(e){return this.classToAllowedProps.get(e)}}function Rl(e,t){const n=function(e){if("values"in Object)return Object.values(e);const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}(e);if("find"in n)return n.find(t);const r=n;for(let a=0;a<r.length;a++){const e=r[a];if(t(e))return e}}function zl(e,t){Object.entries(e).forEach((([e,n])=>t(n,e)))}function $l(e,t){return-1!==e.indexOf(t)}function Fl(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(t(r))return r}}class ql{constructor(){this.transfomers={}}register(e){this.transfomers[e.name]=e}findApplicable(e){return Rl(this.transfomers,(t=>t.isApplicable(e)))}findByName(e){return this.transfomers[e]}}const Bl=e=>void 0===e,Ul=e=>"object"==typeof e&&null!==e&&(e!==Object.prototype&&(null===Object.getPrototypeOf(e)||Object.getPrototypeOf(e)===Object.prototype)),Vl=e=>Ul(e)&&0===Object.keys(e).length,Yl=e=>Array.isArray(e),Hl=e=>e instanceof Map,Kl=e=>e instanceof Set,Zl=e=>"Symbol"===(e=>Object.prototype.toString.call(e).slice(8,-1))(e),Wl=e=>"number"==typeof e&&isNaN(e),Gl=e=>(e=>"boolean"==typeof e)(e)||(e=>null===e)(e)||Bl(e)||(e=>"number"==typeof e&&!isNaN(e))(e)||(e=>"string"==typeof e)(e)||Zl(e),Jl=e=>e.replace(/\./g,"\\."),Xl=e=>e.map(String).map(Jl).join("."),Ql=e=>{const t=[];let n="";for(let a=0;a<e.length;a++){let r=e.charAt(a);if("\\"===r&&"."===e.charAt(a+1)){n+=".",a++;continue}"."===r?(t.push(n),n=""):n+=r}const r=n;return t.push(r),t};function ec(e,t,n,r){return{isApplicable:e,annotation:t,transform:n,untransform:r}}const tc=[ec(Bl,"undefined",(()=>null),(()=>{})),ec((e=>"bigint"==typeof e),"bigint",(e=>e.toString()),(e=>"undefined"!=typeof BigInt?BigInt(e):e)),ec((e=>e instanceof Date&&!isNaN(e.valueOf())),"Date",(e=>e.toISOString()),(e=>new Date(e))),ec((e=>e instanceof Error),"Error",((e,t)=>{const n={name:e.name,message:e.message};return t.allowedErrorProps.forEach((t=>{n[t]=e[t]})),n}),((e,t)=>{const n=new Error(e.message);return n.name=e.name,n.stack=e.stack,t.allowedErrorProps.forEach((t=>{n[t]=e[t]})),n})),ec((e=>e instanceof RegExp),"regexp",(e=>""+e),(e=>{const t=e.slice(1,e.lastIndexOf("/")),n=e.slice(e.lastIndexOf("/")+1);return new RegExp(t,n)})),ec(Kl,"set",(e=>[...e.values()]),(e=>new Set(e))),ec(Hl,"map",(e=>[...e.entries()]),(e=>new Map(e))),ec((e=>{return Wl(e)||((t=e)===1/0||t===-1/0);var t}),"number",(e=>Wl(e)?"NaN":e>0?"Infinity":"-Infinity"),Number),ec((e=>0===e&&1/e==-1/0),"number",(()=>"-0"),Number),ec((e=>e instanceof URL),"URL",(e=>e.toString()),(e=>new URL(e)))];function nc(e,t,n,r){return{isApplicable:e,annotation:t,transform:n,untransform:r}}const rc=nc(((e,t)=>{if(Zl(e)){return!!t.symbolRegistry.getIdentifier(e)}return!1}),((e,t)=>["symbol",t.symbolRegistry.getIdentifier(e)]),(e=>e.description),((e,t,n)=>{const r=n.symbolRegistry.getValue(t[1]);if(!r)throw new Error("Trying to deserialize unknown symbol");return r})),ac=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce(((e,t)=>(e[t.name]=t,e)),{}),oc=nc((e=>ArrayBuffer.isView(e)&&!(e instanceof DataView)),(e=>["typed-array",e.constructor.name]),(e=>[...e]),((e,t)=>{const n=ac[t[1]];if(!n)throw new Error("Trying to deserialize unknown typed array");return new n(e)}));function ic(e,t){if(null==e?void 0:e.constructor){return!!t.classRegistry.getIdentifier(e.constructor)}return!1}const sc=nc(ic,((e,t)=>["class",t.classRegistry.getIdentifier(e.constructor)]),((e,t)=>{const n=t.classRegistry.getAllowedProps(e.constructor);if(!n)return{...e};const r={};return n.forEach((t=>{r[t]=e[t]})),r}),((e,t,n)=>{const r=n.classRegistry.getValue(t[1]);if(!r)throw new Error(`Trying to deserialize unknown class '${t[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);return Object.assign(Object.create(r.prototype),e)})),lc=nc(((e,t)=>!!t.customTransformerRegistry.findApplicable(e)),((e,t)=>["custom",t.customTransformerRegistry.findApplicable(e).name]),((e,t)=>t.customTransformerRegistry.findApplicable(e).serialize(e)),((e,t,n)=>{const r=n.customTransformerRegistry.findByName(t[1]);if(!r)throw new Error("Trying to deserialize unknown custom value");return r.deserialize(e)})),cc=[sc,rc,lc,oc],dc=(e,t)=>{const n=Fl(cc,(n=>n.isApplicable(e,t)));if(n)return{value:n.transform(e,t),type:n.annotation(e,t)};const r=Fl(tc,(n=>n.isApplicable(e,t)));return r?{value:r.transform(e,t),type:r.annotation}:void 0},uc={};tc.forEach((e=>{uc[e.annotation]=e}));const pc=(e,t)=>{if(t>e.size)throw new Error("index out of bounds");const n=e.keys();for(;t>0;)n.next(),t--;return n.next().value};function mc(e){if($l(e,"__proto__"))throw new Error("__proto__ is not allowed as a property");if($l(e,"prototype"))throw new Error("prototype is not allowed as a property");if($l(e,"constructor"))throw new Error("constructor is not allowed as a property")}const fc=(e,t,n)=>{if(mc(t),0===t.length)return n(e);let r=e;for(let o=0;o<t.length-1;o++){const e=t[o];if(Yl(r)){r=r[+e]}else if(Ul(r))r=r[e];else if(Kl(r)){r=pc(r,+e)}else if(Hl(r)){if(o===t.length-2)break;const n=+e,a=0===+t[++o]?"key":"value",i=pc(r,n);switch(a){case"key":r=i;break;case"value":r=r.get(i)}}}const a=t[t.length-1];if(Yl(r)?r[+a]=n(r[+a]):Ul(r)&&(r[a]=n(r[a])),Kl(r)){const e=pc(r,+a),t=n(e);e!==t&&(r.delete(e),r.add(t))}if(Hl(r)){const e=+t[t.length-2],o=pc(r,e);switch(0===+a?"key":"value"){case"key":{const e=n(o);r.set(e,r.get(o)),e!==o&&r.delete(o);break}case"value":r.set(o,n(r.get(o)))}}return e};function hc(e,t,n=[]){if(!e)return;if(!Yl(e))return void zl(e,((e,r)=>hc(e,t,[...n,...Ql(r)])));const[r,a]=e;a&&zl(a,((e,r)=>{hc(e,t,[...n,...Ql(r)])})),t(r,n)}function _c(e,t,n){return hc(t,((t,r)=>{e=fc(e,r,(e=>((e,t,n)=>{if(!Yl(t)){const r=uc[t];if(!r)throw new Error("Unknown transformation: "+t);return r.untransform(e,n)}switch(t[0]){case"symbol":return rc.untransform(e,t,n);case"class":return sc.untransform(e,t,n);case"custom":return lc.untransform(e,t,n);case"typed-array":return oc.untransform(e,t,n);default:throw new Error("Unknown transformation: "+t)}})(e,t,n)))})),e}function yc(e,t){function n(t,n){const r=((e,t)=>{mc(t);for(let n=0;n<t.length;n++){const r=t[n];if(Kl(e))e=pc(e,+r);else if(Hl(e)){const a=+r,o=0===+t[++n]?"key":"value",i=pc(e,a);switch(o){case"key":e=i;break;case"value":e=e.get(i)}}else e=e[r]}return e})(e,Ql(n));t.map(Ql).forEach((t=>{e=fc(e,t,(()=>r))}))}if(Yl(t)){const[r,a]=t;r.forEach((t=>{e=fc(e,Ql(t),(()=>e))})),a&&zl(a,n)}else zl(t,n);return e}const gc=(e,t,n,r,a=[],o=[],i=new Map)=>{const s=Gl(e);if(!s){!function(e,t,n){const r=n.get(e);r?r.push(t):n.set(e,[t])}(e,a,t);const n=i.get(e);if(n)return r?{transformedValue:null}:n}if(!((e,t)=>Ul(e)||Yl(e)||Hl(e)||Kl(e)||ic(e,t))(e,n)){const t=dc(e,n),r=t?{transformedValue:t.value,annotations:[t.type]}:{transformedValue:e};return s||i.set(e,r),r}if($l(o,e))return{transformedValue:null};const l=dc(e,n),c=(null==l?void 0:l.value)??e,d=Yl(c)?[]:{},u={};zl(c,((s,l)=>{if("__proto__"===l||"constructor"===l||"prototype"===l)throw new Error(`Detected property ${l}. This is a prototype pollution risk, please remove it from your object.`);const c=gc(s,t,n,r,[...a,l],[...o,e],i);d[l]=c.transformedValue,Yl(c.annotations)?u[l]=c.annotations:Ul(c.annotations)&&zl(c.annotations,((e,t)=>{u[Jl(l)+"."+t]=e}))}));const p=Vl(u)?{transformedValue:d,annotations:l?[l.type]:void 0}:{transformedValue:d,annotations:l?[l.type,u]:u};return s||i.set(e,p),p};function vc(e){return Object.prototype.toString.call(e).slice(8,-1)}function xc(e){return"Array"===vc(e)}function bc(e,t={}){if(xc(e))return e.map((e=>bc(e,t)));if(!function(e){if("Object"!==vc(e))return!1;const t=Object.getPrototypeOf(e);return!!t&&t.constructor===Object&&t===Object.prototype}(e))return e;return[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)].reduce(((n,r)=>{if(xc(t.props)&&!t.props.includes(r))return n;return function(e,t,n,r,a){const o={}.propertyIsEnumerable.call(r,t)?"enumerable":"nonenumerable";"enumerable"===o&&(e[t]=n),a&&"nonenumerable"===o&&Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!0,configurable:!0})}(n,r,bc(e[r],t),e,t.nonenumerable),n}),{})}class wc{constructor({dedupe:e=!1}={}){this.classRegistry=new Ll,this.symbolRegistry=new Dl((e=>e.description??"")),this.customTransformerRegistry=new ql,this.allowedErrorProps=[],this.dedupe=e}serialize(e){const t=new Map,n=gc(e,t,this,this.dedupe),r={json:n.transformedValue};n.annotations&&(r.meta={...r.meta,values:n.annotations});const a=function(e,t){const n={};let r;return e.forEach((e=>{if(e.length<=1)return;t||(e=e.map((e=>e.map(String))).sort(((e,t)=>e.length-t.length)));const[a,...o]=e;0===a.length?r=o.map(Xl):n[Xl(a)]=o.map(Xl)})),r?Vl(n)?[r]:[r,n]:Vl(n)?void 0:n}(t,this.dedupe);return a&&(r.meta={...r.meta,referentialEqualities:a}),r}deserialize(e){const{json:t,meta:n}=e;let r=bc(t);return(null==n?void 0:n.values)&&(r=_c(r,n.values,this)),(null==n?void 0:n.referentialEqualities)&&(r=yc(r,n.referentialEqualities)),r}stringify(e){return JSON.stringify(this.serialize(e))}parse(e){return this.deserialize(JSON.parse(e))}registerClass(e,t){this.classRegistry.register(e,t)}registerSymbol(e,t){this.symbolRegistry.register(e,t)}registerCustom(e,t){this.customTransformerRegistry.register({name:t,...e})}allowErrorProps(...e){this.allowedErrorProps.push(...e)}}function jc(e,t){let n;try{n=e()}catch(bd){return}return{getItem:e=>{var t;const r=e=>null===e?null:JSON.parse(e,void 0),a=null!=(t=n.getItem(e))?t:null;return a instanceof Promise?a.then(r):r(a)},setItem:(e,t)=>n.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>n.removeItem(e)}}wc.defaultInstance=new wc,wc.serialize=wc.defaultInstance.serialize.bind(wc.defaultInstance),wc.deserialize=wc.defaultInstance.deserialize.bind(wc.defaultInstance),wc.stringify=wc.defaultInstance.stringify.bind(wc.defaultInstance),wc.parse=wc.defaultInstance.parse.bind(wc.defaultInstance),wc.registerClass=wc.defaultInstance.registerClass.bind(wc.defaultInstance),wc.registerSymbol=wc.defaultInstance.registerSymbol.bind(wc.defaultInstance),wc.registerCustom=wc.defaultInstance.registerCustom.bind(wc.defaultInstance),wc.allowErrorProps=wc.defaultInstance.allowErrorProps.bind(wc.defaultInstance),wc.serialize,wc.deserialize,wc.stringify,wc.parse,wc.registerClass,wc.registerCustom,wc.registerSymbol,wc.allowErrorProps;const kc=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then:e=>kc(e)(n),catch(e){return this}}}catch(bd){return{then(e){return this},catch:t=>kc(t)(bd)}}},Sc=(e,t)=>(n,r,a)=>{let o={storage:jc((()=>localStorage)),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},i=!1;const s=new Set,l=new Set;let c=o.storage;if(!c)return e(((...e)=>{n(...e)}),r,a);const d=()=>{const e=o.partialize({...r()});return c.setItem(o.name,{state:e,version:o.version})},u=a.setState;a.setState=(e,t)=>{u(e,t),d()};const p=e(((...e)=>{n(...e),d()}),r,a);let m;a.getInitialState=()=>p;const f=()=>{var e,t;if(!c)return;i=!1,s.forEach((e=>{var t;return e(null!=(t=r())?t:p)}));const a=(null==(t=o.onRehydrateStorage)?void 0:t.call(o,null!=(e=r())?e:p))||void 0;return kc(c.getItem.bind(c))(o.name).then((e=>{if(e){if("number"!=typeof e.version||e.version===o.version)return[!1,e.state];if(o.migrate){const t=o.migrate(e.state,e.version);return t instanceof Promise?t.then((e=>[!0,e])):[!0,t]}}return[!1,void 0]})).then((e=>{var t;const[a,i]=e;if(m=o.merge(i,null!=(t=r())?t:p),n(m,!0),a)return d()})).then((()=>{null==a||a(m,void 0),m=r(),i=!0,l.forEach((e=>e(m)))})).catch((e=>{null==a||a(void 0,e)}))};return a.persist={setOptions:e=>{o={...o,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>f(),hasHydrated:()=>i,onHydrate:e=>(s.add(e),()=>{s.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},o.skipHydration||f(),m||p};var Cc,Ec;(Cc=Sc((e=>{const t=e;return{appBlockRequestList:[],appUnblockRequestList:[],lastBlockRequestNumber:0,lastUnblockRequestNumber:0,isMainAppBlocked:!1,requestMainAppBlock:()=>{let e=0;return t((t=>(e=t.lastBlockRequestNumber+1,{appBlockRequestList:[...t.appBlockRequestList,e],lastBlockRequestNumber:e,isMainAppBlocked:0===t.appUnblockRequestList.length}))),e},requestMainAppUnblock:()=>{let e=0;return t((t=>(e=t.lastUnblockRequestNumber+1,{appUnblockRequestList:[...t.appUnblockRequestList,e],lastUnblockRequestNumber:e,isMainAppBlocked:!1}))),e},discardMainAppBlock:e=>{t((t=>{const n=t.appBlockRequestList.filter((t=>t!==e));return{appBlockRequestList:n,isMainAppBlocked:n.length>0&&0===t.appUnblockRequestList.length}}))},discardMainAppUnblock:e=>{t((t=>{const n=t.appUnblockRequestList.filter((t=>t!==e));return{appUnblockRequestList:n,isMainAppBlocked:t.appBlockRequestList.length>0&&0===n.length}}))},toolbarBoxRef:{current:null},setToolbarBoxRef:e=>t((()=>({toolbarBoxRef:e}))),unsetToolbarBoxRef:()=>t((()=>({toolbarBoxRef:{current:null}}))),minimized:!1,minimize:()=>t((()=>({minimized:!0}))),expand:()=>t((()=>({minimized:!1}))),promotedOnStartup:!1,promotionFinished:()=>t((()=>({promotedOnStartup:!0})))}}),{name:"stgws:companion",storage:(Ec=sessionStorage,{getItem:e=>{const t=Ec.getItem(e);return t?wc.parse(t):null},setItem:(e,t)=>{Ec.setItem(e,wc.stringify(t))},removeItem:e=>Ec.removeItem(e)}),partialize:e=>({minimized:e.minimized})}))&&Ol(Cc),br({chats:[],currentChatId:null,createChat:()=>"",deleteChat:()=>{},setCurrentChat:()=>{},setChatInput:()=>{},addChatDomContext:()=>{},removeChatDomContext:()=>{},addMessage:()=>{},chatAreaState:"hidden",setChatAreaState:()=>{},isPromptCreationActive:!1,startPromptCreation:()=>{},stopPromptCreation:()=>{},promptState:"idle",resetPromptState:()=>{}}),br(new URL(window.location.href));const Tc="undefined"!=typeof document?Ha.useLayoutEffect:()=>{};const Ic=e=>{var t;return null!==(t=null==e?void 0:e.ownerDocument)&&void 0!==t?t:document},Pc=e=>{if(e&&"window"in e&&e.window===e)return e;return Ic(e).defaultView||window};function Nc(e,t){return!(!t||!e)&&e.contains(t)}const Ac=(e=document)=>e.activeElement;function Oc(e){return e.target}function Mc(e){let t=null;return()=>(null==t&&(t=e()),t)}const Dc=Mc((function(){return e=/^Mac/i,"undefined"!=typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform);var e,t})),Lc=Mc((function(){return e=/Android/i,"undefined"!=typeof window&&null!=window.navigator&&((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.brands.some((t=>e.test(t.brand))))||e.test(window.navigator.userAgent));var e,t}));function Rc(){let e=Br(new Map),t=Yr(((t,n,r,a)=>{let o=(null==a?void 0:a.once)?(...t)=>{e.current.delete(r),r(...t)}:r;e.current.set(r,{type:n,eventTarget:t,fn:o,options:a}),t.addEventListener(n,o,a)}),[]),n=Yr(((t,n,r,a)=>{var o;let i=(null===(o=e.current.get(r))||void 0===o?void 0:o.fn)||r;t.removeEventListener(n,i,a),e.current.delete(r)}),[]),r=Yr((()=>{e.current.forEach(((e,t)=>{n(e.eventTarget,e.type,t,e.options)}))}),[n]);return Fr((()=>r),[r]),{addGlobalListener:t,removeGlobalListener:n,removeAllGlobalListeners:r}}function zc(e){let t=e;return t.nativeEvent=e,t.isDefaultPrevented=()=>t.defaultPrevented,t.isPropagationStopped=()=>t.cancelBubble,t.persist=()=>{},t}function $c(e){let t=Br({isFocused:!1,observer:null});Tc((()=>{const e=t.current;return()=>{e.observer&&(e.observer.disconnect(),e.observer=null)}}),[]);let n=function(e){const t=Br(null);return Tc((()=>{t.current=e}),[e]),Yr(((...e)=>{const n=t.current;return null==n?void 0:n(...e)}),[])}((t=>{null==e||e(t)}));return Yr((e=>{if(e.target instanceof HTMLButtonElement||e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLSelectElement){t.current.isFocused=!0;let r=e.target,a=e=>{if(t.current.isFocused=!1,r.disabled){let t=zc(e);n(t)}t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};r.addEventListener("focusout",a,{once:!0}),t.current.observer=new MutationObserver((()=>{if(t.current.isFocused&&r.disabled){var e;null===(e=t.current.observer)||void 0===e||e.disconnect();let n=r===document.activeElement?null:document.activeElement;r.dispatchEvent(new FocusEvent("blur",{relatedTarget:n})),r.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:n}))}})),t.current.observer.observe(r,{attributes:!0,attributeFilter:["disabled"]})}}),[n])}let Fc=null,qc=new Set,Bc=new Map,Uc=!1,Vc=!1;const Yc={Tab:!0,Escape:!0};function Hc(e,t){for(let n of qc)n(e,t)}function Kc(e){Uc=!0,function(e){return!(e.metaKey||!Dc()&&e.altKey||e.ctrlKey||"Control"===e.key||"Shift"===e.key||"Meta"===e.key)}(e)&&(Fc="keyboard",Hc("keyboard",e))}function Zc(e){Fc="pointer","mousedown"!==e.type&&"pointerdown"!==e.type||(Uc=!0,Hc("pointer",e))}function Wc(e){var t;(0===(t=e).mozInputSource&&t.isTrusted||(Lc()&&t.pointerType?"click"===t.type&&1===t.buttons:0===t.detail&&!t.pointerType))&&(Uc=!0,Fc="virtual")}function Gc(e){e.target!==window&&e.target!==document&&e.isTrusted&&(Uc||Vc||(Fc="virtual",Hc("virtual",e)),Uc=!1,Vc=!1)}function Jc(){Uc=!1,Vc=!0}function Xc(e){if("undefined"==typeof window||Bc.get(Pc(e)))return;const t=Pc(e),n=Ic(e);let r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){Uc=!0,r.apply(this,arguments)},n.addEventListener("keydown",Kc,!0),n.addEventListener("keyup",Kc,!0),n.addEventListener("click",Wc,!0),t.addEventListener("focus",Gc,!0),t.addEventListener("blur",Jc,!1),"undefined"!=typeof PointerEvent&&(n.addEventListener("pointerdown",Zc,!0),n.addEventListener("pointermove",Zc,!0),n.addEventListener("pointerup",Zc,!0)),t.addEventListener("beforeunload",(()=>{Qc(e)}),{once:!0}),Bc.set(t,{focus:r})}const Qc=(e,t)=>{const n=Pc(e),r=Ic(e);t&&r.removeEventListener("DOMContentLoaded",t),Bc.has(n)&&(n.HTMLElement.prototype.focus=Bc.get(n).focus,r.removeEventListener("keydown",Kc,!0),r.removeEventListener("keyup",Kc,!0),r.removeEventListener("click",Wc,!0),n.removeEventListener("focus",Gc,!0),n.removeEventListener("blur",Jc,!1),"undefined"!=typeof PointerEvent&&(r.removeEventListener("pointerdown",Zc,!0),r.removeEventListener("pointermove",Zc,!0),r.removeEventListener("pointerup",Zc,!0)),Bc.delete(n))};function ed(){return"pointer"!==Fc}"undefined"!=typeof document&&function(e){const t=Ic(e);let n;"loading"!==t.readyState?Xc(e):(n=()=>{Xc(e)},t.addEventListener("DOMContentLoaded",n))}();const td=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function nd(e,t,n){Xc(),Fr((()=>{let t=(t,r)=>{(function(e,t,n){let r=Ic(null==n?void 0:n.target);const a="undefined"!=typeof window?Pc(null==n?void 0:n.target).HTMLInputElement:HTMLInputElement,o="undefined"!=typeof window?Pc(null==n?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,i="undefined"!=typeof window?Pc(null==n?void 0:n.target).HTMLElement:HTMLElement,s="undefined"!=typeof window?Pc(null==n?void 0:n.target).KeyboardEvent:KeyboardEvent;return!((e=e||r.activeElement instanceof a&&!td.has(r.activeElement.type)||r.activeElement instanceof o||r.activeElement instanceof i&&r.activeElement.isContentEditable)&&"keyboard"===t&&n instanceof s&&!Yc[n.key])})(!!(null==n?void 0:n.isTextInput),t,r)&&e(ed())};return qc.add(t),()=>{qc.delete(t)}}),t)}function rd(e){let{isDisabled:t,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:a}=e,o=Br({isFocusWithin:!1}),{addGlobalListener:i,removeAllGlobalListeners:s}=Rc(),l=Yr((e=>{e.currentTarget.contains(e.target)&&o.current.isFocusWithin&&!e.currentTarget.contains(e.relatedTarget)&&(o.current.isFocusWithin=!1,s(),n&&n(e),a&&a(!1))}),[n,a,o,s]),c=$c(l),d=Yr((e=>{if(!e.currentTarget.contains(e.target))return;const t=Ic(e.target),n=Ac(t);if(!o.current.isFocusWithin&&n===Oc(e.nativeEvent)){r&&r(e),a&&a(!0),o.current.isFocusWithin=!0,c(e);let n=e.currentTarget;i(t,"focus",(e=>{if(o.current.isFocusWithin&&!Nc(n,e.target)){let r=new t.defaultView.FocusEvent("blur",{relatedTarget:e.target});!function(e,t){Object.defineProperty(e,"target",{value:t}),Object.defineProperty(e,"currentTarget",{value:t})}(r,n);let a=zc(r);l(a)}}),{capture:!0})}}),[r,a,c,i,l]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:d,onBlur:l}}}let ad=!1,od=0;function id(e){"touch"===e.pointerType&&(ad=!0,setTimeout((()=>{ad=!1}),50))}function sd(){if("undefined"!=typeof document)return"undefined"!=typeof PointerEvent&&document.addEventListener("pointerup",id),od++,()=>{od--,od>0||"undefined"!=typeof PointerEvent&&document.removeEventListener("pointerup",id)}}function ld(e){let{onHoverStart:t,onHoverChange:n,onHoverEnd:r,isDisabled:a}=e,[o,i]=zr(!1),s=Br({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;Fr(sd,[]);let{addGlobalListener:l,removeAllGlobalListeners:c}=Rc(),{hoverProps:d,triggerHoverEnd:u}=Vr((()=>{let e=(e,t)=>{let a=s.target;s.pointerType="",s.target=null,"touch"!==t&&s.isHovered&&a&&(s.isHovered=!1,c(),r&&r({type:"hoverend",target:a,pointerType:t}),n&&n(!1),i(!1))},o={};return"undefined"!=typeof PointerEvent&&(o.onPointerEnter=r=>{ad&&"mouse"===r.pointerType||((r,o)=>{if(s.pointerType=o,a||"touch"===o||s.isHovered||!r.currentTarget.contains(r.target))return;s.isHovered=!0;let c=r.currentTarget;s.target=c,l(Ic(r.target),"pointerover",(t=>{s.isHovered&&s.target&&!Nc(s.target,t.target)&&e(t,t.pointerType)}),{capture:!0}),t&&t({type:"hoverstart",target:c,pointerType:o}),n&&n(!0),i(!0)})(r,r.pointerType)},o.onPointerLeave=t=>{!a&&t.currentTarget.contains(t.target)&&e(t,t.pointerType)}),{hoverProps:o,triggerHoverEnd:e}}),[t,n,r,a,s,l,c]);return Fr((()=>{a&&u({currentTarget:s.target},s.pointerType)}),[a]),{hoverProps:d,isHovered:o}}function cd(e={}){let{autoFocus:t=!1,isTextInput:n,within:r}=e,a=Br({isFocused:!1,isFocusVisible:t||ed()}),[o,i]=zr(!1),[s,l]=zr((()=>a.current.isFocused&&a.current.isFocusVisible)),c=Yr((()=>l(a.current.isFocused&&a.current.isFocusVisible)),[]),d=Yr((e=>{a.current.isFocused=e,i(e),c()}),[c]);nd((e=>{a.current.isFocusVisible=e,c()}),[],{isTextInput:n});let{focusProps:u}=function(e){let{isDisabled:t,onFocus:n,onBlur:r,onFocusChange:a}=e;const o=Yr((e=>{if(e.target===e.currentTarget)return r&&r(e),a&&a(!1),!0}),[r,a]),i=$c(o),s=Yr((e=>{const t=Ic(e.target),r=t?Ac(t):Ac();e.target===e.currentTarget&&r===Oc(e.nativeEvent)&&(n&&n(e),a&&a(!0),i(e))}),[a,n,i]);return{focusProps:{onFocus:!t&&(n||a||r)?s:void 0,onBlur:t||!r&&!a?void 0:o}}}({isDisabled:r,onFocusChange:d}),{focusWithinProps:p}=rd({isDisabled:!r,onFocusWithinChange:d});return{isFocused:o,isFocusVisible:s,focusProps:r?p:u}}var dd=Object.defineProperty,ud=(e,t,n)=>(((e,t,n)=>{t in e?dd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);let pd=new class{constructor(){ud(this,"current",this.detect()),ud(this,"handoffState","pending"),ud(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}};function md(){let e=[],t={addEventListener:(e,n,r,a)=>(e.addEventListener(n,r,a),t.add((()=>e.removeEventListener(n,r,a)))),requestAnimationFrame(...e){let n=requestAnimationFrame(...e);return t.add((()=>cancelAnimationFrame(n)))},nextFrame:(...e)=>t.requestAnimationFrame((()=>t.requestAnimationFrame(...e))),setTimeout(...e){let n=setTimeout(...e);return t.add((()=>clearTimeout(n)))},microTask(...e){let n={current:!0};return function(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch((e=>setTimeout((()=>{throw e}))))}((()=>{n.current&&e[0]()})),t.add((()=>{n.current=!1}))},style(e,t,n){let r=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:n}),this.add((()=>{Object.assign(e.style,{[t]:r})}))},group(e){let t=md();return e(t),this.add((()=>t.dispose()))},add:t=>(e.includes(t)||e.push(t),()=>{let n=e.indexOf(t);if(n>=0)for(let t of e.splice(n,1))t()}),dispose(){for(let t of e.splice(0))t()}};return t}let fd=(e,t)=>{pd.isServer?Fr(e,t):qr(e,t)};let hd=function(e){let t=function(e){let t=Br(e);return fd((()=>{t.current=e}),[e]),t}(e);return Ha.useCallback(((...e)=>t.current(...e)),[t])};function _d({disabled:e=!1}={}){let t=Br(null),[n,r]=zr(!1),a=function(){let[e]=zr(md);return Fr((()=>()=>e.dispose()),[e]),e}(),o=hd((()=>{t.current=null,r(!1),a.dispose()})),i=hd((e=>{if(a.dispose(),null===t.current){t.current=e.currentTarget,r(!0);{let n=function(e){var t,n;return pd.isServer?null:e?"ownerDocument"in e?e.ownerDocument:"current"in e?null!=(n=null==(t=e.current)?void 0:t.ownerDocument)?n:document:null:document}(e.currentTarget);a.addEventListener(n,"pointerup",o,!1),a.addEventListener(n,"pointermove",(e=>{if(t.current){let n=function(e){let t=e.width/2,n=e.height/2;return{top:e.clientY-n,right:e.clientX+t,bottom:e.clientY+n,left:e.clientX-t}}(e);r(function(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}(n,t.current.getBoundingClientRect()))}}),!1),a.addEventListener(n,"pointercancel",o,!1)}}}));return{pressed:n,pressProps:e?{}:{onPointerDown:i,onPointerUp:o,onClick:o}}}let yd=br(void 0);function gd(){return Hr(yd)}function vd(...e){return Array.from(new Set(e.flatMap((e=>"string"==typeof e?e.split(" "):[])))).filter(Boolean).join(" ")}function xd(e,t,...n){if(e in t){let r=t[e];return"function"==typeof r?r(...n):r}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map((e=>`"${e}"`)).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,xd),r}var bd,wd,jd=((wd=jd||{})[wd.None=0]="None",wd[wd.RenderStrategy=1]="RenderStrategy",wd[wd.Static=2]="Static",wd),kd=((bd=kd||{})[bd.Unmount=0]="Unmount",bd[bd.Hidden=1]="Hidden",bd);function Sd(){let e=function(){let e=Br([]),t=Yr((t=>{for(let n of e.current)null!=n&&("function"==typeof n?n(t):n.current=t)}),[]);return(...n)=>{if(!n.every((e=>null==e)))return e.current=n,t}}();return Yr((t=>function({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:a,visible:o=!0,name:i,mergeRefs:s}){s=null!=s?s:Ed;let l=Td(t,e);if(o)return Cd(l,n,r,i,s);let c=null!=a?a:0;if(2&c){let{static:e=!1,...t}=l;if(e)return Cd(t,n,r,i,s)}if(1&c){let{unmount:e=!0,...t}=l;return xd(e?0:1,{0:()=>null,1:()=>Cd({...t,hidden:!0,style:{display:"none"}},n,r,i,s)})}return Cd(l,n,r,i,s)}({mergeRefs:e,...t})),[e])}function Cd(e,t={},n,r,a){let{as:o=n,children:i,refName:s="ref",...l}=Ad(e,["unmount","static"]),c=void 0!==e.ref?{[s]:e.ref}:{},d="function"==typeof i?i(t):i;"className"in l&&l.className&&"function"==typeof l.className&&(l.className=l.className(t)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let u={};if(t){let e=!1,n=[];for(let[r,a]of Object.entries(t))"boolean"==typeof a&&(e=!0),!0===a&&n.push(r.replace(/([A-Z])/g,(e=>`-${e.toLowerCase()}`)));if(e){u["data-headlessui-state"]=n.join(" ");for(let e of n)u[`data-${e}`]=""}}if(o===Qn&&(Object.keys(Nd(l)).length>0||Object.keys(Nd(u)).length>0)){if(qa(d)&&!(Array.isArray(d)&&d.length>1)){let e=d.props,t=null==e?void 0:e.className,n="function"==typeof t?(...e)=>vd(t(...e),l.className):vd(t,l.className),r=n?{className:n}:{},o=Td(d.props,Nd(Ad(l,["ref"])));for(let a in u)a in o&&delete u[a];return Ba(d,Object.assign({},o,u,c,{ref:a(Od(d),c.ref)},r))}if(Object.keys(Nd(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Nd(l)).concat(Object.keys(Nd(u))).map((e=>`  - ${e}`)).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map((e=>`  - ${e}`)).join("\n")].join("\n"))}return Gn(o,Object.assign({},Ad(l,["ref"]),o!==Qn&&c,o!==Qn&&u),d)}function Ed(...e){return e.every((e=>null==e))?void 0:t=>{for(let n of e)null!=n&&("function"==typeof n?n(t):n.current=t)}}function Td(...e){if(0===e.length)return{};if(1===e.length)return e[0];let t={},n={};for(let r of e)for(let e in r)e.startsWith("on")&&"function"==typeof r[e]?(null!=n[e]||(n[e]=[]),n[e].push(r[e])):t[e]=r[e];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[e=>{var t;return null==(t=null==e?void 0:e.preventDefault)?void 0:t.call(e)}]);for(let r in n)Object.assign(t,{[r](e,...t){let a=n[r];for(let n of a){if((e instanceof Event||(null==e?void 0:e.nativeEvent)instanceof Event)&&e.defaultPrevented)return;n(e,...t)}}});return t}function Id(...e){if(0===e.length)return{};if(1===e.length)return e[0];let t={},n={};for(let r of e)for(let e in r)e.startsWith("on")&&"function"==typeof r[e]?(null!=n[e]||(n[e]=[]),n[e].push(r[e])):t[e]=r[e];for(let r in n)Object.assign(t,{[r](...e){let t=n[r];for(let n of t)null==n||n(...e)}});return t}function Pd(e){var t;return Object.assign(ma(e),{displayName:null!=(t=e.displayName)?t:e.name})}function Nd(e){let t=Object.assign({},e);for(let n in t)void 0===t[n]&&delete t[n];return t}function Ad(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function Od(e){return Ha.version.split(".")[0]>="19"?e.props.ref:e.ref}let Md=Pd((function(e,t){var n;let r=gd(),{disabled:a=r||!1,autoFocus:o=!1,...i}=e,{isFocusVisible:s,focusProps:l}=cd({autoFocus:o}),{isHovered:c,hoverProps:d}=ld({isDisabled:a}),{pressed:u,pressProps:p}=_d({disabled:a}),m=Id({ref:t,type:null!=(n=i.type)?n:"button",disabled:a||void 0,autoFocus:o},l,d,p),f=Vr((()=>({disabled:a,hover:c,focus:s,active:u,autofocus:o})),[a,c,s,u,o]);return Sd()({ourProps:m,theirProps:i,slot:f,defaultTag:"button",name:"Button"})})),Dd=br(void 0);function Ld(){return Hr(Dd)}let Rd=Symbol();function zd(...e){let t=Br(e);Fr((()=>{t.current=e}),[e]);let n=hd((e=>{for(let n of t.current)null!=n&&("function"==typeof n?n(e):n.current=e)}));return e.every((e=>null==e||(null==e?void 0:e[Rd])))?void 0:n}let $d=br(null);function Fd(){let e=Hr($d);if(null===e){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,Fd),e}return e}$d.displayName="DescriptionContext";let qd=Pd((function(e,t){let n=Zr(),r=gd(),{id:a=`headlessui-description-${n}`,...o}=e,i=Fd(),s=zd(t);fd((()=>i.register(a)),[a,i.register]);let l=r||!1,c=Vr((()=>({...i.slot,disabled:l})),[i.slot,l]),d={ref:s,...i.props,id:a};return Sd()({ourProps:d,theirProps:o,slot:c,defaultTag:"p",name:i.name||"Description"})}));Object.assign(qd,{});let Bd=br(null);function Ud(){let e=Hr(Bd);if(null===e){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,Ud),e}return e}Bd.displayName="LabelContext";let Vd=Pd((function(e,t){var n;let r=Zr(),a=Ud(),o=Ld(),i=gd(),{id:s=`headlessui-label-${r}`,htmlFor:l=(null!=o?o:null==(n=a.props)?void 0:n.htmlFor),passive:c=!1,...d}=e,u=zd(t);fd((()=>a.register(s)),[s,a.register]);let p=hd((e=>{let t=e.currentTarget;if(t instanceof HTMLLabelElement&&e.preventDefault(),a.props&&"onClick"in a.props&&"function"==typeof a.props.onClick&&a.props.onClick(e),t instanceof HTMLLabelElement){let e=document.getElementById(t.htmlFor);if(e){let t=e.getAttribute("disabled");if("true"===t||""===t)return;let n=e.getAttribute("aria-disabled");if("true"===n||""===n)return;(e instanceof HTMLInputElement&&("radio"===e.type||"checkbox"===e.type)||"radio"===e.role||"checkbox"===e.role||"switch"===e.role)&&e.click(),e.focus({preventScroll:!0})}}})),m=i||!1,f=Vr((()=>({...a.slot,disabled:m})),[a.slot,m]),h={ref:u,...a.props,id:s,htmlFor:l,onClick:p};return c&&("onClick"in h&&(delete h.htmlFor,delete h.onClick),"onClick"in d&&delete d.onClick),Sd()({ourProps:h,theirProps:d,slot:f,defaultTag:l?"label":"div",name:a.name||"Label"})}));Object.assign(Vd,{});Pd((function(e,t){let n=Zr(),r=Ld(),a=gd(),{id:o=r||`headlessui-textarea-${n}`,disabled:i=a||!1,autoFocus:s=!1,invalid:l=!1,...c}=e,d=function(){var e,t;let n=null!=(t=null==(e=Hr(Bd))?void 0:e.value)?t:void 0;return n}(),u=function(){var e,t;return null!=(t=null==(e=Hr($d))?void 0:e.value)?t:void 0}(),{isFocused:p,focusProps:m}=cd({autoFocus:s}),{isHovered:f,hoverProps:h}=ld({isDisabled:i}),_=Id({ref:t,id:o,"aria-labelledby":d,"aria-describedby":u,"aria-invalid":l?"true":void 0,disabled:i||void 0,autoFocus:s},m,h),y=Vr((()=>({disabled:i,invalid:l,hover:f,focus:p,autofocus:s})),[i,l,f,p,s]);return Sd()({ourProps:_,theirProps:c,slot:y,defaultTag:"textarea",name:"Textarea"})}));
/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Yd=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,((e,t,n)=>n?n.toUpperCase():t.toLowerCase())))(e);return t.charAt(0).toUpperCase()+t.slice(1)},Hd=(...e)=>e.filter(((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t)).join(" ").trim(),Kd=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};
/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var Zd={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=ma((({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:o,iconNode:i,...s},l)=>Gn("svg",{ref:l,...Zd,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:Hd("lucide",a),...!o&&!Kd(s)&&{"aria-hidden":"true"},...s},[...i.map((([e,t])=>Gn(e,t))),...Array.isArray(o)?o:[o]]))),Gd=(e,t)=>{const n=ma((({className:n,...r},a)=>{return Gn(Wd,{ref:a,iconNode:t,className:Hd(`lucide-${o=Yd(e),o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...r});var o}));return n.displayName=Yd(e),n};
/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */Gd("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);Gd("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);Gd("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);Gd("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);Gd("puzzle",[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]]);Gd("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);Gd("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);Gd("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);Gd("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);Gd("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var Jd="browser",Xd="device",Qd="engine",eu="os",tu="name",nu="type",ru="vendor",au="version",ou="architecture",iu="major",su="model",lu="undefined"!=typeof window&&window.navigator?window.navigator:void 0;lu&&lu.userAgentData&&lu.userAgentData;var cu,du=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},uu=function(e){for(var t in e){var n=e[t];"object"==typeof n&&2==n.length?this[n[0]]=n[1]:this[n]=void 0}return this};function pu(e){return jr("div",{className:"relative flex w-full shrink-0 items-center justify-center",children:[e.children,e.badgeContent&&jr("div",{className:Pl("bg-blue-600 text-white",e.badgeClassName,"pointer-events-none absolute right-0 bottom-0 flex h-3 w-max min-w-3 max-w-8 select-none items-center justify-center truncate rounded-full px-0.5 font-semibold text-[0.5em]"),children:e.badgeContent}),e.statusDot&&jr("div",{className:Pl("bg-rose-600",e.statusDotClassName,"pointer-events-none absolute top-0 right-0 size-1.5 rounded-full")})]})}uu.call((cu={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}}).init,[[Jd,[tu,au,iu,nu]],["cpu",[ou]],[Xd,[nu,su,ru]],[Qd,[tu,au]],[eu,[tu,au]]]),uu.call(cu.isIgnore,[[Jd,[au,iu]],[Qd,[au]],[eu,[au]]]),uu.call(cu.isIgnoreRgx,[[Jd,/ ?browser$/i],[eu,/ ?os$/i]]),uu.call(cu.toString,[[Jd,[tu,au]],["cpu",[ou]],[Xd,[ru,su]],[Qd,[tu,au]],[eu,[tu,au]]]),du([tu,au,iu,nu]),du([ou]),du([su,ru,nu,"console","mobile","smarttv","tablet","wearable","embedded"]),du([tu,au]),br(null);const mu=ma((({badgeContent:e,badgeClassName:t,statusDot:n,statusDotClassName:r,tooltipHint:a,variant:o="default",active:i,...s},l)=>jr(pu,{badgeContent:e,badgeClassName:t,statusDot:n,statusDotClassName:r,children:jr(Md,{ref:l,...s,className:Pl("flex items-center justify-center rounded-full p-1 text-zinc-950 ring ring-transparent transition-all duration-150 hover:bg-zinc-950/5","default"===o?"size-8":"h-8 rounded-full",i&&"bg-white/40 ring-zinc-950/20",s.className)})})));mu.displayName="ToolbarButton","function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout;const fu={genders:[],maritalStatuses:[],educationLevels:[],employmentTypes:[],employeeStatuses:[],departments:[],personnelCategories:[],actualPositions:[],jobPositionLevels:[]},hu=fn(((e,t)=>({...fu,loading:new Set,errors:new Map,fetchLookup:async(n,r)=>{const{loading:a,errors:o}=t(),i=new Set(a),s=new Map(o),l="all"===n?Object.keys(fu):[n];l.forEach((e=>i.add(e))),e({loading:i});for(const t of l){s.delete(t);try{let n=[];switch(t){case"genders":n=await at.getLookupValues("GENDER");break;case"maritalStatuses":n=await at.getLookupValues("MARITAL_STATUS");break;case"educationLevels":n=await at.getLookupValues("EDUCATION_LEVEL");break;case"employmentTypes":n=await at.getEmploymentTypesLookup();break;case"employeeStatuses":n=await at.getLookupValues("EMPLOYEE_STATUS");break;case"departments":n=await at.getDepartmentsLookup();break;case"personnelCategories":n=await at.getPersonnelCategoriesLookup(r);break;case"actualPositions":n=await ot.getPositionsLookup();break;case"jobPositionLevels":n=await at.getJobPositionLevelsLookup();break;default:continue}e((e=>({...e,[t]:n})))}catch(c){s.set(t,c.message||`Failed to fetch ${t}`)}i.delete(t),e({loading:new Set(i),errors:new Map(s)})}},getLookupByType:e=>t()[e]}))),_u=new Et,yu=({router:e})=>{const t=tt(),a=nt((e=>e.auth.authToken)),o=nt((e=>e.auth.currentUser));nt((e=>e.auth.currentUserNumericId));const i=nt((e=>e.auth.isLoadingUser)),s=Nt((e=>e.fetchComponentDefinitions)),l=hu((e=>e.fetchLookup)),c=nt(it),d=nt(st),u=nt(lt),p=nt(ct),m=nt(dt),f=nt(ut),h=nt(pt),_=nt(mt),y=m?`${m.replace(/\/$/,"")}/embed.min.js`:"",g=He.useMemo((()=>JSON.stringify(_)),[_]),v=He.useCallback((()=>{try{const e=localStorage.getItem("auth-storage");if(e){const n=JSON.parse(e);if(n.authToken){const e=ft(n.authToken),r=Date.now()/1e3;if(e.exp&&e.exp<r)return void localStorage.removeItem("auth-storage");t(ht(n)),n.currentUserNumericId&&t(_t(n.currentUserNumericId))}}}catch(e){localStorage.removeItem("auth-storage")}}),[t]);return He.useEffect((()=>{v()}),[v]),He.useEffect((()=>{a&&s()}),[a,s]),He.useEffect((()=>{if(a){(async()=>{try{await Promise.all([l("genders"),l("departments"),l("personnelCategories")]),setTimeout((async()=>{await Promise.all([l("maritalStatuses"),l("educationLevels"),l("employmentTypes"),l("employeeStatuses")])}),100)}catch(e){}})()}}),[a,l]),He.useEffect((()=>{a&&yt()}),[a]),He.useEffect((()=>{}),[a,o,i]),He.useEffect((()=>{if(c)return;const e=p||"dify-chatbot-default-id",t=()=>{const t=document.getElementById(e);t&&t.remove();const n=document.getElementById("dify-chatbot-config");n&&n.remove();const r=document.getElementById("chatbot-custom-style");r&&r.remove();const a=document.getElementById("chatbot-custom-js");a&&a.remove();const o=document.getElementById("dify-chatbot-bubble-button");o&&o.remove();const i=document.querySelector('div[id^="dify-chatbotroot-"]');i&&i.remove()};if(d&&u&&p&&y&&""!==y.trim()){t();const n=document.createElement("script");n.id="dify-chatbot-config",n.nonce=window.__CSP_NONCE__||"";const r={token:p,baseUrl:m,system_variables:{},dynamicScript:!0};if(_&&Array.isArray(_)&&_.forEach((e=>{e.key&&void 0!==e.value&&(r.system_variables[e.key]=e.value)})),n.innerHTML=`window.difyChatbotConfig = ${JSON.stringify(r)};`,document.head.appendChild(n),f){const e=document.createElement("style");e.id="chatbot-custom-style",e.textContent=f,e.nonce=window.__CSP_NONCE__||"",document.head.appendChild(e)}if(h){const e=document.createElement("script");e.id="chatbot-custom-js",e.textContent=h,e.nonce=window.__CSP_NONCE__||"",document.head.appendChild(e)}const a=document.createElement("script");a.src=y,a.id=e,a.defer=!0,a.onload=()=>{},a.onerror=()=>{},document.head.appendChild(a)}else t();return()=>{t()}}),[c,d,u,p,m,f,h,g]),n.jsx(Tt,{client:_u,children:n.jsxs(r,{children:[n.jsx(Ke,{router:e}),!1]})})},gu=({children:e,allowedRoles:t,requiredPermissions:r,permissionMatchMode:o="all"})=>{const{t:i}=Cn(["common"]),s=Ze(),l=nt((e=>e.auth.authToken)),c=nt((e=>e.auth.currentUser)),d=nt((e=>e.auth.isLoadingUser)),u=nt((e=>e.auth.userRoleCodes)),p=nt((e=>e.auth.userPermissions)),m=!!l,f=null!==u&&null!==p,{userRoleCodes:h,userPermissions:_}=hn();if(d||m&&c&&!f)return n.jsx(a,{spinning:!0,size:"large",tip:i("common:loading.user_info"),children:n.jsx("div",{className:"full-size-container"})});if(!m||!c)return n.jsx(We,{to:"/login",state:{from:s},replace:!0});if(t&&t.length>0&&(!h||!h.some((e=>t.includes(e)))))return n.jsx(We,{to:"/unauthorized",state:{from:s},replace:!0});if(r&&r.length>0){const e=_;if(!e||0===e.length)return n.jsx(We,{to:"/unauthorized",state:{from:s},replace:!0});let t=!1;if(t="any"===o?e.some((e=>r.includes(e))):r.every((t=>e.includes(t))),!t)return n.jsx(We,{to:"/unauthorized",state:{from:s},replace:!0})}return n.jsx(n.Fragment,{children:e})},vu="/assets/hyperchainLogo-BqRAatdR.svg",xu=()=>{const{t:e}=Cn(["manager","common"]);return n.jsx("div",{children:e("manager:manager_page.subordinates.placeholder_title")})},bu="manager:view_subordinates",wu=[{index:!0,element:Ge.createElement(xu),meta:{title:"pageTitle:subordinates",requiredPermissions:[bu]}},{path:"subordinates",element:Ge.createElement(xu),meta:{title:"pageTitle:subordinates",requiredPermissions:[bu]}},{path:"leave-approvals",element:Ge.createElement((()=>{const{t:e}=Cn(["manager","common"]);return n.jsx("div",{children:"t('manager_page.leave_approvals.placeholder_title')"})})),meta:{title:"pageTitle:leave_approvals",requiredPermissions:["manager:view_leave_approvals"]}}],{Header:ju,Content:ku,Sider:Su,Footer:Cu}=o,{Text:Eu}=i,Tu=[{name:"简单工资",titleKey:"simplePayroll.title",path:"/simple-payroll",icon:n.jsx(s,{})},{name:"薪资管理",titleKey:"payroll.title",path:"/finance/payroll",icon:n.jsx(p,{}),children:[{name:"工资期间",titleKey:"payroll.periods",path:"/finance/payroll/periods",icon:n.jsx(l,{})},{name:"工资运行",titleKey:"payroll.runs",path:"/finance/payroll/runs",icon:n.jsx(s,{})},{name:"工资条目",titleKey:"payroll.entry",path:"/finance/payroll/entry",icon:n.jsx(c,{})},{name:"薪资组件",titleKey:"payroll.components",path:"/finance/payroll/components",icon:n.jsx(d,{})},{name:"计算规则配置",titleKey:"payroll.calculationConfig",path:"/finance/payroll/calculation-config",icon:n.jsx(u,{})}]},{name:"员工管理",titleKey:"hr.title",path:"/hr",icon:n.jsx(_,{}),children:[{name:"员工列表",titleKey:"hr.employees",path:"/hr/employees",icon:n.jsx(m,{})},{name:"员工列表 (新版)",titleKey:"hr.employeesUniversal",path:"/hr/employees/universal",icon:n.jsx(f,{})},{name:"新增员工",titleKey:"hr.employeesNew",path:"/hr/employees/new",icon:n.jsx(h,{})}]},{name:"组织架构",titleKey:"organization.title",path:"/admin/organization",icon:n.jsx(y,{}),children:[{name:"组织管理",titleKey:"organization.managementV2",path:"/admin/organization/management-v2",icon:n.jsx(u,{})}]},{name:"系统管理",titleKey:"admin.title",path:"/admin",icon:n.jsx(u,{}),children:[{name:"用户管理",titleKey:"admin.users",path:"/admin/users",icon:n.jsx(_,{})},{name:"角色管理",titleKey:"admin.roles",path:"/admin/roles",icon:n.jsx(g,{})},{name:"权限管理",titleKey:"admin.permissions",path:"/admin/permissions",icon:n.jsx(v,{})},{name:"系统配置",titleKey:"admin.systemSettings",path:"/admin/config",icon:n.jsx(f,{})}]}],Iu=(e=!1)=>[...Tu];function Pu(e,t){return e.map((e=>({...e,name:t&&e.titleKey?t(e.titleKey):e.name,children:e.children?Pu(e.children,t):void 0})))}x.defaultAlgorithm;const Nu={layout:"side",contentWidth:"Fluid",fixedHeader:!1,fixSiderbar:!0,colorWeak:!1,title:"工资报表助手",navTheme:"light",splitMenus:!1,menu:{locale:!1}};x.darkAlgorithm;const{useBreakpoint:Au}=b,Ou=({currentUser:e,onLogout:t})=>{const{t:a}=Cn(["common","components"]),{message:o}=r.useApp(),i=[{key:"profile",label:n.jsxs(k,{children:[n.jsx(m,{}),a("common:user_menu.profile")]})},{key:"settings",label:n.jsxs(k,{children:[n.jsx(u,{}),a("common:user_menu.settings")]})},{type:"divider"},{key:"logout",label:n.jsxs(k,{children:[n.jsx(I,{}),a("common:user_menu.logout")]}),onClick:t}];return n.jsx(k,{size:"middle",children:n.jsx(P,{menu:{items:i},trigger:["click"],placement:"bottomRight",children:n.jsxs(k,{className:"cursor-pointer",children:[n.jsx(N,{size:"small",icon:n.jsx(m,{})}),n.jsx("span",{children:(null==e?void 0:e.username)||"Admin"})]})})})},Mu=({children:e})=>{const t=Ze(),a=Je(),{t:o}=Cn(["common","user_menu","tour","hr","employee","admin","auth","department","jobTitle","manager","payroll","permission","role","user","personnelCategory","menu"]),i=Au(),{message:s}=r.useApp(),l=tt(),c=nt((e=>e.auth.currentUser)),[d,u]=He.useState(!0),[p,m]=He.useState(Nu),[f,h]=He.useState(!1);He.useEffect((()=>{const e=!i.md||!0;u(e)}),[i]);const _=He.useCallback((async()=>{try{l(gt()),a("/login",{replace:!0}),s.success(o("common:auth.logout_success"))}catch(e){s.error(o("common:auth.logout_failed"))}}),[l,a,o,s]),y=He.useCallback((e=>{e.path&&e.path!==t.pathname&&a(e.path)}),[a,t.pathname]);!function(e){const t={};(function e(n){n.forEach((n=>{n.path&&n.name&&(t[n.path]=n.name),n.children&&e(n.children)}))})(e)}(Iu(!1));const g=e=>{h(!0),e.currentTarget.style.display="none"},v=()=>f?n.jsx(S,{className:"icon-bank-logo"}):n.jsx("img",{src:vu,alt:"Logo",className:"logo-height-28",onError:g}),x={...p,location:t,layout:"side",fixedHeader:!0,fixSiderbar:!0,collapsed:d,onCollapse:e=>{u(e)},siderWidth:220,collapsedWidth:48,breakpoint:"md",headerHeight:64,menuProps:{defaultOpenKeys:["/business","/system","/business/payroll","/business/hr","/business/employees","/system/permissions","/system/organization","/system/payroll-config","/system/ai-config","/personal","/reports"]},menuDataRender:()=>Pu(Iu(!1),(e=>o(e,{ns:"menu"}))),menuItemRender:(e,t)=>n.jsx("div",{onClick:()=>y(e),className:"flex-align-center-padding-horizontal-8",children:t}),breadcrumbRender:(e=[])=>[{path:"/",breadcrumbName:o("menu:home")},...e],itemRender:e=>e.breadcrumbName,actionsRender:()=>[n.jsx(Ou,{currentUser:c,onLogout:_},"user-info")],headerTitleRender:(e,t,r)=>n.jsxs("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>a("/simple-payroll"),children:[v(),!(null==r?void 0:r.collapsed)&&n.jsx("span",{className:"header-title-text",children:"人事薪资管理系统"})]}),collapsedButtonRender:()=>n.jsx(C,{type:"text",icon:d?n.jsx(E,{}):n.jsx(T,{}),onClick:()=>u(!d),className:"collapsed-button-style",title:o(d?"common:expand_sidebar":"common:collapse_sidebar")}),footerRender:()=>n.jsx("div",{className:"footer-style",children:n.jsxs(k,{split:"|",children:[n.jsx("span",{children:"成都高新区财政国资局 人事工资信息管理系统 ©2025"}),f?n.jsx(S,{className:"icon-bank-logo-small"}):n.jsx("img",{src:vu,alt:o("common:hyperchain_logo"),style:{height:16},onError:g})]})}),contentStyle:{margin:0,minHeight:"calc(100vh - 64px - 48px)",paddingTop:0},logo:v()};return n.jsx("div",{style:{height:"100vh"},children:n.jsx(w,{...x,children:n.jsx(j,{children:n.jsx("div",{children:e||n.jsx(Xe,{})})})})})};function Du(e){return(Du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lu(){return"function"==typeof XMLHttpRequest||"object"===("undefined"==typeof XMLHttpRequest?"undefined":Du(XMLHttpRequest))}function Ru(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ru(Object(n),!0).forEach((function(t){$u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ru(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $u(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Fu(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Fu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fu(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fu(e){return(Fu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var qu,Bu,Uu="function"==typeof fetch?fetch:void 0;if("undefined"!=typeof globalThis&&globalThis.fetch?Uu=globalThis.fetch:"undefined"!=typeof window&&window.fetch&&(Uu=window.fetch),Lu()&&("undefined"!=typeof globalThis&&globalThis.XMLHttpRequest?qu=globalThis.XMLHttpRequest:"undefined"!=typeof window&&window.XMLHttpRequest&&(qu=window.XMLHttpRequest)),"function"==typeof ActiveXObject&&("undefined"!=typeof globalThis&&globalThis.ActiveXObject?Bu=globalThis.ActiveXObject:"undefined"!=typeof window&&window.ActiveXObject&&(Bu=window.ActiveXObject)),"function"!=typeof Uu&&(Uu=void 0),!Uu&&!qu&&!Bu)try{_n((()=>import("./browser-ponyfill-C3VuJUT6.js").then((e=>e.b))),__vite__mapDeps([0,1])).then((function(e){Uu=e.default})).catch((function(){}))}catch(bd){}var Vu=function(e,t){if(t&&"object"===Fu(t)){var n="";for(var r in t)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(t[r]);if(!n)return e;e=e+(-1!==e.indexOf("?")?"&":"?")+n.slice(1)}return e},Yu=function(e,t,n,r){var a=function(e){if(!e.ok)return n(e.statusText||"Error",{status:e.status});e.text().then((function(t){n(null,{status:e.status,data:t})})).catch(n)};if(r){var o=r(e,t);if(o instanceof Promise)return void o.then(a).catch(n)}"function"==typeof fetch?fetch(e,t).then(a).catch(n):Uu(e,t).then(a).catch(n)},Hu=!1,Ku=function(e,t,n,r){return"function"==typeof n&&(r=n,n=void 0),r=r||function(){},Uu&&0!==t.indexOf("file:")?function(e,t,n,r){e.queryStringParams&&(t=Vu(t,e.queryStringParams));var a=zu({},"function"==typeof e.customHeaders?e.customHeaders():e.customHeaders);"undefined"==typeof window&&"undefined"!=typeof globalThis&&void 0!==globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node&&(a["User-Agent"]="i18next-http-backend (node/".concat(globalThis.process.version,"; ").concat(globalThis.process.platform," ").concat(globalThis.process.arch,")")),n&&(a["Content-Type"]="application/json");var o="function"==typeof e.requestOptions?e.requestOptions(n):e.requestOptions,i=zu({method:n?"POST":"GET",body:n?e.stringify(n):void 0,headers:a},Hu?{}:o),s="function"==typeof e.alternateFetch&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{Yu(t,i,r,s)}catch(bd){if(!o||0===Object.keys(o).length||!bd.message||bd.message.indexOf("not implemented")<0)return r(bd);try{Object.keys(o).forEach((function(e){delete i[e]})),Yu(t,i,r,s),Hu=!0}catch(l){r(l)}}}(e,t,n,r):Lu()||"function"==typeof ActiveXObject?function(e,t,n,r){n&&"object"===Fu(n)&&(n=Vu("",n).slice(1)),e.queryStringParams&&(t=Vu(t,e.queryStringParams));try{var a=qu?new qu:new Bu("MSXML2.XMLHTTP.3.0");a.open(n?"POST":"GET",t,1),e.crossDomain||a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.withCredentials=!!e.withCredentials,n&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.overrideMimeType&&a.overrideMimeType("application/json");var o=e.customHeaders;if(o="function"==typeof o?o():o)for(var i in o)a.setRequestHeader(i,o[i]);a.onreadystatechange=function(){a.readyState>3&&r(a.status>=400?a.statusText:null,{status:a.status,data:a.responseText})},a.send(n)}catch(bd){console}}(e,t,n,r):void r(new Error("No fetch and no xhr implementation found!"))};function Zu(e){return(Zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wu(Object(n),!0).forEach((function(t){Xu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ju(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qu(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xu(e,t,n){return(t=Qu(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qu(e){var t=function(e,t){if("object"!=Zu(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Zu(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Zu(t)?t:t+""}var ep=Ju((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.services=t,this.options=n,this.allOptions=r,this.type="backend",this.init(t,n,r)}),[{key:"init",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.services=e,this.options=Gu(Gu(Gu({},{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(e){return JSON.parse(e)},stringify:JSON.stringify,parsePayload:function(e,t,n){return Xu({},t,n||"")},parseLoadPayload:function(e,t){},request:Ku,reloadInterval:"undefined"==typeof window&&36e5,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}),this.options||{}),n),this.allOptions=r,this.services&&this.options.reloadInterval){var a=setInterval((function(){return t.reload()}),this.options.reloadInterval);"object"===Zu(a)&&"function"==typeof a.unref&&a.unref()}}},{key:"readMulti",value:function(e,t,n){this._readAny(e,e,t,t,n)}},{key:"read",value:function(e,t,n){this._readAny([e],e,[t],t,n)}},{key:"_readAny",value:function(e,t,n,r,a){var o,i=this,s=this.options.loadPath;"function"==typeof this.options.loadPath&&(s=this.options.loadPath(e,n)),(s=function(e){return!!e&&"function"==typeof e.then}(o=s)?o:Promise.resolve(o)).then((function(o){if(!o)return a(null,{});var s=i.services.interpolator.interpolate(o,{lng:e.join("+"),ns:n.join("+")});i.loadUrl(s,a,t,r)}))}},{key:"loadUrl",value:function(e,t,n,r){var a=this,o="string"==typeof n?[n]:n,i="string"==typeof r?[r]:r,s=this.options.parseLoadPayload(o,i);this.options.request(this.options,e,s,(function(o,i){if(i&&(i.status>=500&&i.status<600||!i.status))return t("failed loading "+e+"; status code: "+i.status,!0);if(i&&i.status>=400&&i.status<500)return t("failed loading "+e+"; status code: "+i.status,!1);if(!i&&o&&o.message){var s=o.message.toLowerCase();if(["failed","fetch","network","load"].find((function(e){return s.indexOf(e)>-1})))return t("failed loading "+e+": "+o.message,!0)}if(o)return t(o,!1);var l,c;try{l="string"==typeof i.data?a.options.parse(i.data,n,r):i.data}catch(bd){c="failed parsing "+e+" to json"}if(c)return t(c,!1);t(null,l)}))}},{key:"create",value:function(e,t,n,r,a){var o=this;if(this.options.addPath){"string"==typeof e&&(e=[e]);var i=this.options.parsePayload(t,n,r),s=0,l=[],c=[];e.forEach((function(n){var r=o.options.addPath;"function"==typeof o.options.addPath&&(r=o.options.addPath(n,t));var d=o.services.interpolator.interpolate(r,{lng:n,ns:t});o.options.request(o.options,d,i,(function(t,n){s+=1,l.push(t),c.push(n),s===e.length&&"function"==typeof a&&a(l,c)}))}))}}},{key:"reload",value:function(){var e=this,t=this.services,n=t.backendConnector,r=t.languageUtils,a=t.logger,o=n.language;if(!o||"cimode"!==o.toLowerCase()){var i=[],s=function(e){r.toResolveHierarchy(e).forEach((function(e){i.indexOf(e)<0&&i.push(e)}))};s(o),this.allOptions.preload&&this.allOptions.preload.forEach((function(e){return s(e)})),i.forEach((function(t){e.allOptions.ns.forEach((function(e){n.read(t,e,"read",null,null,(function(r,o){r&&a.warn("loading namespace ".concat(e," for language ").concat(t," failed"),r),!r&&o&&a.log("loaded namespace ".concat(e," for language ").concat(t),o),n.loaded("".concat(t,"|").concat(e),r,o)}))}))}))}}}]);ep.type="backend";const{slice:tp,forEach:np}=[];const rp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,ap={create(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};n&&(a.expires=new Date,a.expires.setTime(a.expires.getTime()+60*n*1e3)),r&&(a.domain=r),document.cookie=function(e,t){const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{path:"/"};let r=`${e}=${encodeURIComponent(t)}`;if(n.maxAge>0){const e=n.maxAge-0;if(Number.isNaN(e))throw new Error("maxAge should be a Number");r+=`; Max-Age=${Math.floor(e)}`}if(n.domain){if(!rp.test(n.domain))throw new TypeError("option domain is invalid");r+=`; Domain=${n.domain}`}if(n.path){if(!rp.test(n.path))throw new TypeError("option path is invalid");r+=`; Path=${n.path}`}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");r+=`; Expires=${n.expires.toUTCString()}`}if(n.httpOnly&&(r+="; HttpOnly"),n.secure&&(r+="; Secure"),n.sameSite)switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(r+="; Partitioned"),r}(e,t,a)},read(e){const t=`${e}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let e=n[r];for(;" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(t))return e.substring(t.length,e.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var op={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&"undefined"!=typeof document)return ap.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:r,cookieDomain:a,cookieOptions:o}=t;n&&"undefined"!=typeof document&&ap.create(n,e,r,a,o)}},ip={name:"querystring",lookup(e){var t;let n,{lookupQuerystring:r}=e;if("undefined"!=typeof window){let{search:e}=window.location;!window.location.search&&(null==(t=window.location.hash)?void 0:t.indexOf("?"))>-1&&(e=window.location.hash.substring(window.location.hash.indexOf("?")));const a=e.substring(1).split("&");for(let t=0;t<a.length;t++){const e=a[t].indexOf("=");if(e>0){a[t].substring(0,e)===r&&(n=a[t].substring(e+1))}}}return n}},sp={name:"hash",lookup(e){var t;let n,{lookupHash:r,lookupFromHashIndex:a}=e;if("undefined"!=typeof window){const{hash:e}=window.location;if(e&&e.length>2){const o=e.substring(1);if(r){const e=o.split("&");for(let t=0;t<e.length;t++){const a=e[t].indexOf("=");if(a>0){e[t].substring(0,a)===r&&(n=e[t].substring(a+1))}}}if(n)return n;if(!n&&a>-1){const n=e.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(n))return;return null==(t=n["number"==typeof a?a:0])?void 0:t.replace("/","")}}}return n}};let lp=null;const cp=()=>{if(null!==lp)return lp;try{if(lp="undefined"!=typeof window&&null!==window.localStorage,!lp)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(bd){lp=!1}return lp};var dp={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&cp())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&cp()&&window.localStorage.setItem(n,e)}};let up=null;const pp=()=>{if(null!==up)return up;try{if(up="undefined"!=typeof window&&null!==window.sessionStorage,!up)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(bd){up=!1}return up};var mp={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&pp())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&pp()&&window.sessionStorage.setItem(n,e)}},fp={name:"navigator",lookup(e){const t=[];if("undefined"!=typeof navigator){const{languages:e,userLanguage:n,language:r}=navigator;if(e)for(let a=0;a<e.length;a++)t.push(e[a]);n&&t.push(n),r&&t.push(r)}return t.length>0?t:void 0}},hp={name:"htmlTag",lookup(e){let t,{htmlTag:n}=e;const r=n||("undefined"!=typeof document?document.documentElement:null);return r&&"function"==typeof r.getAttribute&&(t=r.getAttribute("lang")),t}},_p={name:"path",lookup(e){var t;let{lookupFromPathIndex:n}=e;if("undefined"==typeof window)return;const r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(r))return;return null==(t=r["number"==typeof n?n:0])?void 0:t.replace("/","")}},yp={name:"subdomain",lookup(e){var t,n;let{lookupFromSubdomainIndex:r}=e;const a="number"==typeof r?r+1:1,o="undefined"!=typeof window&&(null==(n=null==(t=window.location)?void 0:t.hostname)?void 0:n.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(o)return o[a]}};let gp=!1;try{document.cookie,gp=!0}catch(bd){}const vp=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];gp||vp.splice(1,1);class xp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{languageUtils:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=function(e){return np.call(tp.call(arguments,1),(t=>{if(t)for(const n in t)void 0===e[n]&&(e[n]=t[n])})),e}(t,this.options||{},{order:vp,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e}),"string"==typeof this.options.convertDetectedLanguage&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=e=>e.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(op),this.addDetector(ip),this.addDetector(dp),this.addDetector(mp),this.addDetector(fp),this.addDetector(hp),this.addDetector(_p),this.addDetector(yp),this.addDetector(sp)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.order,t=[];return e.forEach((e=>{if(this.detectors[e]){let n=this.detectors[e].lookup(this.options);n&&"string"==typeof n&&(n=[n]),n&&(t=t.concat(n))}})),t=t.filter((e=>{return null!=e&&!("string"==typeof(t=e)&&[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some((e=>e.test(t))));var t})).map((e=>this.options.convertDetectedLanguage(e))),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach((t=>{this.detectors[t]&&this.detectors[t].cacheUserLanguage(e,this.options)})))}}xp.type="languageDetector";var bp,wp={exports:{}};bp||(bp=1,wp.exports={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}});function jp(e){"zh-CN"===e?A.locale("zh-cn"):"en"===e?A.locale("en"):A.locale("zh-cn")}En.use(ep).use(xp).use(Tn).init({supportedLngs:["en","zh-CN"],nonExplicitSupportedLngs:!1,load:"currentOnly",fallbackLng:{default:["zh-CN","en"],zh:["zh-CN"]},lng:"zh-CN",debug:!1,ns:["common","admin","auth","dashboard","department","employee","jobTitle","manager","profile","user_profile","pageTitle","payroll","payroll_runs","permission","personnelCategory","hr","tour","user_menu","report","reportManagement","role","user","menu","bulkImport","payrollEntryForm"],defaultNS:"common",backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"},react:{useSuspense:!0},interpolation:{escapeValue:!1,keySeparator:".",nsSeparator:":"},returnObjects:!0,detection:{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],caches:["localStorage","cookie"],lookupFromPathIndex:0,lookupFromSubdomainIndex:0,checkWhitelist:!0},preload:["zh-CN","en"]}),En.on("initialized",(()=>{jp(En.language)})),En.on("languageChanged",(e=>{jp(e)}));const{Title:kp}=i,Sp=()=>{var e,t;const r=Je(),o=Ze(),{t:i,ready:s,i18n:l}=Cn(["common","auth"]),c=tt(),d=nt((e=>e.auth.authToken)),u=nt((e=>e.auth.isLoadingUser)),p=nt((e=>e.auth.loginError)),[f]=O.useForm(),h=!!d,_=(null==(t=null==(e=o.state)?void 0:e.from)?void 0:t.pathname)||"/simple-payroll";He.useEffect((()=>{h&&r(_,{replace:!0})}),[h,r,_]),He.useEffect((()=>{h||c(vt())}),[h,c,o.key]);return s?n.jsx(M,{justify:"center",align:"middle",style:{minHeight:"100vh"},children:n.jsx(D,{xs:20,sm:16,md:12,lg:8,xl:6,children:n.jsxs(L,{variant:"outlined",style:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)"},children:[n.jsxs("div",{style:{textAlign:"center",marginBottom:"24px"},children:[n.jsx("img",{src:vu,alt:"App Logo",style:{height:"50px",marginBottom:"20px"}}),n.jsx(kp,{level:2,style:{marginBottom:"24px"},children:i("login_page_title",{ns:"auth"})})]}),n.jsxs(O,{form:f,name:"login",initialValues:{remember:!0},onFinish:async e=>{const t={username:e.username,password:e.password};c(xt(t))},onFinishFailed:e=>{},autoComplete:"off",layout:"vertical",children:[n.jsx(O.Item,{label:i("username_label",{ns:"common"}),name:"username",rules:[{required:!0,message:i("username_required_message",{ns:"auth"})}],style:{marginBottom:"20px"},children:n.jsx(R,{prefix:n.jsx(m,{}),size:"large",autoComplete:"username"})}),n.jsx(O.Item,{label:i("password_label",{ns:"common"}),name:"password",rules:[{required:!0,message:i("password_required_message",{ns:"auth"})}],style:{marginBottom:"12px"},children:n.jsx(R.Password,{prefix:n.jsx(z,{}),size:"large",autoComplete:"current-password"})}),n.jsx(O.Item,{name:"remember",valuePropName:"checked",children:n.jsx($,{children:i("remember_me_checkbox",{ns:"common"})})}),p&&n.jsx(O.Item,{children:n.jsx(F,{message:i("auth:error.login_failed"),description:p&&"string"==typeof p&&p.includes(i("common:auto_text_e69c8d"))?n.jsxs(n.Fragment,{children:[n.jsx("div",{children:p}),n.jsx("div",{style:{marginTop:8},children:n.jsx(C,{type:"link",size:"small",onClick:()=>window.location.reload(),children:i("common:button.refresh_and_retry")})})]}):p,type:"error",showIcon:!0,closable:!0,onClose:()=>c(vt())})}),n.jsx(O.Item,{children:n.jsx(C,{type:"primary",htmlType:"submit",loading:u,style:{width:"100%"},size:"large",shape:"round",children:i("login_button",{ns:"common"})})})]})]})})}):n.jsx(a,{tip:i("common:loading.generic_loading_text"),size:"large",style:{display:"block",marginTop:"50px"},children:n.jsx("div",{style:{padding:50}})})},Cp=6048e5,Ep=Symbol.for("constructDateFrom");function Tp(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&Ep in e?e[Ep](t):e instanceof Date?new e.constructor(t):new Date(t)}function Ip(e,t){return Tp(t||e,e)}let Pp={};function Np(){return Pp}function Ap(e,t){var n,r,a,o;const i=Np(),s=(null==t?void 0:t.weekStartsOn)??(null==(r=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:r.weekStartsOn)??i.weekStartsOn??(null==(o=null==(a=i.locale)?void 0:a.options)?void 0:o.weekStartsOn)??0,l=Ip(e,null==t?void 0:t.in),c=l.getDay(),d=(c<s?7:0)+c-s;return l.setDate(l.getDate()-d),l.setHours(0,0,0,0),l}function Op(e,t){return Ap(e,{...t,weekStartsOn:1})}function Mp(e,t){const n=Ip(e,null==t?void 0:t.in),r=n.getFullYear(),a=Tp(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const o=Op(a),i=Tp(n,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const s=Op(i);return n.getTime()>=o.getTime()?r+1:n.getTime()>=s.getTime()?r:r-1}function Dp(e){const t=Ip(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Lp(e,t){const n=Ip(e,null==t?void 0:t.in);return n.setHours(0,0,0,0),n}function Rp(e,t,n){const[r,a]=function(e,...t){const n=Tp.bind(null,t.find((e=>"object"==typeof e)));return t.map(n)}(null==n||n.in,e,t),o=Lp(r),i=Lp(a),s=+o-Dp(o),l=+i-Dp(i);return Math.round((s-l)/864e5)}function zp(e){return!(!((t=e)instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t))&&"number"!=typeof e||isNaN(+Ip(e)));var t}const $p={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Fp(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const qp={date:Fp({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Fp({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Fp({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Bp={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Up(e){return(t,n)=>{let r;if("formatting"===((null==n?void 0:n.context)?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,a=(null==n?void 0:n.width)?String(n.width):t;r=e.formattingValues[a]||e.formattingValues[t]}else{const t=e.defaultWidth,a=(null==n?void 0:n.width)?String(n.width):e.defaultWidth;r=e.values[a]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function Vp(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(a);if(!o)return null;const i=o[0],s=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(s)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(s,(e=>e.test(i))):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(s,(e=>e.test(i)));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(i.length)}}}var Yp;const Hp={code:"en-US",formatDistance:(e,t,n)=>{let r;const a=$p[e];return r="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),(null==n?void 0:n.addSuffix)?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:qp,formatRelative:(e,t,n,r)=>Bp[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Up({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Up({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Up({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Up({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Up({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(Yp={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const n=e.match(Yp.matchPattern);if(!n)return null;const r=n[0],a=e.match(Yp.parsePattern);if(!a)return null;let o=Yp.valueCallback?Yp.valueCallback(a[0]):a[0];return o=t.valueCallback?t.valueCallback(o):o,{value:o,rest:e.slice(r.length)}}),era:Vp({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Vp({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Vp({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Vp({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Vp({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function Kp(e,t){const n=Ip(e,null==t?void 0:t.in),r=Rp(n,function(e,t){const n=Ip(e,null==t?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}(n));return r+1}function Zp(e,t){const n=Ip(e,null==t?void 0:t.in),r=+Op(n)-+function(e,t){const n=Mp(e,t),r=Tp(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Op(r)}(n);return Math.round(r/Cp)+1}function Wp(e,t){var n,r,a,o;const i=Ip(e,null==t?void 0:t.in),s=i.getFullYear(),l=Np(),c=(null==t?void 0:t.firstWeekContainsDate)??(null==(r=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:r.firstWeekContainsDate)??l.firstWeekContainsDate??(null==(o=null==(a=l.locale)?void 0:a.options)?void 0:o.firstWeekContainsDate)??1,d=Tp((null==t?void 0:t.in)||e,0);d.setFullYear(s+1,0,c),d.setHours(0,0,0,0);const u=Ap(d,t),p=Tp((null==t?void 0:t.in)||e,0);p.setFullYear(s,0,c),p.setHours(0,0,0,0);const m=Ap(p,t);return+i>=+u?s+1:+i>=+m?s:s-1}function Gp(e,t){const n=Ip(e,null==t?void 0:t.in),r=+Ap(n,t)-+function(e,t){var n,r,a,o;const i=Np(),s=(null==t?void 0:t.firstWeekContainsDate)??(null==(r=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:r.firstWeekContainsDate)??i.firstWeekContainsDate??(null==(o=null==(a=i.locale)?void 0:a.options)?void 0:o.firstWeekContainsDate)??1,l=Wp(e,t),c=Tp((null==t?void 0:t.in)||e,0);return c.setFullYear(l,0,s),c.setHours(0,0,0,0),Ap(c,t)}(n,t);return Math.round(r/Cp)+1}function Jp(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const Xp={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Jp("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):Jp(n+1,2)},d:(e,t)=>Jp(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>Jp(e.getHours()%12||12,t.length),H:(e,t)=>Jp(e.getHours(),t.length),m:(e,t)=>Jp(e.getMinutes(),t.length),s:(e,t)=>Jp(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return Jp(Math.trunc(r*Math.pow(10,n-3)),t.length)}},Qp="midnight",em="noon",tm="morning",nm="afternoon",rm="evening",am="night",om={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return Xp.y(e,t)},Y:function(e,t,n,r){const a=Wp(e,r),o=a>0?a:1-a;if("YY"===t){return Jp(o%100,2)}return"Yo"===t?n.ordinalNumber(o,{unit:"year"}):Jp(o,t.length)},R:function(e,t){return Jp(Mp(e),t.length)},u:function(e,t){return Jp(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Jp(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Jp(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Xp.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Jp(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=Gp(e,r);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):Jp(a,t.length)},I:function(e,t,n){const r=Zp(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):Jp(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):Xp.d(e,t)},D:function(e,t,n){const r=Kp(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):Jp(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),o=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return Jp(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),o=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return Jp(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=0===r?7:r;switch(t){case"i":return String(a);case"ii":return Jp(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(a=12===r?em:0===r?Qp:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(a=r>=17?rm:r>=12?nm:r>=4?tm:am,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return Xp.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):Xp.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):Jp(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):Jp(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Xp.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Xp.s(e,t)},S:function(e,t){return Xp.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return sm(r);case"XXXX":case"XX":return lm(r);default:return lm(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return sm(r);case"xxxx":case"xx":return lm(r);default:return lm(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+im(r,":");default:return"GMT"+lm(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+im(r,":");default:return"GMT"+lm(r,":")}},t:function(e,t,n){return Jp(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return Jp(+e,t.length)}};function im(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),o=r%60;return 0===o?n+String(a):n+String(a)+t+Jp(o,2)}function sm(e,t){if(e%60==0){return(e>0?"-":"+")+Jp(Math.abs(e)/60,2)}return lm(e,t)}function lm(e,t=""){const n=e>0?"-":"+",r=Math.abs(e);return n+Jp(Math.trunc(r/60),2)+t+Jp(r%60,2)}const cm=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},dm=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},um={p:dm,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return cm(e,t);let o;switch(r){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;default:o=t.dateTime({width:"full"})}return o.replace("{{date}}",cm(r,t)).replace("{{time}}",dm(a,t))}},pm=/^D+$/,mm=/^Y+$/,fm=["D","DD","YY","YYYY"];const hm=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_m=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ym=/^'([^]*?)'?$/,gm=/''/g,vm=/[a-zA-Z]/;function xm(e,t,n){var r,a,o,i;const s=Np(),l=s.locale??Hp,c=s.firstWeekContainsDate??(null==(a=null==(r=s.locale)?void 0:r.options)?void 0:a.firstWeekContainsDate)??1,d=s.weekStartsOn??(null==(i=null==(o=s.locale)?void 0:o.options)?void 0:i.weekStartsOn)??0,u=Ip(e,null==n?void 0:n.in);if(!zp(u))throw new RangeError("Invalid time value");let p=t.match(_m).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,um[t])(e,l.formatLong)}return e})).join("").match(hm).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:bm(e)};if(om[t])return{isToken:!0,value:e};if(t.match(vm))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));l.localize.preprocessor&&(p=l.localize.preprocessor(u,p));const m={firstWeekContainsDate:c,weekStartsOn:d,locale:l};return p.map((n=>{if(!n.isToken)return n.value;const r=n.value;(function(e){return mm.test(e)}(r)||function(e){return pm.test(e)}(r))&&function(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(fm.includes(e))throw new RangeError(r)}(r,t,String(e));return(0,om[r[0]])(u,r,l.localize,m)})).join("")}function bm(e){const t=e.match(ym);return t?t[1].replace(gm,"'"):e}const wm=({translationNamespaces:e,pageTitleKey:t,addButtonTextKey:a,dataSource:o,loadingData:i,permissions:s={canViewList:!1,canViewDetail:!1,canCreate:!1,canUpdate:!1,canDelete:!1,canExport:!1},lookupMaps:l,loadingLookups:c,errorLookups:d,fetchData:u,deleteItem:p,onAddClick:m,onEditClick:f,onViewDetailsClick:h,generateTableColumns:_,deleteConfirmConfig:y,batchDeleteConfig:g,exportConfig:v,lookupErrorMessageKey:x,lookupLoadingMessageKey:b,lookupDataErrorMessageKey:w,rowKey:j="id",total:k,serverSidePagination:S,serverSideSorting:C,serverSideFiltering:E,paginationConfig:T,onSearch:I,onTableChange:P,selectedRowKeys:N,setSelectedRowKeys:A,extraButtons:O=[]})=>{const{t:M}=Cn(e);Je();const{message:D,modal:L}=r.useApp(),R=He.useRef(!1),[z,$]=He.useState({page:1,page_size:50,filters:{},sorting:[],search:""}),{getColumnSearch:F}=yn(),q=He.useCallback((async e=>{L.confirm({title:M(y.titleKey),content:M(y.contentKey),okText:M(y.okTextKey),okType:"danger",cancelText:M(y.cancelTextKey),onOk:async()=>{try{await p(e),D.success(M(y.successMessageKey)),S||C||E?u(z):u()}catch(t){D.error(M(y.errorMessageKey))}}})}),[M,p,u,y,D,L,z,S,C,E]),B=Ge.useMemo((()=>{const e=_(M,F,l,{canViewDetail:s.canViewDetail,canUpdate:s.canUpdate,canDelete:s.canDelete},f,q,h);return C||E?e.map((e=>{const t={...e};return C&&e.sorter&&(t.sorter=!0),E&&e.filters&&(t.onFilter=void 0),t})):e}),[M,F,l,s.canViewDetail,s.canUpdate,s.canDelete,f,q,h,_,C,E]),U=Ge.useMemo((()=>B.filter((e=>"action"!==e.key)).map((e=>({title:e.title,dataIndex:e.dataIndex,key:e.key,render:e.render})))),[B]),{ExportButton:V}=gn(o,U,{filename:(()=>{const e=new Date,t=e.toLocaleDateString("zh-CN").replace(/\//g,"-"),n=e.toLocaleTimeString("zh-CN",{hour12:!1}).replace(/:/g,"-");return`${v.filenamePrefix}_${t}_${n}`})(),sheetName:v.sheetName,buttonText:M(v.buttonText,M("role:export_excel")),successMessage:M(v.successMessage,M("role:export_success")),supportedFormats:["excel"]});He.useEffect((()=>{d&&D.error(M(x))}),[d,M,x,D]),He.useEffect((()=>{c||d||R.current||(R.current=!0,S||C||E?u(z):u())}),[c,d,u,z,S,C,E]);const Y=i||c,H=s.canDelete&&g?{enabled:!0,buttonText:g.buttonText,confirmTitle:g.confirmTitle,confirmContent:g.confirmContent,confirmOkText:g.confirmOkText,confirmCancelText:g.confirmCancelText,onBatchDelete:g.onBatchDelete,successMessage:g.successMessage,errorMessage:g.errorMessage,noSelectionMessage:g.noSelectionMessage}:void 0,K=He.useCallback((()=>{S||C||E?u(z):u()}),[u,z,S,C,E]),Z=S?{current:z.page,pageSize:z.page_size,defaultPageSize:z.page_size,total:k||0,showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["10","20","50","100","200"],showTotal:(e,t)=>M("components:auto__range_0_range_1___total__e7acac",{range0:t[0],range1:t[1],total:e})}:{showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["10","20","50","100","200"],showTotal:e=>M("components:auto__total__e585b1")};return n.jsx("div",{children:l&&Object.keys(l).length>0||!c&&!d?n.jsx(vn,{pageTitle:M(t),addButtonText:M(a),onAddClick:m,showAddButton:s.canCreate,extraButtons:[...s.canExport?[n.jsx(V,{},"export")]:[],...O],batchDelete:H,columns:B,dataSource:o,loading:Y,pagination:Z,rowKey:j,bordered:!0,scroll:{x:"max-content"},rowSelection:{selectedRowKeys:N,onChange:A},onChange:(e,t,n,r)=>{if(S||C||E){const r={...z};if(S&&e&&(r.page=e.current||1,r.page_size=e.pageSize||50),C&&n){const e=Array.isArray(n)?n:[n];r.sorting=e.filter((e=>e.field&&e.order)).map((e=>({field:String(e.field),direction:"ascend"===e.order?"asc":"desc"})))}if(E&&t){const e={};Object.entries(t).forEach((([t,n])=>{n&&Array.isArray(n)&&n.length>0&&(e[t]=n)})),r.filters=e}$(r),u(r)}},onRefresh:K}):n.jsx("div",{style:{textAlign:"center",padding:"20px"},children:M(c?b:w)})})},jm=async e=>{await bt.delete(`/users/${e}`)},km=async e=>(await bt.get("/roles",{params:e})).data,Sm=async e=>{await bt.delete(`/roles/${e}`)},{Option:Cm}=q,Em=({visible:e,user:t,onClose:r,onSuccess:a})=>{const{t:o}=Cn(["user","common"]),[s]=O.useForm(),[l,c]=He.useState(!1),[d,u]=He.useState([]),p=!!t;He.useEffect((()=>{var n,r,a,i;e&&((async()=>{try{const e=await km({page:1,size:100});e&&e.data&&u(e.data)}catch(e){V.error(o("message.fetch_roles_error"))}})(),t?s.setFieldsValue({username:t.username,employee_first_name:(null==(n=t.employee)?void 0:n.first_name)||"",employee_last_name:(null==(r=t.employee)?void 0:r.last_name)||"",employee_id_card:(null==(a=t.employee)?void 0:a.id_number)||"",is_active:t.is_active,role_ids:(null==(i=t.roles)?void 0:i.map((e=>e.id)))||[]}):(s.resetFields(),s.setFieldsValue({is_active:!0})))}),[e,t,s]);return n.jsx(B,{title:o(p?"modal.title.edit_user":"modal.title.create_user"),open:e,onCancel:r,onOk:()=>s.submit(),confirmLoading:l,destroyOnHidden:!0,width:600,children:n.jsxs(O,{form:s,layout:"vertical",name:"userForm",onFinish:async e=>{var n,r,i,s,l,d;c(!0);try{if(p&&t){const r={is_active:e.is_active,role_ids:null==(n=e.role_ids)?void 0:n.map((e=>Number(e))),employee_first_name:e.employee_first_name,employee_last_name:e.employee_last_name,employee_id_card:e.employee_id_card},a=Object.fromEntries(Object.entries(r).filter((([e,t])=>"is_active"===e||(!!["employee_first_name","employee_last_name","employee_id_card"].includes(e)||void 0!==t))));await(async(e,t)=>(await bt.put(`/users/${e}`,t)).data.data)(t.id,a),V.success(o("message.update_user_success",{username:t.username}))}else{const{confirm_password:t,employee_id:n,...a}=e,i={username:a.username,password:a.password,is_active:void 0===a.is_active||a.is_active,role_ids:(null==(r=a.role_ids)?void 0:r.map((e=>Number(e))))||[],employee_first_name:a.employee_first_name,employee_last_name:a.employee_last_name,employee_id_card:a.employee_id_card},s=Object.fromEntries(Object.entries(i).filter((([e,t])=>void 0!==t))),l=await(async e=>(await bt.post("/users",e)).data.data)(s);V.success(o("message.create_user_success",{username:l.username}))}a()}catch(u){let e=p?`${o("message.update_user_error.default")}`:`${o("message.create_user_error.default")}`;const t=null==(i=u.response)?void 0:i.data;t&&((null==(s=t.detail)?void 0:s.details)&&"string"==typeof t.detail.details?e=t.detail.details:t.detail&&"string"==typeof t.detail?e=t.detail:(null==(l=t.error)?void 0:l.details)&&"string"==typeof t.error.details?e=t.error.details:(null==(d=t.error)?void 0:d.message)&&"string"==typeof t.error.message?e=t.error.message:"string"==typeof t&&(e=t)),V.error(e)}finally{c(!1)}},children:[n.jsx(O.Item,{name:"username",label:o("form.username.label"),rules:[{required:!0,message:o("form.username.validation.required")}],children:n.jsx(R,{disabled:p})}),!p&&n.jsxs(n.Fragment,{children:[n.jsx(O.Item,{name:"password",label:o("form.password.label"),rules:[{required:!0,message:o("form.password.validation.required")}],hasFeedback:!0,children:n.jsx(R.Password,{})}),n.jsx(O.Item,{name:"confirm_password",label:o("form.confirm_password.label"),dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:o("form.confirm_password.validation.required")},({getFieldValue:e})=>({validator:(t,n)=>n&&e("password")!==n?Promise.reject(new Error(o("form.confirm_password.validation.match"))):Promise.resolve()})],children:n.jsx(R.Password,{})})]}),n.jsx(i.Text,{strong:!0,children:o("form.section.employee_association")}),n.jsx(O.Item,{name:"employee_last_name",label:o("form.label.employee_last_name"),children:n.jsx(R,{placeholder:o("form.placeholder.employee_last_name")})}),n.jsx(O.Item,{name:"employee_first_name",label:o("form.label.employee_first_name"),children:n.jsx(R,{placeholder:o("form.placeholder.employee_first_name")})}),n.jsx(O.Item,{name:"employee_id_card",label:o("form.label.employee_id_card"),tooltip:o("form.tooltip.employee_id_card_for_association"),children:n.jsx(R,{placeholder:o("form.placeholder.employee_id_card")})}),n.jsx(O.Item,{name:"role_ids",label:o("form.roles.label"),rules:[{required:!0,message:o("form.roles.validation.required")}],children:n.jsx(q,{mode:"multiple",allowClear:!0,placeholder:o("form.roles.placeholder"),options:d.map((e=>({label:e.name,value:e.id}))),optionFilterProp:"label"})}),n.jsx(O.Item,{name:"is_active",label:o("form.status.label"),valuePropName:"checked",children:n.jsx(U,{checkedChildren:o("form.status_switch.active"),unCheckedChildren:o("form.status_switch.inactive")})})]})})},Tm=()=>{const{t:e}=Cn(["user","pageTitle","common"]),{message:t}=r.useApp(),a=He.useMemo((()=>({canViewList:!0,canViewDetail:!0,canCreate:!0,canUpdate:!0,canDelete:!0,canExport:!0})),[]),{userPermissions:o,hasPermission:i}=hn(),[s,l]=He.useState([]),[c,d]=He.useState(!1),[u,p]=He.useState([]),[m,f]=He.useState(null),[h,_]=He.useState(!1),[y,g]=He.useState(null),v=He.useCallback((async()=>{d(!0),f(null);try{const t={page:1,size:100},n=await(async e=>(await bt.get("/users",{params:e})).data)(t);if(n&&Array.isArray(n.data)){p(n.data);const t=n.data.map((t=>({key:t.id,id:t.id,username:t.username,employee_id:t.employee_id,roles:t.roles?t.roles.map((t=>t.name||e("common:role.unknown"))):[],is_active:t.is_active,created_at:t.created_at?xm(new Date(t.created_at),"yyyy-MM-dd HH:mm:ss"):e("table.value.not_applicable")})));l(t),f(null)}else l([])}catch(t){l([]),f(t)}finally{d(!1)}}),[e]),x=He.useCallback((async e=>{await jm(Number(e))}),[]),b=He.useCallback((()=>{g(null),_(!0)}),[]),w=He.useCallback((e=>{const t=u.find((t=>t.id===e.id));t&&(g(t),_(!0))}),[u]),j=He.useCallback((e=>{}),[]),S=He.useCallback((()=>{_(!1),g(null),v()}),[v]);return He.useEffect((()=>{i("user:view_list")?v():(l([]),t.warning(e("common:no_permission_to_view_data")))}),[v,o,i,e]),n.jsxs(At,{requiredPermissions:["user:view_list"],showError:!0,children:[n.jsx(wm,{translationNamespaces:["user","pageTitle","common"],pageTitleKey:"pageTitle:user_management",addButtonTextKey:"user_list_page.button.create_user",dataSource:s,loadingData:c,permissions:a,lookupMaps:{users:!0},loadingLookups:!1,errorLookups:m,fetchData:v,deleteItem:x,onAddClick:b,onEditClick:w,onViewDetailsClick:j,generateTableColumns:(e,t,r,a,o,i,s)=>((e,t,r,a,o,i,s,l)=>{const c=[{title:e("table.column.id"),dataIndex:"id",key:"id",width:80,sorter:(e,t)=>e.id-t.id,valueType:"digit",search:!1},{title:e("table.column.username"),dataIndex:"username",key:"username",sorter:(e,t)=>e.username.localeCompare(t.username),valueType:"text",...t("username")},{title:e("table.column.employee_id"),dataIndex:"employee_id",key:"employee_id",width:120,sorter:(e,t)=>(e.employee_id||0)-(t.employee_id||0),valueType:"digit",search:!1},{title:e("table.column.roles"),dataIndex:"roles",key:"roles",search:!1,render:(e,t,r)=>n.jsx("div",{children:t.roles.map(((e,t)=>n.jsx(Y,{color:"blue",children:e},t)))})},{title:e("table.column.is_active"),dataIndex:"is_active",key:"is_active",width:100,search:!1,render:(t,r,a)=>r.is_active?n.jsx(Y,{color:"green",children:e("table.value.active")}):n.jsx(Y,{color:"red",children:e("table.value.inactive")}),filters:[{text:e("table.value.active"),value:!0},{text:e("table.value.inactive"),value:!1}],onFilter:(e,t)=>t.is_active===e},{title:e("table.column.created_at"),dataIndex:"created_at",key:"created_at",width:180,search:!1,valueType:"dateTime"},{title:e("common:action.title"),key:"action",width:120,fixed:"right",render:(t,r,a)=>n.jsxs(k,{size:"small",children:[n.jsx(xn,{actionType:"edit",onClick:()=>{l.find((e=>e.id===r.id))&&o(r)},tooltipTitle:e("tooltip.edit_user")}),n.jsx(xn,{actionType:"delete",danger:!0,onClick:()=>i(String(r.id)),tooltipTitle:e("tooltip.delete_user")})]})}];return c})(e,t,0,0,o,i,0,u),deleteConfirmConfig:{titleKey:"modal.confirm_delete.title",contentKey:"modal.confirm_delete.content",okTextKey:"modal.confirm_delete.ok_text",cancelTextKey:"modal.confirm_delete.cancel_text",successMessageKey:"message.delete_user_success",errorMessageKey:"message.delete_user_error.default"},batchDeleteConfig:{enabled:!0,buttonText:e("admin:auto_text_e689b9"),confirmTitle:e("admin:auto_text_e7a1ae"),confirmContent:e("admin:auto____e7a1ae"),confirmOkText:e("admin:auto_text_e7a1ae"),confirmCancelText:e("admin:auto_text_e58f96"),successMessage:e("admin:auto_text_e689b9"),errorMessage:e("admin:auto_text_e689b9"),noSelectionMessage:e("admin:auto_text_e8afb7"),onBatchDelete:async e=>{await Promise.all(e.map((e=>jm(Number(e))))),v()}},exportConfig:{filenamePrefix:e("admin:auto_text_e794a8"),sheetName:e("admin:auto_text_e794a8"),buttonText:e("admin:auto_excel_e5afbc"),successMessage:e("admin:auto_text_e794a8")},lookupErrorMessageKey:"message.fetch_users_error",lookupLoadingMessageKey:"user_list_page.loading",lookupDataErrorMessageKey:"message.fetch_users_error",rowKey:"key"}),h&&n.jsx(Em,{visible:h,user:y,onClose:()=>{_(!1),g(null)},onSuccess:S})]})},Im="/permissions",Pm=async()=>(await bt.get(`${Im}/`,{params:{size:100}})).data.data,Nm=async e=>{await bt.delete(`${Im}/${e}`)},Am=({visible:e,role:t,onClose:r,onSuccess:a})=>{const{t:o}=Cn(["role","common"]),[i]=O.useForm(),[s,l]=He.useState(!1),[c,d]=He.useState([]),[u,p]=He.useState(!1),[m,f]=He.useState([]),h=!!t;He.useEffect((()=>{e?((async()=>{p(!0);try{const e=await Pm();d(e||[])}catch(e){V.error(o("message.fetch_permissions_error")),d([])}p(!1)})(),setTimeout((()=>{if(t){const e=(t.permissions||[]).map((e=>e.id.toString()));f(e),i.setFieldsValue({name:t.name,code:t.code,permission_ids:e})}else f([]),i.setFieldsValue({name:"",code:"",permission_ids:[]})}),0)):(f([]),i.resetFields())}),[e,t,i]);return n.jsx(B,{title:o(h?"modal.role_form.title.edit":"modal.role_form.title.create"),open:e,onOk:()=>i.submit(),onCancel:r,confirmLoading:s,destroyOnHidden:!0,width:800,children:n.jsxs(O,{form:i,layout:"vertical",name:"roleForm",preserve:!1,onFinish:async e=>{var n;l(!0);const r=m.map((e=>parseInt(e,10)));try{if(h&&t){const n={name:e.name!==t.name?e.name:void 0,code:e.code!==t.code?e.code:void 0,permission_ids:r},a=Object.fromEntries(Object.entries(n).filter((([e,t])=>void 0!==t)));await(async(e,t)=>(await bt.put(`/roles/${e}`,t)).data.data)(t.id,a),V.success(o("message.update_role_success"))}else{if(!e.name||!e.code)return V.error(o("message.create_role_error_name_code_required")),void l(!1);const t={name:e.name,code:e.code,permission_ids:r};await(async e=>(await bt.post("/roles",e)).data.data)(t),V.success(o("message.create_role_success"))}a()}catch(i){let e=h?`${o("message.update_role_error")}`:`${o("message.create_role_error")}`;if(null==(n=i.response)?void 0:n.data){const t=i.response.data,n=t.detail;"string"==typeof n?e=n:"object"==typeof n&&null!==n?"string"==typeof n.message?e=n.message:Array.isArray(n)&&n.length>0&&"string"==typeof n[0].msg?e=n[0].msg:n.error&&"string"==typeof n.error.message?e=n.error.message:"string"==typeof n.error&&(e=n.error):t.error?"string"==typeof t.error?e=t.error:"object"==typeof t.error&&null!==t.error&&"string"==typeof t.error.message&&(e=t.error.message):Array.isArray(t.errors)&&t.errors.length>0&&"string"==typeof t.errors[0].message&&(e=t.errors[0].message),i.response.status}V.error(e)}finally{l(!1)}},onValuesChange:(e,t)=>{},children:[n.jsx(O.Item,{name:"name",label:o("modal.role_form.label.name"),rules:[{required:!0,message:o("modal.role_form.validation.name_required")}],children:n.jsx(R,{})}),n.jsx(O.Item,{name:"code",label:o("modal.role_form.label.code"),rules:[{required:!0,message:o("modal.role_form.validation.code_required")}],children:n.jsx(R,{disabled:h})}),n.jsx(O.Item,{label:o("modal.role_form.label.permissions"),children:n.jsx(H,{dataSource:c.map((e=>({key:e.id.toString(),title:e.code,description:e.description||e.code}))),targetKeys:m,onChange:e=>{f(e),i.setFieldsValue({permission_ids:e})},render:e=>`${e.title} (${e.description})`,disabled:u,showSearch:!0})}),n.jsx(O.Item,{name:"permission_ids",hidden:!0,children:n.jsx(R,{})})]})})},Om=()=>{const{t:e}=Cn(["role","common"]),t=He.useMemo((()=>({canViewList:!0,canViewDetail:!0,canCreate:!0,canUpdate:!0,canDelete:!0,canExport:!0})),[]),[r,a]=He.useState([]),[o,i]=He.useState(!1),[s,l]=He.useState(null),[c,d]=He.useState(!1),[u,p]=He.useState(null),[m,f]=He.useState([]),h=He.useCallback((async e=>{i(!0),l(null);try{const e=await km();a(e.data||[]),l(null)}catch(t){a([]),l(t)}finally{i(!1)}}),[]),_=He.useCallback((async e=>{await Sm(Number(e))}),[]),y=He.useCallback((()=>{p(null),d(!0)}),[]),g=He.useCallback((e=>{p(e),d(!0)}),[]),v=He.useCallback((e=>{}),[]),x=He.useCallback((()=>{d(!1),p(null),h()}),[h]);return He.useEffect((()=>{h()}),[h]),n.jsxs(At,{requiredPermissions:[],showError:!0,children:[n.jsx(wm,{translationNamespaces:["role","common"],pageTitleKey:"role:title",addButtonTextKey:"role:button.create_role",dataSource:r,loadingData:o,permissions:t,lookupMaps:{roles:!0},loadingLookups:!1,errorLookups:s,fetchData:h,deleteItem:_,onAddClick:y,onEditClick:g,onViewDetailsClick:v,generateTableColumns:(e,t,r,a,o,i,s)=>((e,t,r,a,o,i)=>{const s=[{title:e("table.column.id"),dataIndex:"id",key:"id",width:80,sorter:(e,t)=>e.id-t.id,valueType:"digit",search:!1},{title:e("table.column.code"),dataIndex:"code",key:"code",width:150,sorter:(e,t)=>e.code.localeCompare(t.code),valueType:"text",...t("code")},{title:e("table.column.name"),dataIndex:"name",key:"name",width:200,sorter:(e,t)=>e.name.localeCompare(t.name),valueType:"text",...t("name")},{title:e("table.column.permissions"),dataIndex:"permissions",key:"permissions",width:300,search:!1,render:(e,t,n)=>t.permissions&&0!==t.permissions.length?t.permissions.map((e=>e.code)).join(", "):"-"},{title:e("common:action.title"),key:"action",width:120,fixed:"right",render:(t,r,a)=>n.jsxs(k,{size:"small",children:[n.jsx(xn,{actionType:"edit",onClick:()=>o(r),tooltipTitle:e("tooltip.edit_role")}),n.jsx(xn,{actionType:"delete",danger:!0,onClick:()=>i(String(r.id)),tooltipTitle:e("tooltip.delete_role")})]})}];return s})(e,t,0,0,o,i),deleteConfirmConfig:{titleKey:"common:modal.confirm_delete.title",contentKey:"common:modal.confirm_delete.content_item",okTextKey:"common:modal.confirm_delete.ok_text",cancelTextKey:"common:modal.confirm_delete.cancel_text",successMessageKey:"role:delete_success",errorMessageKey:"role:delete_failed"},batchDeleteConfig:{enabled:!0,buttonText:e("role:batch_delete_button",{count:m.length}),confirmTitle:e("role:batch_delete_confirm_title"),confirmContent:e("role:batch_delete_confirm_content",{count:m.length}),confirmOkText:e("common:modal.confirm_delete.ok_text"),confirmCancelText:e("common:modal.confirm_delete.cancel_text"),successMessage:e("role:batch_delete_success",{count:m.length}),errorMessage:e("role:batch_delete_failed"),noSelectionMessage:e("common:message.no_selection_for_batch_delete"),onBatchDelete:async e=>{try{await Promise.all(e.map((e=>Sm(Number(e))))),f([]),h()}catch(t){}}},exportConfig:{filenamePrefix:e("role:export_filename_prefix"),sheetName:e("role:export_sheet_name"),buttonText:"导出Excel",successMessage:e("common:export.success_message")},lookupErrorMessageKey:"common:message.data_loading_error",lookupLoadingMessageKey:"common:loading.generic_loading_text",lookupDataErrorMessageKey:"common:message.data_loading_error",selectedRowKeys:m,setSelectedRowKeys:f,serverSidePagination:!1,serverSideSorting:!1,serverSideFiltering:!1}),n.jsx(Am,{visible:c,role:u,onClose:()=>{d(!1),p(null)},onSuccess:x})]})},Mm=({visible:e,permission:t,onClose:r,onSuccess:a})=>{const{t:o}=Cn(["permission","common"]),[i]=O.useForm(),[s,l]=He.useState(!1),c=!!t;He.useEffect((()=>{e&&(t?i.setFieldsValue({code:t.code,description:t.description}):i.resetFields())}),[e,t,i]);return n.jsx(B,{title:o(c?"form.title.edit":"form.title.create"),open:e,onCancel:r,onOk:()=>i.submit(),confirmLoading:s,destroyOnHidden:!0,width:600,children:n.jsxs(O,{form:i,layout:"vertical",name:"permissionForm",onFinish:async e=>{l(!0);try{if(c&&t)await(async(e,t)=>(await bt.put(`${Im}/${e}`,t)).data.data)(t.id,e),V.success(o("list_page.message.update_success",{permissionCode:e.code}));else{const t=await(async e=>(await bt.post(`${Im}/`,e)).data.data)(e);V.success(o("list_page.message.create_success",{permissionCode:t.code}))}a()}catch(n){const e=c?`${o("list_page.message.update_error_prefix")}${n.message}`:`${o("list_page.message.create_error_prefix")}${n.message}`;V.error(e)}finally{l(!1)}},children:[n.jsx(O.Item,{name:"code",label:o("form.label.code"),rules:[{required:!0,message:o("form.validation.code_required")}],children:n.jsx(R,{placeholder:o("form.placeholder.code")})}),n.jsx(O.Item,{name:"description",label:o("form.label.description"),children:n.jsx(R.TextArea,{rows:3,placeholder:o("form.placeholder.description")})})]})})},Dm=()=>{const{t:e}=Cn(["permission","pageTitle","common"]),t=He.useMemo((()=>({canViewList:!0,canViewDetail:!0,canCreate:!0,canUpdate:!0,canDelete:!0,canExport:!0})),[]),[r,a]=He.useState([]),[o,i]=He.useState(!1),[s,l]=He.useState(null),[c,d]=He.useState(!1),[u,p]=He.useState(null),m=He.useCallback((async()=>{i(!0),l(null);try{const e=await Pm();a(e||[])}catch(e){a([]),l(e)}finally{i(!1)}}),[]),f=He.useCallback((async e=>{await Nm(Number(e))}),[]),h=He.useCallback((()=>{p(null),d(!0)}),[]),_=He.useCallback((e=>{p(e),d(!0)}),[]),y=He.useCallback((e=>{}),[]),g=He.useCallback((()=>{d(!1),p(null),m()}),[m]);return He.useEffect((()=>{m()}),[m]),n.jsxs(At,{requiredPermissions:[],showError:!0,children:[n.jsx(wm,{translationNamespaces:["permission","pageTitle","common"],pageTitleKey:"pageTitle:permission_management",addButtonTextKey:"list_page.button.create_permission",dataSource:r,loadingData:o,permissions:t,lookupMaps:{permissions:!0},loadingLookups:!1,errorLookups:s,fetchData:m,deleteItem:f,onAddClick:h,onEditClick:_,onViewDetailsClick:y,generateTableColumns:(e,t,r,a,o,i,s)=>((e,t,r,a,o,i)=>{const s=[{title:e("list_page.table.column.id"),dataIndex:"id",key:"id",width:80,sorter:(e,t)=>e.id-t.id,valueType:"digit",search:!1},{title:e("list_page.table.column.code"),dataIndex:"code",key:"code",width:200,sorter:(e,t)=>e.code.localeCompare(t.code),valueType:"text",...t("code")},{title:e("list_page.table.column.description"),dataIndex:"description",key:"description",valueType:"text",ellipsis:!0,...t("description")},{title:e("common:action.title"),key:"action",width:120,fixed:"right",render:(t,r,a)=>n.jsxs(k,{size:"small",children:[n.jsx(xn,{actionType:"edit",onClick:()=>o(r),tooltipTitle:e("list_page.tooltip.edit_permission")}),n.jsx(xn,{actionType:"delete",danger:!0,onClick:()=>i(String(r.id)),tooltipTitle:e("list_page.tooltip.delete_permission")})]})}];return s})(e,t,0,0,o,i),deleteConfirmConfig:{titleKey:"list_page.modal.confirm_delete.title",contentKey:"list_page.modal.confirm_delete.content",okTextKey:"list_page.modal.confirm_delete.ok_text",cancelTextKey:"list_page.modal.confirm_delete.cancel_text",successMessageKey:"list_page.message.delete_success",errorMessageKey:"list_page.message.delete_error_prefix"},batchDeleteConfig:{enabled:!0,buttonText:e("admin:batch_delete"),confirmTitle:e("admin:confirm_batch_delete"),confirmContent:e("admin:confirm_batch_delete_content"),confirmOkText:e("admin:confirm"),confirmCancelText:e("admin:cancel"),successMessage:e("admin:batch_delete_success"),errorMessage:e("admin:batch_delete_error"),noSelectionMessage:e("admin:no_selection"),onBatchDelete:async e=>{await Promise.all(e.map((e=>Nm(Number(e))))),m()}},exportConfig:{filenamePrefix:e("admin:permissions"),sheetName:e("admin:permissions"),buttonText:e("admin:export_excel"),successMessage:e("admin:export_success")},lookupErrorMessageKey:"list_page.message.load_list_error_prefix",lookupLoadingMessageKey:"list_page.title",lookupDataErrorMessageKey:"list_page.message.load_list_error_prefix",rowKey:"id"}),c&&n.jsx(Mm,{visible:c,permission:u,onClose:()=>{d(!1),p(null)},onSuccess:g})]})},Lm=bn(K)`
  .ant-tabs-nav {
    margin-bottom: 16px;
  }
  
  .ant-tabs-tab {
    padding: 8px 16px;
    font-weight: 500;
    font-size: 16px; /* 统一字体大小 */
    position: relative;
    transition: all 0.3s;
    
    &.ant-tabs-tab-active {
      font-weight: 600;
      
      .ant-tabs-tab-btn {
        color: var(--ant-primary-color, #1890ff) !important; /* 使用 !important 确保样式优先级 */
      }
      
      &::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 2px;
        background-color: var(--ant-primary-color, #1890ff);
      }
    }
  }
  
  /* 统一标签页字体样式，确保在所有位置显示一致 */
  .ant-tabs-tab-btn {
    font-size: 16px;
    font-family: 'Noto Serif SC', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', serif;
    line-height: 1.5;
  }
  
  .ant-tabs-ink-bar {
    background: var(--ant-primary-color, #1890ff) !important; /* 使用 !important 确保样式优先级 */
    height: 3px !important; /* 增加高亮条的高度 */
  }
  
  /* 确保卡片类型标签页样式一致 */
  &.ant-tabs-card > .ant-tabs-nav .ant-tabs-tab {
    border: 1px solid #f0f0f0;
    background: transparent;
    border-bottom: none;
    
    &.ant-tabs-tab-active {
      background: #fff;
      border-color: #f0f0f0;
      border-bottom: 1px solid #fff;
      
      .ant-tabs-tab-btn {
        color: var(--ant-primary-color, #1890ff) !important;
      }
    }
  }
  
  /* 大尺寸标签样式 */
  &.ant-tabs-large .ant-tabs-tab {
    font-size: 16px;
    padding: 12px 20px;
  }
`,Rm=e=>n.jsx(Lm,{...e}),zm="_tabTitle_esow6_6",$m="_inlineMiddle_esow6_9",Fm="_sectionTitle_esow6_12",qm="_saveButtonFormItem_esow6_16",{Title:Bm,Text:Um}=i,{TextArea:Vm}=R,Ym=()=>{const[e]=O.useForm(),t=tt(),{t:a}=Cn(["admin","common"]),o=wt,{message:i}=r.useApp();return n.jsxs(L,{variant:"borderless",children:[n.jsx(Bm,{level:4,className:zm,children:a("admin:chatbot_settings_title","AI 聊天机器人设置")}),n.jsxs(O,{form:e,layout:"vertical",onFinish:async e=>{try{let n=[];if(e.systemVariables)try{if(n=JSON.parse(e.systemVariables),!Array.isArray(n))throw new Error(a("admin:auto_system_variables__json___537973"))}catch(bd){return void i.error(a("admin:auto_system_variables__e_message__537973",{message:bd.message}))}const r={token:e.token,baseUrl:e.baseUrl,customCss:e.customCss,customJs:e.customJs,systemVariables:n};t(jt(r)),i.success(a("admin:auto_ai___414920"))}catch(n){i.error(a("admin:auto___e4bf9d"))}},initialValues:{token:o.token,baseUrl:o.baseUrl,customCss:o.customCss,customJs:o.customJs,systemVariables:JSON.stringify(o.systemVariables||[],null,2)},colon:!1,children:[n.jsx(O.Item,{children:n.jsxs(M,{align:"middle",gutter:16,children:[n.jsx(D,{children:n.jsx(Um,{className:$m,children:a("admin:enable_ai_chatbot","启用 AI 机器人")})}),n.jsx(D,{children:n.jsx(U,{checked:!1,onChange:e=>{t(kt(e)),i.info(a(e?"admin:ai_enabled_message":"admin:ai_disabled_message",{defaultValue:"AI 机器人已 "+(e?"启用":"禁用")}))},className:$m})})]})}),n.jsx(Bm,{level:5,className:Fm,children:a("admin:main_configuration","主要配置")}),n.jsx(O.Item,{name:"token",label:"Token",rules:[{required:!0,message:a("admin:token_required","请输入 Token")}],tooltip:a("admin:token_tooltip","Dify.AI API Token"),children:n.jsx(R,{})}),n.jsx(O.Item,{name:"baseUrl",label:"Base URL",rules:[{required:!0,message:a("admin:base_url_required","请输入 Base URL")}],tooltip:a("admin:base_url_tooltip","Dify.AI URL (e.g., http://dify.example.com)"),children:n.jsx(R,{})}),n.jsx(Bm,{level:5,className:Fm,children:a("admin:customization","自定义")}),n.jsx(O.Item,{name:"customCss",label:a("admin:custom_css_label"),tooltip:a("admin:custom_css_tooltip","用于自定义 AI 聊天机器人界面的 CSS 样式"),children:n.jsx(Vm,{rows:6,placeholder:a("admin:custom_css_placeholder",".dify-chatbot-bubble-button { background-color: #1c64f2 !important; }\n.dify-chatbot-bubble-window { width: 24rem !important; height: 40rem !important; }")})}),n.jsx(O.Item,{name:"customJs",label:a("admin:custom_js_label"),tooltip:a("admin:custom_js_tooltip","用于自定义 AI 聊天机器人行为的 JavaScript 代码"),children:n.jsx(Vm,{rows:6,placeholder:a("admin:custom_js_placeholder")})}),n.jsx(O.Item,{name:"systemVariables",label:a("admin:system_variables_label"),tooltip:a("admin:system_variables_tooltip","用于传递给 AI 聊天机器人的 JSON 格式系统变量"),children:n.jsx(Vm,{rows:4,placeholder:'[ { "key": "variable_name", "value_type": "string", "value": "variable_value" } ]'})}),n.jsx(O.Item,{className:qm,children:n.jsx(C,{type:"primary",htmlType:"submit",children:a("common:button.save_config","保存配置")})})]})]})},Hm="_configPageContainer_e717y_7",Km="_configPageTitle_e717y_10",{Title:Zm}=i,Wm=()=>{const{t:e}=Cn("admin"),t=[{key:"chatbot",label:e("configpage.tabs.chatbot"),children:n.jsx(Ym,{})}];return n.jsxs("div",{className:Hm,children:[" ",n.jsxs(Zm,{level:2,className:Km,children:[" ",e("configpage.title")]}),n.jsx(L,{children:n.jsx(Rm,{type:"line",size:"large",items:t,defaultActiveKey:"chatbot"})})]})},Gm=()=>n.jsx("div",{children:"Leave Page (Placeholder)"}),Jm=Ge.lazy((()=>_n((()=>import("./EmployeeListPageModern-DKPsnbJl.js")),__vite__mapDeps([2,3,1,4,5,6,7,8,9,10,11,12,13,14])))),Xm=Ge.lazy((()=>_n((()=>import("./EmployeeListPageUniversal-D0jGF0kd.js")),__vite__mapDeps([15,3,1,10,16,7,8,17,18,11,4,5,6,9,12,13,14,19])))),Qm=Ge.lazy((()=>_n((()=>import("./CreateEmployeePageModern-ClHo9Lvo.js")),__vite__mapDeps([20,3,1,5,6,7,8,11,4,9,12,13,14])))),ef=Ge.lazy((()=>_n((()=>import("./EditEmployeePageModern-BpTDv80M.js")),__vite__mapDeps([21,3,1,5,6,7,8,11,4,9,12,13,14])))),tf=Ge.lazy((()=>_n((()=>import("./EmployeeDetailPageModern-BxvZ_0fI.js")),__vite__mapDeps([22,3,1,5,6,7,4,8,9,10,11,12,13,14])))),nf=[{path:"employees",element:Ge.createElement(Ge.Suspense,{fallback:Ge.createElement("div",{className:"page-loading-suspense"},"Loading Employee List...")},Ge.createElement(Jm)),meta:{title:"employee:list_page.page_title",requiredPermissions:["employee:list"],hideInBreadcrumbIfParentOfNext:!0}},{path:"employees/universal",element:Ge.createElement(Ge.Suspense,{fallback:Ge.createElement("div",{className:"page-loading-suspense"},"Loading Universal Employee List...")},Ge.createElement(Xm)),meta:{title:"employee:universal_list_page.page_title",requiredPermissions:["employee:list"],hideInBreadcrumbIfParentOfNext:!0}},{path:"employees/new",element:Ge.createElement(Ge.Suspense,{fallback:Ge.createElement("div",{className:"page-loading-suspense"},"Loading Create Employee...")},Ge.createElement(Qm)),meta:{title:"employee:create_employee_page.title",requiredPermissions:["employee:create"]}},{path:"employees/:employeeId/edit",element:Ge.createElement(Ge.Suspense,{fallback:Ge.createElement("div",{className:"page-loading-suspense"},"Loading Edit Employee...")},Ge.createElement(ef)),meta:{title:"employee:edit_employee_page.title",requiredPermissions:["employee:edit"]}},{path:"employees/:employeeId",element:Ge.createElement(Ge.Suspense,{fallback:Ge.createElement("div",{className:"page-loading-suspense"},"Loading Employee Detail...")},Ge.createElement(tf)),meta:{title:"employee:detail_page.title",requiredPermissions:["employee:view"]}}],rf=e=>{switch(e.toUpperCase()){case"PLANNED":case"DRAFT":case"PENDING_CALCULATION":default:return"default";case"ACTIVE":case"PAID":case"CONFIRMED":return"green";case"CLOSED":case"PROCESSING":case"CALCULATED":return"blue";case"ARCHIVED":return"gray";case"PENDING_REVIEW":case"PENDING_CONFIRMATION":return"orange";case"APPROVED":return"cyan";case"CANCELLED":case"ERROR":return"red";case"ADJUSTED":return"purple"}};let af=null;const of=async()=>{if(af)return af;try{const e=await ot.getPayrollPeriodStatusOptions();return af=e.filter((e=>e.id&&e.code&&e.name)).map((e=>({id:e.id,code:e.code,name:e.name,color:rf(e.code)}))),af}catch(e){return[]}},sf={active:{color:"green",icon:n.jsx(Q,{}),translationKey:"status.active"},inactive:{color:"default",icon:n.jsx(G,{}),translationKey:"status.inactive"},pending:{color:"orange",icon:n.jsx(W,{}),translationKey:"status.pending"},processing:{color:"blue",icon:n.jsx(ee,{spin:!0}),translationKey:"status.processing"},success:{color:"green",icon:n.jsx(Q,{}),translationKey:"status.success"},error:{color:"red",icon:n.jsx(J,{}),translationKey:"status.error"},warning:{color:"orange",icon:n.jsx(J,{}),translationKey:"status.warning"},draft:{color:"default",icon:n.jsx(X,{}),translationKey:"status.draft"},closed:{color:"red",icon:n.jsx(G,{}),translationKey:"status.closed"},archived:{color:"default",icon:n.jsx(X,{}),translationKey:"status.archived"},planned:{color:"blue",icon:n.jsx(W,{}),translationKey:"status.planned"},cancelled:{color:"red",icon:n.jsx(G,{}),translationKey:"status.cancelled"},expired:{color:"red",icon:n.jsx(J,{}),translationKey:"status.expired"},terminated:{color:"red",icon:n.jsx(G,{}),translationKey:"status.terminated"},probation:{color:"orange",icon:n.jsx(W,{}),translationKey:"status.probation"},leave:{color:"orange",icon:n.jsx(W,{}),translationKey:"status.leave"},custom:{color:"default",icon:n.jsx(Z,{}),translationKey:"status.custom"}},lf=({status:e,text:t,color:r,icon:a,showIcon:o=!0,size:i="middle",closable:s=!1,onClose:l,onClick:c,style:d,className:u,translationPrefix:p="status",useTranslation:m=!0})=>{const{t:f}=Cn(["common"]),h=sf[e]||sf.custom,_=r||h.color,y=void 0!==a?a:o?h.icon:void 0,g=n.jsxs(k,{size:4,children:[y,n.jsx("span",{children:(()=>{if(t)return t;if(m){const t=f(`${p}.${e}`,f(`common:status.${e}`,h.translationKey));if(t!==h.translationKey)return t}return f(h.translationKey)})()})]});return n.jsx(Y,{color:_,closable:s,onClose:l,onClick:c,style:{cursor:c?"pointer":"default",fontSize:"small"===i?"12px":"large"===i?"14px":"13px",...d},className:u,children:g})},cf=({form:e,initialValues:t,onFinish:r,onCancel:a,loading:o,isEditMode:i=!1,onStartDateChange:s})=>{const{t:l}=Cn(["payroll_periods","common"]),c=t?{...t,start_date:t.start_date?A(t.start_date):void 0,end_date:t.end_date?A(t.end_date):void 0,pay_date:t.pay_date?A(t.pay_date):void 0,frequency_lookup_value_id:t.frequency_lookup_value_id||117,status_lookup_value_id:t.status_lookup_value_id||137}:{frequency_lookup_value_id:117,status_lookup_value_id:137};return n.jsxs(O,{form:e,layout:"vertical",onFinish:e=>{const t={name:e.name,start_date:e.start_date,end_date:e.end_date,pay_date:e.pay_date,frequency_lookup_value_id:e.frequency_lookup_value_id,status_lookup_value_id:e.status_lookup_value_id};r(t)},initialValues:c,children:[n.jsx(O.Item,{name:"name",label:l("payroll_periods:payroll_period_form.label.name"),rules:[{required:!0,message:l("payroll_periods:payroll_period_form.validation.name_required")}],children:n.jsx(R,{placeholder:l("payroll_periods:payroll_period_form.placeholder.name")})}),n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"start_date",label:l("payroll_periods:payroll_period_form.label.start_date"),rules:[{required:!0,message:l("payroll_periods:payroll_period_form.validation.start_date_required")}],children:n.jsx(te,{style:{width:"100%"},format:"YYYY-MM-DD",onChange:s})})}),n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"end_date",label:l("payroll_periods:payroll_period_form.label.end_date"),rules:[{required:!0,message:l("payroll_periods:payroll_period_form.validation.end_date_required")},({getFieldValue:e})=>({validator:(t,n)=>n&&e("start_date")&&n.isBefore(e("start_date"))?Promise.reject(new Error(l("payroll_periods:payroll_period_form.validation.end_date_before_start_date"))):Promise.resolve()})],children:n.jsx(te,{style:{width:"100%"},format:"YYYY-MM-DD"})})})]}),n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"pay_date",label:l("payroll_periods:payroll_period_form.label.pay_date"),rules:[{required:!0,message:l("payroll_periods:payroll_period_form.validation.pay_date_required")}],children:n.jsx(te,{style:{width:"100%"},format:"YYYY-MM-DD"})})}),n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"frequency_lookup_value_id",label:l("payroll_periods:payroll_period_form.label.frequency"),rules:[{required:!0,message:l("payroll_periods:payroll_period_form.validation.frequency_required")}],children:n.jsxs(q,{placeholder:l("payroll_periods:payroll_period_form.placeholder.frequency"),children:[n.jsx(q.Option,{value:117,children:"月度"}),n.jsx(q.Option,{value:118,children:"季度"}),n.jsx(q.Option,{value:119,children:"年度"})]})})})]}),n.jsx(O.Item,{name:"status_lookup_value_id",label:l("payroll_periods:payroll_period_form.label.status"),rules:[{required:!0,message:l("payroll_periods:payroll_period_form.validation.status_required")}],children:n.jsx(q,{placeholder:l("payroll_periods:payroll_period_form.placeholder.status"),children:Ot.map((e=>n.jsx(q.Option,{value:e.id,children:String(l(e.display_name_key,{ns:"payroll_periods"}))},e.id)))})}),n.jsxs(M,{justify:"end",gutter:8,style:{marginTop:24},children:[a&&n.jsx(D,{children:n.jsx(C,{onClick:a,disabled:o,children:l("payroll_periods:payroll_period_form.button.cancel")})}),n.jsx(D,{children:n.jsx(C,{type:"primary",htmlType:"submit",loading:o,children:l(i?"payroll_periods:payroll_period_form.button.save_changes":"payroll_periods:payroll_period_form.button.create_period")})})]})]})},df=({visible:e,period:t,onClose:a,onSuccess:o})=>{const{t:i}=Cn(["payroll_periods","common","pageTitle"]),[s]=O.useForm(),[l,c]=Ge.useState(!1),{message:d}=r.useApp(),u=!!t;He.useEffect((()=>{e&&(t?s.setFieldsValue({name:t.name,start_date:t.start_date?A(t.start_date):void 0,end_date:t.end_date?A(t.end_date):void 0,pay_date:t.pay_date?A(t.pay_date):void 0,frequency_lookup_value_id:t.frequency_lookup_value_id||117,status_lookup_value_id:t.status_lookup_value_id||137}):s.resetFields())}),[e,t,s]);return n.jsx(B,{title:i(u?"pageTitle:edit_payroll_period":"pageTitle:create_payroll_period"),open:e,onCancel:a,footer:null,width:800,destroyOnHidden:!0,children:n.jsx(cf,{form:s,onFinish:async e=>{c(!0);try{const n={name:e.name,start_date:e.start_date.format("YYYY-MM-DD"),end_date:e.end_date.format("YYYY-MM-DD"),pay_date:e.pay_date.format("YYYY-MM-DD"),frequency_lookup_value_id:Number(e.frequency_lookup_value_id),status_lookup_value_id:Number(e.status_lookup_value_id)};u&&t?(await Mt(t.id,n),d.success(i("payroll_periods_page.message.update_success"))):(await Dt(n),d.success(i("payroll_periods_page.message.create_success"))),o()}catch(n){d.error(i(u?"payroll_periods_page.message.update_failed":"payroll_periods_page.message.create_failed"))}finally{c(!1)}},onCancel:a,loading:l,isEditMode:u,onStartDateChange:e=>{if(e&&!u){const n={key:"payroll:period.monthly_payroll",params:{month:(t=e).format("MMMM"),year:t.year()}},r=i(n.key,n.params);s.setFieldsValue({name:r})}var t}})})},{Header:uf,Content:pf}=o,mf=({title:e,subtitle:t,headerExtra:r,children:a,showBreadcrumb:i=!1,breadcrumbItems:s=[],className:l="",fullWidth:c=!1})=>{const{t:d}=Cn();return n.jsxs(o,{className:`modern-page-container ${l}`,children:[n.jsx(uf,{className:"modern-page-header",children:n.jsxs("div",{className:"header-content "+(c?"full-width":""),children:[i&&s.length>0&&n.jsx("nav",{className:"breadcrumb-nav",children:s.map(((e,t)=>n.jsxs("span",{className:"breadcrumb-item",children:[e.href?n.jsx("a",{href:e.href,className:"breadcrumb-link",children:e.title}):n.jsx("span",{className:"breadcrumb-text",children:e.title}),t<s.length-1&&n.jsx("span",{className:"breadcrumb-separator",children:"/"})]},t)))}),n.jsxs("div",{className:"title-section",children:[n.jsxs("div",{className:"title-content",children:[n.jsx("h1",{className:"page-title",children:e}),t&&n.jsx("p",{className:"page-subtitle",children:t})]}),r&&n.jsx("div",{className:"header-extra",children:r})]})]})}),n.jsx(pf,{className:"modern-page-content "+(c?"full-width":""),children:n.jsx("div",{className:"content-wrapper",children:a})})]})},ff=({className:e="",variant:t="outlined",hoverable:r=!0,loading:a=!1,icon:o,title:i,subtitle:s,actions:l,modern:c=!0,children:d,...u})=>{const p=[c?"modern-card":"",`variant-${t}`,r?"hoverable":"",a?"loading":"",e].filter(Boolean).join(" ");return n.jsxs(L,{...u,className:p,title:(()=>{if(i||o)return n.jsxs("div",{className:"card-title-wrapper",children:[o&&n.jsx("span",{className:"card-icon",children:o}),i&&n.jsx("span",{className:"card-title-text",children:i})]})})(),extra:s?n.jsx("div",{className:"card-subtitle",children:s}):u.extra,loading:a,children:[n.jsx("div",{className:"card-content-wrapper",children:d}),l&&n.jsx("div",{className:"card-actions",children:l})]})},{Title:hf,Text:_f}=i,yf="/payroll/calculation",gf=e=>bt.post(`${yf}/trigger`,e),{Option:vf}=q,{Title:xf,Text:bf}=i,{Option:wf}=q,{Title:jf}=i,{Title:kf,Text:Sf}=i,Cf=({ruleSets:e,onCreateRuleSet:t,onUpdateRuleSet:r,onActivateRuleSet:a,onDeactivateRuleSet:o})=>{const{t:i}=Cn(["payroll","common"]),[s]=O.useForm(),[l,c]=He.useState(!1),[d,u]=He.useState(null),[p,m]=He.useState(!1),f=[{title:i("payroll:calculation_config.rule_set_name"),dataIndex:"name",key:"name",width:200},{title:i("payroll:calculation_config.description"),dataIndex:"description",key:"description",ellipsis:!0},{title:i("payroll:calculation_config.effective_date"),dataIndex:"effective_date",key:"effective_date",width:120,render:e=>A(e).format("YYYY-MM-DD")},{title:i("payroll:calculation_config.expiry_date"),dataIndex:"expiry_date",key:"expiry_date",width:120,render:e=>e?A(e).format("YYYY-MM-DD"):"-"},{title:i("common:status"),dataIndex:"is_active",key:"is_active",width:100,render:e=>n.jsx(Y,{color:e?"green":"red",children:i(e?"common:active":"common:inactive")})},{title:String(i("payroll:calculation_config.rules_count")),key:"rules_count",width:100,render:(e,t,n)=>{var r;return(null==(r=t.rules)?void 0:r.length)||0}},{key:"actions",title:i("common:action.title"),width:200,render:(e,t,r)=>n.jsxs(k,{children:[n.jsx(C,{type:"link",size:"small",icon:n.jsx(me,{}),onClick:()=>h(t),children:i("common:edit")}),t.is_active?n.jsx(C,{type:"link",size:"small",icon:n.jsx(fe,{}),onClick:()=>y(t.id),children:i("common:deactivate")}):n.jsx(C,{type:"link",size:"small",icon:n.jsx(oe,{}),onClick:()=>_(t.id),children:i("common:activate")})]})}],h=e=>{u(e),s.setFieldsValue({name:e.name,description:e.description,effective_date:A(e.effective_date),expiry_date:e.expiry_date?A(e.expiry_date):null}),c(!0)},_=async e=>{try{await a(e)}catch(t){V.error(i("common:error.operation_failed"))}},y=async e=>{try{await o(e)}catch(t){V.error(i("common:error.operation_failed"))}};return n.jsxs("div",{className:"calculation-rule-set-manager",children:[n.jsx("div",{style:{marginBottom:16},children:n.jsx(C,{type:"primary",icon:n.jsx(se,{}),onClick:()=>{u(null),s.resetFields(),c(!0)},children:i("payroll:calculation_config.create_rule_set")})}),n.jsx(he,{columns:f,dataSource:e,rowKey:"id",pagination:{showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>i("common:pagination.total",{total:e})}}),n.jsx(B,{title:i(d?"payroll:calculation_config.edit_rule_set":"payroll:calculation_config.create_rule_set"),open:l,onOk:async()=>{try{m(!0);const e=await s.validateFields(),n={name:e.name,description:e.description,effective_date:e.effective_date.format("YYYY-MM-DD"),expiry_date:e.expiry_date?e.expiry_date.format("YYYY-MM-DD"):void 0};d?await r(d.id,n):await t(n),c(!1),s.resetFields()}catch(e){}finally{m(!1)}},onCancel:()=>{c(!1),s.resetFields(),u(null)},confirmLoading:p,width:600,children:n.jsxs(O,{form:s,layout:"vertical",initialValues:{effective_date:A()},children:[n.jsx(O.Item,{name:"name",label:i("payroll:calculation_config.rule_set_name"),rules:[{required:!0,message:i("common:validation.required")},{max:100,message:i("common:validation.max_length",{max:100})}],children:n.jsx(R,{placeholder:i("payroll:calculation_config.rule_set_name_placeholder")})}),n.jsx(O.Item,{name:"description",label:i("payroll:calculation_config.description"),rules:[{max:500,message:i("common:validation.max_length",{max:500})}],children:n.jsx(R.TextArea,{rows:3,placeholder:i("payroll:calculation_config.description_placeholder")})}),n.jsx(O.Item,{name:"effective_date",label:i("payroll:calculation_config.effective_date"),rules:[{required:!0,message:i("common:validation.required")}],children:n.jsx(te,{style:{width:"100%"}})}),n.jsx(O.Item,{name:"expiry_date",label:i("payroll:calculation_config.expiry_date"),children:n.jsx(te,{style:{width:"100%"}})})]})})]})},Ef=({configs:e,onCreateConfig:t,onUpdateConfig:r})=>{const{t:a}=Cn(["payroll","common"]),[o]=O.useForm(),[i,s]=He.useState(!1),[l,c]=He.useState(null),[d,u]=He.useState(!1),{getPersonnelCategoryNamesString:p}=(()=>{const[e,t]=He.useState([]),[n,r]=He.useState(!1),[a,o]=He.useState(null),{lookupMaps:i}=wn();He.useEffect((()=>{if(i&&i.personnelCategoryMap){const e=Array.from(i.personnelCategoryMap.entries()).map((([e,t])=>({id:parseInt(e,10),name:t,code:e})));t(e)}}),[i]);const s=t=>t&&Array.isArray(t)?t.map((t=>{const n=e.find((e=>e.id===t));return n?n.name:`未知类别(${t})`})).filter(Boolean):[];return{personnelCategories:e,loading:n,error:a,getPersonnelCategoryNames:s,getPersonnelCategoryNamesString:e=>s(e).join(", ")}})(),m=[{title:a("payroll:calculation_config.config_name"),dataIndex:"name",key:"name",width:120},{title:a("payroll:calculation_config.region"),dataIndex:"region",key:"region",width:80},{title:"适用人员身份",dataIndex:"applicable_personnel_categories",key:"applicable_personnel_categories",width:200,render:e=>{if(!e||0===e.length)return n.jsx(Y,{color:"default",children:"全部人员"});const t=p(e),r=t.length>30?`${t.substring(0,30)}...`:t;return n.jsx(ne,{title:t,placement:"topLeft",children:n.jsx(Y,{color:"blue",icon:n.jsx(_e,{}),children:r})})}},{title:a("payroll:calculation_config.effective_date"),dataIndex:"effective_date",key:"effective_date",width:100,render:e=>A(e).format("YYYY-MM-DD")},{title:a("payroll:calculation_config.pension_rate"),key:"pension_rate",width:110,render:(e,t,n)=>`${(100*t.pension_employee_rate).toFixed(1)}% / ${(100*t.pension_employer_rate).toFixed(1)}%`},{title:a("payroll:calculation_config.unemployment_rate"),key:"unemployment_rate",width:110,render:(e,t,n)=>`${(100*t.unemployment_employee_rate).toFixed(1)}% / ${(100*t.unemployment_employer_rate).toFixed(1)}%`},{title:a("payroll:calculation_config.injury_rate"),key:"injury_rate",width:90,render:(e,t,n)=>`${(100*t.injury_employer_rate).toFixed(1)}%`},{title:a("common:status"),dataIndex:"is_active",key:"is_active",width:80,render:e=>n.jsx(Y,{color:e?"green":"red",children:a(e?"common:active":"common:inactive")})},{key:"actions",title:a("common:action.title"),render:(e,t)=>n.jsx(k,{children:n.jsx(C,{type:"link",size:"small",icon:n.jsx(me,{}),onClick:()=>f(t),children:a("common:edit")})})}],f=e=>{c(e),o.setFieldsValue({name:e.name,region:e.region,effective_date:A(e.effective_date),expiry_date:e.expiry_date?A(e.expiry_date):null,pension_employee_rate:100*e.pension_employee_rate,pension_employer_rate:100*e.pension_employer_rate,occupational_pension_employee_rate:100*(e.occupational_pension_employee_rate||0),occupational_pension_employer_rate:100*(e.occupational_pension_employer_rate||0),medical_employee_rate:100*e.medical_employee_rate,medical_employer_rate:100*e.medical_employer_rate,serious_illness_employee_rate:100*(e.serious_illness_employee_rate||0),serious_illness_employer_rate:100*(e.serious_illness_employer_rate||0),unemployment_employee_rate:100*e.unemployment_employee_rate,unemployment_employer_rate:100*e.unemployment_employer_rate,injury_employer_rate:100*e.injury_employer_rate,maternity_employer_rate:100*e.maternity_employer_rate,housing_fund_employee_rate:100*e.housing_fund_employee_rate,housing_fund_employer_rate:100*e.housing_fund_employer_rate,pension_base_min:e.pension_base_min,pension_base_max:e.pension_base_max,medical_base_min:e.medical_base_min,medical_base_max:e.medical_base_max,unemployment_base_min:e.unemployment_base_min,unemployment_base_max:e.unemployment_base_max,housing_fund_base_min:e.housing_fund_base_min,housing_fund_base_max:e.housing_fund_base_max,base_calculation_method:e.base_calculation_method}),s(!0)};return n.jsxs("div",{className:"social-insurance-config-manager",children:[n.jsx("div",{style:{marginBottom:16},children:n.jsx(C,{type:"primary",icon:n.jsx(se,{}),onClick:()=>{c(null),o.resetFields(),o.setFieldsValue({effective_date:A(),base_calculation_method:"GROSS_SALARY",pension_employee_rate:8,pension_employer_rate:16,occupational_pension_employee_rate:4,occupational_pension_employer_rate:8,unemployment_employee_rate:.4,unemployment_employer_rate:.6,injury_employer_rate:.2,medical_employee_rate:2,medical_employer_rate:8,serious_illness_employee_rate:0,serious_illness_employer_rate:.75,maternity_employer_rate:.8,housing_fund_employee_rate:12,housing_fund_employer_rate:12}),s(!0)},children:a("payroll:calculation_config.create_social_insurance_config")})}),n.jsx(he,{columns:m,dataSource:e,rowKey:"id",scroll:{x:1200},pagination:{showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>a("common:pagination.total",{total:e})}}),n.jsx(B,{title:a(l?"payroll:calculation_config.edit_social_insurance_config":"payroll:calculation_config.create_social_insurance_config"),open:i,onOk:async()=>{try{u(!0);const e=await o.validateFields(),n={name:e.name,region:e.region,effective_date:e.effective_date.format("YYYY-MM-DD"),expiry_date:e.expiry_date?e.expiry_date.format("YYYY-MM-DD"):void 0,pension_employee_rate:e.pension_employee_rate/100,pension_employer_rate:e.pension_employer_rate/100,occupational_pension_employee_rate:(e.occupational_pension_employee_rate||0)/100,occupational_pension_employer_rate:(e.occupational_pension_employer_rate||0)/100,medical_employee_rate:e.medical_employee_rate/100,medical_employer_rate:e.medical_employer_rate/100,serious_illness_employee_rate:(e.serious_illness_employee_rate||0)/100,serious_illness_employer_rate:(e.serious_illness_employer_rate||0)/100,unemployment_employee_rate:e.unemployment_employee_rate/100,unemployment_employer_rate:e.unemployment_employer_rate/100,injury_employer_rate:e.injury_employer_rate/100,maternity_employer_rate:e.maternity_employer_rate/100,housing_fund_employee_rate:e.housing_fund_employee_rate/100,housing_fund_employer_rate:e.housing_fund_employer_rate/100,pension_base_min:e.pension_base_min,pension_base_max:e.pension_base_max,medical_base_min:e.medical_base_min,medical_base_max:e.medical_base_max,unemployment_base_min:e.unemployment_base_min,unemployment_base_max:e.unemployment_base_max,housing_fund_base_min:e.housing_fund_base_min,housing_fund_base_max:e.housing_fund_base_max,base_calculation_method:e.base_calculation_method};l?await r(l.id,n):await t(n),s(!1),o.resetFields()}catch(e){}finally{u(!1)}},onCancel:()=>{s(!1),o.resetFields(),c(null)},confirmLoading:d,width:900,children:n.jsxs(O,{form:o,layout:"vertical",initialValues:{effective_date:A(),base_calculation_method:"GROSS_SALARY"},children:[n.jsx(ye,{orientation:"left",children:a("payroll:calculation_config.basic_info")}),n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"name",label:a("payroll:calculation_config.config_name"),rules:[{required:!0,message:a("common:validation.required")}],children:n.jsx(R,{placeholder:"请输入配置名称"})})}),n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"region",label:a("payroll:calculation_config.region"),rules:[{required:!0,message:a("common:validation.required")}],children:n.jsx(R,{placeholder:"请输入适用地区"})})})]}),n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"effective_date",label:a("payroll:calculation_config.effective_date"),rules:[{required:!0,message:a("common:validation.required")}],children:n.jsx(te,{style:{width:"100%"}})})}),n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"expiry_date",label:a("payroll:calculation_config.expiry_date"),children:n.jsx(te,{style:{width:"100%"}})})})]}),n.jsx(O.Item,{name:"base_calculation_method",label:a("payroll:calculation_config.base_calculation_method"),rules:[{required:!0,message:a("common:validation.required")}],children:n.jsxs(q,{children:[n.jsx(q.Option,{value:"BASIC_SALARY",children:a("payroll:calculation_config.basic_salary")}),n.jsx(q.Option,{value:"GROSS_SALARY",children:a("payroll:calculation_config.gross_salary")}),n.jsx(q.Option,{value:"TOTAL_SALARY",children:a("payroll:calculation_config.total_salary")}),n.jsx(q.Option,{value:"CUSTOM",children:a("payroll:calculation_config.custom")})]})}),n.jsx(ye,{orientation:"left",children:a("payroll:calculation_config.insurance_rates")}),n.jsx("h4",{style:{color:"#1890ff",marginBottom:16},children:a("payroll:calculation_config.pension_insurance")}),n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"pension_employee_rate",label:a("payroll:calculation_config.pension_employee_rate"),rules:[{required:!0,message:a("common:validation.required")}],children:n.jsx(ge,{min:0,max:100,precision:2,addonAfter:"%",style:{width:"100%"},placeholder:"8.00"})})}),n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"pension_employer_rate",label:a("payroll:calculation_config.pension_employer_rate"),rules:[{required:!0,message:a("common:validation.required")}],children:n.jsx(ge,{min:0,max:100,precision:2,addonAfter:"%",style:{width:"100%"},placeholder:"16.00"})})})]}),n.jsx("h5",{style:{color:"#722ed1",marginBottom:16,marginLeft:16},children:a("payroll:calculation_config.occupational_pension")}),n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"occupational_pension_employee_rate",label:a("payroll:calculation_config.occupational_pension_employee_rate"),children:n.jsx(ge,{min:0,max:100,precision:2,addonAfter:"%",style:{width:"100%"},placeholder:"4.00"})})}),n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"occupational_pension_employer_rate",label:a("payroll:calculation_config.occupational_pension_employer_rate"),children:n.jsx(ge,{min:0,max:100,precision:2,addonAfter:"%",style:{width:"100%"},placeholder:"8.00"})})})]}),n.jsx("h4",{style:{color:"#1890ff",marginBottom:16},children:a("payroll:calculation_config.unemployment_insurance")}),n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"unemployment_employee_rate",label:a("payroll:calculation_config.unemployment_employee_rate"),rules:[{required:!0,message:a("common:validation.required")}],children:n.jsx(ge,{min:0,max:100,precision:2,addonAfter:"%",style:{width:"100%"},placeholder:"0.40"})})}),n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"unemployment_employer_rate",label:a("payroll:calculation_config.unemployment_employer_rate"),rules:[{required:!0,message:a("common:validation.required")}],children:n.jsx(ge,{min:0,max:100,precision:2,addonAfter:"%",style:{width:"100%"},placeholder:"0.60"})})})]}),n.jsx("h4",{style:{color:"#1890ff",marginBottom:16},children:a("payroll:calculation_config.injury_insurance")}),n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"injury_employer_rate",label:a("payroll:calculation_config.injury_employer_rate"),rules:[{required:!0,message:a("common:validation.required")}],children:n.jsx(ge,{min:0,max:100,precision:2,addonAfter:"%",style:{width:"100%"},placeholder:"0.20"})})}),n.jsx(D,{span:12,children:n.jsx("div",{style:{color:"#999",fontSize:"12px",marginTop:"8px"},children:a("payroll:calculation_config.injury_insurance_note")})})]}),n.jsx("h4",{style:{color:"#1890ff",marginBottom:16},children:a("payroll:calculation_config.medical_insurance")}),n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"medical_employee_rate",label:a("payroll:calculation_config.medical_employee_rate"),rules:[{required:!0,message:a("common:validation.required")}],children:n.jsx(ge,{min:0,max:100,precision:2,addonAfter:"%",style:{width:"100%"},placeholder:"2.00"})})}),n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"medical_employer_rate",label:a("payroll:calculation_config.medical_employer_rate"),rules:[{required:!0,message:a("common:validation.required")}],children:n.jsx(ge,{min:0,max:100,precision:2,addonAfter:"%",style:{width:"100%"},placeholder:"8.00"})})})]}),n.jsx("h5",{style:{color:"#722ed1",marginBottom:16,marginLeft:16},children:a("payroll:calculation_config.serious_illness_insurance")}),n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"serious_illness_employee_rate",label:a("payroll:calculation_config.serious_illness_employee_rate"),children:n.jsx(ge,{min:0,max:100,precision:2,addonAfter:"%",style:{width:"100%"},placeholder:"0.00"})})}),n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"serious_illness_employer_rate",label:a("payroll:calculation_config.serious_illness_employer_rate"),children:n.jsx(ge,{min:0,max:100,precision:2,addonAfter:"%",style:{width:"100%"},placeholder:"0.75"})})})]}),n.jsx("h4",{style:{color:"#1890ff",marginBottom:16},children:a("payroll:calculation_config.maternity_insurance")}),n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"maternity_employer_rate",label:a("payroll:calculation_config.maternity_employer_rate"),rules:[{required:!0,message:a("common:validation.required")}],children:n.jsx(ge,{min:0,max:100,precision:2,addonAfter:"%",style:{width:"100%"},placeholder:"0.80"})})}),n.jsx(D,{span:12,children:n.jsx("div",{style:{color:"#999",fontSize:"12px",marginTop:"8px"},children:a("payroll:calculation_config.maternity_insurance_note")})})]}),n.jsx("h4",{style:{color:"#1890ff",marginBottom:16},children:a("payroll:calculation_config.housing_fund")}),n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"housing_fund_employee_rate",label:a("payroll:calculation_config.housing_fund_employee_rate"),rules:[{required:!0,message:a("common:validation.required")}],children:n.jsx(ge,{min:0,max:100,precision:2,addonAfter:"%",style:{width:"100%"},placeholder:"12.00"})})}),n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"housing_fund_employer_rate",label:a("payroll:calculation_config.housing_fund_employer_rate"),rules:[{required:!0,message:a("common:validation.required")}],children:n.jsx(ge,{min:0,max:100,precision:2,addonAfter:"%",style:{width:"100%"},placeholder:"12.00"})})})]}),n.jsx(ye,{orientation:"left",children:a("payroll:calculation_config.insurance_base_limits")}),n.jsx("h4",{style:{color:"#52c41a",marginBottom:16},children:a("payroll:calculation_config.pension_base_limits")}),n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"pension_base_min",label:a("payroll:calculation_config.pension_base_min"),children:n.jsx(ge,{min:0,precision:2,style:{width:"100%"},placeholder:"最低缴费基数"})})}),n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"pension_base_max",label:a("payroll:calculation_config.pension_base_max"),children:n.jsx(ge,{min:0,precision:2,style:{width:"100%"},placeholder:"最高缴费基数"})})})]}),n.jsx("h4",{style:{color:"#52c41a",marginBottom:16},children:a("payroll:calculation_config.unemployment_base_limits")}),n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"unemployment_base_min",label:a("payroll:calculation_config.unemployment_base_min"),children:n.jsx(ge,{min:0,precision:2,style:{width:"100%"},placeholder:"最低缴费基数"})})}),n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"unemployment_base_max",label:a("payroll:calculation_config.unemployment_base_max"),children:n.jsx(ge,{min:0,precision:2,style:{width:"100%"},placeholder:"最高缴费基数"})})})]}),n.jsx("h4",{style:{color:"#52c41a",marginBottom:16},children:a("payroll:calculation_config.medical_base_limits")}),n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"medical_base_min",label:a("payroll:calculation_config.medical_base_min"),children:n.jsx(ge,{min:0,precision:2,style:{width:"100%"},placeholder:"最低缴费基数"})})}),n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"medical_base_max",label:a("payroll:calculation_config.medical_base_max"),children:n.jsx(ge,{min:0,precision:2,style:{width:"100%"},placeholder:"最高缴费基数"})})})]}),n.jsx("h4",{style:{color:"#52c41a",marginBottom:16},children:a("payroll:calculation_config.housing_fund_base_limits")}),n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"housing_fund_base_min",label:a("payroll:calculation_config.housing_fund_base_min"),children:n.jsx(ge,{min:0,precision:2,style:{width:"100%"},placeholder:"最低缴费基数"})})}),n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"housing_fund_base_max",label:a("payroll:calculation_config.housing_fund_base_max"),children:n.jsx(ge,{min:0,precision:2,style:{width:"100%"},placeholder:"最高缴费基数"})})})]})]})})]})},Tf=({configs:e,onCreateConfig:t,onUpdateConfig:r})=>{const{t:a}=Cn(["payroll","common"]),[o]=O.useForm(),[i,s]=He.useState(!1),[l,c]=He.useState(null),[d,u]=He.useState(!1),[p,m]=He.useState([]),f=[{title:a("payroll:calculation_config.config_name"),dataIndex:"name",key:"name",width:150},{title:a("payroll:calculation_config.tax_year"),dataIndex:"tax_year",key:"tax_year",width:100},{title:a("payroll:calculation_config.effective_date"),dataIndex:"effective_date",key:"effective_date",width:120,render:e=>A(e).format("YYYY-MM-DD")},{title:a("payroll:calculation_config.standard_deduction"),dataIndex:"standard_deduction",key:"standard_deduction",width:120,render:e=>`¥${e.toLocaleString()}`},{title:a("payroll:calculation_config.tax_brackets_count"),key:"tax_brackets_count",width:100,render:(e,t)=>{var n;return(null==(n=t.tax_brackets)?void 0:n.length)||0}},{title:a("common:status"),dataIndex:"is_active",key:"is_active",width:80,render:e=>n.jsx(Y,{color:e?"green":"red",children:a(e?"common:active":"common:inactive")})},{title:a("common:action.title"),key:"actions",width:100,render:(e,t)=>n.jsx(C,{type:"link",size:"small",icon:n.jsx(me,{}),onClick:()=>_(t),children:a("common:edit")})}],h=[{title:a("payroll:calculation_config.min_amount"),dataIndex:"min_amount",key:"min_amount",render:e=>`¥${e.toLocaleString()}`},{title:a("payroll:calculation_config.max_amount"),dataIndex:"max_amount",key:"max_amount",render:e=>e?`¥${e.toLocaleString()}`:a("payroll:calculation_config.unlimited")},{title:a("payroll:calculation_config.tax_rate"),dataIndex:"tax_rate",key:"tax_rate",render:e=>`${(100*e).toFixed(1)}%`},{title:a("payroll:calculation_config.quick_deduction"),dataIndex:"quick_deduction",key:"quick_deduction",render:e=>`¥${e.toLocaleString()}`},{title:a("common:action.title"),key:"actions",render:(e,t,r)=>n.jsx(C,{type:"link",size:"small",icon:n.jsx(ve,{}),onClick:()=>y(r),children:a("common:delete")})}],_=e=>{c(e),m(e.tax_brackets||[]),o.setFieldsValue({name:e.name,tax_year:e.tax_year,effective_date:A(e.effective_date),expiry_date:e.expiry_date?A(e.expiry_date):null,standard_deduction:e.standard_deduction,additional_deduction_child:e.additional_deduction_child,additional_deduction_elderly:e.additional_deduction_elderly,additional_deduction_education:e.additional_deduction_education,additional_deduction_housing:e.additional_deduction_housing,additional_deduction_medical:e.additional_deduction_medical}),s(!0)},y=e=>{const t=p.filter(((t,n)=>n!==e));m(t)};return n.jsxs("div",{className:"tax-config-manager",children:[n.jsx("div",{style:{marginBottom:16},children:n.jsx(C,{type:"primary",icon:n.jsx(se,{}),onClick:()=>{c(null),o.resetFields(),m([]),s(!0)},children:a("payroll:calculation_config.create_tax_config")})}),n.jsx(he,{columns:f,dataSource:e,rowKey:"id",pagination:{showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>a("common:pagination.total",{total:e})}}),n.jsx(B,{title:a(l?"payroll:calculation_config.edit_tax_config":"payroll:calculation_config.create_tax_config"),open:i,onOk:async()=>{try{u(!0);const e=await o.validateFields();if(0===p.length)throw new Error(a("payroll:calculation_config.tax_brackets_required"));const n={name:e.name,tax_year:e.tax_year,effective_date:e.effective_date.format("YYYY-MM-DD"),expiry_date:e.expiry_date?e.expiry_date.format("YYYY-MM-DD"):void 0,tax_brackets:p,standard_deduction:e.standard_deduction,additional_deduction_child:e.additional_deduction_child||0,additional_deduction_elderly:e.additional_deduction_elderly||0,additional_deduction_education:e.additional_deduction_education||0,additional_deduction_housing:e.additional_deduction_housing||0,additional_deduction_medical:e.additional_deduction_medical||0};l?await r(l.id,n):await t(n),s(!1),o.resetFields(),m([])}catch(e){}finally{u(!1)}},onCancel:()=>{s(!1),o.resetFields(),c(null),m([])},confirmLoading:d,width:900,children:n.jsxs(O,{form:o,layout:"vertical",initialValues:{effective_date:A(),tax_year:(new Date).getFullYear()},children:[n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"name",label:a("payroll:calculation_config.config_name"),rules:[{required:!0,message:a("common:validation.required")}],children:n.jsx(R,{})})}),n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"tax_year",label:a("payroll:calculation_config.tax_year"),rules:[{required:!0,message:a("common:validation.required")}],children:n.jsx(ge,{min:2e3,max:2100,style:{width:"100%"}})})})]}),n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"effective_date",label:a("payroll:calculation_config.effective_date"),rules:[{required:!0,message:a("common:validation.required")}],children:n.jsx(te,{style:{width:"100%"}})})}),n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"expiry_date",label:a("payroll:calculation_config.expiry_date"),children:n.jsx(te,{style:{width:"100%"}})})})]}),n.jsx(O.Item,{name:"standard_deduction",label:a("payroll:calculation_config.standard_deduction"),rules:[{required:!0,message:a("common:validation.required")}],children:n.jsx(ge,{min:0,precision:2,style:{width:"100%"},addonBefore:"¥"})}),n.jsx(ye,{children:a("payroll:calculation_config.additional_deductions")}),n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"additional_deduction_child",label:a("payroll:calculation_config.child_deduction"),children:n.jsx(ge,{min:0,precision:2,style:{width:"100%"},addonBefore:"¥"})})}),n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"additional_deduction_elderly",label:a("payroll:calculation_config.elderly_deduction"),children:n.jsx(ge,{min:0,precision:2,style:{width:"100%"},addonBefore:"¥"})})})]}),n.jsx(ye,{children:a("payroll:calculation_config.tax_brackets")}),n.jsxs(L,{size:"small",style:{marginBottom:16},children:[n.jsxs(M,{gutter:8,children:[n.jsx(D,{span:6,children:n.jsx(O.Item,{name:"bracket_min_amount",label:a("payroll:calculation_config.min_amount"),children:n.jsx(ge,{min:0,precision:2,style:{width:"100%"},addonBefore:"¥"})})}),n.jsx(D,{span:6,children:n.jsx(O.Item,{name:"bracket_max_amount",label:a("payroll:calculation_config.max_amount"),children:n.jsx(ge,{min:0,precision:2,style:{width:"100%"},addonBefore:"¥"})})}),n.jsx(D,{span:6,children:n.jsx(O.Item,{name:"bracket_tax_rate",label:a("payroll:calculation_config.tax_rate"),children:n.jsx(ge,{min:0,max:100,precision:2,style:{width:"100%"},addonAfter:"%"})})}),n.jsx(D,{span:6,children:n.jsx(O.Item,{name:"bracket_quick_deduction",label:a("payroll:calculation_config.quick_deduction"),children:n.jsx(ge,{min:0,precision:2,style:{width:"100%"},addonBefore:"¥"})})})]}),n.jsxs(C,{type:"dashed",onClick:()=>{const e=o.getFieldsValue(["bracket_min_amount","bracket_max_amount","bracket_tax_rate","bracket_quick_deduction"]);if(!e.bracket_min_amount||!e.bracket_tax_rate)return;const t={min_amount:e.bracket_min_amount,max_amount:e.bracket_max_amount||void 0,tax_rate:e.bracket_tax_rate/100,quick_deduction:e.bracket_quick_deduction||0};m([...p,t]),o.setFieldsValue({bracket_min_amount:void 0,bracket_max_amount:void 0,bracket_tax_rate:void 0,bracket_quick_deduction:void 0})},style:{width:"100%"},children:[n.jsx(se,{})," ",a("payroll:calculation_config.add_tax_bracket")]})]}),n.jsx(he,{columns:h,dataSource:p,rowKey:(e,t)=>(null==t?void 0:t.toString())||"0",pagination:!1,size:"small"})]})})]})},If="/payroll/calculation-config",Pf=()=>bt.get(`${If}/rule-sets`),Nf=e=>bt.post(`${If}/rule-sets`,e),Af=(e,t)=>bt.put(`${If}/rule-sets/${e}`,t),Of=e=>bt.put(`${If}/rule-sets/${e}/activate`),Mf=e=>bt.put(`${If}/rule-sets/${e}/deactivate`),Df=()=>bt.get(`${If}/social-insurance-comprehensive`),Lf=e=>bt.post(`${If}/social-insurance-comprehensive`,e),Rf=(e,t)=>bt.put(`${If}/social-insurance-comprehensive/${e}`,t),zf=()=>bt.get(`${If}/tax-configs`),$f=e=>bt.post(`${If}/tax-configs`,e),Ff=(e,t)=>bt.put(`${If}/tax-configs/${e}`,t),{Title:qf,Text:Bf}=i,{Option:Uf}=q,Vf="ACTIVE",Yf="PLANNED",Hf=({value:e,onChange:t,onPeriodsLoaded:a,placeholder:o,disabled:i=!1,loading:s=!1,style:l,mode:c="card",cardTitle:d,showSelectedStatus:u=!0,label:p,help:m,required:f=!1,filterFunction:h,showDataStats:_=!0,enableProductionRestrictions:y=true,autoSelectLatestWithData:g=!1})=>{const{t:v}=Cn(["payroll","common"]),{message:x}=r.useApp(),[b,w]=He.useState([]),[j,k]=He.useState(!1);He.useEffect((()=>{(async()=>{k(!0);try{const n=await Lt({size:100});if(!n||!n.data||!Array.isArray(n.data))return void w([]);const r=n.data.sort(((e,t)=>new Date(t.start_date).getTime()-new Date(e.start_date).getTime())),o=(e=>{let t=e;return h&&(t=h(t)),y&&(t=t.filter((e=>{var t;const n=null==(t=e.status_lookup)?void 0:t.code;return n===Vf||n===Yf}))),t})(r);if(w(o),a&&a(o),g&&!e&&t&&Array.isArray(o)){const e=o.filter((e=>e&&void 0!==e.id&&(e.employee_count||0)>0));if(e.length>0){const n=e[0];t(n.id)}}}catch(n){x.error(v("periods_page.error_fetch_periods")),w([])}finally{k(!1)}})()}),[x,v,y,_,g,e,t,a]);const S=b.find((t=>t.id===e)),C=e=>{var t,r;const a=null==(t=e.status_lookup)?void 0:t.code,o=null==(r=e.status_lookup)?void 0:r.name,i="ACTIVE"===a||"PLANNED"===a?"green":"CLOSED"===a?"blue":"ARCHIVED"===a?"gray":"gold",s=e.employee_count||0;let l,c,d;return _?s>0?(l=n.jsx(re,{style:{fontSize:"12px"}}),c="#52c41a",d=`${s}人`):(l=n.jsx(xe,{style:{fontSize:"12px"}}),c="#8c8c8c",d="无数据"):(l=null,c="#8c8c8c",d=""),n.jsx(Uf,{value:e.id,children:n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",minWidth:"300px"},children:[n.jsx("div",{style:{display:"flex",alignItems:"center",flex:1},children:n.jsx("span",{style:{color:s>0?"#52c41a":"#8c8c8c",fontWeight:s>0?"500":"normal",fontSize:"14px"},children:e.name})}),n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[_&&n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4,color:c,fontSize:"12px"},children:[l,n.jsx("span",{children:d})]}),n.jsx(Y,{color:i,style:{margin:0,fontSize:"11px"},children:o||"未知"})]})]})},e.id)},E=()=>n.jsx(q,{placeholder:o||v("runs_page.form.placeholder.payroll_period"),onChange:t,value:e,loading:j||s,disabled:i,style:{width:"100%",...l},showSearch:!0,optionFilterProp:"children",filterOption:(e,t)=>{var n;return null==(n=null==t?void 0:t.children)?void 0:n.toLowerCase().includes(e.toLowerCase())},popupMatchSelectWidth:!1,styles:{popup:{root:{minWidth:"300px"}}},children:b.map(C)});return"form"===c?n.jsx(O.Item,{label:p||v("batch_import.label.period_selection"),help:m||n.jsxs("div",{children:[n.jsx("div",{style:{marginBottom:4},children:"请选择要操作的薪资周期"}),n.jsx("div",{style:{fontSize:"12px",color:"#666"},children:y?n.jsxs(n.Fragment,{children:["🔒 生产环境：仅显示",n.jsx(Y,{color:"green",style:{margin:"0 4px",fontSize:"11px"},children:"活动"}),"状态的薪资周期，确保数据安全。"]}):n.jsxs(n.Fragment,{children:["💡 开发环境：显示所有状态的薪资周期。",n.jsx(Y,{color:"green",style:{margin:"0 4px",fontSize:"11px"},children:"活动"}),n.jsx(Y,{color:"blue",style:{margin:"0 4px",fontSize:"11px"},children:"已关闭"}),n.jsx(Y,{color:"gray",style:{margin:"0 4px",fontSize:"11px"},children:"已归档"}),n.jsx("br",{}),n.jsx("span",{style:{color:"#ff7a00",fontSize:"11px"},children:"⚠️ 注意：生产环境将只允许向活动状态的薪资周期导入数据"})]})})]}),required:f,children:E()}):n.jsxs(L,{title:d||v("payroll_period_selector.title"),style:{marginBottom:16,...l},children:[E(),u&&S&&n.jsxs("div",{style:{marginTop:12,padding:"8px 12px",backgroundColor:"#f6ffed",border:"1px solid #b7eb8f",borderRadius:"6px",fontSize:"14px",color:"#52c41a"},children:["✓ 已选择：",S.name,_&&(S.employee_count||0)>0&&n.jsxs("span",{style:{marginLeft:8,color:"#666"},children:["- ",S.employee_count,"人"]})]})]})},{Text:Kf}=i,Zf=({placeholder:e,onChange:t,disabled:r=!1,allowClear:o=!0,defaultValue:i,value:s,style:l,className:c,showEmployeeCode:d=!1,size:u="middle",...p})=>{const{t:m}=Cn(["common","employee"]),[f,h]=He.useState([]),[_,y]=He.useState(!1),[g,v]=He.useState(""),[x,b]=He.useState(null);He.useEffect((()=>{if(!s||x&&x.id===s)s||b(null);else{(async()=>{try{const e=await jn.getEmployeeById(String(s));e&&b(e)}catch(e){}})()}}),[s,x]);const w=async e=>{y(!0);try{const t=e?{name:e,size:50}:{size:100},n=await at.getEmployees(t),r=await Promise.all(n.data.map((async e=>{if(!(e.departmentName||e.department_name||e.personnelCategoryName&&e.actual_position_name))try{return await jn.getEmployeeById(String(e.id))||e}catch(t){return e}return e})));h(r||[])}catch(t){h([])}finally{y(!1)}},j=He.useMemo((()=>be(w,300)),[]);He.useEffect((()=>{w("")}),[]);const k=He.useMemo((()=>f.map((e=>{const t=e.departmentName||"",r=e.personnelCategoryName||"",a=e.actual_position_name||"",o=`${e.last_name||""}${e.first_name||""}`.trim(),i=d&&e.employee_code?` (${e.employee_code})`:"",s=e.employee_code?"":` [ID:${e.id}]`;return{label:n.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[n.jsxs("div",{style:{fontWeight:"bold"},children:[o||"未知员工",i,s]}),n.jsx("div",{style:{fontSize:"12px",color:"#666"},children:[t,r,a].filter(Boolean).join(" | ")||"无部门信息"})]}),value:e.id,key:e.id,employee:e}}))),[f,d]);return n.jsx(q,{showSearch:!0,placeholder:e||m("employee:common.select_employee"),defaultValue:i,value:s,onChange:(e,n)=>{Array.isArray(n)||n&&!Array.isArray(n)&&((e,n)=>{t&&n&&n.employee&&t(e,n.employee)})(e,n)},onSearch:e=>{v(e),j(e)},filterOption:!1,notFoundContent:null,options:k,loading:_,disabled:r,allowClear:o,style:{width:"100%",...l},className:c,size:u,optionLabelProp:"label",popupRender:e=>n.jsx("div",{children:_?n.jsxs("div",{style:{padding:"8px",textAlign:"center"},children:[n.jsx(a,{size:"small"}),n.jsx("div",{style:{marginTop:"8px"},children:"t('common:status.loading')"})]}):0===f.length?n.jsx(we,{image:we.PRESENTED_IMAGE_SIMPLE,description:g?m("employee:common.no_employee_found"):"暂无员工数据",style:{padding:"16px"}}):e}),...p})},Wf="/simple-payroll",Gf={getPayrollPeriods:async e=>(await bt.get(`${Wf}/periods`,{params:e})).data,getLatestPayrollPeriodWithData:async()=>{const e=await bt.get(`${Wf}/periods`,{params:{is_active:!0,page:1,size:50}});if(!e.data||!e.data.data||0===e.data.data.length)return{data:null,success:!1,message:"未找到任何期间"};const t=e.data.data.filter((e=>e.entries_count>0));return t.length>0?{data:t[0],success:!0}:{data:e.data.data[0],success:!0}},getPayrollPeriod:async e=>(await bt.get(`${Wf}/periods/${e}`)).data,getPayrollVersions:async e=>(await bt.get(`${Wf}/versions`,{params:e})).data,getPayrollVersion:async e=>(await bt.get(`${Wf}/versions/${e}`)).data,deletePayrollRun:async e=>{await bt.delete(`/payroll-runs/${e}`)},generatePayroll:async e=>(await bt.post(`${Wf}/generate`,e)).data,getGenerationProgress:async e=>(await bt.get(`${Wf}/generate/progress/${e}`)).data,checkExistingData:async e=>(await bt.get(`${Wf}/check-existing-data/${e}`)).data,copyPreviousPayroll:async e=>(await bt.post(`${Wf}/copy-previous`,null,{params:{target_period_id:e.target_period_id,source_period_id:e.source_period_id,description:e.description,force_overwrite:e.force_overwrite}})).data,batchAdjustPayroll:async e=>(await bt.post(`${Wf}/batch-adjust`,e)).data,getPayrollEntries:async e=>(await bt.get(`${Wf}/entries`,{params:e})).data,getAuditSummary:async e=>(await bt.get(`${Wf}/audit/summary/${e}`)).data,getAuditAnomalies:async e=>{const{payroll_run_id:t,...n}=e;return(await bt.get(`${Wf}/audit/${t}/anomalies`,{params:n})).data},runAuditCheck:async e=>(await bt.post(`${Wf}/audit/check/${e}`)).data,autoFixAnomalies:async e=>(await bt.post(`${Wf}/audit/auto-fix`,e)).data,ignoreAnomalies:async e=>(await bt.post(`${Wf}/audit/ignore`,e)).data,updateAuditStatus:async e=>(await bt.post(`${Wf}/audit/update-status`,e)).data,getAvailableReports:async()=>(await bt.get(`${Wf}/reports/available`)).data,generateReports:async e=>(await bt.post(`${Wf}/reports/generate`,e)).data,getReportStatus:async e=>(await bt.get(`${Wf}/reports/status/${e}`)).data,downloadReport:async e=>(await bt.get(`${Wf}/reports/download/${e}`,{responseType:"blob"})).data,getDepartments:async()=>{try{const e=await bt.get("/views-optimized/departments");return e.data}catch(e){return(await bt.get(`${Wf}/departments`)).data}},createPayrollPeriod:async e=>{const t={name:e.name,start_date:e.start_date,end_date:e.end_date,pay_date:e.pay_date,frequency_lookup_value_id:e.frequency_lookup_value_id||117,status_lookup_value_id:134};return(await bt.post("/payroll-periods",t)).data},createPayrollRun:async e=>{const t={payroll_period_id:e.payroll_period_id,status_lookup_value_id:60,initiated_by_user_id:null,total_employees:null,total_net_pay:null};return(await bt.post("/payroll-runs",t)).data},getPersonnelCategories:async()=>{try{const e=await bt.get("/views-optimized/personnel-categories");return e.data}catch(e){return(await bt.get(`${Wf}/personnel-categories`)).data}},getPayrollComponents:async e=>(await bt.get(`${Wf}/components`,{params:e})).data,previewBatchAdjustment:async e=>(await bt.post(`${Wf}/batch-adjustment/preview`,e)).data,executeBatchAdjustment:async e=>(await bt.post(`${Wf}/batch-adjustment/execute`,e)).data,runAdvancedAuditCheck:async e=>(await bt.post(`${Wf}/audit/advanced-check/${e}`)).data,runSimpleCalculationEngine:async e=>(await bt.post(`${Wf}/calculation-engine/run`,e,{timeout:12e4})).data,runIntegratedCalculationEngine:async e=>(await bt.post(`${Wf}/calculation-engine/integrated-run`,e,{timeout:18e4})).data,testCalculationEngine:async e=>(await bt.post(`${Wf}/test-calculation`,e)).data,copySalaryConfigs:async e=>(await bt.post(`${Wf}/salary-configs/copy`,null,{params:e})).data,checkExistingInsuranceBase:async e=>(await bt.get(`${Wf}/check-existing-insurance-base/${e}`)).data,copyInsuranceBaseAmounts:async e=>(await bt.post(`${Wf}/salary-configs/copy-insurance-base`,null,{params:e})).data,deleteInsuranceBaseForPeriod:async e=>{try{const t=await bt.delete(`${Wf}/salary-configs/delete-insurance-base/${e}`);return t.data}catch(t){throw t}},deletePayrollDataForPeriod:async e=>{try{const t=await bt.delete(`${Wf}/payroll-data/${e}`);return t.data}catch(t){throw t}},getEmployeeInsuranceBase:async(e,t)=>(await bt.get(`${Wf}/salary-configs/employee/${e}/period/${t}`)).data,updateEmployeeInsuranceBase:async(e,t,n)=>(await bt.put(`${Wf}/salary-configs/employee/${e}/period/${t}`,n)).data,generateBankFile:async e=>(await bt.post(`${Wf}/bank-file/generate`,e)).data,downloadBankFile:async e=>(await bt.post(`${Wf}/bank-file/generate`,e,{responseType:"blob"})).data,getDataIntegrityStats:async e=>(await bt.get(`${Wf}/data-integrity-stats/${e}`)).data,getCalculationProgress:async e=>(await bt.get(`${Wf}/calculation-engine/progress/${e}`)).data,getDepartmentCostAnalysis:async e=>(await bt.get(`${Wf}/analytics/department-costs/${e}`)).data,getEmployeeTypeAnalysis:async e=>(await bt.get(`${Wf}/analytics/employee-types/${e}`)).data,getSalaryTrendAnalysis:async(e=12)=>(await bt.get(`${Wf}/analytics/salary-trends`,{params:{months:e}})).data,getMonthlySummary:async(e,t)=>(await bt.get(`${Wf}/monthly-summary`,{params:{start_year:e,end_year:t}})).data,getPersonnelCategoryStats:async e=>{const t=e?{period_id:e}:{};return(await bt.get(`${Wf}/personnel-category-stats`,{params:t})).data}},{Title:Jf,Text:Xf}=i,{Option:Qf}=q,{TextArea:eh}=R,th=["REFUND_DEDUCTION_ADJUSTMENT","SOCIAL_INSURANCE_MAKEUP","PERFORMANCE_BONUS_MAKEUP"],nh=({visible:e,payrollPeriodId:t,payrollRunId:o,entry:i,onClose:s,onSuccess:l})=>{const{t:c}=Cn("payrollEntryForm"),[d]=O.useForm(),[u,p]=He.useState(!1),[m,f]=He.useState(!1),[h,_]=He.useState(null),[y,g]=He.useState([]),[v,x]=He.useState([]),[b,w]=He.useState([]),[j,S]=He.useState(!1),[E,T]=He.useState(null),[I,P]=He.useState(0),[N,A]=He.useState(0),[z,$]=He.useState(0),[U,Y]=He.useState(!1),{message:H}=r.useApp(),[K,Z]=He.useState(null),[W,G]=He.useState(!1),[J,X]=He.useState("basic"),Q=Nt();He.useEffect((()=>{e&&(async()=>{S(!0);try{const e=(await ot.getPayrollEntryStatusOptions()).filter((e=>e.id&&e.code&&e.name)).map((e=>({id:e.id,code:e.code,name:e.name})));w(e)}catch(e){H.error(c("common.statusOptionsLoadFailed",{ns:"common"}))}finally{S(!1)}})()}),[e,H,c]),He.useEffect((()=>{if(e&&b.length>0)if(i)d.setFieldsValue({status_lookup_value_id:i.status_lookup_value_id});else{const e=b.find((e=>"PENTRY_ENTRY"===e.code)),t=e?e.id:b[0].id;d.setFieldsValue({status_lookup_value_id:t})}}),[e,i,b,d]),He.useEffect((()=>{const t=async()=>{if(e&&i&&i.id)try{const e=(await Wt(i.id)).data;if(e.employee){const t=`${e.employee.last_name||""}${e.employee.first_name||""}`;d.setFieldsValue({employee_id:{id:e.employee_id,name:t},employee_name:t})}b.length>0&&d.setFieldsValue({status_lookup_value_id:e.status_lookup_value_id}),i.status_lookup_value_id!==e.status_lookup_value_id&&(i.status_lookup_value_id=e.status_lookup_value_id)}catch(t){H.error(c("payroll.entry_form.error_fetch_latest_data"))}};(async()=>{if(e&&i&&i.id){G(!0);try{const e=await Ht.getPayrollModalData(i.id);Z(e),d.setFieldsValue({employee_id:{id:e.基础信息.员工编号,name:e.基础信息.员工姓名},employee_name:e.基础信息.员工姓名,department:e.基础信息.部门名称,personnel_category:e.基础信息.人员类别,actual_position:e.基础信息.职位名称})}catch(n){H.error("获取薪资数据失败，将使用传统方式加载"),await t()}finally{G(!1)}}})()}),[e,null==i?void 0:i.id,b,d,H,c]),He.useEffect((()=>{e&&Q.fetchComponentDefinitions().then((()=>{}))}),[e]),He.useEffect((()=>{(async()=>{if(e&&t&&!i)try{const e=await Rt({period_id:t,size:1,page:1});if(e.data&&e.data.length>0){const t=e.data[0];T(t.id)}else T(null),H.warning(c("payroll.entry_form.warning_no_payroll_run_found"))}catch(n){T(null),H.error(c("payroll.entry_form.error_fetch_default_payroll_run"))}})()}),[e,t,i,H,c]);const ee=e=>e.type||e.component_type||e.category||e.kind||"",te=He.useMemo((()=>Q.componentDefinitions.filter((e=>{const t=ee(e);return"EARNING"===t||"Earning"===t})).map((e=>({code:e.code,name:e.name,type:ee(e),description:e.description})))),[Q.componentDefinitions]),ne=He.useMemo((()=>Q.componentDefinitions.filter((e=>{const t=ee(e);return"DEDUCTION"===t||"Deduction"===t||"STATUTORY"===t||"Statutory"===t||"PERSONAL_DEDUCTION"===t||"Personal_Deduction"===t})).map((e=>({code:e.code,name:e.name,type:ee(e),description:e.description})))),[Q.componentDefinitions]);He.useEffect((()=>{e&&Q.componentDefinitions.length}),[e,Q.componentDefinitions.length]);const re=He.useCallback((async e=>{p(!0);try{const t=await jn.getEmployeeById(String(e));_(t),d.setFieldsValue({employee_name:t?`${t.last_name||""}${t.first_name||""}`:""}),await ae(e)}catch(t){H.error(c("payroll:entry_form.error_fetch_employee"))}finally{p(!1)}}),[d,H,c]),ae=He.useCallback((async e=>{if(e&&t)try{const n=await Gf.getEmployeeInsuranceBase(e,t);n.data&&(d.setFieldsValue({social_insurance_base:n.data.social_insurance_base,housing_fund_base:n.data.housing_fund_base,occupational_pension_base:n.data.occupational_pension_base}),P(n.data.social_insurance_base||0),A(n.data.housing_fund_base||0),$(n.data.occupational_pension_base||0))}catch(n){V.error(c("error.fetch_employee_insurance_base"))}}),[t,d,c]),oe=He.useCallback((async(e,n,r,a)=>{if(t){Y(!0);try{const o={social_insurance_base:n,housing_fund_base:r};void 0!==a&&(o.occupational_pension_base=a);await Gf.updateEmployeeInsuranceBase(e,t,o);H.success("缴费基数更新成功")}catch(o){H.error("缴费基数更新失败")}finally{Y(!1)}}}),[t,H]),ie=He.useCallback((async()=>{const e=(null==i?void 0:i.employee_id)||d.getFieldValue("employee_id");e?await oe(e,I,N,z):H.error("请先选择员工")}),[null==i?void 0:i.employee_id,d,I,N,z,oe,H]);He.useEffect((()=>{if(e)if(i){if(d.setFieldsValue({employee_id:i.employee_id,employee_name:i.employee_name||"",remarks:i.remarks||""}),i.earnings_details&&"object"==typeof i.earnings_details&&!Array.isArray(i.earnings_details)){const e=Object.entries(i.earnings_details).map((([e,t])=>{var n;return{name:e,amount:"number"==typeof t?t:"object"==typeof t&&null!==t&&"number"==typeof t.amount?t.amount:0,description:(null==(n=Q.componentDefinitions.find((t=>t.code===e)))?void 0:n.description)||""}}));if(Q.componentDefinitions.length>0){const t=e.filter((e=>Q.componentDefinitions.some((t=>{const n=ee(t);return t.code===e.name&&("EARNING"===n||"Earning"===n)}))));t.length,e.length,g(t)}else g(e)}else if(i.earnings_details&&Array.isArray(i.earnings_details))if(Q.componentDefinitions.length>0){const e=i.earnings_details.filter((e=>Q.componentDefinitions.some((t=>{const n=ee(t);return t.code===e.name&&("EARNING"===n||"Earning"===n)}))));e.length,i.earnings_details.length,g(e)}else g(i.earnings_details);else g([]);if(i.deductions_details){let e=[];if("object"==typeof i.deductions_details&&(e=Array.isArray(i.deductions_details)?[...i.deductions_details]:Object.entries(i.deductions_details).map((([e,t])=>{var n;const r="number"==typeof t?t:"object"==typeof t&&null!==t&&"amount"in t&&t.amount||0;return{name:e,amount:r,description:(null==(n=Q.componentDefinitions.find((t=>t.code===e)))?void 0:n.description)||""}}))),Q.componentDefinitions.length>0){const t=e.filter((e=>Q.componentDefinitions.some((t=>{const n=ee(t);return t.code===e.name&&("DEDUCTION"===n||"Deduction"===n||"STATUTORY"===n||"Statutory"===n||"PERSONAL_DEDUCTION"===n||"Personal_Deduction"===n)}))));t.length,e.length,x(t)}else x(e)}else x([]);i.employee_id&&(re(i.employee_id),ae(i.employee_id))}else d.resetFields(),g([]),x([]),_(null)}),[e,i,d,re,Q.componentDefinitions]),He.useEffect((()=>{h&&d.setFieldsValue({employee_name:h.full_name,department:h.department_name,personnel_category:h.personnel_category_name,actual_position:h.position_name})}),[h,d]),He.useEffect((()=>{e&&d&&le(y,v)}),[y,v,e,d]),He.useEffect((()=>{if(e&&i&&Q.componentDefinitions.length>0){let t=[],n=[];if(i.earnings_details){let e=[];"object"!=typeof i.earnings_details||Array.isArray(i.earnings_details)?Array.isArray(i.earnings_details)&&(e=[...i.earnings_details]):e=Object.entries(i.earnings_details).map((([e,t])=>{var n;return{name:e,amount:"number"==typeof t?t:"object"==typeof t&&null!==t&&"number"==typeof t.amount?t.amount:0,description:(null==(n=Q.componentDefinitions.find((t=>t.code===e)))?void 0:n.description)||""}})),t=e.filter((e=>Q.componentDefinitions.some((t=>{const n=ee(t);return t.code===e.name&&("EARNING"===n||"Earning"===n)})))),g(t)}if(i.deductions_details){let e=[];"object"==typeof i.deductions_details&&(e=Array.isArray(i.deductions_details)?[...i.deductions_details]:Object.entries(i.deductions_details).map((([e,t])=>{var n;const r="number"==typeof t?t:"object"==typeof t&&null!==t&&"amount"in t&&t.amount||0;return{name:e,amount:r,description:(null==(n=Q.componentDefinitions.find((t=>t.code===e)))?void 0:n.description)||""}}))),n=e.filter((e=>Q.componentDefinitions.some((t=>{const n=ee(t);return t.code===e.name&&("DEDUCTION"===n||"Deduction"===n||"STATUTORY"===n||"Statutory"===n||"PERSONAL_DEDUCTION"===n||"Personal_Deduction"===n)})))),x(n)}setTimeout((()=>{e&&d&&le(t,n)}),0)}}),[e,i,Q.componentDefinitions.length]);const le=(t,n)=>{if(!d||!e)return;const r=t.reduce(((e,t)=>e+(Number(t.amount)||0)),0),a=n.reduce(((e,t)=>e+(Number(t.amount)||0)),0);try{d.setFieldsValue({total_earnings:r,total_deductions:a,net_pay:r-a})}catch(o){}},ce=y.reduce(((e,t)=>e+(Number(t.amount)||0)),0),de=v.reduce(((e,t)=>e+(Number(t.amount)||0)),0),ue=ce-de;return n.jsx(B,{title:c(i?"payroll:entry_form.title_edit":"payroll:entry_form.title_create"),open:e,onCancel:s,width:800,footer:[n.jsx(C,{onClick:s,children:c("common:button.cancel")},"cancel"),n.jsx(C,{type:"primary",icon:i?n.jsx(je,{}):n.jsx(se,{}),loading:m,onClick:async()=>{try{const n=await d.validateFields(),r=y.filter((e=>!te.some((t=>t.code===e.name)))).map((e=>e.name));if(r.length>0)return void H.error(`${c("payroll:entry_form.error.invalid_earnings")}: ${r.join(", ")}`);const a=v.filter((e=>!ne.some((t=>t.code===e.name)))).map((e=>e.name));if(a.length>0)return void H.error(`${c("payroll:entry_form.error.invalid_deductions")}: ${a.join(", ")}`);if(0===y.length){if(H.error(c("payroll:entry_form.error.no_earnings")),te.length>0){const e={name:te[0].code,amount:0,description:te[0].description||""};return g([e]),void H.info(c("payroll:auto__earningcomponents_0_name__e5b7b2"))}return}const s={};y.forEach((e=>{const t=parseFloat(e.amount);isNaN(t)||(s[e.name]={amount:t})}));const u={};v.forEach((e=>{const t=parseFloat(e.amount);isNaN(t)||(u[e.name]={amount:t})}));const p=y.reduce(((e,t)=>{const n=parseFloat(t.amount);return e+(isNaN(n)?0:n)}),0),m=v.reduce(((e,t)=>{const n=parseFloat(t.amount);return e+(isNaN(n)?0:n)}),0),h=p-m,_={status_lookup_value_id:n.status_lookup_value_id,remarks:n.remarks,earnings_details:s,deductions_details:u,gross_pay:p,total_deductions:m,net_pay:h};if(!i&&!n.employee_id)return void H.error(c("payroll:entry_form.validation.employee_required"));if(!n.status_lookup_value_id)return void H.error(c("payroll:entry_form.validation.status_required"));i||(_.employee_id=n.employee_id,_.payroll_period_id=t||void 0);const x={};Object.keys(_).forEach((e=>{void 0!==_[e]&&(x[e]=_[e])})),f(!0);try{if(i){const e=await Kt(i.id,x);if(e&&e.data){const t=e.data;H.success(`${c("payroll:entry_form.message.update_success")} - ID: ${t.id}`)}else H.warning(c("payroll:entry_form.message.update_success_no_data"));null==l||l()}else{if(!t)return void H.error("缺少工资期间ID");const e=o||E;if(!e)return void H.error("缺少工资运行ID，无法创建工资条目。请先创建该期间的工资运行。");const r={employee_id:n.employee_id,payroll_period_id:t,payroll_run_id:e,gross_pay:p,total_deductions:m,net_pay:h,status_lookup_value_id:n.status_lookup_value_id,remarks:n.remarks||"",earnings_details:s,deductions_details:u},a=await Zt(r);a&&a.data?H.success(`${c("payroll:entry_form.message.create_success")} - ID: ${a.data.id}`):H.success(c("payroll:entry_form.message.create_success")),l()}}catch(e){let t=c("payroll:entry_form.validation.failed");e.response&&e.response.data&&e.response.data.detail&&("string"==typeof e.response.data.detail?t=e.response.data.detail:Array.isArray(e.response.data.detail)&&(t=e.response.data.detail.map((e=>e.msg||e.message||JSON.stringify(e))).join("; "))),H.error(t)}finally{f(!1)}}catch(e){if(e&&"object"==typeof e&&"errorFields"in e){const t=e.errorFields,n=t&&t.length>0?t[0].errors[0]:"请检查表单数据";return void H.error(n||c("payroll.entry_form.validation.check_form"))}H.error(c("payroll.entry_form.validation.check_form"))}},children:c(i?"common:button.save":"common:button.create")},"submit")],children:n.jsxs(a,{spinning:u||W,children:[K&&n.jsx(F,{message:"数据加载成功",description:`正在编辑 ${K.基础信息.员工姓名} 的薪资记录`,type:"success",showIcon:!0,style:{marginBottom:16}}),n.jsxs(O,{form:d,layout:"vertical",initialValues:{status_lookup_value_id:64},children:[n.jsxs(L,{title:c("section.employee_info"),variant:"outlined",children:[n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:8,children:i?n.jsx(O.Item,{label:c("label.employee_id"),name:"employee_id",rules:[{required:!0,message:c("validation.employee_required")}],children:n.jsx(R,{disabled:!0})}):n.jsx(O.Item,{label:c("label.employee"),name:"employee_id",rules:[{required:!0,message:c("validation.employee_required")}],children:n.jsx(Zf,{placeholder:c("placeholder.select_employee"),onChange:(e,t)=>{t?(_(t),d.setFieldsValue({employee_id:e,department:(null==h?void 0:h.department_name)||c("common.notApplicable",{ns:"common"}),personnel_category:(null==h?void 0:h.personnel_category_name)||c("common.notApplicable",{ns:"common"}),actual_position:(null==h?void 0:h.actual_position_name)||c("common.notApplicable",{ns:"common"})})):(_(null),d.setFieldsValue({employee_id:void 0,department:null,personnel_category:null,actual_position:null}))},showEmployeeCode:!0,allowClear:!0})})}),n.jsx(D,{span:8,children:n.jsx(O.Item,{label:c("label.employee_name"),name:"employee_name",children:n.jsx(R,{disabled:!0})})}),n.jsx(D,{span:8,children:n.jsx(O.Item,{label:c("label.department"),name:"department",children:n.jsx(R,{disabled:!0})})})]}),h&&n.jsxs(n.Fragment,{children:[n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:8,children:n.jsx(O.Item,{label:c("label.personnel_category"),name:"personnel_category",children:n.jsx(R,{disabled:!0})})}),n.jsx(D,{span:8,children:n.jsx(O.Item,{label:c("label.actual_position"),name:"actual_position",children:n.jsx(R,{disabled:!0})})}),n.jsx(D,{span:8})]}),n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:8,children:n.jsx(O.Item,{label:c("label.social_insurance_base"),name:"social_insurance_base",children:n.jsx(ge,{style:{width:"100%"},min:void 0,step:.01,precision:2,onChange:e=>{const t="string"==typeof e?parseFloat(e):e||0;P(t)}})})}),n.jsx(D,{span:8,children:n.jsx(O.Item,{label:c("label.housing_fund_base"),name:"housing_fund_base",children:n.jsx(ge,{style:{width:"100%"},min:void 0,step:.01,precision:2,onChange:e=>{const t="string"==typeof e?parseFloat(e):e||0;A(t)}})})}),n.jsx(D,{span:8,children:n.jsx(O.Item,{label:c("label.occupational_pension_base"),name:"occupational_pension_base",children:n.jsx(ge,{style:{width:"100%"},min:void 0,step:.01,precision:2,onChange:e=>{const t="string"==typeof e?parseFloat(e):e||0;$(t)}})})})]}),((null==i?void 0:i.employee_id)||!i&&h)&&n.jsx(M,{gutter:16,style:{marginTop:16},children:n.jsx(D,{span:24,children:n.jsx(C,{type:"primary",icon:n.jsx(je,{}),loading:U,onClick:ie,style:{width:"100%"},children:"更新缴费基数"})})})]})]}),n.jsx(ye,{}),n.jsx(L,{title:n.jsxs(k,{children:[c("section.earnings"),n.jsxs(Xf,{type:"secondary",children:["(",c("total"),": ","number"==typeof ce?ce.toFixed(2):"0.00",")"]})]}),extra:n.jsx(O.Item,{label:c("label.add_earning"),children:n.jsx(q,{style:{width:"100%"},placeholder:c("placeholder.select_earning_component"),onChange:e=>{if(y.some((t=>t.name===e)))return void H.warning(c("payroll:entry_form.message.component_already_exists"));const t=te.find((t=>t.code===e)),n={name:e,amount:0,description:(null==t?void 0:t.description)||"",allowNegative:th.includes(e)||th.includes((null==t?void 0:t.type)||"")},r=[...y,n];g(r)},value:void 0,showSearch:!0,optionFilterProp:"children",filterOption:(e,t)=>{var n;return null==(n=null==t?void 0:t.children)?void 0:n.toLowerCase().includes(e.toLowerCase())},children:te.map((e=>n.jsx(Qf,{value:e.code,children:e.name},e.code)))})}),variant:"borderless",children:0===y.length?n.jsx(Xf,{type:"secondary",children:c("no_earnings_components")}):y.map(((e,t)=>{const r=te.find((t=>t.code===e.name));return n.jsxs(M,{gutter:16,style:{marginBottom:16},children:[n.jsx(D,{span:12,children:n.jsx(O.Item,{label:(null==r?void 0:r.name)||e.name,children:n.jsx(R,{value:e.name,disabled:!0})})}),n.jsx(D,{span:12,children:n.jsx(O.Item,{label:c("label.amount"),children:n.jsx(ge,{style:{width:"100%"},min:void 0,step:.01,precision:2,value:e.amount,onChange:e=>((e,t)=>{const n=[...y];n[e].amount=t,g(n),le(n,v)})(t,e)})})})]},`earning-${t}`)}))}),n.jsx(ye,{}),n.jsx(L,{title:n.jsxs(k,{children:[c("section.deductions"),n.jsxs(Xf,{type:"secondary",children:["(",c("total"),": ","number"==typeof de?de.toFixed(2):"0.00",")"]})]}),extra:n.jsx(O.Item,{label:c("label.add_deduction"),children:n.jsx(q,{style:{width:"100%"},placeholder:c("placeholder.select_deduction_component"),onChange:e=>{if(v.some((t=>t.name===e)))return void H.warning(c("payroll:entry_form.message.component_already_exists"));const t=ne.find((t=>t.code===e)),n={name:e,amount:0,description:(null==t?void 0:t.description)||"",allowNegative:th.includes(e)||th.includes((null==t?void 0:t.type)||"")},r=[...v,n];x(r)},value:void 0,showSearch:!0,optionFilterProp:"children",filterOption:(e,t)=>{var n;return null==(n=null==t?void 0:t.children)?void 0:n.toLowerCase().includes(e.toLowerCase())},children:ne.map((e=>n.jsx(Qf,{value:e.code,children:e.name},e.code)))})}),variant:"borderless",children:0===v.length?n.jsx(Xf,{type:"secondary",children:c("no_deductions_components")}):v.map(((e,t)=>{const r=ne.find((t=>t.code===e.name));return n.jsxs(M,{gutter:16,style:{marginBottom:16},children:[n.jsx(D,{span:12,children:n.jsx(O.Item,{label:(null==r?void 0:r.name)||e.name,children:n.jsx(R,{value:e.name,disabled:!0})})}),n.jsx(D,{span:12,children:n.jsx(O.Item,{label:c("label.amount"),children:n.jsx(ge,{style:{width:"100%"},min:void 0,step:.01,precision:2,value:e.amount,onChange:e=>((e,t)=>{const n=[...v];n[e].amount=t,x(n),le(y,n)})(t,e)})})})]},`deduction-${t}`)}))}),n.jsx(ye,{}),n.jsxs(L,{title:c("section.summary"),variant:"outlined",children:[n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:8,children:n.jsx(O.Item,{label:c("label.total_earnings"),name:"total_earnings",children:n.jsx(ge,{style:{width:"100%"},disabled:!0,precision:2,value:ce})})}),n.jsx(D,{span:8,children:n.jsx(O.Item,{label:c("label.total_deductions"),name:"total_deductions",children:n.jsx(ge,{style:{width:"100%"},disabled:!0,precision:2,value:de})})}),n.jsx(D,{span:8,children:n.jsx(O.Item,{label:c("label.net_pay"),name:"net_pay",children:n.jsx(ge,{style:{width:"100%"},disabled:!0,precision:2,value:ue})})})]}),n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:12,children:n.jsx(O.Item,{label:c("label.status"),name:"status_lookup_value_id",rules:[{required:!0,message:c("validation.status_required")}],children:n.jsx(q,{children:b.map((e=>n.jsx(Qf,{value:e.id,children:e.name},e.id)))})})}),n.jsx(D,{span:12,children:n.jsx(O.Item,{label:c("label.remarks"),name:"remarks",children:n.jsx(eh,{rows:1})})})]})]})]})]})})},rh=(e,t,r,a,o,i,s)=>{const l=[{title:e("payroll:entries_table.column.employee_id"),dataIndex:"employee_id",key:"employee_id",sorter:kn("employee_id"),width:120,...t("employee_id")},{title:e("payroll:entries_table.column.employee_name"),key:"employee_name",sorter:(e,t)=>{const n=e.employee_name||"",r=t.employee_name||"";return n.localeCompare(r)},width:150,render:(e,t,r)=>{const a=t.employee_name||`${t.last_name||""}${t.first_name||""}`.trim();return a||n.jsx("span",{style:{color:"#999",fontStyle:"italic"},children:"未设置姓名"})},...(()=>{const e=t("employee_name"),{render:n,...r}=e;return r})()},{title:e("payroll:entries_table.column.department"),key:"department",width:150,render:(e,t,n)=>t.department_name||"",filters:(null==r?void 0:r.departmentMap)?Array.from(r.departmentMap.entries()).map((e=>({text:e[1],value:e[1]}))):[],onFilter:(e,t)=>t.department_name===e},{title:e("payroll:entries_table.column.personnel_category"),key:"personnel_identity",width:180,render:(e,t,n)=>t.personnel_category_name||"",filters:(null==r?void 0:r.personnelCategoryMap)?Array.from(r.personnelCategoryMap.entries()).map((e=>({text:e[1],value:e[1]}))):[],onFilter:(e,t)=>t.personnel_category_name===e},{title:e("payroll:entries_table.column.gross_pay"),dataIndex:"gross_pay",key:"gross_pay",sorter:kn("gross_pay"),width:120,render:e=>{const t=Number(e);return`¥${isNaN(t)?"0.00":t.toFixed(2)}`}},{title:e("payroll:entries_table.column.total_deductions"),dataIndex:"total_deductions",key:"total_deductions",sorter:kn("total_deductions"),width:120,render:e=>{const t=Number(e);return`¥${isNaN(t)?"0.00":t.toFixed(2)}`}},{title:e("payroll:entries_table.column.net_pay"),dataIndex:"net_pay",key:"net_pay",sorter:kn("net_pay"),width:120,render:e=>{const t=Number(e);return`¥${isNaN(t)?"0.00":t.toFixed(2)}`}},{title:e("payroll:entries_table.column.status"),dataIndex:"status_lookup_value_id",key:"status",width:100,render:t=>{const r=tn(t);return n.jsx(ke,{status:"green"===r.color?"success":"red"===r.color?"error":"default",text:e(r.key)})},filters:en.map((t=>({text:e(t.display_name_key),value:t.id}))),onFilter:(e,t)=>t.status_lookup_value_id===e},{title:e("payroll:entries_table.column.actions"),key:"action",width:150,fixed:"right",render:(t,r)=>n.jsxs(k,{size:"small",children:[a.canViewDetail&&n.jsx(xn,{actionType:"view",onClick:()=>s(String(r.id)),tooltipTitle:e("common:action.view")}),a.canUpdate&&n.jsx(xn,{actionType:"edit",onClick:()=>o(r),tooltipTitle:e("common:action.edit")}),a.canDelete&&n.jsx(xn,{actionType:"delete",danger:!0,onClick:()=>i(String(r.id)),tooltipTitle:e("common:action.delete")})]})}];return l};let ah=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&n[e]];return t};const{Title:oh,Paragraph:ih,Text:sh}=i,lh=({selectedMode:e,onModeChange:t,availableModes:r})=>{var a,o,i,s,l,c,d;return n.jsxs("div",{style:{marginBottom:24},children:[n.jsxs(L,{title:"选择导入模式",className:"mode-selector-card",children:[n.jsx(ih,{type:"secondary",children:"请选择您要导入的数据类型。不同的导入模式支持不同的字段和验证规则。"}),n.jsx(M,{gutter:[24,24],style:{marginTop:24},children:r.map((r=>n.jsx(D,{xs:24,sm:12,md:8,lg:6,children:n.jsx(L,{hoverable:!0,className:"import-mode-card "+(e===r.id?"selected":""),onClick:()=>t(r.id),style:{height:"100%",border:e===r.id?"2px solid #1890ff":"1px solid #d9d9d9",cursor:"pointer",transition:"all 0.3s ease"},styles:{body:{padding:"20px 16px"}},children:n.jsxs("div",{style:{textAlign:"center",height:"100%",display:"flex",flexDirection:"column"},children:[n.jsxs("div",{style:{position:"relative",marginBottom:16},children:[n.jsx("div",{style:{fontSize:48,color:e===r.id?"#1890ff":"#8c8c8c"},children:r.icon}),e===r.id&&n.jsx(Q,{style:{position:"absolute",top:-5,right:-5,fontSize:20,color:"#52c41a",backgroundColor:"white",borderRadius:"50%"}})]}),n.jsx(oh,{level:4,style:{marginBottom:8,color:e===r.id?"#1890ff":"inherit",minHeight:32},children:r.name}),n.jsx(ih,{type:"secondary",style:{marginBottom:16,fontSize:13,lineHeight:"1.4",flex:1,display:"flex",alignItems:"center"},children:r.description}),n.jsx("div",{style:{marginTop:"auto"},children:n.jsxs(k,{size:8,children:[n.jsxs(Y,{color:"blue",style:{fontSize:11},children:["必填 ",r.requiredFields.length]},`${r.id}-required`),n.jsxs(Y,{color:"green",style:{fontSize:11},children:["可选 ",r.optionalFields.length]},`${r.id}-optional`)]})}),r.helpDocUrl&&n.jsx("div",{style:{marginTop:8},children:n.jsx(ne,{title:"查看详细说明",children:n.jsx(C,{type:"link",icon:n.jsx(_e,{}),size:"small",onClick:e=>{e.stopPropagation(),window.open(r.helpDocUrl,"_blank")},children:"帮助"})})})]})})},r.clientId||r.id)))}),e&&n.jsxs(Ge.Fragment,{children:[n.jsx(ye,{}),n.jsxs("div",{style:{marginTop:16},children:[n.jsxs(oh,{level:5,style:{marginBottom:12},children:[null==(a=r.find((t=>t.id===e)))?void 0:a.name," - 字段说明"]}),n.jsxs(M,{gutter:[16,16],children:[n.jsx(D,{xs:24,md:12,children:n.jsx(L,{size:"small",title:"必填字段",styles:{header:{fontSize:14}},children:n.jsx(k,{direction:"vertical",size:4,style:{width:"100%"},children:null==(o=r.find((t=>t.id===e)))?void 0:o.requiredFields.map((e=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[n.jsx(sh,{style:{fontSize:13},children:e.name}),n.jsx(Y,{color:"red",children:"必填"})]},e.key)))})})}),n.jsx(D,{xs:24,md:12,children:n.jsx(L,{size:"small",title:"可选字段",styles:{header:{fontSize:14}},children:n.jsxs(k,{direction:"vertical",size:4,style:{width:"100%",maxHeight:200,overflowY:"auto"},children:[null==(i=r.find((t=>t.id===e)))?void 0:i.optionalFields.slice(0,8).map((e=>n.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[n.jsx(sh,{style:{fontSize:13},children:e.name}),n.jsx(Y,{color:"blue",children:"可选"})]},e.key))),((null==(l=null==(s=r.find((t=>t.id===e)))?void 0:s.optionalFields)?void 0:l.length)||0)>8&&n.jsxs(sh,{type:"secondary",style:{fontSize:12,fontStyle:"italic"},children:["还有 ",((null==(d=null==(c=r.find((t=>t.id===e)))?void 0:c.optionalFields)?void 0:d.length)||0)-8," 个可选字段..."]},"more-fields-hint")]})})})]})]})]},"selected-mode-details")]}),n.jsx("style",{children:"\n        .import-mode-card:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n        }\n        \n        .import-mode-card.selected {\n          background: linear-gradient(135deg, #f0f9ff 0%, #e6f7ff 100%);\n        }\n        \n        .mode-selector-card .ant-card-head-title {\n          font-size: 18px;\n          font-weight: 600;\n        }\n      "})]})},{Dragger:ch}=Se,dh=({onDataParsed:e,onLoadingChange:t})=>{const{t:r}=Cn(["payroll","common"]),[a,o]=He.useState(""),i={name:"file",multiple:!1,accept:".xlsx, .xls, .csv",beforeUpload:e=>{const t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type||"application/vnd.ms-excel"===e.type||"text/csv"===e.type;return t||V.error(r("payroll:bulk_import.upload.invalid_file_type")),t||Se.LIST_IGNORE},customRequest:async({file:n,onSuccess:a,onError:i})=>{t(!0),o(n.name);try{const t=await _n((()=>import("./exceljs.min-BdG9S1UE.js").then((e=>e.e))),__vite__mapDeps([17,1,18])),o=n;let s=[];if("text/csv"===o.type||o.name.toLowerCase().endsWith(".csv")){const e=(await o.text()).split("\n").filter((e=>e.trim()));s=e.map((e=>e.includes("\t")?e.split("\t"):e.split(",")))}else{const e=new t.Workbook,n=await o.arrayBuffer();await e.xlsx.load(n);const r=e.getWorksheet(1);if(!r)throw new Error("Excel文件中没有找到工作表");s=[],r.eachRow(((e,t)=>{const n=e.values;s.push(n.slice(1))}))}if(s.length>0){const t=s[0],n=s.slice(1);e(t,n),a&&a("ok")}else{const e=r("payroll:bulk_import.upload.empty_file");V.error(e),i&&i(new Error(e))}}catch(s){const e=r("payroll:bulk_import.upload.parse_error");V.error(e),i&&i(s instanceof Error?s:new Error(String(s)))}finally{t(!1)}},onRemove:()=>{o(""),e([],[])},showUploadList:!1};return n.jsxs(ch,{...i,children:[n.jsx("p",{className:"ant-upload-drag-icon",children:n.jsx(Ce,{})}),n.jsx("p",{className:"ant-upload-text",children:r("payroll:bulk_import.upload.drag_or_click")}),n.jsx("p",{className:"ant-upload-hint",children:r("payroll:bulk_import.upload.hint")}),a&&n.jsxs("p",{style:{marginTop:"16px",color:"#1890ff"},children:[r("payroll:bulk_import.upload.selected_file"),": ",a]})]})};var uh,ph="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},mh={exports:{}},fh=Math.floor,hh=Math.max,_h=Math.min,yh=function(e,t){return t?2*e/t:1},gh=function(e,t){var n,r,a,o,i,s;for(i=[e.length,t.length],n=o=0,s=_h(r=i[0],a=i[1]);0<=s?o<s:o>s;n=0<=s?++o:--o){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return r-a},vh=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},xh=function(){function e(e,t,n,r){this.isjunk=e,null==t&&(t=""),null==n&&(n=""),this.autojunk=null==r||r,this.a=this.b=null,this.setSeqs(t,n)}return e.prototype.setSeqs=function(e,t){return this.setSeq1(e),this.setSeq2(t)},e.prototype.setSeq1=function(e){if(e!==this.a)return this.a=e,this.matchingBlocks=this.opcodes=null},e.prototype.setSeq2=function(e){if(e!==this.b)return this.b=e,this.matchingBlocks=this.opcodes=null,this.fullbcount=null,this._chainB()},e.prototype._chainB=function(){var e,t,n,r,a,o,i,s,l,c,d,u,p,m;for(e=this.b,this.b2j=t={},r=c=0,u=e.length;c<u;r=++c)n=e[r],(vh(t,n)?t[n]:t[n]=[]).push(r);if(o={},a=this.isjunk)for(d=0,p=(m=Object.keys(t)).length;d<p;d++)a(n=m[d])&&(o[n]=!0,delete t[n]);if(l={},i=e.length,this.autojunk&&i>=200)for(n in s=fh(i/100)+1,t)t[n].length>s&&(l[n]=!0,delete t[n]);return this.isbjunk=function(e){return vh(o,e)},this.isbpopular=function(e){return vh(l,e)}},e.prototype.findLongestMatch=function(e,t,n,r){var a,o,i,s,l,c,d,u,p,m,f,h,_,y,g,v,x,b,w,j,k;for(a=(v=[this.a,this.b,this.b2j,this.isbjunk])[0],o=v[1],i=v[2],u=v[3],s=(x=[e,n,0])[0],l=x[1],c=x[2],m={},d=_=e;e<=t?_<t:_>t;d=e<=t?++_:--_){for(h={},y=0,g=(b=vh(i,a[d])?i[a[d]]:[]).length;y<g;y++)if(!((p=b[y])<n)){if(p>=r)break;(f=h[p]=(m[p-1]||0)+1)>c&&(s=(w=[d-f+1,p-f+1,f])[0],l=w[1],c=w[2])}m=h}for(;s>e&&l>n&&!u(o[l-1])&&a[s-1]===o[l-1];)s=(j=[s-1,l-1,c+1])[0],l=j[1],c=j[2];for(;s+c<t&&l+c<r&&!u(o[l+c])&&a[s+c]===o[l+c];)c++;for(;s>e&&l>n&&u(o[l-1])&&a[s-1]===o[l-1];)s=(k=[s-1,l-1,c+1])[0],l=k[1],c=k[2];for(;s+c<t&&l+c<r&&u(o[l+c])&&a[s+c]===o[l+c];)c++;return[s,l,c]},e.prototype.getMatchingBlocks=function(){var e,t,n,r,a,o,i,s,l,c,d,u,p,m,f,h,_,y,g,v,x,b,w,j,k,S;if(this.matchingBlocks)return this.matchingBlocks;for(y=[[0,m=(b=[this.a.length,this.b.length])[0],0,f=b[1]]],h=[];y.length;)t=(w=y.pop())[0],e=w[1],r=w[2],n=w[3],a=(j=g=this.findLongestMatch(t,e,r,n))[0],s=j[1],(d=j[2])&&(h.push(g),t<a&&r<s&&y.push([t,a,r,s]),a+d<e&&s+d<n&&y.push([a+d,e,s+d,n]));for(h.sort(gh),o=l=u=0,_=[],v=0,x=h.length;v<x;v++)i=(k=h[v])[0],c=k[1],p=k[2],o+u===i&&l+u===c?u+=p:(u&&_.push([o,l,u]),o=(S=[i,c,p])[0],l=S[1],u=S[2]);return u&&_.push([o,l,u]),_.push([m,f,0]),this.matchingBlocks=_},e.prototype.getOpcodes=function(){var e,t,n,r,a,o,i,s,l,c,d,u;if(this.opcodes)return this.opcodes;for(r=a=0,this.opcodes=t=[],s=0,l=(c=this.getMatchingBlocks()).length;s<l;s++)e=(d=c[s])[0],n=d[1],o=d[2],i="",r<e&&a<n?i="replace":r<e?i="delete":a<n&&(i="insert"),i&&t.push([i,r,e,a,n]),r=(u=[e+o,n+o])[0],a=u[1],o&&t.push(["equal",e,r,n,a]);return t},e.prototype.getGroupedOpcodes=function(e){var t,n,r,a,o,i,s,l,c,d,u,p,m,f,h;for(null==e&&(e=3),(t=this.getOpcodes()).length||(t=[["equal",0,1,0,1]]),"equal"===t[0][0]&&(c=(p=t[0])[0],a=p[1],o=p[2],i=p[3],s=p[4],t[0]=[c,hh(a,o-e),o,hh(i,s-e),s]),"equal"===t[t.length-1][0]&&(c=(m=t[t.length-1])[0],a=m[1],o=m[2],i=m[3],s=m[4],t[t.length-1]=[c,a,_h(o,a+e),i,_h(s,i+e)]),l=e+e,r=[],n=[],d=0,u=t.length;d<u;d++)c=(f=t[d])[0],a=f[1],o=f[2],i=f[3],s=f[4],"equal"===c&&o-a>l&&(n.push([c,a,_h(o,a+e),i,_h(s,i+e)]),r.push(n),n=[],a=(h=[hh(a,o-e),hh(i,s-e)])[0],i=h[1]),n.push([c,a,o,i,s]);return!n.length||1===n.length&&"equal"===n[0][0]||r.push(n),r},e.prototype.ratio=function(){var e,t,n,r;for(e=0,t=0,n=(r=this.getMatchingBlocks()).length;t<n;t++)e+=r[t][2];return yh(e,this.a.length+this.b.length)},e.prototype.quickRatio=function(){var e,t,n,r,a,o,i,s,l,c,d;if(!this.fullbcount)for(this.fullbcount=n={},o=0,s=(c=this.b).length;o<s;o++)n[t=c[o]]=(n[t]||0)+1;for(n=this.fullbcount,e={},r=0,i=0,l=(d=this.a).length;i<l;i++)t=d[i],a=vh(e,t)?e[t]:n[t]||0,e[t]=a-1,a>0&&r++;return yh(r,this.a.length+this.b.length)},e.prototype.realQuickRatio=function(){var e,t,n;return n=[this.a.length,this.b.length],yh(_h(e=n[0],t=n[1]),e+t)},e}(),bh={exports:{}};uh=bh,function(){var e,t,n,r,a,o,i,s,l,c,d,u,p,m,f;n=Math.floor,c=Math.min,t=function(e,t){return e<t?-1:e>t?1:0},l=function(e,r,a,o,i){var s;if(null==a&&(a=0),null==i&&(i=t),a<0)throw new Error("lo must be non-negative");for(null==o&&(o=e.length);a<o;)i(r,e[s=n((a+o)/2)])<0?o=s:a=s+1;return[].splice.apply(e,[a,a-a].concat(r)),r},o=function(e,n,r){return null==r&&(r=t),e.push(n),m(e,0,e.length-1,r)},a=function(e,n){var r,a;return null==n&&(n=t),r=e.pop(),e.length?(a=e[0],e[0]=r,f(e,0,n)):a=r,a},s=function(e,n,r){var a;return null==r&&(r=t),a=e[0],e[0]=n,f(e,0,r),a},i=function(e,n,r){var a;return null==r&&(r=t),e.length&&r(e[0],n)<0&&(n=(a=[e[0],n])[0],e[0]=a[1],f(e,0,r)),n},r=function(e,r){var a,o,i,s,l,c;for(null==r&&(r=t),l=[],o=0,i=(s=function(){c=[];for(var t=0,r=n(e.length/2);0<=r?t<r:t>r;0<=r?t++:t--)c.push(t);return c}.apply(this).reverse()).length;o<i;o++)a=s[o],l.push(f(e,a,r));return l},p=function(e,n,r){var a;if(null==r&&(r=t),-1!==(a=e.indexOf(n)))return m(e,0,a,r),f(e,a,r)},d=function(e,n,a){var o,s,l,c,d;if(null==a&&(a=t),!(s=e.slice(0,n)).length)return s;for(r(s,a),l=0,c=(d=e.slice(n)).length;l<c;l++)o=d[l],i(s,o,a);return s.sort(a).reverse()},u=function(e,n,o){var i,s,d,u,p,m,f,h,_;if(null==o&&(o=t),10*n<=e.length){if(!(d=e.slice(0,n).sort(o)).length)return d;for(s=d[d.length-1],u=0,m=(f=e.slice(n)).length;u<m;u++)o(i=f[u],s)<0&&(l(d,i,0,null,o),d.pop(),s=d[d.length-1]);return d}for(r(e,o),_=[],p=0,h=c(n,e.length);0<=h?p<h:p>h;0<=h?++p:--p)_.push(a(e,o));return _},m=function(e,n,r,a){var o,i,s;for(null==a&&(a=t),o=e[r];r>n&&a(o,i=e[s=r-1>>1])<0;)e[r]=i,r=s;return e[r]=o},f=function(e,n,r){var a,o,i,s,l;for(null==r&&(r=t),o=e.length,l=n,i=e[n],a=2*n+1;a<o;)(s=a+1)<o&&!(r(e[a],e[s])<0)&&(a=s),e[n]=e[a],a=2*(n=a)+1;return e[n]=i,m(e,l,n,r)},e=function(){function e(e){this.cmp=null!=e?e:t,this.nodes=[]}return e.push=o,e.pop=a,e.replace=s,e.pushpop=i,e.heapify=r,e.updateItem=p,e.nlargest=d,e.nsmallest=u,e.prototype.push=function(e){return o(this.nodes,e,this.cmp)},e.prototype.pop=function(){return a(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return s(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return i(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return r(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return p(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return(t=new e).nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),uh.exports=e}.call(ph);var wh,jh=bh.exports,kh=function(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a},Sh=Array.isArray,Ch="object"==typeof ph&&ph&&ph.Object===Object&&ph,Eh=Ch,Th="object"==typeof self&&self&&self.Object===Object&&self,Ih=Eh||Th||Function("return this")(),Ph=Ih.Symbol,Nh=Ph,Ah=Object.prototype,Oh=Ah.hasOwnProperty,Mh=Ah.toString,Dh=Nh?Nh.toStringTag:void 0,Lh=Object.prototype.toString,Rh=function(e){var t=Oh.call(e,Dh),n=e[Dh];try{e[Dh]=void 0;var r=!0}catch(o){}var a=Mh.call(e);return r&&(t?e[Dh]=n:delete e[Dh]),a},zh=Ph?Ph.toStringTag:void 0,$h=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":zh&&zh in Object(e)?Rh(e):function(e){return Lh.call(e)}(e)},Fh=function(e){return null!=e&&"object"==typeof e},qh=$h,Bh=Fh,Uh=function(e){return"symbol"==typeof e||Bh(e)&&"[object Symbol]"==qh(e)},Vh=Sh,Yh=Uh,Hh=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Kh=/^\w*$/,Zh=function(e,t){if(Vh(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Yh(e))||Kh.test(e)||!Hh.test(e)||null!=t&&e in Object(t)},Wh=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},Gh=$h,Jh=Wh,Xh=function(e){if(!Jh(e))return!1;var t=Gh(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Qh=Ih["__core-js_shared__"],e_=(wh=/[^.]+$/.exec(Qh&&Qh.keys&&Qh.keys.IE_PROTO||""))?"Symbol(src)_1."+wh:"",t_=Function.prototype.toString,n_=function(e){if(null!=e){try{return t_.call(e)}catch(t){}try{return e+""}catch(t){}}return""},r_=Xh,a_=function(e){return!!e_&&e_ in e},o_=Wh,i_=n_,s_=/^\[object .+?Constructor\]$/,l_=Function.prototype,c_=Object.prototype,d_=l_.toString,u_=c_.hasOwnProperty,p_=RegExp("^"+d_.call(u_).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),m_=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!o_(e)||a_(e))&&(r_(e)?p_:s_).test(i_(e))}(n)?n:void 0},f_=m_(Object,"create"),h_=f_,__=f_,y_=Object.prototype.hasOwnProperty,g_=f_,v_=Object.prototype.hasOwnProperty,x_=f_,b_=function(){this.__data__=h_?h_(null):{},this.size=0},w_=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},j_=function(e){var t=this.__data__;if(__){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return y_.call(t,e)?t[e]:void 0};function k_(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}k_.prototype.clear=b_,k_.prototype.delete=w_,k_.prototype.get=j_,k_.prototype.has=function(e){var t=this.__data__;return g_?void 0!==t[e]:v_.call(t,e)},k_.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=x_&&void 0===t?"__lodash_hash_undefined__":t,this};var S_=k_,C_=function(e,t){return e===t||e!=e&&t!=t},E_=C_,T_=function(e,t){for(var n=e.length;n--;)if(E_(e[n][0],t))return n;return-1},I_=T_,P_=Array.prototype.splice,N_=T_,A_=T_,O_=T_,M_=function(){this.__data__=[],this.size=0};function D_(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}D_.prototype.clear=M_,D_.prototype.delete=function(e){var t=this.__data__,n=I_(t,e);return!(n<0||(n==t.length-1?t.pop():P_.call(t,n,1),--this.size,0))},D_.prototype.get=function(e){var t=this.__data__,n=N_(t,e);return n<0?void 0:t[n][1]},D_.prototype.has=function(e){return A_(this.__data__,e)>-1},D_.prototype.set=function(e,t){var n=this.__data__,r=O_(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var L_=D_,R_=m_(Ih,"Map"),z_=S_,$_=L_,F_=R_,q_=function(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map},B_=q_,U_=q_,V_=q_,Y_=q_;function H_(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}H_.prototype.clear=function(){this.size=0,this.__data__={hash:new z_,map:new(F_||$_),string:new z_}},H_.prototype.delete=function(e){var t=B_(this,e).delete(e);return this.size-=t?1:0,t},H_.prototype.get=function(e){return U_(this,e).get(e)},H_.prototype.has=function(e){return V_(this,e).has(e)},H_.prototype.set=function(e,t){var n=Y_(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var K_=H_,Z_=K_;function W_(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],o=n.cache;if(o.has(a))return o.get(a);var i=e.apply(this,r);return n.cache=o.set(a,i)||o,i};return n.cache=new(W_.Cache||Z_),n}W_.Cache=Z_;var G_=W_,J_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,X_=/\\(\\)?/g,Q_=function(e){var t=G_(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(J_,(function(e,n,r,a){t.push(r?a.replace(X_,"$1"):n||e)})),t})),ey=kh,ty=Sh,ny=Uh,ry=Ph?Ph.prototype:void 0,ay=ry?ry.toString:void 0,oy=function e(t){if("string"==typeof t)return t;if(ty(t))return ey(t,e)+"";if(ny(t))return ay?ay.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},iy=Sh,sy=Zh,ly=Q_,cy=function(e,t){return iy(e)?e:sy(e,t)?[e]:ly(function(e){return null==e?"":oy(e)}(e))},dy=Uh,uy=function(e){if("string"==typeof e||dy(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},py=cy,my=uy,fy=function(e,t){for(var n=0,r=(t=py(t,e)).length;null!=e&&n<r;)e=e[my(t[n++])];return n&&n==r?e:void 0},hy=L_,_y=L_,yy=R_,gy=K_,vy=L_;function xy(e){var t=this.__data__=new vy(e);this.size=t.size}xy.prototype.clear=function(){this.__data__=new hy,this.size=0},xy.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},xy.prototype.get=function(e){return this.__data__.get(e)},xy.prototype.has=function(e){return this.__data__.has(e)},xy.prototype.set=function(e,t){var n=this.__data__;if(n instanceof _y){var r=n.__data__;if(!yy||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new gy(r)}return n.set(e,t),this.size=n.size,this};var by=xy,wy=K_;function jy(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new wy;++t<n;)this.add(e[t])}jy.prototype.add=jy.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},jy.prototype.has=function(e){return this.__data__.has(e)};var ky=jy,Sy=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},Cy=function(e,t){return e.has(t)},Ey=function(e,t,n,r,a,o){var i=1&n,s=e.length,l=t.length;if(s!=l&&!(i&&l>s))return!1;var c=o.get(e),d=o.get(t);if(c&&d)return c==t&&d==e;var u=-1,p=!0,m=2&n?new ky:void 0;for(o.set(e,t),o.set(t,e);++u<s;){var f=e[u],h=t[u];if(r)var _=i?r(h,f,u,t,e,o):r(f,h,u,e,t,o);if(void 0!==_){if(_)continue;p=!1;break}if(m){if(!Sy(t,(function(e,t){if(!Cy(m,t)&&(f===e||a(f,e,n,r,o)))return m.push(t)}))){p=!1;break}}else if(f!==h&&!a(f,h,n,r,o)){p=!1;break}}return o.delete(e),o.delete(t),p},Ty=Ih.Uint8Array,Iy=C_,Py=Ey,Ny=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n},Ay=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},Oy=Ph?Ph.prototype:void 0,My=Oy?Oy.valueOf:void 0,Dy=Sh,Ly=Object.prototype.propertyIsEnumerable,Ry=Object.getOwnPropertySymbols,zy=Ry?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,a=0,o=[];++n<r;){var i=e[n];t(i,n,e)&&(o[a++]=i)}return o}(Ry(e),(function(t){return Ly.call(e,t)})))}:function(){return[]},$y=$h,Fy=Fh,qy=function(e){return Fy(e)&&"[object Arguments]"==$y(e)},By=Fh,Uy=Object.prototype,Vy=Uy.hasOwnProperty,Yy=Uy.propertyIsEnumerable,Hy=qy(function(){return arguments}())?qy:function(e){return By(e)&&Vy.call(e,"callee")&&!Yy.call(e,"callee")},Ky={exports:{}},Zy=function(){return!1};!function(e,t){var n=Ih,r=Zy,a=t&&!t.nodeType&&t,o=a&&e&&!e.nodeType&&e,i=o&&o.exports===a?n.Buffer:void 0,s=(i?i.isBuffer:void 0)||r;e.exports=s}(Ky,Ky.exports);var Wy=/^(?:0|[1-9]\d*)$/,Gy=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Wy.test(e))&&e>-1&&e%1==0&&e<t},Jy=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},Xy=$h,Qy=Jy,eg=Fh,tg={};tg["[object Float32Array]"]=tg["[object Float64Array]"]=tg["[object Int8Array]"]=tg["[object Int16Array]"]=tg["[object Int32Array]"]=tg["[object Uint8Array]"]=tg["[object Uint8ClampedArray]"]=tg["[object Uint16Array]"]=tg["[object Uint32Array]"]=!0,tg["[object Arguments]"]=tg["[object Array]"]=tg["[object ArrayBuffer]"]=tg["[object Boolean]"]=tg["[object DataView]"]=tg["[object Date]"]=tg["[object Error]"]=tg["[object Function]"]=tg["[object Map]"]=tg["[object Number]"]=tg["[object Object]"]=tg["[object RegExp]"]=tg["[object Set]"]=tg["[object String]"]=tg["[object WeakMap]"]=!1;var ng=function(e){return function(t){return e(t)}},rg={exports:{}};!function(e,t){var n=Ch,r=t&&!t.nodeType&&t,a=r&&e&&!e.nodeType&&e,o=a&&a.exports===r&&n.process,i=function(){try{return a&&a.require&&a.require("util").types||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=i}(rg,rg.exports);var ag=function(e){return eg(e)&&Qy(e.length)&&!!tg[Xy(e)]},og=ng,ig=rg.exports,sg=ig&&ig.isTypedArray,lg=sg?og(sg):ag,cg=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},dg=Hy,ug=Sh,pg=Ky.exports,mg=Gy,fg=lg,hg=Object.prototype.hasOwnProperty,_g=Object.prototype,yg=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),gg=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||_g)},vg=yg,xg=Object.prototype.hasOwnProperty,bg=Xh,wg=Jy,jg=function(e){return null!=e&&wg(e.length)&&!bg(e)},kg=function(e,t){var n=ug(e),r=!n&&dg(e),a=!n&&!r&&pg(e),o=!n&&!r&&!a&&fg(e),i=n||r||a||o,s=i?cg(e.length,String):[],l=s.length;for(var c in e)!t&&!hg.call(e,c)||i&&("length"==c||a&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||mg(c,l))||s.push(c);return s},Sg=jg,Cg=function(e){return Sg(e)?kg(e):function(e){if(!gg(e))return vg(e);var t=[];for(var n in Object(e))xg.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)},Eg=function(e,t,n){var r=t(e);return Dy(e)?r:function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}(r,n(e))},Tg=zy,Ig=Cg,Pg=function(e){return Eg(e,Ig,Tg)},Ng=Object.prototype.hasOwnProperty,Ag=m_(Ih,"DataView"),Og=R_,Mg=m_(Ih,"Promise"),Dg=m_(Ih,"Set"),Lg=m_(Ih,"WeakMap"),Rg=$h,zg=n_,$g=zg(Ag),Fg=zg(Og),qg=zg(Mg),Bg=zg(Dg),Ug=zg(Lg),Vg=Rg;(Ag&&"[object DataView]"!=Vg(new Ag(new ArrayBuffer(1)))||Og&&"[object Map]"!=Vg(new Og)||Mg&&"[object Promise]"!=Vg(Mg.resolve())||Dg&&"[object Set]"!=Vg(new Dg)||Lg&&"[object WeakMap]"!=Vg(new Lg))&&(Vg=function(e){var t=Rg(e),n="[object Object]"==t?e.constructor:void 0,r=n?zg(n):"";if(r)switch(r){case $g:return"[object DataView]";case Fg:return"[object Map]";case qg:return"[object Promise]";case Bg:return"[object Set]";case Ug:return"[object WeakMap]"}return t});var Yg,Hg=by,Kg=Ey,Zg=function(e,t,n,r,a,o,i){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new Ty(e),new Ty(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Iy(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=Ny;case"[object Set]":var l=1&r;if(s||(s=Ay),e.size!=t.size&&!l)return!1;var c=i.get(e);if(c)return c==t;r|=2,i.set(e,t);var d=Py(s(e),s(t),r,a,o,i);return i.delete(e),d;case"[object Symbol]":if(My)return My.call(e)==My.call(t)}return!1},Wg=function(e,t,n,r,a,o){var i=1&n,s=Pg(e),l=s.length;if(l!=Pg(t).length&&!i)return!1;for(var c=l;c--;){var d=s[c];if(!(i?d in t:Ng.call(t,d)))return!1}var u=o.get(e),p=o.get(t);if(u&&p)return u==t&&p==e;var m=!0;o.set(e,t),o.set(t,e);for(var f=i;++c<l;){var h=e[d=s[c]],_=t[d];if(r)var y=i?r(_,h,d,t,e,o):r(h,_,d,e,t,o);if(!(void 0===y?h===_||a(h,_,n,r,o):y)){m=!1;break}f||(f="constructor"==d)}if(m&&!f){var g=e.constructor,v=t.constructor;g==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof g&&g instanceof g&&"function"==typeof v&&v instanceof v||(m=!1)}return o.delete(e),o.delete(t),m},Gg=Vg,Jg=Sh,Xg=Ky.exports,Qg=lg,ev="[object Object]",tv=Object.prototype.hasOwnProperty,nv=Fh,rv=function e(t,n,r,a,o){return t===n||(null==t||null==n||!nv(t)&&!nv(n)?t!=t&&n!=n:function(e,t,n,r,a,o){var i=Jg(e),s=Jg(t),l=i?"[object Array]":Gg(e),c=s?"[object Array]":Gg(t),d=(l="[object Arguments]"==l?ev:l)==ev,u=(c="[object Arguments]"==c?ev:c)==ev,p=l==c;if(p&&Xg(e)){if(!Xg(t))return!1;i=!0,d=!1}if(p&&!d)return o||(o=new Hg),i||Qg(e)?Kg(e,t,n,r,a,o):Zg(e,t,l,n,r,a,o);if(!(1&n)){var m=d&&tv.call(e,"__wrapped__"),f=u&&tv.call(t,"__wrapped__");if(m||f){var h=m?e.value():e,_=f?t.value():t;return o||(o=new Hg),a(h,_,n,r,o)}}return!!p&&(o||(o=new Hg),Wg(e,t,n,r,a,o))}(t,n,r,a,e,o))},av=by,ov=rv,iv=Wh,sv=function(e){return e==e&&!iv(e)},lv=sv,cv=Cg,dv=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}},uv=dv,pv=fy,mv=cy,fv=Hy,hv=Sh,_v=Gy,yv=Jy,gv=uy,vv=function(e,t){return null!=e&&t in Object(e)},xv=rv,bv=function(e,t){return null!=e&&function(e,t,n){for(var r=-1,a=(t=mv(t,e)).length,o=!1;++r<a;){var i=gv(t[r]);if(!(o=null!=e&&n(e,i)))break;e=e[i]}return o||++r!=a?o:!!(a=null==e?0:e.length)&&yv(a)&&_v(i,a)&&(hv(e)||fv(e))}(e,t,vv)},wv=Zh,jv=sv,kv=dv,Sv=uy,Cv=function(e){return e},Ev=fy,Tv=Zh,Iv=uy,Pv=function(e){var t=function(e){for(var t=cv(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,lv(a)]}return t}(e);return 1==t.length&&t[0][2]?uv(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,r){var a=n.length,o=a;if(null==e)return!o;for(e=Object(e);a--;){var i=n[a];if(i[2]?i[1]!==e[i[0]]:!(i[0]in e))return!1}for(;++a<o;){var s=(i=n[a])[0],l=e[s],c=i[1];if(i[2]){if(void 0===l&&!(s in e))return!1}else{var d=new av;if(!ov(c,l,3,r,d))return!1}}return!0}(n,0,t)}},Nv=function(e,t){return wv(e)&&jv(t)?kv(Sv(e),t):function(n){var r=function(e,t,n){var r=null==e?void 0:pv(e,t);return void 0===r?n:r}(n,e);return void 0===r&&r===t?bv(n,e):xv(t,r,3)}},Av=Cv,Ov=Sh,Mv=function(e){return Tv(e)?function(e){return function(t){return null==t?void 0:t[e]}}(Iv(e)):function(e){return function(t){return Ev(t,e)}}(e)},Dv=function(){return function(e,t,n){for(var r=-1,a=Object(e),o=n(e),i=o.length;i--;){var s=o[++r];if(!1===t(a[s],s,a))break}return e}}(),Lv=Cg,Rv=jg,zv=function(e){return function(t,n){if(null==t)return t;if(!Rv(t))return e(t,n);for(var r=t.length,a=-1,o=Object(t);++a<r&&!1!==n(o[a],a,o););return t}}((function(e,t){return e&&Dv(e,t,Lv)})),$v=jg,Fv=Uh,qv=function(e,t){if(e!==t){var n=void 0!==e,r=null===e,a=e==e,o=Fv(e),i=void 0!==t,s=null===t,l=t==t,c=Fv(t);if(!s&&!c&&!o&&e>t||o&&i&&l&&!s&&!c||r&&i&&l||!n&&l||!a)return 1;if(!r&&!o&&!c&&e<t||c&&n&&a&&!r&&!o||s&&n&&a||!i&&a||!l)return-1}return 0},Bv=kh,Uv=fy,Vv=function(e){return"function"==typeof e?e:null==e?Av:"object"==typeof e?Ov(e)?Nv(e[0],e[1]):Pv(e):Mv(e)},Yv=ng,Hv=Cv,Kv=Sh,Zv=function(e,t,n){t=t.length?Bv(t,(function(e){return Kv(e)?function(t){return Uv(t,1===e.length?e[0]:e)}:e})):[Hv];var r=-1;t=Bv(t,Yv(Vv));var a=function(e,t){var n=-1,r=$v(e)?Array(e.length):[];return zv(e,(function(e,a,o){r[++n]=t(e,a,o)})),r}(e,(function(e,n,a){return{criteria:Bv(t,(function(t){return t(e)})),index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(a,(function(e,t){return function(e,t,n){for(var r=-1,a=e.criteria,o=t.criteria,i=a.length,s=n.length;++r<i;){var l=qv(a[r],o[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))},Wv=Sh,Gv=function(e,t,n,r){return null==e?[]:(Wv(t)||(t=null==t?[]:[t]),Wv(n=r?void 0:n)||(n=null==n?[]:[n]),Zv(e,t,n))},Jv={_intersect:function(e,t){if(!e||!t||0===e.length||0===t.length)return[];if(e.length<100&&t.length<100)return e.filter((e=>t.includes(e)));const n=new Set(t);return e.filter((e=>n.has(e)))},_intersectWith:function(e,t,n){return e&&t&&0!==e.length&&0!==t.length?e.filter((e=>t.some((t=>n(e,t))))):[]},_difference:function(e,t){if(!e)return[];if(!t||0===t.length)return e.slice();if(e.length<100&&t.length<100)return e.filter((e=>!t.includes(e)));const n=new Set(t);return e.filter((e=>!n.has(e)))},_differenceWith:function(e,t,n){return e?t&&0!==t.length?e.filter((e=>!t.some((t=>n(e,t))))):e.slice():[]},_uniq:function(e){return e&&0!==e.length?1===e.length?e.slice():[...new Set(e)]:[]},_uniqWith:function(e,t){if(!e||0===e.length)return[];if(1===e.length)return e.slice();const n=[];e:for(let r=0;r<e.length;r++){const a=e[r];for(let e=0;e<n.length;e++)if(t(a,n[e]))continue e;n.push(a)}return n},_partialRight:function(e){const t=Array.prototype.slice.call(arguments,1);return function(){const n=Array.prototype.slice.call(arguments);return e.apply(this,n.concat(t))}},_forEach:function(e,t){if(e)if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n],n);else{const n=Object.keys(e);for(let r=0;r<n.length;r++)t(e[n[r]],n[r])}},_isArray:Array.isArray};try{Yg="undefined"!=typeof Intl&&void 0!==Intl.Collator?Intl.Collator("generic",{sensitivity:"base"}):null}catch(bd){}var Xv,Qv=function(e,t,n){var r=[],a=[],o=n&&Yg&&n.useCollator,i=1;if(n&&n.subcost&&"number"==typeof n.subcost&&(i=n.subcost),e===t)return 0;var s,l,c,d,u=Array.from(e),p=Array.from(t),m=u.length,f=p.length;if(0===m)return f;if(0===f)return m;for(var h=0,_=0;h<m;)a[h]=u[h].codePointAt(0),r[h]=++h;if(o)for(;_<f;)for(s=p[_].codePointAt(0),c=_++,l=_,h=0;h<m;h++)d=0===Yg.compare(String.fromCodePoint(s),String.fromCodePoint(a[h]))?c:c+i,c=r[h],l=r[h]=c>l?d>l?l+1:d:d>c?c+1:d;else for(;_<f;)for(s=p[_].codePointAt(0),c=_++,l=_,h=0;h<m;h++)d=s===a[h]?c:c+i,c=r[h],l=r[h]=c>l?d>l?l+1:d:d>c?c+1:d;return l};try{Xv="undefined"!=typeof Intl&&void 0!==Intl.Collator?Intl.Collator("generic",{sensitivity:"base"}):null}catch(bd){}var ex,tx=function(e,t,n,r){var a=[],o=[],i=n&&Xv&&n.useCollator,s=1;if(n&&n.subcost&&"number"==typeof n.subcost&&(s=n.subcost),e===t)return 0;var l=e.length,c=t.length;if(0===l)return c;if(0===c)return l;if(n&&n.wildcards&&"string"==typeof n.wildcards&&n.wildcards.length>0){var d,u,p,m,f,h;if(!1===n.full_process&&!0!==n.processed){u=(d=n.wildcards[0]).charCodeAt(0);var _="["+(n.wildcards.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+"]");if((e=e.replace(new RegExp(_,"g"),d))===(t=t.replace(new RegExp(_,"g"),d)))return 0}else u=(d=n.wildcards[0].toLowerCase()).charCodeAt(0);for(var y=0,g=0;y<l;)o[y]=e.charCodeAt(y),a[y]=++y;if(i)for(;g<c;)for(p=t.charCodeAt(g),f=g++,m=g,y=0;y<l;y++)h=0===Xv.compare(String.fromCharCode(p),String.fromCharCode(o[y]))||p===u||o[y]===u?f:f+s,f=a[y],m=a[y]=f>m?h>m?m+1:h:h>f?f+1:h;else for(;g<c;)for(p=t.charCodeAt(g),f=g++,m=g,y=0;y<l;y++)h=p===o[y]||p===u||o[y]===u?f:f+s,f=a[y],m=a[y]=f>m?h>m?m+1:h:h>f?f+1:h;return m}return r(e,t,n)};try{ex="undefined"!=typeof Intl&&void 0!==Intl.Collator?Intl.Collator("generic",{sensitivity:"base"}):null}catch(bd){}var nx=function(e,t,n){var r=[],a=[],o=n&&ex&&n.useCollator,i=1;if(n&&n.subcost&&"number"==typeof n.subcost&&(i=n.subcost),e===t)return 0;var s,l,c,d,u=e.length,p=t.length;if(0===u)return p;if(0===p)return u;for(var m=0,f=0;m<u;)a[m]=e.charCodeAt(m),r[m]=++m;if(o)for(;f<p;)for(s=t.charCodeAt(f),c=f++,l=f,m=0;m<u;m++)d=0===ex.compare(String.fromCharCode(s),String.fromCharCode(a[m]))?c:c+i,c=r[m],l=r[m]=c>l?d>l?l+1:d:d>c?c+1:d;else for(;f<p;)for(s=t.charCodeAt(f),c=f++,l=f,m=0;m<u;m++)d=s===a[m]?c:c+i,c=r[m],l=r[m]=c>l?d>l?l+1:d:d>c?c+1:d;return l};!function(e){if(!e.setImmediate){var t,n=1,r={},a=!1,o=e.document,i=Object.getPrototypeOf&&Object.getPrototypeOf(e);i=i&&i.setTimeout?i:e,"[object process]"==={}.toString.call(e.process)?t=function(e){process.nextTick((function(){u(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(s="setImmediate$"+Math.random()+"$",l=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&u(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",l,!1):e.attachEvent("onmessage",l),t=function(t){e.postMessage(s+t,"*")}):e.MessageChannel?((c=new MessageChannel).port1.onmessage=function(e){u(e.data)},t=function(e){c.port2.postMessage(e)}):o&&"onreadystatechange"in o.createElement("script")?function(){var e=o.documentElement;t=function(t){var n=o.createElement("script");n.onreadystatechange=function(){u(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():t=function(e){setTimeout(u,0,e)},i.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var a=new Array(arguments.length-1),o=0;o<a.length;o++)a[o]=arguments[o+1];var i={callback:e,args:a};return r[n]=i,t(n),n++},i.clearImmediate=d}var s,l,c;function d(e){delete r[e]}function u(e){if(a)setTimeout(u,0,e);else{var t=r[e];if(t){a=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{d(e),a=!1}}}}}("undefined"==typeof self?ph:self);var rx={exports:{}};!function(e){e.exports=function(t,n,r,a){return(e={}).dedupe=function(e,o){var i,s=t(o);if(!n(e)&&"object"!=typeof e)throw new Error("contains_dupes must be an array or object");if(0===Object.keys(e).length)return[];s.limit&&(s.limit=0),s.cutoff&&"number"==typeof s.cutoff||(s.cutoff=70),s.scorer||(s.scorer=r),i=s.processor&&"function"==typeof s.processor?s.processor:function(e){return e};var l={};for(var c in e){var d=i(e[c]);if("string"!=typeof d&&d instanceof String==0)throw new Error("Each processed item in dedupe must be a string.");var u=a(d,e,s);s.returnObjects?(1===u.length||(u=u.sort((function(e,t){var n=i(e.choice),r=i(t.choice),a=n.length,o=r.length;return a===o?n<r?-1:1:o-a}))),s.keepmap?l[i(u[0].choice)]={item:u[0].choice,key:u[0].key,matches:u}:l[i(u[0].choice)]={item:u[0].choice,key:u[0].key}):(1===u.length||(u=u.sort((function(e,t){var n=i(e[0]),r=i(t[0]),a=n.length,o=r.length;return a===o?n<r?-1:1:o-a}))),s.keepmap?l[i(u[0][0])]=[u[0][0],u[0][2],u]:l[i(u[0][0])]=[u[0][0],u[0][2]])}var p=[];for(var m in l)p.push(l[m]);return p},e}}(rx),function(){var e=xh,t=jh,n=Gv,r=Jv._intersect,a=Jv._intersectWith,o=Jv._difference,i=Jv._differenceWith,s=Jv._partialRight,l=Jv._forEach,c=Jv._isArray,d=Qv,u=tx,p=nx,m=function(e,t,n){var r={},a=tx,o=nx;function i(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function s(e){return("string"==typeof e||e instanceof String)&&e.length>0}r.validate=s,r.process_and_sort=function(e){return s(e)?e.match(/\S+/g).sort().join(" ").trim():""},r.tokenize=function(r,i){if(i&&i.wildcards&&t&&n){var s=n(a,i,o);return t(r.match(/\S+/g),(function(e,t){return 0===s(e,t)}))}return e(r.match(/\S+/g))};const l=/[^\p{L}\p{N}]/gu;return r.full_process=function(e,t){if(!(e instanceof String)&&"string"!=typeof e)return"";var n;if(t&&"object"==typeof t&&t.wildcards&&"string"==typeof t.wildcards&&t.wildcards.length>0){var r=t.wildcards.toLowerCase();if(e=e.toLowerCase(),t.force_ascii){var a="[^\0 -|"+i(r)+"]";e=e.replace(new RegExp(a,"g"),"");var o="["+i(r)+"]",s=r[0];e=e.replace(new RegExp(o,"g"),s);var c="[^A-Za-z0-9"+i(r)+"]";n=(e=(e=e.replace(new RegExp(c,"g")," ")).replace(/_/g," ")).trim()}else{var d="[^\\p{L}\\p{N}|"+i(r)+"]";e=e.replace(new RegExp(d,"gu")," "),o="["+i(r)+"]",s=r[0],n=(e=e.replace(new RegExp(o,"g"),s)).trim()}}else n=t&&(t.force_ascii||!0===t)?(e=e.replace(/[^\x00-\x7F]/g,"")).replace(/\W|_/g," ").toLowerCase().trim():e.replace(l," ").toLowerCase().trim();return t&&t.collapseWhitespace&&(n=n.replace(/\s+/g," ")),n},r.clone_and_set_option_defaults=function(e){if(e&&e.isAClone)return e;var t={isAClone:!0};if(e){var n,r=Object.keys(e);for(n=0;n<r.length;n++)t[r[n]]=e[r[n]]}return!1!==t.full_process&&(t.full_process=!0),!0!==t.force_ascii&&(t.force_ascii=!1),!1!==t.normalize&&!0===t.astral&&(t.normalize=!0),!1!==t.collapseWhitespace&&(t.collapseWhitespace=!0),t},r.isCustomFunc=function(e){return"function"!=typeof e||"token_set_ratio"!==e.name&&"partial_token_set_ratio"!==e.name&&"token_sort_ratio"!==e.name&&"partial_token_sort_ratio"!==e.name&&"QRatio"!==e.name&&"WRatio"!==e.name&&"distance"!==e.name&&"partial_ratio"!==e.name},r}(Jv._uniq,Jv._uniqWith,s),f=m.validate,h=m.process_and_sort,_=m.tokenize,y=m.full_process,g=m.clone_and_set_option_defaults,v=m.isCustomFunc,x=rx.exports(g,c,b,C).dedupe;function b(e,t,n){var r=g(n);return e=r.normalize?e.normalize():e,t=r.normalize?t.normalize():t,e=r.full_process?y(e,r):e,t=r.full_process?y(t,r):t,f(e)&&f(t)?z(e,t,r):0}function w(e,t,n){var r=g(n);return e=r.normalize?e.normalize():e,t=r.normalize?t.normalize():t,e=r.full_process?y(e,r):e,t=r.full_process?y(t,r):t,f(e)&&f(t)?R(e,t,r):0}function j(e,t,n){var r=g(n);return e=r.normalize?e.normalize():e,t=r.normalize?t.normalize():t,e=r.full_process?y(e,r):e,t=r.full_process?y(t,r):t,f(e)&&f(t)?(r.partial=!0,R(e,t,r)):0}function k(e,t,n){var r=g(n);return e=r.normalize?e.normalize():e,t=r.normalize?t.normalize():t,e=r.full_process?y(e,r):e,t=r.full_process?y(t,r):t,f(e)&&f(t)?(r.proc_sorted||(e=h(e),t=h(t)),z(e,t,r)):0}function S(e,t,n){var r=g(n);return e=r.normalize?e.normalize():e,t=r.normalize?t.normalize():t,e=r.full_process?y(e,r):e,t=r.full_process?y(t,r):t,f(e)&&f(t)?(r.partial=!0,r.proc_sorted||(e=h(e),t=h(t)),$(e,t,r)):0}function C(e,n,r){var a,o=g(r);if(c(n))a=n.length;else{if(!(n instanceof Object))throw new Error("Invalid choices");a=Object.keys(n).length}if(!n||0===a)return[];if(o.processor&&"function"!=typeof o.processor)throw new Error("Invalid Processor");if(o.processor||(o.processor=function(e){return e}),o.scorer&&"function"!=typeof o.scorer)throw new Error("Invalid Scorer");o.scorer||(o.scorer=b);var i=v(o.scorer);o.cutoff&&"number"==typeof o.cutoff||(o.cutoff=-1);var s=function(e,t){return e};o.full_process&&(s=y,i||(o.processed=!0));var d=!1;i||(o.astral&&o.normalize&&(o.normalize=!1,String.prototype.normalize&&(d=!0,e=e.normalize())),e=s(e,o),o.full_process=!1,e.length);var u,p,m,f,x=[],w=!1,j=!1;if("token_sort_ratio"===o.scorer.name||"partial_token_sort_ratio"===o.scorer.name){var k=h(e);w=!0}else if("token_set_ratio"===o.scorer.name||"partial_token_set_ratio"===o.scorer.name){var S=_(e,o);j=!0}return o.returnObjects?(m=function(e,t){return e.score-t.score},f=function(e,t){return t.score-e.score}):(m=function(e,t){return e[1]-t[1]},f=function(e,t){return t[1]-e[1]}),l(n,(function(t,n){o.tokens=void 0,o.proc_sorted=!1,w?(o.proc_sorted=!0,t&&t.proc_sorted?p=t.proc_sorted:(p=s(d?o.processor(t).normalize():o.processor(t),o),p=h(p)),u=o.scorer(k,p,o)):j?(p="x",t&&t.tokens?(o.tokens=[S,t.tokens],o.trySimple&&(p=s(o.processor(t),o))):(p=s(d?o.processor(t).normalize():o.processor(t),o),o.tokens=[S,_(p,o)]),u=o.scorer(e,p,o)):i?(p=o.processor(t),u=o.scorer(e,p,o)):("string"==typeof(p=s(d?o.processor(t).normalize():o.processor(t),o))&&0!==p.length||!0,u=o.scorer(e,p,o)),u>o.cutoff&&(o.returnObjects?x.push({choice:t,score:u,key:n}):x.push([t,u,n]))})),o.limit&&"number"==typeof o.limit&&o.limit>0&&o.limit<a&&!o.unsorted?x=t.nlargest(x,o.limit,m):o.unsorted||(x=x.sort(f)),x}function E(e,n,r,a){var o,i,s=g(r);"object"==typeof r.abortController&&(o=r.abortController),"object"==typeof r.cancelToken&&(i=r.cancelToken);var l=256;"number"==typeof s.asyncLoopOffset&&(l=s.asyncLoopOffset<1?1:s.asyncLoopOffset);var d,u=!1;if(n&&n.length&&c(n))d=n.length,u=!0;else{if(!(n instanceof Object))return void a(new Error("Invalid choices"));d=Object.keys(n).length}if(n&&0!==d)if(s.processor&&"function"!=typeof s.processor)a(new Error("Invalid Processor"));else if(s.processor||(s.processor=function(e){return e}),s.scorer&&"function"!=typeof s.scorer)a(new Error("Invalid Scorer"));else{s.scorer||(s.scorer=b);var p=v(s.scorer);s.cutoff&&"number"==typeof s.cutoff||(s.cutoff=-1);var m=function(e,t){return e};s.full_process&&(m=y,p||(s.processed=!0));var f=!1;p||(s.astral&&s.normalize&&(s.normalize=!1,String.prototype.normalize&&(f=!0,e=e.normalize())),e=m(e,s),s.full_process=!1,e.length);var x,w,j,k,S,C=[],E=!1,T=!1;if("token_sort_ratio"===s.scorer.name||"partial_token_sort_ratio"===s.scorer.name){var I=h(e);E=!0}else if("token_set_ratio"===s.scorer.name||"partial_token_set_ratio"===s.scorer.name){var P=_(e,s);T=!0}s.returnObjects?(k=function(e,t){return e.score-t.score},S=function(e,t){return t.score-e.score}):(k=function(e,t){return e[1]-t[1]},S=function(e,t){return t[1]-e[1]});var N=Object.keys(n);u?A(0):A(N[0],0)}else a(null,[]);function A(r,c){(u||n.hasOwnProperty(r))&&(s.tokens=void 0,s.proc_sorted=!1,E?(s.proc_sorted=!0,n[r]&&n[r].proc_sorted?w=n[r].proc_sorted:(w=m(f?s.processor(n[r]).normalize():s.processor(n[r]),s),w=h(w)),j=s.scorer(I,w,s)):T?(w="x",n[r]&&n[r].tokens?(s.tokens=[P,n[r].tokens],s.trySimple&&(w=m(s.processor(n[r]),s))):(w=m(f?s.processor(n[r]).normalize():s.processor(n[r]),s),s.tokens=[P,_(w,s)]),j=s.scorer(e,w,s)):p?(w=s.processor(n[r]),j=s.scorer(e,w,s)):("string"==typeof(w=m(f?s.processor(n[r]).normalize():s.processor(n[r]),s))&&0!==w.length||!0,j=s.scorer(e,w,s)),x=u?parseInt(r):r,j>s.cutoff&&(s.returnObjects?C.push({choice:n[r],score:j,key:x}):C.push([n[r],j,x]))),o&&!0===o.signal.aborted?a(new Error("aborted")):i&&!0===i.canceled?a(new Error("canceled")):u&&r<n.length-1?r%l==0?setImmediate((function(){A(r+1)})):A(r+1):c<N.length-1?c%l==0?setImmediate((function(){A(N[c+1],c+1)})):A(N[c+1],c+1):(s.limit&&"number"==typeof s.limit&&s.limit>0&&s.limit<d&&!s.unsorted?C=t.nlargest(C,s.limit,k):s.unsorted||(C=C.sort(S)),a(null,C))}}var T,I,P,N,A="%*SuperUniqueWildcardKey*%";function O(e,t){var n=e;if(t.astral)var r=Array.from(n);else r=n.split("");var a={};if(t.wildcards)for(var o=0;o<r.length;o++){var i=r[o];t.wildcards.indexOf(i)>-1?a[A]?a[A]+=1:a[A]=1:a[i]?a[i]+=1:a[i]=1}else for(o=0;o<r.length;o++)a[i=r[o]]?a[i]+=1:a[i]=1;return a}function M(e,t,a){for(var o=t,i=e.reduce((function(e,t){return e[t]=O(t,a),e}),{}),s=o.reduce((function(e,t){return e[t]=O(t,a),e}),{}),l=[],c=0;o.length&&c<e.length;){var d=n(o,(function(t){return n=i[e[c]],a=s[t],o=Object.keys(n),l=Object.keys(a),d=r(o,l).map((function(e){return n[e]*a[e]})).reduce((function(e,t){return e+t}),0),u=o.map((function(e){return Math.pow(n[e],2)})).reduce((function(e,t){return e+t}),0),p=l.map((function(e){return Math.pow(a[e],2)})).reduce((function(e,t){return e+t}),0),d/(Math.sqrt(u)*Math.sqrt(p));var n,a,o,l,d,u,p}),"desc")[0];l.push(d),c++,o=o.filter((function(e){return e!==d}))}return l.concat(o)}function D(e,t,n,r){var a=t,o=r;return(t.length>r.length||t.length===r.length&&(e.length>n.length||[e,n].sort()[0]===n))&&(a=r,o=t),[a,o]}function L(e,t,n){if(n.tokens)r=n.tokens[0],a=n.tokens[1];else var r=_(e,n),a=_(t,n);var o=D(e,r.sort(),t,a.sort()),i=o[0];const s=M(i,o[1],n);return n.partial?$(i.join(" "),s.join(" "),n):z(i.join(" "),s.join(" "),n)}function R(e,t,n){if(n.tokens)l=n.tokens[0],c=n.tokens[1];else var l=_(e,n),c=_(t,n);if(n.wildcards)var d=s(u,n,p),m=function(e,t){return 0===d(e,t)},f=a(l,c,m),h=i(l,c,m),y=i(c,l,m);else f=r(l,c),h=o(l,c),y=o(c,l);var g=f.sort().join(" "),v=h.sort(),x=y.sort();if(n.sortBySimilarity)var b=D(e,v,t,x),w=b[0],j=b[1],k=w.join(" "),S=M(w,j,n).join(" ");else k=v.join(" "),S=x.join(" ");var C=g+" "+k,E=g+" "+S;g=g.trim(),C=C.trim(),E=E.trim();var T=z;if(n.partial&&(T=$,g.length>0))return 100;var I=[T(g,C,n),T(g,E,n),T(C,E,n)];return n.trySimple&&I.push(T(e,t,n)),Math.max.apply(null,I)}function z(t,n,r){if(!f(t))return 0;if(!f(n))return 0;if(r.ratio_alg&&"difflib"===r.ratio_alg){var a=new e(null,t,n).ratio();return Math.round(100*a)}var o,i;return void 0===r.subcost&&(r.subcost=2),r.astral?(o=d(t,n,r),i=Array.from(t).length+Array.from(n).length):r.wildcards?(o=u(t,n,r,p),i=t.length+n.length):(o=p(t,n,r),i=t.length+n.length),Math.round((i-o)/i*100)}function $(t,n,r){if(!f(t))return 0;if(!f(n))return 0;if(t.length<=n.length)var a=t,o=n;else a=n,o=t;for(var i=new e(null,a,o).getMatchingBlocks(),s=[],l=0;l<i.length;l++){var c=i[l][1]-i[l][0]>0?i[l][1]-i[l][0]:0,d=c+a.length,u=z(a,o.substring(c,d),r);if(u>99.5)return 100;s.push(u)}return Math.max.apply(null,s)}Object.keys||(Object.keys=(T=Object.prototype.hasOwnProperty,I=!{toString:null}.propertyIsEnumerable("toString"),N=(P=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var t,n,r=[];for(t in e)T.call(e,t)&&r.push(t);if(I)for(n=0;n<N;n++)T.call(e,P[n])&&r.push(P[n]);return r}));var F=void 0;"undefined"!=typeof Promise&&(F=function(e,t,n){return new Promise((function(r,a){E(e,t,n,(function(e,t){e?a(e):r(t)}))}))});var q={distance:function(e,t,n){var r=g(n);return e=r.normalize?e.normalize():e,t=r.normalize?t.normalize():t,e=r.full_process?y(e,r):e,t=r.full_process?y(t,r):t,void 0===r.subcost&&(r.subcost=1),r.astral?d(e,t,r):u(e,t,r,p)},ratio:b,partial_ratio:function(e,t,n){var r=g(n);return e=r.normalize?e.normalize():e,t=r.normalize?t.normalize():t,e=r.full_process?y(e,r):e,t=r.full_process?y(t,r):t,f(e)&&f(t)?$(e,t,r):0},token_set_ratio:w,token_sort_ratio:k,partial_token_set_ratio:j,partial_token_sort_ratio:S,token_similarity_sort_ratio:function(e,t,n){var r=g(n);return e=r.normalize?e.normalize():e,t=r.normalize?t.normalize():t,e=r.full_process?y(e,r):e,t=r.full_process?y(t,r):t,f(e)&&f(t)?L(e,t,r):0},partial_token_similarity_sort_ratio:function(e,t,n){var r=g(n);return e=r.normalize?e.normalize():e,t=r.normalize?t.normalize():t,e=r.full_process?y(e,r):e,t=r.full_process?y(t,r):t,f(e)&&f(t)?(r.partial=!0,L(e,t,r)):0},WRatio:function(e,t,n){var r=g(n);if(e=r.normalize?e.normalize():e,t=r.normalize?t.normalize():t,e=r.full_process?y(e,r):e,t=r.full_process?y(t,r):t,r.full_process=!1,!f(e))return 0;if(!f(t))return 0;var a=!0,o=.95,i=.9,s=z(e,t,r),l=Math.max(e.length,t.length)/Math.min(e.length,t.length);if(l<1.5&&(a=!1),l>8&&(i=.6),a){var c=$(e,t,r)*i,d=S(e,t,r)*o*i,u=j(e,t,r)*o*i;return Math.round(Math.max(s,c,d,u))}var p=k(e,t,r)*o,m=w(e,t,r)*o;return Math.round(Math.max(s,p,m))},full_process:y,extract:C,extractAsync:E,extractAsPromised:F,process_and_sort:h,unique_tokens:_,dedupe:x};mh.exports=q}();var ax=mh.exports;ax.distance,ax.ratio,ax.partial_ratio;const ox=ax.token_set_ratio;ax.token_sort_ratio,ax.partial_token_set_ratio,ax.partial_token_sort_ratio,ax.token_similarity_sort_ratio,ax.partial_token_similarity_sort_ratio,ax.WRatio,ax.full_process,ax.extract,ax.extractAsync,ax.extractAsPromised,ax.process_and_sort,ax.unique_tokens,ax.dedupe;const{Text:ix}=i,{Option:sx}=q,lx=({rawImportData:e,modeConfig:t,onMappingComplete:r})=>{const{headers:a}=e,[o,i]=He.useState([...t.requiredFields,...t.optionalFields]),[s,l]=He.useState(!0),[c,d]=He.useState({}),[u,p]=He.useState({}),m=()=>{try{const e=localStorage.getItem("payroll_components_cache");if(e){const t=JSON.parse(e),n=t.timestamp,r=864e5;if(Date.now()-n<r)return t.components}}catch(e){}return[]},f=e=>{const t=[];return e.forEach((e=>{let n="",r="other";"EARNING"===e.type?(n=`earnings_details.${e.code}.amount`,r="earning"):"PERSONAL_DEDUCTION"!==e.type&&"DEDUCTION"!==e.type&&"EMPLOYER_DEDUCTION"!==e.type||(n=`deductions_details.${e.code}.amount`,r="deduction"),n&&t.push({key:n,name:e.name,type:"number",category:r,required:!1,description:e.description||e.name})})),t};He.useEffect((()=>{(async()=>{try{l(!0);const e=m();if(e.length>0){const n=f(e),r=[...t.requiredFields,...t.optionalFields,...n];return i(r),void l(!1)}const n=(await(async e=>{const t={...e,size:(null==e?void 0:e.size)?Math.min(e.size,100):100};return(await bt.get("/views-optimized/payroll-component-definitions",{params:t})).data})({is_active:!0,size:100})).data||[];n.length>0&&(e=>{try{const t={components:e,timestamp:Date.now()};localStorage.setItem("payroll_components_cache",JSON.stringify(t))}catch(t){}})(n);const r=f(n),a=[...t.requiredFields,...t.optionalFields,...r];i(a)}catch(e){const n=(e=>e&&e.length>0?f(e):[{key:"earnings_details.BASIC_SALARY.amount",name:"基本工资",type:"number",category:"earning",required:!1,description:"基本工资金额"},{key:"earnings_details.PERFORMANCE_BONUS.amount",name:"绩效奖金",type:"number",category:"earning",required:!1,description:"绩效奖金金额"},{key:"earnings_details.OVERTIME_PAY.amount",name:"加班费",type:"number",category:"earning",required:!1,description:"加班费金额"},{key:"deductions_details.SOCIAL_INSURANCE.amount",name:"社会保险",type:"number",category:"deduction",required:!1,description:"社会保险金额"},{key:"deductions_details.INDIVIDUAL_TAX.amount",name:"个人所得税",type:"number",category:"deduction",required:!1,description:"个人所得税金额"},{key:"deductions_details.HOUSING_FUND.amount",name:"住房公积金",type:"number",category:"deduction",required:!1,description:"住房公积金金额"}])(m()),r=[...t.requiredFields,...t.optionalFields,...n];i(r)}finally{l(!1)}})()}),[t]);He.useEffect((()=>{r(c)}),[c,r]);const h=e=>{const t=u[e];return void 0===t?"":t<60?"confidence-low":t<90?"confidence-medium":""},_=[{title:"Excel 列名",dataIndex:"header",key:"header",width:250,render:e=>n.jsx(ix,{strong:!0,children:e})},{title:"映射到系统字段",dataIndex:"header",key:"mapping",width:350,render:e=>n.jsx(ne,{title:u[e]?`自动匹配置信度: ${u[e].toFixed(0)}%`:"",children:n.jsx(q,{allowClear:!0,showSearch:!0,value:c[e]||null,style:{width:"100%"},placeholder:"选择一个系统字段进行映射",className:h(e),onChange:t=>{return n=e,r=t,d((e=>({...e,[n]:r||""}))),void p((e=>{const t={...e};return delete t[n],t}));var n,r},filterOption:(e,t)=>((null==t?void 0:t.search)??"").toLowerCase().includes(e.toLowerCase()),children:o.map((e=>n.jsxs(sx,{value:e.key,search:`${e.name} ${e.key}`,children:[e.name," (",e.key,") ",t.requiredFields.some((t=>t.key===e.key))?n.jsx(Y,{color:"red",children:"必填"}):""]},e.key)))})})}];return s?n.jsx(L,{title:"字段映射",loading:!0,children:n.jsx(F,{message:"正在加载薪资组件定义...",type:"info"})}):n.jsxs(n.Fragment,{children:[n.jsx("style",{children:"\n  .confidence-medium .ant-select-selector {\n    border-color: #FAAD14 !important; /* 微弱的黄色 */\n  }\n  .confidence-low .ant-select-selector {\n    border-color: #FF7A45 !important; /* 微弱的橙色 */\n  }\n"}),n.jsxs(L,{title:"字段映射",extra:n.jsx(C,{onClick:()=>{const e={},t={};a.forEach((n=>{let r=null;o.forEach((e=>{const t=(a=n,o=e.name,a&&o?ox(a,o):0);var a,o;t>((null==r?void 0:r.score)??0)&&(r={key:e.key,score:t})})),r&&r.score>50&&(e[n]=r.key,t[n]=r.score)})),d(e),p(t)},children:"尝试自动映射"}),children:[n.jsx(F,{message:"请为您上传的Excel文件中的每一列，选择一个对应的系统字段进行映射。置信度较低的匹配项会以彩色边框突出显示。",type:"info",showIcon:!0,style:{marginBottom:20}}),n.jsx(he,{columns:_,dataSource:a.map((e=>({header:e}))),rowKey:"header",pagination:!1,bordered:!0,scroll:{x:"max-content"}})]})]})},cx=[{value:nn.SMART_MERGE,label:"智能导入（推荐）",description:"新员工直接添加，已存在员工智能合并更新（只更新Excel中有数据的字段）",icon:"🧠",risk:"low",isDefault:!0},{value:nn.NONE,label:"仅添加新员工",description:"只导入系统中不存在的员工，已存在的员工将被跳过",icon:"➕",risk:"low"},{value:nn.PARTIAL,label:"强制覆盖",description:"新员工直接添加，已存在员工完全替换整条记录",icon:"🔄",risk:"high",warning:"将完全替换已存在员工的所有薪资数据，请谨慎使用"}],dx=e=>{switch(e){case nn.NONE:return"none";case nn.SMART_MERGE:return"smart_merge";case nn.PARTIAL:return"partial";default:return"smart_merge"}},ux={overwriteMode:nn.SMART_MERGE,showPreview:!0,confirmBeforeExecute:!0},{Text:px}=i,mx=({value:e,onChange:t,disabled:r=!1,existingCount:a=0,showOnlyWhenNeeded:o=!1})=>{const i=cx.find((t=>t.value===e));return o&&0===a?n.jsx("div",{className:"overwrite-mode-selector",children:n.jsx(F,{message:"无需选择处理方式",description:"所有员工都是新记录，将直接添加到系统中。",type:"info",showIcon:!0})}):n.jsxs("div",{className:"overwrite-mode-selector",children:[n.jsxs("div",{style:{marginBottom:16},children:[n.jsx(px,{strong:!0,children:"数据处理方式"}),a>0&&n.jsxs(px,{type:"secondary",style:{marginLeft:8},children:["(检测到 ",a," 名已存在员工)"]})]}),n.jsx(Ee.Group,{value:e,onChange:e=>{t(e.target.value)},disabled:r,style:{width:"100%"},children:n.jsx(k,{direction:"vertical",style:{width:"100%"},children:cx.map((t=>n.jsx(Ee,{value:t.value,style:{display:"flex",alignItems:"flex-start",padding:"12px",border:"1px solid #d9d9d9",borderRadius:"6px",marginBottom:"8px",backgroundColor:e===t.value?"#f6ffed":"#fafafa"},children:n.jsxs("div",{style:{marginLeft:8,flex:1},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:4},children:[n.jsx("span",{style:{fontSize:"16px",marginRight:8},children:t.icon}),n.jsx(px,{strong:!0,children:t.label}),"medium"===t.risk&&n.jsx(px,{type:"warning",style:{marginLeft:8,fontSize:"12px"},children:"⚠️ 中等风险"}),"high"===t.risk&&n.jsx(px,{type:"danger",style:{marginLeft:8,fontSize:"12px"},children:"🚨 高风险"})]}),n.jsx(px,{type:"secondary",style:{fontSize:"13px"},children:t.description})]})},t.value)))})}),(null==i?void 0:i.warning)&&n.jsx(F,{message:i.warning,type:"warning",showIcon:!0,style:{marginTop:16}}),a>0&&e===nn.NONE&&n.jsx(F,{message:`将跳过 ${a} 名已存在的员工，只添加新员工`,type:"info",showIcon:!0,style:{marginTop:16}}),a>0&&e===nn.PARTIAL&&n.jsx(F,{message:`将更新 ${a} 名已存在员工的数据，此操作不可撤销`,type:"warning",showIcon:!0,style:{marginTop:16}})]})},{Title:fx,Text:hx,Paragraph:_x}=i,{Panel:yx}=Te,gx=({uploadResult:e,onStartAgain:t,onNavigateToEntries:r})=>{const{t:a}=Cn(["payroll","common"]);if(!e)return n.jsx("div",{style:{textAlign:"center",padding:48},children:n.jsx(hx,{children:a("batch_import.result.no_result")})});const{successCount:o,errorCount:i,errors:s,createdEntries:l}=e,c=0===i,d=o>0&&i>0,u=0===o&&i>0,p=[{title:a("batch_import.result.error_table.index"),dataIndex:["record","index"],key:"index",width:80,render:e=>e+1},{title:a("batch_import.result.error_table.employee_id"),dataIndex:["record","employee_id"],key:"employee_id",width:120,render:e=>e||"-"},{title:a("batch_import.result.error_table.error_message"),dataIndex:"error",key:"error",render:e=>n.jsx(hx,{type:"danger",children:e})}];return n.jsxs("div",{children:[n.jsxs("div",{style:{marginBottom:24},children:[n.jsx(fx,{level:3,children:a("batch_import.step.result")}),n.jsx(hx,{type:"secondary",children:a("batch_import.step.result_subtitle")})]}),n.jsx(L,{style:{marginBottom:24},children:c?n.jsx(Oe,{status:"success",title:a("batch_import.result.success_title"),subTitle:a("batch_import.result.success_subtitle",{count:o}),icon:n.jsx(Q,{style:{color:"#52c41a"}})}):d?n.jsx(Oe,{status:"warning",title:a("batch_import.result.partial_title"),subTitle:a("batch_import.result.partial_subtitle",{success:o,error:i}),icon:n.jsx(Me,{style:{color:"#faad14"}})}):u?n.jsx(Oe,{status:"error",title:a("batch_import.result.failure_title"),subTitle:a("batch_import.result.failure_subtitle",{count:i}),icon:n.jsx(Ae,{style:{color:"#ff4d4f"}})}):null}),(()=>{const e=(o||0)+(i||0);return n.jsxs(M,{gutter:16,style:{marginBottom:24},children:[n.jsx(D,{span:8,children:n.jsx(L,{children:n.jsx(Ne,{title:a("batch_import.result.statistics.total_processed"),value:e,prefix:n.jsx(J,{})})})}),n.jsx(D,{span:8,children:n.jsx(L,{children:n.jsx(Ne,{title:a("batch_import.result.statistics.successful"),value:o||0,valueStyle:{color:"#3f8600"},prefix:n.jsx(Q,{})})})}),n.jsx(D,{span:8,children:n.jsx(L,{children:n.jsx(Ne,{title:a("batch_import.result.statistics.failed"),value:i||0,valueStyle:{color:"#cf1322"},prefix:n.jsx(Ae,{})})})})]})})(),n.jsxs(L,{style:{marginBottom:24},children:[n.jsx(fx,{level:5,children:a("batch_import.result.next_steps_title")}),n.jsxs(k,{direction:"vertical",size:"middle",style:{width:"100%"},children:[c&&n.jsx(F,{message:a("batch_import.result.success_suggestion"),type:"success",showIcon:!0}),d&&n.jsx(F,{message:a("batch_import.result.partial_suggestion"),description:a("batch_import.result.partial_suggestion_desc"),type:"warning",showIcon:!0}),u&&n.jsx(F,{message:a("batch_import.result.failure_suggestion"),description:a("batch_import.result.failure_suggestion_desc"),type:"error",showIcon:!0})]})]}),0===o?null:n.jsx(Te,{ghost:!0,style:{marginBottom:24},children:n.jsxs(yx,{header:n.jsxs(k,{children:[n.jsx(Q,{style:{color:"#52c41a"}}),n.jsx(hx,{strong:!0,children:a("batch_import.result.success_details_title",{count:o})})]}),children:[n.jsx(F,{message:a("batch_import.result.success_alert_title"),description:a("batch_import.result.success_alert_desc",{count:o}),type:"success",showIcon:!0,style:{marginBottom:16}}),l&&l.length>0&&n.jsxs("div",{children:[n.jsx(hx,{type:"secondary",children:a("batch_import.result.created_entries_preview")}),n.jsxs("ul",{style:{marginTop:8},children:[l.slice(0,5).map(((e,t)=>n.jsx("li",{children:n.jsx(hx,{children:a("batch_import.result.entry_item",{id:e.id,employeeName:e.employee_name||e.employee_id,amount:e.net_pay})})},t))),l.length>5&&n.jsx("li",{children:n.jsx(hx,{type:"secondary",children:a("batch_import.result.more_entries",{count:l.length-5})})})]})]})]},"success-details")}),s&&0!==s.length?n.jsxs(L,{style:{marginBottom:24},children:[n.jsxs(fx,{level:5,children:[n.jsx(Ae,{style:{color:"#ff4d4f",marginRight:8}}),a("batch_import.result.error_details_title")]}),n.jsx(F,{message:a("batch_import.result.error_alert_title"),description:a("batch_import.result.error_alert_desc"),type:"error",showIcon:!0,style:{marginBottom:16}}),n.jsx(he,{columns:p,dataSource:s,rowKey:(e,t)=>`error-${t}`,pagination:{pageSize:10,showSizeChanger:!1,showQuickJumper:!0},size:"small"})]}):null,n.jsx("div",{style:{textAlign:"center",marginTop:32},children:n.jsxs(k,{size:"large",children:[n.jsx(C,{icon:n.jsx(Ie,{}),onClick:t,size:"large",children:a("batch_import.button.start_again")}),o>0&&n.jsx(C,{type:"primary",icon:n.jsx(Pe,{}),onClick:r,size:"large",children:a("batch_import.button.view_entries")})]})})]})},vx="ACTIVE",xx=(e,t)=>{const[n,r]=He.useState([]),[a,o]=He.useState(null),[i,s]=He.useState(!1),[l,c]=He.useState({}),d=async()=>{s(!0);try{const n=(await Lt({size:100})).data.sort(((e,t)=>new Date(t.start_date).getTime()-new Date(e.start_date).getTime())),a=n.filter((e=>{var t;return(null==(t=e.status_lookup)?void 0:t.code)===vx}));if(r(a),a.length>0){(async(e,t,n,r)=>{const a={};e.forEach((e=>{a[e]={count:0,loading:!0}})),t(a);const o=e.map((async e=>{try{const t=await Rt({period_id:e,size:100});let a=new Set;if(t.data&&t.data.length>0){const e=t.data.map((async e=>{try{const t=await Gt({payroll_run_id:e.id,size:100});t.data&&t.data.length>0&&t.data.forEach((e=>{e.employee_id&&a.add(e.employee_id)}))}catch(t){let e=n("common:message.error_fetching_details");t.response&&422===t.response.status&&t.response.data&&t.response.data.detail&&t.response.data.detail.error&&t.response.data.detail.error.message?e=t.response.data.detail.error.message:t.message&&(e=t.message),r.error(e)}}));await Promise.all(e)}return{periodId:e,count:a.size}}catch(t){return{periodId:e,count:0}}}));try{const e=await Promise.all(o),n={};e.forEach((({periodId:e,count:t})=>{n[e]={count:t,loading:!1}})),t(n)}catch(i){const n={};e.forEach((e=>{n[e]={count:0,loading:!1}})),t(n)}})(a.map((e=>e.id)),c,e,t)}}catch(n){t.error(e("periods_page.error_fetch_periods")),r([])}finally{s(!1)}};return He.useEffect((()=>{d()}),[t,e]),{payrollPeriods:n,selectedPeriodId:a,setSelectedPeriodId:o,loadingPeriods:i,periodDataStats:l,fetchPayrollPeriods:d}};class bx{async getRequiredRefData(){return{}}processRawData(e,t,n){return t.map(((t,r)=>{const a={_clientId:`item_${r}_${Date.now()}`};return n.forEach((n=>{const r=e.indexOf(n.sourceField);r>=0&&r<t.length&&(a[n.targetField]=this.transformValue(t[r],n.transform))})),a}))}async generateSampleTemplate(){const e=await this.getModeConfig();if(e.sampleTemplate)return e.sampleTemplate;const t=e.fields.map((e=>e.name)),n=[t.map((()=>"示例数据"))];return{headers:t,sampleRows:n}}async validateSettings(e){var t;const n=[];return(null==(t=(await this.getModeConfig()).importSettings)?void 0:t.requiresPeriodSelection)&&!e.periodId&&n.push("请选择薪资期间"),n}transformValue(e,t){if(!t||"none"===t.type)return e;switch(t.type){case"lookup":return this.lookupTransform(e,t.config);case"format":return this.formatTransform(e,t.config);case"calculate":return this.calculateTransform(e,t.config);default:return e}}lookupTransform(e,t){return e}formatTransform(e,t){return"string"==typeof e?e.trim():e}calculateTransform(e,t){return e}getAuthToken(){try{return Ct.getState().auth.authToken||""}catch(e){return""}}async makeRequest(e,t={}){const n={url:e,method:t.method||"GET",data:t.body?JSON.parse(t.body):void 0,headers:t.headers?Object.fromEntries(new Headers(t.headers)):void 0};try{const e=await bt.request(n);return new Response(JSON.stringify(e.data),{status:e.status,statusText:e.statusText,headers:new Headers(e.headers)})}catch(r){if(r.response){return new Response(JSON.stringify(r.response.data),{status:r.response.status,statusText:r.response.statusText,headers:new Headers(r.response.headers)})}throw r}}async handleResponse(e){if(!e.ok){const t=await e.text();throw new Error(`API请求失败 (${e.status}): ${t}`)}return e.json()}}const wx={payroll:class extends bx{constructor(){super(...arguments),t(this,"payrollComponents",[]),t(this,"payrollPeriods",[]),t(this,"isDataLoaded",!1)}async initialize(){this.isDataLoaded||(await Promise.all([this.loadPayrollComponents(),this.loadPayrollPeriods()]),this.isDataLoaded=!0)}async getModeConfig(){await this.initialize();const e=this.generateFieldConfigs(),t=e.filter((e=>e.required)),n=e.filter((e=>!e.required));return{id:"payroll",name:"薪资数据导入",description:"批量导入员工的薪资数据，包括基本工资、津贴、奖金等",icon:"💰",fields:e,requiredFields:t,optionalFields:n,validationRules:[{type:"required",fields:["employee_name"],rule:"not_empty",message:"员工姓名不能为空"},{type:"range",fields:["basic_salary"],rule:"positive_number",message:"基本工资必须为正数"}],apiEndpoints:{validate:"/payroll/batch-validate",execute:"/payroll/batch-import",getRefData:["/simple-payroll/periods?status=ACTIVE","/config/payroll-component-definitions?is_active=true"]},fieldMappingHints:[{sourcePattern:/^(员工)?姓名$/i,targetField:"employee_name",confidence:.9,description:"员工姓名字段"},{sourcePattern:/^身份证(号码?)?$/i,targetField:"id_number",confidence:.9,description:"身份证号码字段"},{sourcePattern:/^基本工资$/i,targetField:"basic_salary",confidence:.95,description:"基本工资字段"},{sourcePattern:/^岗位工资$/i,targetField:"position_salary",confidence:.9,description:"岗位工资字段"},{sourcePattern:/^绩效工资$/i,targetField:"performance_salary",confidence:.9,description:"绩效工资字段"}],sampleTemplate:{headers:["员工姓名","身份证号","基本工资","岗位工资","绩效工资","津贴","奖金","备注"],sampleRows:[["张三","110101199001011234",8e3,2e3,1500,500,1e3,"正常发放"],["李四","110101199002022345",9e3,2500,2e3,600,1200,"优秀员工"],["王五","110101199003033456",7500,1800,1200,400,800,"标准薪资"]]},importSettings:{supportsBatch:!0,maxBatchSize:1e3,requiresPeriodSelection:!0,supportsOverwrite:!0,defaultOverwriteMode:!1}}}async loadPayrollComponents(){try{const e=await this.makeRequest("/config/payroll-component-definitions?is_active=true&size=100"),t=await this.handleResponse(e);this.payrollComponents=t.data||[]}catch(e){this.payrollComponents=[]}}async loadPayrollPeriods(){try{const e=await this.makeRequest("/simple-payroll/periods?is_active=true&size=100"),t=await this.handleResponse(e);this.payrollPeriods=t.items||[]}catch(e){this.payrollPeriods=[]}}generateFieldConfigs(){const e=[];return e.push({key:"employee_name",name:"员工姓名",type:"text",category:"employee",required:!0,description:"员工的完整姓名，用于匹配员工记录",validation:{maxLength:50,message:"员工姓名不能超过50个字符"}},{key:"id_number",name:"身份证号",type:"text",category:"employee",required:!1,description:"员工身份证号码，用于精确匹配员工",validation:{pattern:/^\d{17}[\dXx]$/,message:"身份证号格式不正确"}}),this.payrollComponents.forEach(((t,n)=>{const r=this.mapComponentTypeToCategory(t.type),a=t.code||`item_${n}`,o=t.name||t.description||a;e.push({key:`${r}_${a}`,name:o,type:"number",category:r,required:!1,description:t.description||`${o}金额`,validation:{min:0,max:t.max_value||999999,message:`${o}应在0-${t.max_value||999999}之间`}})})),e.push({key:"earnings_details",name:"收入明细",type:"text",category:"earning",required:!1,description:"收入项目的详细金额，以JSON格式存储",validation:{message:"收入明细格式不正确"}},{key:"deductions_details",name:"扣除明细",type:"text",category:"deduction",required:!1,description:"扣除项目的详细金额，以JSON格式存储",validation:{message:"扣除明细格式不正确"}}),e.push({key:"remarks",name:"备注",type:"text",category:"other",required:!1,description:"备注信息",validation:{maxLength:200,message:"备注不能超过200个字符"}}),e}mapComponentTypeToCategory(e){switch(e){case"EARNING":return"earning";case"DEDUCTION":case"PERSONAL_DEDUCTION":case"EMPLOYER_DEDUCTION":return"deduction";default:return"other"}}processData(e,t){const{headers:n,rows:r}=e;return r.map(((e,r)=>{const a={},o={},i={};return n.forEach(((n,r)=>{const s=t[n],l=e[r];if(s&&null!=l&&""!==l)if("employee_name"===s||"id_number"===s||"remarks"===s)a[s]=l;else if(s.includes("earnings_details.")&&s.includes(".amount")){const e=s.split(".");if(3===e.length&&"earnings_details"===e[0]&&"amount"===e[2]){const t=e[1],n=parseFloat(String(l))||0;0!==n&&(o[t]={amount:n})}}else if(s.includes("deductions_details.")&&s.includes(".amount")){const e=s.split(".");if(3===e.length&&"deductions_details"===e[0]&&"amount"===e[2]){const t=e[1],n=parseFloat(String(l))||0;0!==n&&(i[t]={amount:n})}}else if(s.startsWith("earning_")){const e=s.replace("earning_",""),t=parseFloat(String(l))||0;0!==t&&(o[e]={amount:t})}else if(s.startsWith("deduction_")){const e=s.replace("deduction_",""),t=parseFloat(String(l))||0;0!==t&&(i[e]={amount:t})}else a[s]=l})),a.earnings_details=o,a.deductions_details=i,{data:a,_meta:{rowIndex:r,clientId:ah()}}}))}async validateData(e,t,n=nn.NONE){const r=e.map((e=>{const n=e.data.employee_name||"",r=this.extractLastName(n),a=this.extractFirstName(n);return{payroll_period_id:t,payroll_run_id:0,status_lookup_value_id:60,earnings_details:e.data.earnings_details||{},deductions_details:e.data.deductions_details||{},remarks:e.data.remarks||"",employee_info:{last_name:r,first_name:a,id_number:String(e.data.id_number||"")},_clientId:e._meta.clientId}}));try{const a=await this.makeRequest("/payroll-entries/bulk/validate",{method:"POST",body:JSON.stringify({payroll_period_id:t,entries:r,overwrite_mode:dx(n),field_conflict_check:!0})}),o=await this.handleResponse(a);if(o&&o.validatedData)return o.validatedData.map(((t,n)=>{var r;let a=[];t.__errors&&Array.isArray(t.__errors)&&(a=t.__errors.map((e=>"string"==typeof e?{field:"general",message:e}:e&&"object"==typeof e?{field:e.field||"general",message:e.message||e.toString()}:{field:"general",message:"未知错误"})));let o=[];return t.field_conflicts&&Array.isArray(t.field_conflicts)&&(o=t.field_conflicts),{isValid:t.__isValid||!1,clientId:(null==(r=e[n])?void 0:r._meta.clientId)||`validate_${n}`,errors:a,warnings:t.warnings||[],fieldConflicts:o}}));throw new Error("Invalid response format from validation API")}catch(a){return e.map(((e,t)=>({isValid:!1,clientId:e._meta.clientId,errors:[{field:"general",message:`API请求失败: ${a.message}`}],warnings:[],fieldConflicts:!1})))}}async importData(e,t,n=nn.NONE){const r=e.map((e=>{const n=e.data.employee_name||"",r=this.extractLastName(n),a=this.extractFirstName(n);return{payroll_period_id:t,payroll_run_id:0,status_lookup_value_id:60,earnings_details:e.data.earnings_details||{},deductions_details:e.data.deductions_details||{},remarks:e.data.remarks||"",employee_info:{last_name:r,first_name:a,id_number:String(e.data.id_number||"")}}}));let a=n;r.every((e=>Object.keys(e.earnings_details).length+Object.keys(e.deductions_details).length<=3))&&n===nn.NONE&&(a=nn.PARTIAL);const o={payroll_period_id:t,entries:r,overwrite_mode:dx(a)};try{const e=await this.makeRequest("/payroll-entries/bulk",{method:"POST",body:JSON.stringify(o)}),t=await this.handleResponse(e);return{success:!0,successCount:t.success_count||0,failedCount:t.error_count||0,message:t.message||"导入完成",details:t}}catch(i){throw i}}extractLastName(e){if(!e)return"";const t=e.trim(),n=["欧阳","太史","端木","上官","司马","东方","独孤","南宫","万俟","闻人","夏侯","诸葛","尉迟","公羊","赫连","澹台","皇甫","宗政","濮阳","公冶","太叔","申屠","公孙","慕容","仲孙","钟离","长孙","宇文","司徒","鲜于"];for(const r of n)if(t.startsWith(r))return r;return t.charAt(0)}extractFirstName(e){if(!e)return"";const t=e.trim(),n=this.extractLastName(t);return t.slice(n.length)}},salary_base:class extends bx{async initialize(){}async getModeConfig(){const e=this.generateFieldConfigs(),t=e.filter((e=>e.required)),n=e.filter((e=>!e.required));return{id:"salary_base",name:"缴费基数导入",description:"批量导入员工的社保缴费基数和公积金缴费基数",icon:"💰",fields:e,requiredFields:t,optionalFields:n,validationRules:[{type:"required",fields:["employee_name"],rule:"not_empty",message:"员工姓名不能为空"},{type:"custom",fields:["social_insurance_base","housing_fund_base","occupational_pension_base"],rule:"at_least_one_required",message:"必须至少提供社保缴费基数、公积金缴费基数或职业年金缴费基数"},{type:"range",fields:["social_insurance_base","housing_fund_base","occupational_pension_base"],rule:"positive_number",message:"缴费基数必须为正数"}],apiEndpoints:{validate:"/simple-payroll/salary-configs/batch-validate",execute:"/simple-payroll/salary-configs/batch-update-insurance-bases-only",getRefData:["/simple-payroll/periods?status=ACTIVE"]},fieldMappingHints:[{sourcePattern:/^(员工)?姓名$/i,targetField:"employee_name",confidence:.9,description:"员工姓名字段"},{sourcePattern:/^身份证(号码?)?$/i,targetField:"id_number",confidence:.9,description:"身份证号码字段"},{sourcePattern:/^社保(缴费)?基数$/i,targetField:"social_insurance_base",confidence:.95,description:"社保缴费基数字段"},{sourcePattern:/^公积金(缴费)?基数$/i,targetField:"housing_fund_base",confidence:.95,description:"公积金缴费基数字段"},{sourcePattern:/^养老保险基数$/i,targetField:"social_insurance_base",confidence:.8,description:"养老保险基数（可作为社保基数）"},{sourcePattern:/^住房公积金基数$/i,targetField:"housing_fund_base",confidence:.8,description:"住房公积金基数"},{sourcePattern:/^职业年金(缴费)?基数$/i,targetField:"occupational_pension_base",confidence:.95,description:"职业年金缴费基数字段"},{sourcePattern:/^年金基数$/i,targetField:"occupational_pension_base",confidence:.8,description:"年金基数（职业年金缴费基数）"}],sampleTemplate:{headers:["员工姓名","身份证号","社保缴费基数","公积金缴费基数","职业年金缴费基数","备注"],sampleRows:[["张三","110101199001011234",15e3,16e3,15e3,"2025年1月调整"],["李四","110101199002022345",18e3,2e4,18e3,"新入职员工"],["王五","110101199003033456",12e3,12e3,12e3,"标准基数"]]},importSettings:{supportsBatch:!0,maxBatchSize:1e3,requiresPeriodSelection:!0,supportsOverwrite:!0,defaultOverwriteMode:!1}}}generateFieldConfigs(){const e=[];return e.push({key:"employee_name",name:"员工姓名",type:"text",category:"employee",required:!0,description:"员工的完整姓名，用于匹配员工记录",validation:{maxLength:50,message:"员工姓名不能超过50个字符"}},{key:"id_number",name:"身份证号",type:"text",category:"employee",required:!1,description:"员工身份证号码，用于精确匹配员工",validation:{pattern:/^\d{17}[\dXx]$/,message:"身份证号格式不正确"}}),e.push({key:"social_insurance_base",name:"社保缴费基数",type:"number",category:"salary_base",required:!1,description:"社会保险缴费基数，用于计算各项社保费用",validation:{min:0,max:1e5,message:"社保缴费基数应在0-100000之间"}},{key:"housing_fund_base",name:"公积金缴费基数",type:"number",category:"salary_base",required:!1,description:"住房公积金缴费基数，用于计算公积金费用",validation:{min:0,max:1e5,message:"公积金缴费基数应在0-100000之间"}},{key:"occupational_pension_base",name:"职业年金缴费基数",type:"number",category:"salary_base",required:!1,description:"职业年金缴费基数，用于计算职业年金费用",validation:{min:0,max:1e5,message:"职业年金缴费基数应在0-100000之间"}}),e.push({key:"remarks",name:"备注",type:"text",category:"other",required:!1,description:"备注信息，记录调整原因等",validation:{maxLength:200,message:"备注不能超过200个字符"}}),e}processData(e,t){const{headers:n,rows:r}=e;return r.map(((e,r)=>{const a={};return n.forEach(((n,r)=>{const o=t[n];o&&(a[o]=e[r])})),{data:a,_meta:{rowIndex:r,clientId:ah()}}}))}async validateData(e,t,n=nn.NONE){const r={period_id:t,base_updates:e.map((e=>{const t=e.data.employee_name||"",n=this.extractLastName(t),r=this.extractFirstName(t);return{employee_id:e.data.employee_id,social_insurance_base:e.data.social_insurance_base,housing_fund_base:e.data.housing_fund_base,occupational_pension_base:e.data.occupational_pension_base,employee_info:{last_name:n,first_name:r,id_number:e.data.id_number||""},clientId:e._meta.clientId}})),overwrite_mode:dx(n)};try{const t=await this.makeRequest("/simple-payroll/salary-configs/batch-validate",{method:"POST",body:JSON.stringify(r)}),n=(await this.handleResponse(t)).data.validated_data||[];return e.map(((e,t)=>{const r=n[t];return r?{fieldConflicts:!1,isValid:r.is_valid||!1,clientId:e._meta.clientId,errors:r.errors||[],warnings:r.warnings||[]}:{fieldConflicts:!1,isValid:!1,clientId:e._meta.clientId,errors:[{field:"general",message:"后端未返回此记录的验证结果"}],warnings:[]}}))}catch(a){return e.map((e=>({fieldConflicts:!1,isValid:!1,clientId:e._meta.clientId,errors:[{field:"general",message:`API请求失败: ${a instanceof Error?a.message:"未知错误"}`}],warnings:[]})))}}async importData(e,t,n=nn.NONE){const r={period_id:t,base_updates:e.map((e=>{const t=e.data.employee_name||"",n=this.extractLastName(t),r=this.extractFirstName(t);return{employee_id:e.data.employee_id,social_insurance_base:e.data.social_insurance_base,housing_fund_base:e.data.housing_fund_base,occupational_pension_base:e.data.occupational_pension_base,employee_info:{last_name:n,first_name:r,id_number:e.data.id_number||""}}})),create_if_missing:!0};try{const e=await this.makeRequest("/simple-payroll/salary-configs/batch-update-insurance-bases-only",{method:"POST",body:JSON.stringify(r)}),t=await this.handleResponse(e);return{success:!0,successCount:(t.data.updated_count||0)+(t.data.created_count||0),failedCount:t.data.failed_count||0,skippedCount:t.data.skipped_count||0,message:t.data.message||"缴费基数导入完成",details:t.data}}catch(a){throw a}}extractLastName(e){if(!e)return"";const t=e.trim(),n=["欧阳","太史","端木","上官","司马","东方","独孤","南宫","万俟","闻人","夏侯","诸葛","尉迟","公羊","赫连","澹台","皇甫","宗政","濮阳","公冶","太叔","申屠","公孙","慕容","仲孙","钟离","长孙","宇文","司徒","鲜于"];for(const r of n)if(t.startsWith(r))return r;return t.charAt(0)}extractFirstName(e){if(!e)return"";const t=e.trim(),n=this.extractLastName(t);return t.slice(n.length)}},employee:class extends bx{constructor(){super(...arguments),t(this,"lookupTypes",[]),t(this,"departments",[]),t(this,"positions",[]),t(this,"personnelCategories",[]),t(this,"isDataLoaded",!1)}async initialize(){this.isDataLoaded||(await Promise.all([this.loadLookupTypes(),this.loadDepartments(),this.loadPositions(),this.loadPersonnelCategories()]),this.isDataLoaded=!0)}async loadLookupTypes(){try{const t=["GENDER","EMPLOYEE_STATUS","EMPLOYMENT_TYPE","MARITAL_STATUS","EDUCATION_LEVEL"],n=[];for(const r of t)try{const e=await this.makeRequest(`/config/lookup-values-public?lookup_type_code=${r}`),t=await this.handleResponse(e);t.data&&n.push(...t.data)}catch(e){}this.lookupTypes=n}catch(e){this.lookupTypes=[]}}async loadDepartments(){try{const e=await this.makeRequest("/views-optimized/departments?size=1000"),t=await this.handleResponse(e);this.departments=t.data||[]}catch(e){this.departments=[]}}async loadPositions(){try{const e=await this.makeRequest("/views-optimized/positions?size=1000"),t=await this.handleResponse(e);this.positions=t.data||[]}catch(e){this.positions=[]}}async loadPersonnelCategories(){try{const e=await this.makeRequest("/views-optimized/personnel-categories?size=1000"),t=await this.handleResponse(e);this.personnelCategories=t.data||[]}catch(e){this.personnelCategories=[]}}async getModeConfig(){const e=this.generateFieldConfigs(),t=e.filter((e=>e.required)),n=e.filter((e=>!e.required));return{id:"employee",name:"员工信息导入",description:"批量导入员工的个人信息、工作信息和银行账户信息",icon:"👥",fields:e,requiredFields:t,optionalFields:n,validationRules:[{type:"required",fields:["first_name","last_name","hire_date"],rule:"not_empty",message:"姓名和入职日期不能为空"},{type:"format",fields:["id_number"],rule:"id_card_format",message:"身份证号格式不正确"},{type:"format",fields:["email"],rule:"email_format",message:"邮箱格式不正确"}],apiEndpoints:{validate:"/v2/employees/batch-validate",execute:"/v2/employees/batch-import",getRefData:["/config/lookup-values-public?size=1000","/views-optimized/departments?size=1000","/views-optimized/positions?size=1000","/views-optimized/personnel-categories?size=1000"]},fieldMappingHints:this.generateMappingHints(),sampleTemplate:{headers:["姓","名","身份证号","性别","出生日期","入职日期","部门","职位","邮箱","电话","银行名称","银行账号","备注"],sampleRows:[["张","三","110101199001011234","男","1990-01-01","2024-01-01","技术部","软件工程师","zhangsan@company.com","13800138000","中国银行","6217000000000000001","新员工"],["李","四","110101199002022345","女","1990-02-02","2024-01-15","人事部","人事专员","lisi@company.com","13800138001","工商银行","6222000000000000002",""],["王","五","110101199003033456","男","1990-03-03","2024-02-01","财务部","会计","wangwu@company.com","13800138002","建设银行","6227000000000000003",""]]},importSettings:{supportsBatch:!0,maxBatchSize:500,requiresPeriodSelection:!1,supportsOverwrite:!0,defaultOverwriteMode:!1}}}generateFieldConfigs(){const e=[];return e.push({key:"last_name",name:"姓",type:"text",category:"base",required:!0,description:"员工的姓氏",validation:{maxLength:100,message:"姓氏不能超过100个字符"}},{key:"first_name",name:"名",type:"text",category:"base",required:!0,description:"员工的名字",validation:{maxLength:100,message:"名字不能超过100个字符"}},{key:"hire_date",name:"入职日期",type:"date",category:"base",required:!0,description:"员工入职日期",validation:{message:"请输入有效的日期格式"}}),e.push({key:"employee_code",name:"员工编号",type:"text",category:"base",required:!1,description:"员工唯一编号",validation:{maxLength:50,message:"员工编号不能超过50个字符"}},{key:"id_number",name:"身份证号",type:"text",category:"base",required:!1,description:"员工身份证号码",validation:{pattern:/^\d{17}[\dXx]$/,message:"身份证号格式不正确"}},{key:"date_of_birth",name:"出生日期",type:"date",category:"base",required:!1,description:"员工出生日期"},{key:"nationality",name:"国籍",type:"text",category:"base",required:!1,description:"员工国籍",validation:{maxLength:100,message:"国籍不能超过100个字符"}},{key:"ethnicity",name:"民族",type:"text",category:"base",required:!1,description:"员工民族",validation:{maxLength:100,message:"民族不能超过100个字符"}}),e.push({key:"email",name:"邮箱",type:"text",category:"base",required:!1,description:"员工邮箱地址",validation:{pattern:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"邮箱格式不正确"}},{key:"phone_number",name:"电话号码",type:"text",category:"base",required:!1,description:"员工联系电话",validation:{maxLength:50,message:"电话号码不能超过50个字符"}},{key:"home_address",name:"家庭地址",type:"text",category:"base",required:!1,description:"员工家庭住址"},{key:"emergency_contact_name",name:"紧急联系人姓名",type:"text",category:"base",required:!1,description:"紧急联系人的姓名",validation:{maxLength:255,message:"紧急联系人姓名不能超过255个字符"}},{key:"emergency_contact_phone",name:"紧急联系人电话",type:"text",category:"base",required:!1,description:"紧急联系人的电话号码",validation:{maxLength:50,message:"紧急联系人电话不能超过50个字符"}}),e.push({key:"first_work_date",name:"首次工作日期",type:"date",category:"base",required:!1,description:"员工首次参加工作的日期"},{key:"current_position_start_date",name:"当前职位开始日期",type:"date",category:"base",required:!1,description:"员工在当前职位的开始日期"},{key:"career_position_level_date",name:"职级评定日期",type:"date",category:"base",required:!1,description:"员工职级评定的日期"},{key:"interrupted_service_years",name:"中断服务年限",type:"number",category:"base",required:!1,description:"员工中断服务的年限",validation:{min:0,max:50,message:"中断服务年限应在0-50年之间"}},{key:"social_security_client_number",name:"社保个人客户号",type:"text",category:"base",required:!1,description:"员工社保个人客户号",validation:{maxLength:50,message:"社保个人客户号不能超过50个字符"}},{key:"housing_fund_client_number",name:"公积金个人客户号",type:"text",category:"base",required:!1,description:"员工公积金个人客户号",validation:{maxLength:50,message:"公积金个人客户号不能超过50个字符"}}),e.push({key:"bank_name",name:"银行名称",type:"text",category:"base",required:!1,description:"员工银行账户的银行名称",validation:{maxLength:255,message:"银行名称不能超过255个字符"}},{key:"bank_account_number",name:"银行账号",type:"text",category:"base",required:!1,description:"员工银行账户号码",validation:{maxLength:100,message:"银行账号不能超过100个字符"}},{key:"account_holder_name",name:"账户持有人姓名",type:"text",category:"base",required:!1,description:"银行账户持有人姓名",validation:{maxLength:255,message:"账户持有人姓名不能超过255个字符"}},{key:"branch_name",name:"开户支行",type:"text",category:"base",required:!1,description:"银行开户支行名称",validation:{maxLength:255,message:"开户支行名称不能超过255个字符"}}),this.isDataLoaded&&(this.addLookupFields(e),this.addRelationFields(e)),e}addLookupFields(e){["GENDER","EMPLOYEE_STATUS","EMPLOYMENT_TYPE","EDUCATION_LEVEL","MARITAL_STATUS","POLITICAL_STATUS","CONTRACT_TYPE","JOB_POSITION_LEVEL","SALARY_LEVEL","SALARY_GRADE"].forEach((t=>{if(this.lookupTypes.filter((e=>e.lookup_type_code===t&&e.is_active)).length>0){const n=this.getLookupFieldKey(t),r=this.getLookupFieldName(t);e.push({key:n,name:r,type:"select",category:"lookup",required:"EMPLOYEE_STATUS"===t,lookupType:t,description:`选择${r}`,validation:{message:`请选择有效的${r}`}})}}))}addRelationFields(e){this.departments.length>0&&e.push({key:"department_name",name:"部门",type:"select",category:"lookup",required:!1,description:"员工所属部门",validation:{message:"请选择有效的部门"}}),this.positions.length>0&&e.push({key:"position_name",name:"职位",type:"select",category:"lookup",required:!1,description:"员工职位",validation:{message:"请选择有效的职位"}}),this.personnelCategories.length>0&&e.push({key:"personnel_category_name",name:"人员类别",type:"select",category:"lookup",required:!1,description:"员工人员类别",validation:{message:"请选择有效的人员类别"}})}getLookupFieldKey(e){return{GENDER:"gender_name",EMPLOYEE_STATUS:"employee_status",EMPLOYMENT_TYPE:"employment_type_name",EDUCATION_LEVEL:"education_level_name",MARITAL_STATUS:"marital_status_name",POLITICAL_STATUS:"political_status_name",CONTRACT_TYPE:"contract_type_name",JOB_POSITION_LEVEL:"job_position_level_name",SALARY_LEVEL:"salary_level_name",SALARY_GRADE:"salary_grade_name"}[e]||e.toLowerCase()}getLookupFieldName(e){return{GENDER:"性别",EMPLOYEE_STATUS:"员工状态",EMPLOYMENT_TYPE:"雇佣类型",EDUCATION_LEVEL:"教育水平",MARITAL_STATUS:"婚姻状况",POLITICAL_STATUS:"政治面貌",CONTRACT_TYPE:"合同类型",JOB_POSITION_LEVEL:"职务级别",SALARY_LEVEL:"工资级别",SALARY_GRADE:"工资档次"}[e]||e}generateMappingHints(){return[{sourcePattern:/^姓$/i,targetField:"last_name",confidence:.95,description:"员工姓氏字段"},{sourcePattern:/^名$/i,targetField:"first_name",confidence:.95,description:"员工名字字段"},{sourcePattern:/^(员工)?编号$/i,targetField:"employee_code",confidence:.9,description:"员工编号字段"},{sourcePattern:/^身份证(号码?)?$/i,targetField:"id_number",confidence:.95,description:"身份证号码字段"},{sourcePattern:/^入职日期$/i,targetField:"hire_date",confidence:.95,description:"入职日期字段"},{sourcePattern:/^出生日期$/i,targetField:"date_of_birth",confidence:.9,description:"出生日期字段"},{sourcePattern:/^性别$/i,targetField:"gender_name",confidence:.95,description:"性别字段"},{sourcePattern:/^国籍$/i,targetField:"nationality",confidence:.9,description:"国籍字段"},{sourcePattern:/^民族$/i,targetField:"ethnicity",confidence:.9,description:"民族字段"},{sourcePattern:/^(电子)?邮箱$/i,targetField:"email",confidence:.9,description:"邮箱地址字段"},{sourcePattern:/^(联系)?电话(号码)?$/i,targetField:"phone_number",confidence:.9,description:"电话号码字段"},{sourcePattern:/^(家庭)?地址$/i,targetField:"home_address",confidence:.85,description:"家庭地址字段"},{sourcePattern:/^部门$/i,targetField:"department_name",confidence:.9,description:"部门字段"},{sourcePattern:/^职位$/i,targetField:"position_name",confidence:.9,description:"职位字段"},{sourcePattern:/^人员类别$/i,targetField:"personnel_category_name",confidence:.9,description:"人员类别字段"},{sourcePattern:/^银行(名称)?$/i,targetField:"bank_name",confidence:.9,description:"银行名称字段"},{sourcePattern:/^(银行)?账号$/i,targetField:"bank_account_number",confidence:.9,description:"银行账号字段"},{sourcePattern:/^开户支行$/i,targetField:"branch_name",confidence:.85,description:"开户支行字段"}]}processData(e,t){const{headers:n,rows:r}=e;return r.map(((e,r)=>{const a={};n.forEach(((n,r)=>{const o=t[n];if(o&&r<e.length){const t=e[r];a[o]=this.transformFieldValue(o,t)}}));const o=ah();return{data:a,_meta:{rowIndex:r+1,clientId:o,sourceRow:e}}}))}transformFieldValue(e,t){if(null==t||""===t)return null;if(e.includes("date"))return this.parseDate(t);if("interrupted_service_years"===e){const e=parseFloat(t);return isNaN(e)?null:e}return e.endsWith("_name")||"employee_status"===e?this.resolveLookupValue(e,t):["department_name","position_name","personnel_category_name"].includes(e)?this.resolveRelationValue(e,t):String(t).trim()}parseDate(e){if(!e)return null;try{const t=new Date(e);return isNaN(t.getTime())?null:t.toISOString().split("T")[0]}catch{return null}}resolveLookupValue(e,t){if(!t)return null;const n=String(t).trim(),r=this.getLookupTypeByFieldKey(e);if(!r)return n;const a=this.lookupTypes.find((e=>e.lookup_type_code===r&&(e.display_name===n||e.value===n)));return a?a.display_name:n}resolveRelationValue(e,t){if(!t)return null;const n=String(t).trim();switch(e){case"department_name":const e=this.departments.find((e=>e.name===n));return e?e.name:n;case"position_name":const t=this.positions.find((e=>e.name===n));return t?t.name:n;case"personnel_category_name":const r=this.personnelCategories.find((e=>e.name===n));return r?r.name:n;default:return n}}getLookupTypeByFieldKey(e){return{gender_name:"GENDER",employee_status:"EMPLOYEE_STATUS",employment_type_name:"EMPLOYMENT_TYPE",education_level_name:"EDUCATION_LEVEL",marital_status_name:"MARITAL_STATUS",political_status_name:"POLITICAL_STATUS",contract_type_name:"CONTRACT_TYPE",job_position_level_name:"JOB_POSITION_LEVEL",salary_level_name:"SALARY_LEVEL",salary_grade_name:"SALARY_GRADE"}[e]||null}async validateData(e,t,n=nn.NONE){const r={employees:e.map((e=>({...e.data,client_id:e._meta.clientId}))),overwrite_mode:dx(n)};try{const t=await this.makeRequest("/v2/employees/batch-validate",{method:"POST",body:JSON.stringify(r)}),n=await this.handleResponse(t);return e.map((e=>{var t;const r=null==(t=n.validation_results)?void 0:t.find((t=>t.client_id===e._meta.clientId));return{isValid:(null==r?void 0:r.is_valid)||!1,clientId:e._meta.clientId,fieldConflicts:!1,errors:this.formatValidationMessages((null==r?void 0:r.errors)||[]),warnings:this.formatValidationMessages((null==r?void 0:r.warnings)||[])}}))}catch(a){return e.map((e=>({isValid:!1,clientId:e._meta.clientId,fieldConflicts:!1,errors:[{field:"general",message:"验证服务暂时不可用"}],warnings:[]})))}}formatValidationMessages(e){return Array.isArray(e)?e.map((e=>"string"==typeof e?{field:"general",message:e}:e&&"object"==typeof e?{field:e.field||"general",message:e.message||String(e)}:{field:"general",message:String(e)})):[]}async importData(e,t,n=nn.NONE){const r={employees:e.map((e=>({...e.data,client_id:e._meta.clientId}))),overwrite_mode:dx(n)};try{const e=await this.makeRequest("/v2/employees/batch-import",{method:"POST",body:JSON.stringify(r)}),t=await this.handleResponse(e);return{success:!0,successCount:t.success_count||0,failedCount:t.error_count||0,message:t.message||"员工信息导入完成",details:t}}catch(a){throw a}}}};class jx{static async getStrategy(e){try{if(!this.strategies.has(e)){const t=wx[e];if(!t)throw new Error(`未找到导入策略: ${e}`);const n=new t;"initialize"in n&&"function"==typeof n.initialize&&await n.initialize(),this.strategies.set(e,n)}const t=this.strategies.get(e);if(!t)throw new Error(`策略实例获取失败: ${e}`);return t}catch(t){throw t}}static async getAllModeConfigs(){try{return(await Promise.all(Object.keys(wx).map((async e=>{try{const t=wx[e];if(!t)throw new Error(`未找到导入策略: ${e}`);const n=new t;return await n.getModeConfig()}catch(t){return{id:e,name:`${e} 导入`,description:"配置加载失败",icon:"❌",fields:[],requiredFields:[],optionalFields:[],validationRules:[],apiEndpoints:{validate:"",execute:"",getRefData:[]},fieldMappingHints:[],sampleTemplate:{headers:[],sampleRows:[]},importSettings:{supportsBatch:!1,maxBatchSize:100,requiresPeriodSelection:!1,supportsOverwrite:!1,defaultOverwriteMode:!1}}}})))).filter((e=>"❌"!==e.icon))}catch(e){throw e}}static async getModeConfig(e){const t=await this.getStrategy(e);return await t.getModeConfig()}static hasMode(e){return e in wx}static clearStrategies(){this.strategies.clear()}}t(jx,"strategies",new Map);const{Step:kx}=De,{Panel:Sx}=Te,{Text:Cx}=i,Ex=({processedData:e,validationResults:t,modeConfig:r,importSettings:a,onSettingsChange:o})=>{const{columns:i,errorCount:s}=He.useMemo((()=>{var a;const o=[...r.requiredFields,...r.optionalFields],i=Object.keys((null==(a=e[0])?void 0:a.data)||{}).map((e=>{const t=o.find((t=>t.key===e));return"earnings_details"===e||"deductions_details"===e?{title:(null==t?void 0:t.name)||e,dataIndex:["data",e],key:e,width:300,render:e=>{if(!e||"object"!=typeof e||0===Object.keys(e).length)return n.jsx(Cx,{type:"secondary",children:"-"});const t=Object.entries(e).map((([e,t])=>{const r=(null==t?void 0:t.amount)||t;return n.jsx("div",{style:{marginBottom:4},children:n.jsxs(Y,{color:"blue",style:{fontSize:"12px"},children:[e,": ¥","number"==typeof r?r.toFixed(2):r]})},e)}));return n.jsx("div",{style:{maxHeight:"120px",overflowY:"auto"},children:t})}}:{title:(null==t?void 0:t.name)||e,dataIndex:["data",e],key:e}}));i.push({title:"验证状态",key:"status",width:150,render:(e,r)=>{const a=t.find((e=>e.clientId===r._meta.clientId));if(!a)return n.jsx(Y,{color:"gray",children:"未验证"});const o=[],i=[];a.errors&&Array.isArray(a.errors)&&a.errors.forEach((e=>{"string"==typeof e?o.push(e):e&&"object"==typeof e&&(e.message?o.push(e.message):e.field?o.push(`${e.field}: ${e.message||"验证失败"}`):o.push(JSON.stringify(e)))})),a.warnings&&Array.isArray(a.warnings)&&a.warnings.forEach((e=>{"string"==typeof e?i.push(e):e&&"object"==typeof e&&(e.message?i.push(e.message):i.push(JSON.stringify(e)))}));const s=[];return o.length>0&&(s.push("错误："),s.push(...o.map((e=>`• ${e}`)))),i.length>0&&(s.length>0&&s.push(""),s.push("警告："),s.push(...i.map((e=>`• ${e}`)))),a.isValid?i.length>0?n.jsx(ne,{title:n.jsx("div",{style:{whiteSpace:"pre-line"},children:s.join("\n")}),overlayStyle:{maxWidth:"400px"},children:n.jsxs(Y,{color:"orange",children:["警告 (",i.length,")"]})}):n.jsx(Y,{color:"green",children:"通过"}):n.jsx(ne,{title:n.jsx("div",{style:{whiteSpace:"pre-line"},children:s.length>0?s.join("\n"):"验证失败，无详细信息"}),overlayStyle:{maxWidth:"400px"},children:n.jsxs(Y,{color:"red",children:["错误 ",o.length>0&&`(${o.length})`]})})}});return{columns:i,errorCount:t.filter((e=>!e.isValid)).length}}),[e,t,r]),{hasExistingRecords:l,existingEmployeeCount:c}=He.useMemo((()=>{let e=0,n=!1;return t.forEach((t=>{var r,a;const o=null==(r=t.warnings)?void 0:r.some((e=>{var t;const n=(null==(t=e.message)?void 0:t.toLowerCase())||"";return n.includes("已存在")||n.includes("already exists")||n.includes("duplicate")||n.includes("重复")||n.includes("exists")||n.includes("found existing")})),i=null==(a=t.errors)?void 0:a.some((e=>{var t;const n=(null==(t=e.message)?void 0:t.toLowerCase())||"";return n.includes("已存在")||n.includes("already exists")||n.includes("duplicate")||n.includes("重复")||n.includes("exists")||n.includes("found existing")}));(o||i)&&(e++,n=!0)})),{hasExistingRecords:n,existingEmployeeCount:e}}),[t,e]);Ge.useEffect((()=>{l||a.overwriteMode===nn.NONE||o({...a,overwriteMode:nn.NONE})}),[l,a.overwriteMode,o]);const{errorDetails:d,warningDetails:u}=He.useMemo((()=>{const n=[],r=[];return e.forEach(((e,a)=>{const o=t.find((t=>t.clientId===e._meta.clientId));if(!o)return;const i=e.data.employee_name||e.data.last_name||`第${a+1}行`;if(o.errors&&Array.isArray(o.errors)&&o.errors.length>0){const e=[];o.errors.forEach((t=>{"string"==typeof t?e.push(t):t&&"object"==typeof t&&(t.message?e.push(t.message):t.field&&e.push(`${t.field}: ${t.message||"验证失败"}`))})),e.length>0&&n.push({rowIndex:a+1,employeeName:i,messages:e})}if(o.warnings&&Array.isArray(o.warnings)&&o.warnings.length>0){const e=[];o.warnings.forEach((t=>{"string"==typeof t?e.push(t):t&&"object"==typeof t&&t.message&&e.push(t.message)})),e.length>0&&r.push({rowIndex:a+1,employeeName:i,messages:e})}})),{errorDetails:n,warningDetails:r}}),[e,t]);return n.jsxs("div",{children:[l&&n.jsxs(L,{title:"导入设置",style:{marginBottom:16},children:[n.jsx("div",{style:{marginBottom:12},children:n.jsx(F,{message:"检测到重复记录",description:`发现 ${c} 名员工在当前周期已有薪资记录，请选择处理方式。`,type:"warning",showIcon:!0,style:{marginBottom:16}})}),n.jsx(mx,{value:a.overwriteMode,onChange:e=>{o({...a,overwriteMode:e})},existingCount:c,showOnlyWhenNeeded:!0})]}),!l&&n.jsx(L,{title:"导入设置",style:{marginBottom:16},children:n.jsx(F,{message:"无重复记录",description:"所有员工在当前周期都没有薪资记录，将直接添加新记录。",type:"success",showIcon:!0})}),n.jsxs(L,{title:"数据预览与验证",children:[n.jsx(F,{message:`共 ${e.length} 条记录，发现 ${s} 条存在错误。`,type:s>0?"warning":"success",showIcon:!0,style:{marginBottom:20}}),n.jsx(he,{columns:i,dataSource:e,rowKey:e=>e._meta.clientId,pagination:{pageSize:5},bordered:!0,scroll:{x:"max-content"}}),(d.length>0||u.length>0)&&n.jsxs(Te,{style:{marginTop:16},size:"small",ghost:!0,children:[d.length>0&&n.jsx(Sx,{header:n.jsxs("span",{style:{color:"#ff4d4f",fontWeight:"bold"},children:["🚨 详细错误信息 (",d.length," 条)"]}),children:n.jsx(F,{message:`发现 ${d.length} 条错误记录`,description:n.jsx("div",{style:{marginTop:12},children:d.map(((e,t)=>n.jsxs("div",{style:{marginBottom:12,padding:"8px 12px",backgroundColor:"#fff2f0",border:"1px solid #ffccc7",borderRadius:"4px"},children:[n.jsxs("div",{style:{fontWeight:"bold",color:"#cf1322",marginBottom:4},children:["第",e.rowIndex,"行 - ",e.employeeName]}),n.jsx("ul",{style:{margin:0,paddingLeft:16},children:e.messages.map(((e,t)=>n.jsx("li",{style:{color:"#ff4d4f",marginBottom:2},children:e},t)))})]},t)))}),type:"error",showIcon:!0})},"errors"),u.length>0&&n.jsx(Sx,{header:n.jsxs("span",{style:{color:"#fa8c16",fontWeight:"bold"},children:["⚠️ 详细警告信息 (",u.length," 条)"]}),children:n.jsx(F,{message:`发现 ${u.length} 条警告记录`,description:n.jsx("div",{style:{marginTop:12},children:u.map(((e,t)=>n.jsxs("div",{style:{marginBottom:12,padding:"8px 12px",backgroundColor:"#fffbe6",border:"1px solid #ffe58f",borderRadius:"4px"},children:[n.jsxs("div",{style:{fontWeight:"bold",color:"#d46b08",marginBottom:4},children:["第",e.rowIndex,"行 - ",e.employeeName]}),n.jsx("ul",{style:{margin:0,paddingLeft:16},children:e.messages.map(((e,t)=>n.jsx("li",{style:{color:"#fa8c16",marginBottom:2},children:e},t)))})]},t)))}),type:"warning",showIcon:!0})},"warnings")]})]})]})},{Option:Tx}=q,Ix=(e,t,r,a,o,i,s)=>{const{typeMap:l,typeInfo:c}=r||{};return[{title:e("payroll_components.code"),dataIndex:"code",key:"code",sorter:Sn("code"),...t("code")},{title:e("payroll_components.name"),dataIndex:"name",key:"name",sorter:Sn("name"),...t("name")},{title:e("payroll_components.type"),dataIndex:"type",key:"type",render:e=>{const t=null==c?void 0:c[e];return t?n.jsx(Y,{color:t.color,children:t.text}):n.jsx(Y,{children:e})},sorter:Sn("type"),filters:c?Object.entries(c).map((([e,t])=>({text:t.text,value:e}))):[],onFilter:(e,t)=>t.type===e},{title:e("payroll_components.is_taxable"),dataIndex:"is_taxable",key:"is_taxable",render:t=>e(t?"common.yes":"common.no"),filters:[{text:e("common.yes"),value:!0},{text:e("common.no"),value:!1}],onFilter:(e,t)=>t.is_taxable===e},{title:e("payroll_components.sort_order"),dataIndex:"sort_order",key:"sort_order",sorter:kn("sort_order")},{title:e("common.status"),dataIndex:"is_active",key:"is_active",render:t=>n.jsx(Y,{color:t?"green":"red",children:e(t?"common.active":"common.inactive")}),filters:[{text:e("common.active"),value:!0},{text:e("common.inactive"),value:!1}],onFilter:(e,t)=>t.is_active===e},{title:e("common.actions"),key:"action",width:150,fixed:"right",render:(t,r)=>n.jsxs(k,{size:"small",children:[a.canViewDetail&&n.jsx(xn,{actionType:"view",onClick:()=>s(String(r.id)),tooltipTitle:e("common.view")}),a.canUpdate&&n.jsx(xn,{actionType:"edit",onClick:()=>o(r),tooltipTitle:e("common.edit")}),a.canDelete&&n.jsx(xn,{actionType:"delete",danger:!0,onClick:()=>i(String(r.id)),tooltipTitle:e("common.delete")})]})}]},{TabPane:Px}=K,Nx="/attendance",Ax=e=>bt.get(`${Nx}/periods`,{params:e}),Ox=e=>bt.post(`${Nx}/periods`,e),Mx=(e,t)=>bt.put(`${Nx}/periods/${e}`,t),Dx=e=>bt.delete(`${Nx}/periods/${e}`),Lx=(e,t)=>bt.patch(`${Nx}/periods/${e}/toggle`,{is_active:t}),Rx=e=>bt.get(`${Nx}/records`,{params:e}),zx=e=>bt.post(`${Nx}/records`,e),$x=(e,t)=>bt.put(`${Nx}/records/${e}`,t),Fx=e=>bt.delete(`${Nx}/records/${e}`),qx=e=>bt.get(`${Nx}/daily-records`,{params:e}),Bx=e=>bt.post(`${Nx}/daily-records`,e),Ux=(e,t)=>bt.put(`${Nx}/daily-records/${e}`,t),Vx=e=>bt.delete(`${Nx}/daily-records/${e}`),Yx=e=>bt.get(`${Nx}/rules`,{params:e}),Hx=e=>bt.post(`${Nx}/rules`,e),Kx=(e,t)=>bt.put(`${Nx}/rules/${e}`,t),Zx=e=>bt.delete(`${Nx}/rules/${e}`),Wx=(e,t)=>bt.patch(`${Nx}/rules/${e}/toggle`,{is_active:t}),{RangePicker:Gx}=te,Jx=()=>{const{t:e}=Cn(["payroll","common"]),[t]=O.useForm(),[r,a]=He.useState([]),[o,i]=He.useState(!1),[s,l]=He.useState(!1),[c,d]=He.useState(null),u=[{title:e("payroll:id"),dataIndex:"id",key:"id",width:80},{title:e("payroll:period_name"),dataIndex:"name",key:"name",width:200},{title:e("payroll:start_date"),dataIndex:"start_date",key:"start_date",width:120,render:e=>A(e).format("YYYY-MM-DD")},{title:e("payroll:end_date"),dataIndex:"end_date",key:"end_date",width:120,render:e=>A(e).format("YYYY-MM-DD")},{title:e("payroll:status"),dataIndex:"is_active",key:"is_active",width:100,render:t=>n.jsx(Y,{color:t?"green":"default",children:e(t?"payroll:active":"payroll:inactive")})},{key:"actions",title:e("common:action.title"),width:200,fixed:"right",render:(t,r,a)=>n.jsxs(k,{size:"small",children:[n.jsx(xn,{actionType:"edit",onClick:()=>m(r),tooltipTitle:e("common:edit")}),n.jsx(xn,{actionType:"delete",onClick:()=>f(r.id),tooltipTitle:e("common:delete"),danger:!0}),n.jsx(ne,{title:r.is_active?e("payroll:deactivate"):e("payroll:activate"),children:n.jsx(C,{type:"link",size:"small",icon:r.is_active?n.jsx(fe,{}):n.jsx(oe,{}),onClick:()=>h(r.id,!r.is_active)})})]})}],p=He.useCallback((async()=>{try{i(!0);const e=await Ax({page:1,size:100});a(e.data||[])}catch(t){V.error(e("common:load_failed"))}finally{i(!1)}}),[e]),m=e=>{d(e),t.setFieldsValue({name:e.name,dateRange:[A(e.start_date),A(e.end_date)],is_active:e.is_active}),l(!0)},f=t=>{B.confirm({title:e("payroll:confirm_delete_period"),content:e("payroll:confirm_delete_period_content"),okText:e("common:delete"),okType:"danger",cancelText:e("common:cancel"),onOk:async()=>{try{await Dx(t),V.success(e("payroll:delete_success")),p()}catch(n){V.error(e("payroll:delete_failed"))}}})},h=async(t,n)=>{try{await Lx(t,n),V.success(e("payroll:status_updated")),p()}catch(r){V.error(e("payroll:status_update_failed"))}};return He.useEffect((()=>{p()}),[p]),n.jsxs("div",{className:"attendance-period-manager",children:[n.jsxs("div",{style:{marginBottom:16,display:"flex",justifyContent:"space-between"},children:[n.jsx("div",{}),n.jsx(C,{type:"primary",icon:n.jsx(se,{}),onClick:()=>{d(null),t.resetFields(),l(!0)},children:e("payroll:create_attendance_period")})]}),n.jsx(he,{columns:u,dataSource:r,rowKey:"id",loading:o,pagination:{showSizeChanger:!0,showQuickJumper:!0,showTotal:t=>e("common:pagination.total",{total:t})}}),n.jsx(B,{title:e(c?"payroll:edit_attendance_period":"payroll:create_attendance_period"),open:s,onOk:async()=>{try{const n=await t.validateFields(),[r,a]=n.dateRange,o={name:n.name,start_date:r.format("YYYY-MM-DD"),end_date:a.format("YYYY-MM-DD"),is_active:n.is_active??!0};c?(await Mx(c.id,o),V.success(e("payroll:update_success"))):(await Ox(o),V.success(e("payroll:create_success"))),l(!1),p()}catch(n){V.error(e(c?"payroll:update_failed":"payroll:create_failed"))}},onCancel:()=>l(!1),width:600,children:n.jsxs(O,{form:t,layout:"vertical",children:[n.jsx(O.Item,{name:"name",label:e("payroll:period_name"),rules:[{required:!0,message:e("common:validation.required")}],children:n.jsx(R,{placeholder:e("payroll:period_name_placeholder")})}),n.jsx(O.Item,{name:"dateRange",label:e("payroll:date_range"),rules:[{required:!0,message:e("common:validation.required")}],children:n.jsx(Gx,{style:{width:"100%"}})}),n.jsx(O.Item,{name:"is_active",label:e("payroll:is_active"),valuePropName:"checked",children:n.jsx(U,{})})]})})]})},{Option:Xx}=q,{TextArea:Qx}=R,eb=()=>{const{t:e}=Cn(["payroll","common"]),[t]=O.useForm(),[r,a]=He.useState([]),[o,i]=He.useState([]),[s,l]=He.useState(!1),[c,d]=He.useState(!1),[u,p]=He.useState(null),m=[{title:e("payroll:employee_name"),dataIndex:"employee_name",key:"employee_name",width:120},{title:e("payroll:attendance_period"),dataIndex:["attendance_period","name"],key:"attendance_period_name",width:150,render:(e,t,n)=>{var r;return(null==(r=t.attendance_period)?void 0:r.name)||"-"}},{title:e("payroll:work_days"),dataIndex:"work_days",key:"work_days",width:80,align:"center"},{title:e("payroll:actual_work_days"),dataIndex:"actual_work_days",key:"actual_work_days",width:100,align:"center",render:e=>n.jsx(Y,{color:e>=0?"green":"red",children:e})},{title:e("payroll:overtime_hours"),dataIndex:"overtime_hours",key:"overtime_hours",width:100,align:"center",render:e=>e>0?n.jsxs(Y,{color:"blue",children:[e,"h"]}):"-"},{title:e("payroll:leave_days"),dataIndex:"leave_days",key:"leave_days",width:80,align:"center",render:e=>e>0?n.jsx(Y,{color:"orange",children:e}):"-"},{title:e("payroll:absent_days"),dataIndex:"absent_days",key:"absent_days",width:80,align:"center",render:e=>e>0?n.jsx(Y,{color:"red",children:e}):"-"},{key:"actions",title:e("common:action.title"),dataIndex:"actions",render:(t,r)=>n.jsxs(k,{size:"small",children:[n.jsx(xn,{actionType:"edit",onClick:()=>h(r),tooltipTitle:e("common:edit")}),n.jsx(xn,{actionType:"delete",onClick:()=>_(r.id),tooltipTitle:e("common:delete"),danger:!0})]})}],f=He.useCallback((async()=>{try{l(!0);const[e,t]=await Promise.all([Rx({page:1,size:100}),Ax({page:1,size:100})]);a(e.data||[]),i(t.data||[])}catch(t){V.error(e("common:load_failed"))}finally{l(!1)}}),[e]),h=e=>{p(e),t.setFieldsValue({employee_id:e.employee_id,attendance_period_id:e.attendance_period_id,work_days:e.work_days,actual_work_days:e.actual_work_days,overtime_hours:e.overtime_hours,leave_days:e.leave_days,absent_days:e.absent_days,late_count:e.late_count,early_leave_count:e.early_leave_count,notes:e.notes}),d(!0)},_=t=>{B.confirm({title:e("payroll:confirm_delete_record"),content:e("payroll:confirm_delete_record_content"),okText:e("common:delete"),okType:"danger",cancelText:e("common:cancel"),onOk:async()=>{try{await Fx(t),V.success(e("payroll:delete_success")),f()}catch(n){V.error(e("payroll:delete_failed"))}}})};return He.useEffect((()=>{f()}),[f]),n.jsxs("div",{className:"attendance-record-manager",children:[n.jsxs("div",{style:{marginBottom:16,display:"flex",justifyContent:"space-between"},children:[n.jsx("div",{}),n.jsxs(k,{children:[n.jsx(C,{icon:n.jsx(Re,{}),children:e("payroll:batch_import")}),n.jsx(C,{type:"primary",icon:n.jsx(se,{}),onClick:()=>{p(null),t.resetFields(),d(!0)},children:e("payroll:create_attendance_record")})]})]}),n.jsx(he,{columns:m,dataSource:r,rowKey:"id",loading:s,scroll:{x:1e3},pagination:{showSizeChanger:!0,showQuickJumper:!0,showTotal:t=>e("common:pagination.total",{total:t})}}),n.jsx(B,{title:e(u?"payroll:edit_attendance_record":"payroll:create_attendance_record"),open:c,onOk:async()=>{try{const n=await t.validateFields();u?(await $x(u.id,n),V.success(e("payroll:update_success"))):(await zx(n),V.success(e("payroll:create_success"))),d(!1),f()}catch(n){V.error(e(u?"payroll:update_failed":"payroll:create_failed"))}},onCancel:()=>d(!1),width:600,children:n.jsxs(O,{form:t,layout:"vertical",children:[n.jsx(O.Item,{name:"employee_id",label:e("payroll:employee"),rules:[{required:!0,message:e("common:validation.required")}],children:n.jsx(ge,{style:{width:"100%"},placeholder:e("payroll:employee_id_placeholder")})}),n.jsx(O.Item,{name:"attendance_period_id",label:e("payroll:attendance_period"),rules:[{required:!0,message:e("common:validation.required")}],children:n.jsx(q,{placeholder:e("payroll:select_attendance_period"),children:o.map((e=>n.jsx(Xx,{value:e.id,children:e.name},e.id)))})}),n.jsx(O.Item,{name:"work_days",label:e("payroll:work_days"),rules:[{required:!0,message:e("common:validation.required")}],children:n.jsx(ge,{min:0,max:31,style:{width:"100%"}})}),n.jsx(O.Item,{name:"actual_work_days",label:e("payroll:actual_work_days"),rules:[{required:!0,message:e("common:validation.required")}],children:n.jsx(ge,{min:0,max:31,style:{width:"100%"}})}),n.jsx(O.Item,{name:"overtime_hours",label:e("payroll:overtime_hours"),children:n.jsx(ge,{min:0,max:200,style:{width:"100%"}})}),n.jsx(O.Item,{name:"leave_days",label:e("payroll:leave_days"),children:n.jsx(ge,{min:0,max:31,style:{width:"100%"}})}),n.jsx(O.Item,{name:"absent_days",label:e("payroll:absent_days"),children:n.jsx(ge,{min:0,max:31,style:{width:"100%"}})}),n.jsx(O.Item,{name:"late_count",label:e("payroll:late_count"),children:n.jsx(ge,{min:0,max:31,style:{width:"100%"}})}),n.jsx(O.Item,{name:"early_leave_count",label:e("payroll:early_leave_count"),children:n.jsx(ge,{min:0,max:31,style:{width:"100%"}})}),n.jsx(O.Item,{name:"notes",label:e("payroll:notes"),children:n.jsx(Qx,{rows:3,placeholder:e("payroll:notes_placeholder")})})]})})]})},{Option:tb}=q,{TextArea:nb}=R,rb=()=>{const{t:e}=Cn(["payroll","common"]),[t]=O.useForm(),[r,a]=He.useState([]),[o,i]=He.useState(!1),[s,l]=He.useState(!1),[c,d]=He.useState(null),u=[{title:e("payroll:employee_name"),dataIndex:"employee_name",key:"employee_name",width:120},{title:e("payroll:attendance_date"),dataIndex:"attendance_date",key:"attendance_date",width:120,render:e=>A(e).format("YYYY-MM-DD")},{title:e("payroll:check_in_time"),dataIndex:"check_in_time",key:"check_in_time",width:100,render:e=>e?A(e,"HH:mm:ss").format("HH:mm"):"-"},{title:e("payroll:check_out_time"),dataIndex:"check_out_time",key:"check_out_time",width:100,render:e=>e?A(e,"HH:mm:ss").format("HH:mm"):"-"},{title:e("payroll:work_hours"),dataIndex:"work_hours",key:"work_hours",width:80,align:"center",render:e=>`${e}h`},{title:e("payroll:overtime_hours"),dataIndex:"overtime_hours",key:"overtime_hours",width:100,align:"center",render:e=>e>0?n.jsxs(Y,{color:"blue",children:[e,"h"]}):"-"},{title:e("payroll:status"),key:"status",width:120,render:(t,r,a)=>n.jsxs(k,{size:4,children:[r.is_late&&n.jsx(Y,{color:"orange",children:e("payroll:late")}),r.is_early_leave&&n.jsx(Y,{color:"red",children:e("payroll:early_leave")}),r.is_absent&&n.jsx(Y,{color:"red",children:e("payroll:absent")}),!r.is_late&&!r.is_early_leave&&!r.is_absent&&n.jsx(Y,{color:"green",children:e("payroll:normal")})]})},{key:"actions",title:e("common:action.title"),dataIndex:"actions",width:150,fixed:"right",render:(t,r,a)=>n.jsxs(k,{size:"small",children:[n.jsx(xn,{actionType:"edit",onClick:()=>m(r),tooltipTitle:e("common:edit")}),n.jsx(xn,{actionType:"delete",onClick:()=>f(r.id),tooltipTitle:e("common:delete"),danger:!0})]})}],p=He.useCallback((async()=>{try{i(!0);const e=await qx({page:1,size:100});a(e.data||[])}catch(t){V.error(e("common:load_failed"))}finally{i(!1)}}),[e]),m=e=>{d(e),t.setFieldsValue({employee_id:e.employee_id,attendance_date:A(e.attendance_date),check_in_time:e.check_in_time?A(e.check_in_time,"HH:mm:ss"):null,check_out_time:e.check_out_time?A(e.check_out_time,"HH:mm:ss"):null,work_hours:e.work_hours,overtime_hours:e.overtime_hours,is_late:e.is_late,is_early_leave:e.is_early_leave,is_absent:e.is_absent,leave_type:e.leave_type,notes:e.notes}),l(!0)},f=t=>{B.confirm({title:e("payroll:confirm_delete_daily_record"),content:e("payroll:confirm_delete_daily_record_content"),okText:e("common:delete"),okType:"danger",cancelText:e("common:cancel"),onOk:async()=>{try{await Vx(t),V.success(e("payroll:delete_success")),p()}catch(n){V.error(e("payroll:delete_failed"))}}})};return He.useEffect((()=>{p()}),[p]),n.jsxs("div",{className:"daily-attendance-manager",children:[n.jsxs("div",{style:{marginBottom:16,display:"flex",justifyContent:"space-between"},children:[n.jsx("div",{}),n.jsx(C,{type:"primary",icon:n.jsx(se,{}),onClick:()=>{d(null),t.resetFields(),l(!0)},children:e("payroll:create_daily_record")})]}),n.jsx(he,{columns:u,dataSource:r,rowKey:"id",loading:o,scroll:{x:1200},pagination:{showSizeChanger:!0,showQuickJumper:!0,showTotal:t=>e("common:pagination.total",{total:t})}}),n.jsx(B,{title:e(c?"payroll:edit_daily_record":"payroll:create_daily_record"),open:s,onOk:async()=>{var n,r;try{const a=await t.validateFields(),o={...a,attendance_date:a.attendance_date.format("YYYY-MM-DD"),check_in_time:null==(n=a.check_in_time)?void 0:n.format("HH:mm:ss"),check_out_time:null==(r=a.check_out_time)?void 0:r.format("HH:mm:ss")};c?(await Ux(c.id,o),V.success(e("payroll:update_success"))):(await Bx(o),V.success(e("payroll:create_success"))),l(!1),p()}catch(a){V.error(e(c?"payroll:update_failed":"payroll:create_failed"))}},onCancel:()=>l(!1),width:600,children:n.jsxs(O,{form:t,layout:"vertical",children:[n.jsx(O.Item,{name:"employee_id",label:e("payroll:employee"),rules:[{required:!0,message:e("common:validation.required")}],children:n.jsx(ge,{style:{width:"100%"},placeholder:e("payroll:employee_id_placeholder")})}),n.jsx(O.Item,{name:"attendance_date",label:e("payroll:attendance_date"),rules:[{required:!0,message:e("common:validation.required")}],children:n.jsx(te,{style:{width:"100%"}})}),n.jsx(O.Item,{name:"check_in_time",label:e("payroll:check_in_time"),children:n.jsx(ze,{style:{width:"100%"},format:"HH:mm"})}),n.jsx(O.Item,{name:"check_out_time",label:e("payroll:check_out_time"),children:n.jsx(ze,{style:{width:"100%"},format:"HH:mm"})}),n.jsx(O.Item,{name:"work_hours",label:e("payroll:work_hours"),rules:[{required:!0,message:e("common:validation.required")}],children:n.jsx(ge,{min:0,max:24,step:.5,style:{width:"100%"}})}),n.jsx(O.Item,{name:"overtime_hours",label:e("payroll:overtime_hours"),children:n.jsx(ge,{min:0,max:12,step:.5,style:{width:"100%"}})}),n.jsx(O.Item,{name:"is_late",label:e("payroll:is_late"),valuePropName:"checked",children:n.jsx(U,{})}),n.jsx(O.Item,{name:"is_early_leave",label:e("payroll:is_early_leave"),valuePropName:"checked",children:n.jsx(U,{})}),n.jsx(O.Item,{name:"is_absent",label:e("payroll:is_absent"),valuePropName:"checked",children:n.jsx(U,{})}),n.jsx(O.Item,{name:"leave_type",label:e("payroll:leave_type"),children:n.jsxs(q,{placeholder:e("payroll:select_leave_type"),allowClear:!0,children:[n.jsx(tb,{value:"sick",children:e("payroll:sick_leave")}),n.jsx(tb,{value:"annual",children:e("payroll:annual_leave")}),n.jsx(tb,{value:"personal",children:e("payroll:personal_leave")}),n.jsx(tb,{value:"maternity",children:e("payroll:maternity_leave")})]})}),n.jsx(O.Item,{name:"notes",label:e("payroll:notes"),children:n.jsx(nb,{rows:3,placeholder:e("payroll:notes_placeholder")})})]})})]})},ab=()=>{const{t:e}=Cn(["payroll","common"]),[t]=O.useForm(),[r,a]=He.useState([]),[o,i]=He.useState(!1),[s,l]=He.useState(!1),[c,d]=He.useState(null),u=[{title:e("payroll:rule_name"),dataIndex:"name",key:"name",width:200},{title:e("payroll:work_start_time"),dataIndex:"work_start_time",key:"work_start_time",width:120,render:e=>A(e,"HH:mm:ss").format("HH:mm")},{title:e("payroll:work_end_time"),dataIndex:"work_end_time",key:"work_end_time",width:120,render:e=>A(e,"HH:mm:ss").format("HH:mm")},{title:e("payroll:break_duration"),dataIndex:"break_duration_minutes",key:"break_duration_minutes",width:100,align:"center",render:e=>`${e}分钟`},{title:e("payroll:late_threshold"),dataIndex:"late_threshold_minutes",key:"late_threshold_minutes",width:100,align:"center",render:e=>`${e}分钟`},{title:e("payroll:overtime_threshold"),dataIndex:"overtime_threshold_minutes",key:"overtime_threshold_minutes",width:120,align:"center",render:e=>`${e}分钟`},{title:e("payroll:status"),dataIndex:"is_active",key:"is_active",width:100,render:t=>n.jsx(Y,{color:t?"green":"default",children:e(t?"payroll:active":"payroll:inactive")})},{key:"actions",title:e("common:action.title"),width:200,fixed:"right",render:(t,r,a)=>n.jsxs(k,{size:"small",children:[n.jsx(xn,{actionType:"edit",onClick:()=>m(r),tooltipTitle:e("common:edit")}),n.jsx(xn,{actionType:"delete",onClick:()=>f(r.id),tooltipTitle:e("common:delete"),danger:!0}),n.jsx(ne,{title:r.is_active?e("payroll:deactivate"):e("payroll:activate"),children:n.jsx(C,{type:"link",size:"small",icon:r.is_active?n.jsx(fe,{}):n.jsx(oe,{}),onClick:()=>h(r.id,!r.is_active)})})]})}],p=He.useCallback((async()=>{try{i(!0);const e=await Yx({page:1,size:100});a(e.data||[])}catch(t){V.error(e("common:load_failed"))}finally{i(!1)}}),[e]),m=e=>{d(e),t.setFieldsValue({name:e.name,work_start_time:A(e.work_start_time,"HH:mm:ss"),work_end_time:A(e.work_end_time,"HH:mm:ss"),break_duration_minutes:e.break_duration_minutes,late_threshold_minutes:e.late_threshold_minutes,early_leave_threshold_minutes:e.early_leave_threshold_minutes,overtime_threshold_minutes:e.overtime_threshold_minutes,is_active:e.is_active}),l(!0)},f=t=>{B.confirm({title:e("payroll:confirm_delete_rule"),content:e("payroll:confirm_delete_rule_content"),okText:e("common:delete"),okType:"danger",cancelText:e("common:cancel"),onOk:async()=>{try{await Zx(t),V.success(e("payroll:delete_success")),p()}catch(n){V.error(e("payroll:delete_failed"))}}})},h=async(t,n)=>{try{await Wx(t,n),V.success(e("payroll:status_updated")),p()}catch(r){V.error(e("payroll:status_update_failed"))}};return He.useEffect((()=>{p()}),[p]),n.jsxs("div",{className:"attendance-rule-manager",children:[n.jsxs("div",{style:{marginBottom:16,display:"flex",justifyContent:"space-between"},children:[n.jsx("div",{}),n.jsx(C,{type:"primary",icon:n.jsx(se,{}),onClick:()=>{d(null),t.resetFields(),l(!0)},children:e("payroll:create_attendance_rule")})]}),n.jsx(he,{columns:u,dataSource:r,rowKey:"id",loading:o,scroll:{x:1200},pagination:{showSizeChanger:!0,showQuickJumper:!0,showTotal:t=>e("common:pagination.total",{total:t})}}),n.jsx(B,{title:e(c?"payroll:edit_attendance_rule":"payroll:create_attendance_rule"),open:s,onOk:async()=>{try{const n=await t.validateFields(),r={...n,work_start_time:n.work_start_time.format("HH:mm:ss"),work_end_time:n.work_end_time.format("HH:mm:ss")};c?(await Kx(c.id,r),V.success(e("payroll:update_success"))):(await Hx(r),V.success(e("payroll:create_success"))),l(!1),p()}catch(n){V.error(e(c?"payroll:update_failed":"payroll:create_failed"))}},onCancel:()=>l(!1),width:600,children:n.jsxs(O,{form:t,layout:"vertical",children:[n.jsx(O.Item,{name:"name",label:e("payroll:rule_name"),rules:[{required:!0,message:e("common:validation.required")}],children:n.jsx(R,{placeholder:e("payroll:rule_name_placeholder")})}),n.jsx(O.Item,{name:"work_start_time",label:e("payroll:work_start_time"),rules:[{required:!0,message:e("common:validation.required")}],children:n.jsx(ze,{style:{width:"100%"},format:"HH:mm"})}),n.jsx(O.Item,{name:"work_end_time",label:e("payroll:work_end_time"),rules:[{required:!0,message:e("common:validation.required")}],children:n.jsx(ze,{style:{width:"100%"},format:"HH:mm"})}),n.jsx(O.Item,{name:"break_duration_minutes",label:e("payroll:break_duration"),children:n.jsx(ge,{min:0,max:240,style:{width:"100%"},addonAfter:"分钟"})}),n.jsx(O.Item,{name:"late_threshold_minutes",label:e("payroll:late_threshold"),children:n.jsx(ge,{min:0,max:60,style:{width:"100%"},addonAfter:"分钟"})}),n.jsx(O.Item,{name:"early_leave_threshold_minutes",label:e("payroll:early_leave_threshold"),children:n.jsx(ge,{min:0,max:60,style:{width:"100%"},addonAfter:"分钟"})}),n.jsx(O.Item,{name:"overtime_threshold_minutes",label:e("payroll:overtime_threshold"),children:n.jsx(ge,{min:0,max:240,style:{width:"100%"},addonAfter:"分钟"})}),n.jsx(O.Item,{name:"is_active",label:e("payroll:is_active"),valuePropName:"checked",children:n.jsx(U,{})})]})})]})},{Title:ob}=i,{TabPane:ib}=K,{Title:sb,Paragraph:lb}=i,{Title:cb,Text:db}=i,{Option:ub}=q,pb=[{index:!0,element:Ge.createElement(We,{to:"periods",replace:!0})},{path:"periods",element:Ge.createElement(Ge.Suspense,{fallback:Ge.createElement("div",null,"Loading Payroll Periods...")},Ge.createElement((()=>{const{t:e}=Cn(["payroll","common"]),t=Je(),{message:a,modal:o}=r.useApp(),i=wn(),s=He.useMemo((()=>({canViewList:!0,canViewDetail:!0,canCreate:!0,canUpdate:!0,canDelete:!0,canExport:!0})),[]),[l,c]=He.useState([]),[d,u]=He.useState(!1),[p,m]=He.useState(!1),[f,h]=He.useState(null),[_,y]=He.useState([]),g=He.useMemo((()=>[{title:e("payroll:id"),dataIndex:"id",key:"id",width:80,sorter:(e,t)=>e.id-t.id,render:(e,t)=>n.jsxs(_f,{strong:!0,className:"typography-caption",children:["#",t.id]})},{title:e("payroll:period_name"),dataIndex:"name",key:"name",width:200,sorter:(e,t)=>(e.name||"").localeCompare(t.name||""),ellipsis:!0,render:(e,t)=>n.jsx(_f,{strong:!0,children:t.name})},{title:e("payroll:frequency"),dataIndex:"frequency_lookup_value_id",key:"frequency",width:120,render:(e,t)=>{var r;const a=(null==(r=null==i?void 0:i.payFrequencyMap)?void 0:r.get(t.frequency_lookup_value_id))||"-";return n.jsx(Y,{color:"blue",icon:n.jsx(W,{}),children:a})}},{title:e("payroll:period_range"),key:"period_range",width:200,render:(e,t)=>n.jsxs("div",{children:[n.jsx(_f,{className:"typography-body",children:A(t.start_date).format("YYYY-MM-DD")}),n.jsx(_f,{type:"secondary",children:" 至 "}),n.jsx(_f,{className:"typography-body",children:A(t.end_date).format("YYYY-MM-DD")}),n.jsx("br",{}),n.jsxs(_f,{type:"secondary",className:"typography-caption",children:[A(t.end_date).diff(A(t.start_date),"day")+1," 天"]})]}),sorter:(e,t)=>A(e.start_date).unix()-A(t.start_date).unix()},{title:e("common:label.status"),dataIndex:"status_lookup_value_id",key:"status",width:120,render:(e,t)=>{const r=_.find((e=>e.value===t.status_lookup_value_id));return r?n.jsx(lf,{status:r.type,text:r.label}):n.jsx(Y,{children:"-"})}},{title:e("payroll:runs_count"),key:"runs_count",width:100,align:"center",render:(t,r)=>n.jsx(ne,{title:e("payroll:associated_runs"),children:n.jsxs(k,{children:[n.jsx(re,{style:{color:"var(--color-info)"}}),n.jsx(_f,{strong:!0,style:{color:"var(--color-info)"},children:r.runs_count||0})]})})},{title:e("common:action.title"),key:"actions",width:200,fixed:"right",render:(t,r)=>n.jsxs(k,{size:"small",children:[n.jsx(xn,{actionType:"view",onClick:()=>b(r.id.toString()),tooltipTitle:e("common:view")}),s.canUpdate&&n.jsx(xn,{actionType:"edit",onClick:()=>x(r),tooltipTitle:e("common:edit")}),s.canDelete&&n.jsx(xn,{actionType:"delete",onClick:()=>w(r.id.toString()),tooltipTitle:e("common:delete"),danger:!0})]})}]),[e,i,_,s]),v=He.useCallback((async()=>{u(!0);try{const[e,t]=await Promise.all([Lt(),of()]),n=Array.isArray(e)?e:e.data||[],r=await Promise.all(n.map((async e=>{try{const t=await Rt({period_id:e.id}),n=Array.isArray(t)?t:t.data||[];return{...e,runs_count:n.length}}catch{return{...e,runs_count:0}}})));c(r),y(t)}catch(t){a.error(e("common:errors.fetch_failed"))}finally{u(!1)}}),[a,e]);He.useEffect((()=>{v()}),[v]);const x=e=>{h(e),m(!0)},b=e=>{t(`/payroll/periods/${e}`)},w=t=>{o.confirm({title:e("common:confirm_delete"),content:e("payroll:confirm_delete_period"),onOk:async()=>{try{await zt(parseInt(t)),a.success(e("common:delete_success")),v()}catch(n){a.error(e("common:delete_failed"))}}})},j=He.useMemo((()=>{const t=l.length,r=l.filter((e=>{const t=_.find((t=>t.value===e.status_lookup_value_id));return"success"===(null==t?void 0:t.type)})).length,a=l.filter((e=>{const t=_.find((t=>t.value===e.status_lookup_value_id));return"processing"===(null==t?void 0:t.type)})).length,o=l.reduce(((e,t)=>e+(t.runs_count||0)),0);return[{title:e("payroll:total_periods"),value:t,icon:n.jsx(ae,{}),color:"var(--color-primary)"},{title:e("payroll:active_periods"),value:r,icon:n.jsx(Q,{}),color:"var(--color-success)"},{title:e("payroll:pending_periods"),value:a,icon:n.jsx(oe,{}),color:"var(--color-warning)"},{title:e("payroll:total_runs_created"),value:o,icon:n.jsx(re,{}),color:"var(--color-info)"}]}),[l,_,e]);return n.jsxs(mf,{title:e("payroll:payroll_periods"),headerExtra:s.canCreate?n.jsx(C,{type:"primary",icon:n.jsx(se,{}),onClick:()=>{h(null),m(!0)},className:"modern-button",children:e("payroll:create_period")}):void 0,children:[n.jsx(M,{gutter:[16,16],style:{marginBottom:24},children:j.map(((e,t)=>n.jsx(D,{xs:24,sm:12,lg:6,children:n.jsx(ff,{title:e.title,icon:e.icon,children:n.jsx("div",{className:"statistic-content",children:n.jsx("div",{className:"statistic-value",style:{color:e.color},children:e.value})})})},t)))}),n.jsx(ff,{children:n.jsx(ie,{columns:g,dataSource:l,loading:d,rowKey:"id",pagination:{pageSize:20,showSizeChanger:!0,showQuickJumper:!0,showTotal:(t,n)=>`${n[0]}-${n[1]} / ${t} ${e("common:items")}`},scroll:{x:1200},search:!1,options:{reload:v,density:!0,fullScreen:!0,setting:!0},toolBarRender:()=>[n.jsx(C,{onClick:v,icon:n.jsx(re,{}),children:e("common:refresh")},"refresh")]})}),n.jsx(df,{visible:p,period:f,onClose:()=>m(!1),onSuccess:()=>{m(!1),v()}})]})}))),meta:{title:"pageTitle:payroll_periods",requiredPermissions:[dn]}},{path:"periods/:periodId",element:Ge.createElement((()=>{var e,t;const{t:o}=Cn(["payroll_periods","payroll_runs","payroll","common"]),{periodId:i}=Qe(),s=Je(),{message:l}=r.useApp(),{lookupMaps:c,loadingLookups:d,errorLookups:u}=wn(),[p,m]=He.useState([]),[f,h]=He.useState(!1),[_,y]=He.useState(0),[g,v]=He.useState([]),[x,b]=He.useState(!1),[w,j]=He.useState(null),[S,E]=He.useState([]),[T,I]=He.useState(!1),{data:P,isLoading:N,isError:A,error:O}=It({queryKey:["payrollPeriod",i],queryFn:async()=>{var e,t,n,r,a,o;if(!i||isNaN(Number(i)))throw new Error(`Invalid period ID: ${i}`);try{return await cn(Number(i))}catch(s){if(404===(null==(e=s.response)?void 0:e.status))throw new Error(`薪资周期 ID ${i} 不存在`);if(403===(null==(t=s.response)?void 0:t.status))throw new Error("没有权限查看该薪资周期详情");if(null==(o=null==(a=null==(r=null==(n=s.response)?void 0:n.data)?void 0:r.detail)?void 0:a.error)?void 0:o.details)throw new Error(s.response.data.detail.error.details);throw s}},enabled:!!i&&!isNaN(Number(i)),retry:(e,t)=>{var n,r;return 404!==(null==(n=null==t?void 0:t.response)?void 0:n.status)&&403!==(null==(r=null==t?void 0:t.response)?void 0:r.status)&&e<3}}),M=null==P?void 0:P.data,D=He.useMemo((()=>({canViewList:!0,canViewDetail:!0,canCreate:!0,canUpdate:!0,canDelete:!0,canExport:!0})),[]),R=He.useCallback((async()=>{I(!0);try{const e=await(async e=>(await bt.get(`/table-config/columns/${e}`)).data.data)("payroll_entries");E(e.columns)}catch(e){E([])}finally{I(!1)}}),[]),z=He.useCallback((async e=>{var t,n,r,a,o,s,c,d,u;if(i){h(!0);try{const s=await Gt({period_id:Number(i),page:(null==e?void 0:e.page)||1,size:(null==e?void 0:e.page_size)||50,sort_by:null==(n=null==(t=null==e?void 0:e.sorting)?void 0:t[0])?void 0:n.field,sort_order:null==(a=null==(r=null==e?void 0:e.sorting)?void 0:r[0])?void 0:a.direction,include_employee_details:!0});m(s.data||[]),y((null==(o=s.meta)?void 0:o.total)||0)}catch(p){(null==(u=null==(d=null==(c=null==(s=p.response)?void 0:s.data)?void 0:c.detail)?void 0:d.error)?void 0:u.details)?l.error(`获取薪资条目失败：${p.response.data.detail.error.details}`):l.error("获取薪资条目失败，请重试"),m([]),y(0)}finally{h(!1)}}}),[i,l]);He.useEffect((()=>{R()}),[R]);const $=He.useCallback((async e=>{var t,n,r,a,i,s,c,d,u,p;try{await Jt(Number(e)),l.success(o("payroll_entries:delete_success")),z()}catch(m){let e=o("payroll_entries:delete_failure");if(null==(a=null==(r=null==(n=null==(t=null==m?void 0:m.response)?void 0:t.data)?void 0:n.detail)?void 0:r.error)?void 0:a.details)e=m.response.data.detail.error.details;else if(409===(null==(i=null==m?void 0:m.response)?void 0:i.status))e="无法删除该薪资条目，因为它包含关联数据。";else if(500===(null==(s=null==m?void 0:m.response)?void 0:s.status)&&(null==(p=null==(u=null==(d=null==(c=null==m?void 0:m.response)?void 0:c.data)?void 0:d.detail)?void 0:u.error)?void 0:p.details)){const t=m.response.data.detail.error.details;e=t.includes("foreign key constraint")||t.includes("violates")?"无法删除该薪资条目，因为它包含关联的数据记录。请先删除相关记录。":t}throw l.error(e),m}}),[l,o,z]),q=He.useCallback((async e=>{var t,n,r,a;try{const t=e.map((e=>Jt(Number(e))));await Promise.all(t),l.success(o("payroll_entries:delete_success")),v([]),z()}catch(i){let e=o("payroll_entries:delete_failure");if(null==(a=null==(r=null==(n=null==(t=null==i?void 0:i.response)?void 0:t.data)?void 0:n.detail)?void 0:r.error)?void 0:a.details){const t=i.response.data.detail.error.details;e=t.includes("foreign key constraint")||t.includes("violates")?"批量删除失败，部分薪资条目包含关联的数据记录。请先删除相关记录。":`批量删除失败：${t}`}throw l.error(e),i}}),[l,o,z]),B=He.useCallback((()=>{j(null),b(!0)}),[]),U=He.useCallback((e=>{j(e),b(!0)}),[]),V=He.useCallback((e=>{s(`/finance/payroll/entries/${e}`)}),[s]),Y=He.useCallback((()=>{s("/finance/payroll/periods")}),[s]),H=He.useCallback(((e,t,r,a={},o,i,s)=>S.length>0?S.map((t=>{const r={title:e(t.title),dataIndex:t.dataIndex,key:t.key,width:t.width,sorter:t.sorter,search:t.search,fixed:t.fixed};return"money"===t.valueType?{...r,align:t.align||"right",render:(e,r,a)=>{const o=r[t.dataIndex],i=Number(o)||0;return"net_pay"===t.key?n.jsxs("span",{style:{fontWeight:"bold",color:"#52c41a"},children:["¥",i.toFixed(2)]}):`¥${i.toFixed(2)}`},search:!1}:"digit"===t.valueType?{...r,sorter:!!t.sorter&&((e,n)=>(Number(e[t.dataIndex])||0)-(Number(n[t.dataIndex])||0)),search:!1}:"select"===t.valueType&&"status"===t.key?{...r,render:(t,r,a)=>{const o=tn(r.status_lookup_value_id);return n.jsx(lf,{status:o.type,text:e(`payroll:${o.key}`)})}}:"option"===t.valueType&&"action"===t.key?{...r,render:(t,r,l)=>n.jsxs(k,{size:"small",children:[a.canViewDetail&&n.jsx(xn,{actionType:"view",onClick:()=>s(String(r.id)),tooltipTitle:e("common:action.view")}),a.canUpdate&&n.jsx(xn,{actionType:"edit",onClick:()=>o(r),tooltipTitle:e("common:action.edit")}),a.canDelete&&n.jsx(xn,{actionType:"delete",danger:!0,onClick:()=>i(String(r.id)),tooltipTitle:e("common:action.delete")})]})}:"text"===t.valueType?{...r,render:(e,n,r)=>{var a,o;const i=n[t.dataIndex];return"employee_name"===t.key?String(i||(null==(a=n.employee)?void 0:a.first_name)+" "+(null==(o=n.employee)?void 0:o.last_name)||"-"):String(i||"-")},search:t.search}:{...r,render:(e,n,r)=>{const a=n[t.dataIndex];return String(a||"-")}}})):[]),[o,S]),K=He.useMemo((()=>({titleKey:"payroll_entries:confirm_delete_title",contentKey:"payroll_entries:confirm_delete_content",okTextKey:"common:delete",cancelTextKey:"common:cancel",successMessageKey:"payroll_entries:delete_success",errorMessageKey:"payroll_entries:delete_failure"})),[]),Z=He.useMemo((()=>({filenamePrefix:o("payroll_entries:export_filename_prefix"),sheetName:o("payroll_entries:export_sheet_name"),buttonText:o("payroll_entries:export_button_text"),successMessage:o("payroll_entries:export_success_message")})),[o]),W=He.useMemo((()=>({enabled:!0,buttonText:o("common:batch_delete"),confirmTitle:o("payroll_entries:confirm_delete_title"),confirmContent:o("common:message.confirm_batch_delete"),confirmOkText:o("common:delete"),confirmCancelText:o("common:cancel"),successMessage:o("payroll_entries:delete_success"),errorMessage:o("payroll_entries:delete_failure"),noSelectionMessage:o("common:message.no_selection"),onBatchDelete:q})),[o,q]);return i?N?n.jsx(a,{size:"large",tip:o("common:loading.loading_details")}):A?n.jsx(F,{message:`${o("common:message.error_fetching_details")}: ${O.message}`,type:"error",showIcon:!0}):M?n.jsxs("div",{style:{padding:"20px"},children:[n.jsxs(k,{style:{marginBottom:16},children:[n.jsx(C,{icon:n.jsx(pe,{}),onClick:Y,children:o("common:button.back")}),n.jsx(sb,{level:2,style:{margin:0},children:o("payroll_periods:payroll_period_detail_page.title",{id:(null==M?void 0:M.id)||""})})]}),n.jsx(L,{variant:"outlined",style:{marginBottom:20},children:n.jsxs(ce,{title:o("payroll_periods:payroll_period_detail_page.basic_info"),bordered:!0,column:2,children:[n.jsx(ce.Item,{label:o("payroll_periods:payroll_period_detail_page.field_id"),children:(null==M?void 0:M.id)||"-"}),n.jsx(ce.Item,{label:o("payroll_periods:payroll_period_detail_page.field_name"),children:(null==M?void 0:M.name)||"-"}),n.jsx(ce.Item,{label:o("payroll_periods:payroll_period_detail_page.field_frequency"),children:(null==M?void 0:M.frequency_lookup_value_id)?(null==(e=null==c?void 0:c.payFrequencyMap)?void 0:e.get(M.frequency_lookup_value_id))||M.frequency_lookup_value_id:"-"}),n.jsx(ce.Item,{label:o("payroll_periods:payroll_period_detail_page.field_status"),children:(null==M?void 0:M.status_lookup_value_id)?(null==(t=null==c?void 0:c.statusMap)?void 0:t.get(M.status_lookup_value_id))||M.status_lookup_value_id:"-"}),n.jsx(ce.Item,{label:o("payroll_periods:payroll_period_detail_page.field_start_date"),children:(null==M?void 0:M.start_date)?xm(new Date(M.start_date),"yyyy-MM-dd"):"-"}),n.jsx(ce.Item,{label:o("payroll_periods:payroll_period_detail_page.field_end_date"),children:(null==M?void 0:M.end_date)?xm(new Date(M.end_date),"yyyy-MM-dd"):"-"}),n.jsx(ce.Item,{label:o("payroll_periods:payroll_period_detail_page.field_pay_date"),children:(null==M?void 0:M.pay_date)?xm(new Date(M.pay_date),"yyyy-MM-dd"):"-"}),n.jsxs(ce.Item,{label:o("payroll_periods:table.column_employee_count"),children:[(null==M?void 0:M.employee_count)||0,"人"]})]})}),n.jsx(ye,{}),n.jsx(sb,{level:4,style:{marginBottom:16},children:o("payroll_periods:payroll_period_detail_page.related_entries_title")}),n.jsx(wm,{translationNamespaces:["payroll_entries","payroll","common"],pageTitleKey:"",addButtonTextKey:"payroll_entries:create_entry",dataSource:p,loadingData:f,permissions:D,lookupMaps:c,loadingLookups:d,errorLookups:u,fetchData:z,deleteItem:$,onAddClick:B,onEditClick:U,onViewDetailsClick:V,generateTableColumns:H,deleteConfirmConfig:K,batchDeleteConfig:W,exportConfig:Z,lookupErrorMessageKey:"common:message.data_loading_error",lookupLoadingMessageKey:"common:loading.generic_loading_text",lookupDataErrorMessageKey:"common:message.data_loading_error",rowKey:"id",total:_,serverSidePagination:!0,serverSideSorting:!0,serverSideFiltering:!1,selectedRowKeys:g,setSelectedRowKeys:v})]}):n.jsx(F,{message:o("common:message.not_found"),type:"warning",showIcon:!0}):n.jsx(F,{message:o("common:message.invalid_id"),type:"error",showIcon:!0})})),meta:{title:"pageTitle:payroll_period_detail",requiredPermissions:[dn]}},{path:"runs",element:Ge.createElement(Ge.Suspense,{fallback:Ge.createElement("div",null,"Loading Payroll Runs...")},Ge.createElement((()=>{const{t:e}=Cn(["payroll","common"]),t=Je(),[a]=O.useForm(),{message:o,modal:i}=r.useApp(),[l,d]=He.useState([]),[u,p]=He.useState([]),[m,f]=He.useState(!1),[h,_]=He.useState(!1),[y,g]=He.useState(null),[v,x]=He.useState(null),b=He.useMemo((()=>[{title:e("payroll:id"),dataIndex:"id",key:"id",width:80,sorter:(e,t)=>e.id-t.id,render:(e,t)=>n.jsxs(bf,{strong:!0,className:"typography-caption",children:["#",t.id]})},{title:e("payroll:payroll_period"),dataIndex:["payroll_period","name"],key:"payroll_period_name",ellipsis:!0,render:(e,t)=>{var r,a,o;return n.jsxs("div",{children:[n.jsx(bf,{strong:!0,children:(null==(r=t.payroll_period)?void 0:r.name)||"-"}),n.jsx("br",{}),n.jsx(bf,{type:"secondary",className:"typography-caption",children:(null==(a=t.payroll_period)?void 0:a.start_date)&&(null==(o=t.payroll_period)?void 0:o.end_date)?`${A(t.payroll_period.start_date).format("MM/DD")} - ${A(t.payroll_period.end_date).format("MM/DD")}`:"-"})]})}},{title:e("payroll:run_date"),dataIndex:"run_date",key:"run_date",width:120,render:(e,t)=>n.jsx(bf,{className:"typography-body",children:A(t.run_date).format("YYYY-MM-DD")}),sorter:(e,t)=>A(e.run_date).unix()-A(t.run_date).unix()},{title:e("common:label.status"),dataIndex:"status_lookup_value_id",key:"status",width:140,render:(t,r)=>{const a=$t(r.status_lookup_value_id);return n.jsx(lf,{status:a.type,text:e(`payroll:${a.key}`)})}},{title:e("payroll:employee_count"),dataIndex:"total_employees",key:"total_employees",width:120,align:"center",render:(t,r)=>n.jsx(ne,{title:e("payroll:total_employees_tooltip"),children:n.jsxs(k,{children:[n.jsx(re,{style:{color:"var(--color-success)"}}),n.jsxs(bf,{strong:!0,style:{color:"var(--color-success)"},children:[r.total_employees,"人"]})]})})},{title:e("common:action.title"),key:"actions",width:300,fixed:"right",render:(t,r)=>n.jsxs(k,{size:"small",wrap:!0,children:[n.jsx(xn,{actionType:"view",onClick:()=>S(r.id),tooltipTitle:e("common:view")}),n.jsx(xn,{actionType:"edit",onClick:()=>j(r),tooltipTitle:e("common:edit")}),n.jsx(xn,{actionType:"delete",onClick:()=>E(r.id),tooltipTitle:e("common:delete"),danger:!0}),n.jsx(ne,{title:e("payroll:auto_calculate"),children:n.jsx(C,{type:"text",size:"small",icon:n.jsx(s,{}),onClick:()=>T(r),className:"action-button"})}),n.jsx(ne,{title:e("payroll:export_bank_file"),children:n.jsx(C,{type:"text",size:"small",icon:n.jsx(le,{}),onClick:()=>I(r.id),className:"action-button"})})]})}]),[e]),w=He.useCallback((async()=>{f(!0);try{const[e,t]=await Promise.all([Rt(),Lt()]),n=Array.isArray(e)?e:e.data||[],r=Array.isArray(t)?t:t.data||[];d(n),p(r)}catch(t){o.error(e("common:errors.fetch_failed"))}finally{f(!1)}}),[o,e]);He.useEffect((()=>{w()}),[w]);const j=e=>{g(e),a.setFieldsValue({payroll_period_id:e.payroll_period_id,run_date:A(e.run_date),description:e.description}),_(!0)},S=e=>{t(`/payroll/runs/${e}`)},E=t=>{i.confirm({title:e("common:confirm_delete"),content:e("payroll:confirm_delete_run"),onOk:async()=>{try{await Ft(t),o.success(e("common:delete_success")),w()}catch(n){o.error(e("common:delete_failed"))}}})},T=async t=>{try{f(!0);const n={run_id:t.id,period_id:t.payroll_period_id};await gf(n),o.success(e("payroll:calculation_started")),w()}catch(n){o.error(e("payroll:calculation_failed"))}finally{f(!1)}},I=async t=>{try{const n=await qt(t),r=URL.createObjectURL(n),a=document.createElement("a");a.href=r,a.download=`payroll_run_${t}_bank_file.txt`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r),o.success(e("payroll:export_success"))}catch(n){o.error(e("payroll:export_failed"))}},P=He.useMemo((()=>{const t=l.length,r=l.filter((e=>"processing"===$t(e.status_lookup_value_id).type)).length,a=l.filter((e=>"success"===$t(e.status_lookup_value_id).type)).length,o=l.reduce(((e,t)=>e+(t.total_employees||0)),0);return[{title:e("payroll:total_runs"),value:t,icon:n.jsx(c,{}),color:"var(--color-primary)"},{title:e("payroll:pending_runs"),value:r,icon:n.jsx(oe,{}),color:"var(--color-warning)"},{title:e("payroll:completed_runs"),value:a,icon:n.jsx(Q,{}),color:"var(--color-success)"},{title:e("payroll:total_employees_processed"),value:o,icon:n.jsx(re,{}),color:"var(--color-info)"}]}),[l,e]);return n.jsxs(mf,{title:e("payroll:payroll_runs"),headerExtra:n.jsx(C,{type:"primary",icon:n.jsx(se,{}),onClick:()=>{g(null),a.resetFields(),_(!0)},className:"modern-button",children:e("payroll:create_run")}),children:[n.jsx(M,{gutter:[16,16],style:{marginBottom:24},children:P.map(((e,t)=>n.jsx(D,{xs:24,sm:12,lg:6,children:n.jsx(ff,{title:e.title,icon:e.icon,children:n.jsx("div",{className:"statistic-content",children:n.jsx("div",{className:"statistic-value",style:{color:e.color},children:e.value})})})},t)))}),n.jsx(ff,{children:n.jsx(ie,{columns:b,dataSource:l,loading:m,rowKey:"id",pagination:{pageSize:20,showSizeChanger:!0,showQuickJumper:!0,showTotal:(t,n)=>`${n[0]}-${n[1]} / ${t} ${e("common:items")}`},scroll:{x:1200},search:!1,options:{reload:w,density:!0,fullScreen:!0,setting:!0},toolBarRender:()=>[n.jsx(C,{onClick:w,icon:n.jsx(re,{}),children:e("common:refresh")},"refresh")]})}),n.jsx(B,{title:e(y?"payroll:edit_run":"payroll:create_run"),open:h,onCancel:()=>_(!1),footer:null,width:600,destroyOnClose:!0,children:n.jsxs(O,{form:a,layout:"vertical",onFinish:async t=>{try{const n={...t,run_date:t.run_date.format("YYYY-MM-DD")};y?(await Bt(y.id,n),o.success(e("common:update_success"))):(await Ut(n),o.success(e("common:create_success"))),_(!1),w()}catch(n){o.error(e(y?"common:update_failed":"common:create_failed"))}},preserve:!1,children:[n.jsx(O.Item,{label:e("payroll:payroll_period"),name:"payroll_period_id",rules:[{required:!0,message:e("common:validation.required")}],children:n.jsx(q,{placeholder:e("payroll:select_period"),showSearch:!0,optionFilterProp:"children",children:u.map((e=>n.jsxs(wf,{value:e.id,children:[e.name," (",A(e.start_date).format("YYYY-MM-DD")," - ",A(e.end_date).format("YYYY-MM-DD"),")"]},e.id)))})}),n.jsx(O.Item,{label:e("payroll:run_date"),name:"run_date",rules:[{required:!0,message:e("common:validation.required")}],children:n.jsx(te,{style:{width:"100%"}})}),n.jsx(O.Item,{label:e("common:description"),name:"description",children:n.jsx(R.TextArea,{rows:3,placeholder:e("payroll:run_description_placeholder")})}),n.jsx(O.Item,{children:n.jsxs(k,{children:[n.jsx(C,{type:"primary",htmlType:"submit",children:e(y?"common:update":"common:create")}),n.jsx(C,{onClick:()=>_(!1),children:e("common:cancel")})]})})]})})]})}))),meta:{title:"payroll:page_title.payroll_runs",requiredPermissions:[un]}},{path:"runs/:runId",element:Ge.createElement((()=>{var e;const{t:t}=Cn(["payroll","common"]),{runId:r}=Qe(),o=Je(),[i,s]=He.useState(null),[l,d]=He.useState(!0),[u,p]=He.useState(null),[m,f]=He.useState("overview"),h=He.useCallback((async e=>{d(!0),p(null);try{const t=await Vt(e,{include_employee_details:!0}),n=t.data||t;s(n)}catch(n){p(n.message||t("payroll:error_fetch_details")),s(null)}d(!1)}),[t]);He.useEffect((()=>{if(r){const e=parseInt(r,10);isNaN(e)?(p(t("payroll:error_invalid_run_id")),d(!1)):h(e)}else p(t("payroll:error_no_run_id_provided")),d(!1)}),[r,h,t]);const y=He.useMemo((()=>{if(!i)return[];const e=$t(i.status_lookup_value_id),r=i.total_employees||0,a=i.processed_employees||0,o=r>0?a/r*100:0;return[{title:t("payroll:total_employees"),value:r,icon:n.jsx(_,{}),color:"var(--color-primary)"},{title:t("payroll:processed_employees"),value:a,icon:n.jsx(Q,{}),color:"var(--color-success)"},{title:t("payroll:processing_progress"),value:`${o.toFixed(1)}%`,icon:n.jsx(W,{}),color:"var(--color-info)"},{title:t("payroll:run_status"),value:t(`payroll:${e.key}`),icon:"success"===e.type?n.jsx(Q,{}):n.jsx(J,{}),color:"success"===e.type?"var(--color-success)":"var(--color-warning)"}]}),[i,t]);if(l)return n.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:n.jsx(a,{size:"large",tip:t("common:loading")})});if(u)return n.jsx(F,{message:t("common:error"),description:u,type:"error",showIcon:!0,style:{margin:"20px"}});if(!i)return n.jsx(F,{message:t("payroll:run_not_found"),type:"warning",showIcon:!0,style:{margin:"20px"}});const g=$t(i.status_lookup_value_id),v=`${(null==(b=(x=i).payroll_period)?void 0:b.name)||t("payroll:period_id_prefix")} - ${A(x.run_date).format("YYYY-MM-DD")}`;var x,b;const w=[{key:"overview",label:n.jsxs(k,{children:[n.jsx(c,{}),t("payroll:overview")]}),children:n.jsx(M,{gutter:[16,16],children:n.jsx(D,{span:24,children:n.jsx(ff,{title:t("payroll:run_information"),children:n.jsxs(ce,{column:2,bordered:!0,children:[n.jsx(ce.Item,{label:t("payroll:run_id"),children:n.jsxs(Sf,{strong:!0,children:["#",i.id]})}),n.jsx(ce.Item,{label:t("payroll:run_name"),children:n.jsx(Sf,{strong:!0,children:v})}),n.jsx(ce.Item,{label:t("payroll:payroll_period"),children:(null==(e=i.payroll_period)?void 0:e.name)||"-"}),n.jsx(ce.Item,{label:t("payroll:run_date"),children:A(i.run_date).format("YYYY-MM-DD")}),n.jsx(ce.Item,{label:t("payroll:status"),children:n.jsx(lf,{status:g.type,text:t(`payroll:${g.key}`)})}),n.jsx(ce.Item,{label:t("payroll:total_employees"),children:n.jsxs(k,{children:[n.jsx(_,{style:{color:"var(--color-primary)"}}),n.jsx(Sf,{strong:!0,children:i.total_employees||0})]})}),n.jsx(ce.Item,{label:t("payroll:period_range"),span:2,children:i.payroll_period?n.jsxs(Sf,{children:[A(i.payroll_period.start_date).format("YYYY-MM-DD")," 至 ",A(i.payroll_period.end_date).format("YYYY-MM-DD")]}):"-"}),n.jsx(ce.Item,{label:t("payroll:description"),span:2,children:i.description||t("common:no_description")})]})})})})},{key:"entries",label:n.jsxs(k,{children:[n.jsx(de,{}),t("payroll:payroll_entries"),n.jsx(Y,{color:"blue",children:i.total_employees||0})]}),children:n.jsx(ff,{children:n.jsx(Yt,{payrollRunId:i.id})})}];return n.jsxs(mf,{title:v,subtitle:`ID: ${i.id}`,headerExtra:n.jsxs(k,{children:[n.jsx(C,{icon:n.jsx(pe,{}),onClick:()=>o("/payroll/runs"),children:t("common:back")}),n.jsx(C,{icon:n.jsx(me,{}),onClick:()=>o(`/payroll/runs/${i.id}/edit`),children:t("common:edit")}),n.jsx(C,{type:"primary",icon:n.jsx(le,{}),onClick:async()=>{if(i)try{const e=await qt(i.id),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=`payroll_run_${i.id}_bank_file.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t)}catch(e){}},children:t("payroll:export_bank_file")})]}),children:[n.jsx(M,{gutter:[16,16],style:{marginBottom:24},children:y.map(((e,t)=>n.jsx(D,{xs:24,sm:12,lg:6,children:n.jsx(ff,{title:e.title,icon:e.icon,children:n.jsx("div",{className:"statistic-content",children:n.jsx("div",{className:"statistic-value",style:{color:e.color},children:e.value})})})},t)))}),(i.total_employees||0)>0&&n.jsx(ff,{title:t("payroll:processing_progress"),style:{marginBottom:24},children:n.jsx(ue,{percent:(i.processed_employees||0)/(i.total_employees||1)*100,status:"success"===g.type?"success":"active",showInfo:!0,format:e=>`${i.processed_employees||0} / ${i.total_employees||0}`})}),n.jsx(ff,{children:n.jsx(Rm,{items:w,activeKey:m,onChange:f,size:"large"})})]})})),meta:{title:"payroll:page_title.payroll_run_detail",requiredPermissions:[un]}},{path:"entry",element:Ge.createElement(Ge.Suspense,{fallback:Ge.createElement("div",null,"Loading Payroll Entry...")},Ge.createElement((()=>{const{t:e}=Cn(["payroll","common","employee"]);Je();const{message:t}=r.useApp(),[a,o]=He.useState(null),[i,s]=He.useState(!1),[l,c]=He.useState(!1),[d,u]=He.useState(null),[p,m]=He.useState(null),[f,h]=He.useState([]),[_,y]=He.useState(!1),[g,v]=He.useState([]),[x,b]=He.useState([]),w=He.useMemo((()=>{const t=new Set,n=new Set;return f.forEach((e=>{e.department_name&&t.add(e.department_name),e.personnel_category_name&&n.add(e.personnel_category_name)})),{departmentMap:new Map(Array.from(t).map((e=>[e,e]))),statusMap:new Map([["active",e("payroll:entries_table.status.active")]]),personnelCategoryMap:new Map(Array.from(n).map((e=>[e,e])))}}),[f,e]);yn();const j=He.useCallback((async()=>{try{const e=await St(!0);v(e.data)}catch(e){}}),[]),k=He.useCallback((async e=>{if(e){y(!0);try{const t={page:1,size:100,include_employee_details:!0,period_id:e},n=await Gt(t);n&&n.data?(n.data.slice(0,3).forEach(((e,t)=>{})),h(n.data)):h([])}catch(t){h([])}finally{y(!1)}}}),[]),S=He.useCallback((async()=>{a&&await k(a)}),[a,k]),C=He.useCallback((async e=>{await Jt(Number(e)),a&&k(a)}),[a,k]),E=He.useCallback((async e=>{try{const t=e.map((e=>Jt(Number(e))));await Promise.all(t),a&&k(a)}catch(t){throw t}}),[a,k]),T=He.useCallback((e=>{m(e),c(!0)}),[]),I=He.useCallback((e=>{}),[]);return He.useEffect((()=>{a?k(a):h([])}),[a,k]),He.useEffect((()=>{j()}),[j]),He.useEffect((()=>{f.length}),[f,_,a]),n.jsxs(n.Fragment,{children:[n.jsxs(At,{requiredPermissions:[Xt],children:[n.jsx(Hf,{value:a,onChange:e=>{o(e)},onPeriodsLoaded:I,mode:"card",showSelectedStatus:!0,showDataStats:!0,autoSelectLatestWithData:!0,style:{maxWidth:400,marginBottom:16}}),n.jsx(wm,{translationNamespaces:["payroll","common","employee"],pageTitleKey:"payroll:entry_page.title",addButtonTextKey:"payroll:entry_page.button.add_entry",dataSource:f,loadingData:_,permissions:{canViewList:!0,canViewDetail:!0,canCreate:!0,canUpdate:!0,canDelete:!0,canExport:!0},lookupMaps:w,loadingLookups:!1,errorLookups:null,fetchData:S,deleteItem:C,onAddClick:()=>{u(null),s(!0)},onEditClick:e=>{u(e),s(!0)},onViewDetailsClick:T,generateTableColumns:rh,deleteConfirmConfig:{titleKey:"payroll:entry_page.delete_confirm.title",contentKey:"payroll:entry_page.delete_confirm.content",okTextKey:"payroll:entry_page.delete_confirm.ok_text",cancelTextKey:"payroll:entry_page.delete_confirm.cancel_text",successMessageKey:"payroll:entry_page.message.delete_success",errorMessageKey:"payroll:entry_page.message.delete_failed"},batchDeleteConfig:{enabled:!0,buttonText:"批量删除",confirmTitle:"确认批量删除",confirmContent:"确定要删除选中的 {count} 个工资条目吗？此操作不可撤销。",confirmOkText:"确定删除",confirmCancelText:"取消",successMessage:"成功删除 {count} 个工资条目",errorMessage:"批量删除失败",noSelectionMessage:"请选择要删除的工资条目",onBatchDelete:E},exportConfig:{filenamePrefix:e("payroll:entry_page.title"),sheetName:e("payroll:entry_page.title"),buttonText:e("payroll:auto_excel_e5afbc"),successMessage:e("payroll:auto_text_e896aa")},lookupErrorMessageKey:"payroll:entry_page.message.load_aux_data_failed",lookupLoadingMessageKey:"payroll:entry_page.loading_lookups",lookupDataErrorMessageKey:"payroll:entry_page.lookup_data_error",rowKey:"id",selectedRowKeys:x,setSelectedRowKeys:b})]}),i&&n.jsx(nh,{visible:i,payrollPeriodId:a,entry:d,onClose:()=>s(!1),onSuccess:()=>{s(!1),a&&k(a),t.success(e("payroll:entry_page.message.operation_success"))}}),l&&n.jsx(Qt,{visible:l,entryId:p,onClose:()=>{c(!1),m(null)}})]})}))),meta:{title:"payroll:page_title.payroll_entry",requiredPermissions:[Xt]}},{path:"universal-import",element:Ge.createElement(Ge.Suspense,{fallback:Ge.createElement("div",null,"Loading Universal Import...")},Ge.createElement((()=>{const{t:e}=Cn("bulkImport"),{message:t}=r.useApp(),{payrollPeriods:a,selectedPeriodId:o,setSelectedPeriodId:i,loadingPeriods:s}=xx(e,t),[l,c]=He.useState(0),[d,u]=He.useState(null),[p,m]=He.useState(!0),[f,h]=He.useState([]),[_,y]=He.useState(null),[g,v]=He.useState({}),[x,b]=He.useState(null),[w,j]=He.useState(null),[k,S]=He.useState(null),[E,T]=He.useState(ux),I=He.useMemo((()=>f.find((e=>e.id===d))||null),[d,f]),P=He.useMemo((()=>{if(!I)return!1;const e=I.requiredFields.map((e=>e.key)),t=Object.values(g);return e.every((e=>t.includes(e)))}),[g,I]),N=[{title:e("steps.select_period")},{title:e("steps.select_mode")},{title:e("steps.upload_data")},{title:e("steps.map_fields")},{title:e("steps.preview_confirm")},{title:e("steps.import_result")}];He.useEffect((()=>{(async()=>{try{m(!0);const e=(await jx.getAllModeConfigs()).map((e=>({...e,clientId:ah()})));h(e)}catch(e){t.error("获取导入模式失败")}finally{m(!1)}})()}),[]);const A=e=>{u(e)},O=He.useCallback(((n,r)=>{n.length>0&&d?(y({mode:d,headers:n,rows:r,totalRecords:r.length}),t.success(e("upload.parse_success",{count:r.length}))):y(null)}),[d,e,t]),M=e=>{m(e)},D=e=>{v(e)},R=()=>{c(l-1)};return n.jsx(Le,{title:e("title"),children:n.jsxs(L,{children:[n.jsx(De,{current:l,style:{marginBottom:40},children:N.map((e=>n.jsx(kx,{title:e.title},e.title)))}),n.jsx("div",{className:"steps-content",style:{minHeight:"300px"},children:(()=>{switch(l){case 0:return n.jsx(rn,{periods:a,selectedPeriodId:o,onChange:i,loading:s});case 1:return n.jsx(lh,{selectedMode:d,onModeChange:A,availableModes:f,loading:p});case 2:return n.jsx(dh,{onDataParsed:O,onLoadingChange:M});case 3:return _&&I?n.jsx(lx,{rawImportData:_,modeConfig:I,onMappingComplete:D}):n.jsxs("div",{style:{textAlign:"center",padding:"60px 0"},children:[n.jsx("p",{children:e("common:errors.data_or_config_missing")}),n.jsx(C,{onClick:R,children:e("common:actions.previous_step")})]});case 4:return w&&k&&I?n.jsx(Ex,{processedData:w,validationResults:k,modeConfig:I,importSettings:E,onSettingsChange:T}):n.jsx("p",{children:e("common:errors.data_missing_or_not_validated")});case 5:return n.jsx(gx,{uploadResult:x,onStartAgain:()=>{c(0),b(null),y(null),v({}),j(null),S(null)},onNavigateToEntries:()=>{window.location.href="/payroll/runs"}});default:return n.jsx("p",{children:e("common:errors.unknown_step")})}})()}),n.jsxs("div",{className:"steps-action",style:{marginTop:24,textAlign:"center"},children:[l>0&&n.jsx(C,{style:{marginRight:16},onClick:R,children:e("common:actions.previous_step")}),l===N.length-2&&n.jsx(C,{type:"primary",onClick:async()=>{if(d&&_&&k&&w&&o&&jx.hasMode(d)){m(!0);try{const e=await jx.getStrategy(d),n=w.filter((e=>{var t;return null==(t=k.find((t=>t.clientId===e._meta.clientId)))?void 0:t.isValid}));if(0===n.length)return t.error("没有可供导入的有效数据。"),void m(!1);const r=await e.importData(n,o,E.overwriteMode);b(r),c(N.length-1)}catch(e){const n=e instanceof Error?e.message:"导入过程中发生未知错误。";t.error(n);const r=(null==_?void 0:_.rows.length)||0;b({success_count:0,error_count:r,errors:[{index:0,error:n}],successCount:0,errorCount:r,createdEntries:[]}),c(N.length-1)}finally{m(!1)}}else t.error("无法执行导入：数据未验证、缺少薪资周期或导入模式无效。")},loading:p,disabled:!k||k.every((e=>!e.isValid)),children:e("common:actions.execute_import")}),l<N.length-2&&n.jsx(C,{type:"primary",onClick:async()=>{if(0!==l||o)if(1!==l||d)if(2!==l||_)if(3!==l||P){if(3===l){if(!(d&&_&&g&&o&&jx.hasMode(d)))return void t.error("无法预览：缺少周期、模式、数据、字段映射或导入模式无效。");m(!0);try{const e=await jx.getStrategy(d),t=e.processData(_,g),n=await e.validateData(t,o,nn.NONE);j(t),S(n)}catch(n){const e=n instanceof Error?n.message:"数据处理或验证时发生未知错误。";return void t.error(e)}finally{m(!1)}}c(l+1)}else t.warning(e("map.please_map_required_fields"));else t.warning(e("upload.please_upload_file"));else t.warning(e("steps.please_select_mode"));else t.warning(e("steps.please_select_period"))},loading:p,disabled:0===l&&!o||1===l&&!d||2===l&&!_||3===l&&!P,children:e("common:actions.next_step")}),l===N.length-1&&n.jsx(C,{type:"primary",onClick:()=>c(0),children:e("common:actions.start_new_import")})]})]})})}))),meta:{title:"通用批量导入",requiredPermissions:[pn]}},{path:"components",element:Ge.createElement(Ge.Suspense,{fallback:Ge.createElement("div",null,"Loading Payroll Components...")},Ge.createElement((()=>{const{t:e}=Cn(["payroll_components","common"]),{message:t}=r.useApp();Je();const a={canViewList:!0,canViewDetail:!0,canCreate:!0,canUpdate:!0,canDelete:!0,canExport:!0},{lookupMaps:o,loadingLookups:i,errorLookups:s}=(()=>{const[e,t]=He.useState({typeMap:new Map,typeInfo:{}}),[n,r]=He.useState(!0),[a,o]=He.useState(null),i=He.useCallback((async()=>{var e;r(!0),o(null);try{const n=await bt.get("/config/lookup-values-public",{params:{lookup_type_code:"PAYROLL_COMPONENT_TYPE"}}),r=new Map,a={},o=null==(e=null==n?void 0:n.data)?void 0:e.data;o&&Array.isArray(o)&&o.length>0&&o.forEach((e=>{if(e.code&&e.name){let t="default";switch(e.code.toUpperCase()){case"EARNING":t="green";break;case"DEDUCTION":t="red";break;case"PERSONAL_DEDUCTION":t="purple";break;case"EMPLOYER_DEDUCTION":t="orange";break;case"STATUTORY":case"STAT":t="blue";break;case"BENEFIT":t="cyan";break;case"OTHER":t="gray";break;case"CALCULATION_BASE":case"CALCULATION_RATE":case"CALCULATION_RESULT":t="geekblue";break;case"TAX":t="magenta";break;case"REFUND_DEDUCTION_ADJUSTMENT":t="volcano"}r.set(e.code,e.name),a[e.code]={text:e.name,color:t}}})),t({typeMap:r,typeInfo:a})}catch(n){o(n),t({typeMap:new Map,typeInfo:{}})}finally{r(!1)}}),[]);return Ge.useEffect((()=>{i()}),[i]),{lookupMaps:e,loadingLookups:n,errorLookups:a}})(),[l,c]=He.useState([]),[d,u]=He.useState(!1),[p,m]=He.useState(!1),[f,h]=He.useState(!1),[_,y]=He.useState(null),[g,v]=He.useState(null),[x]=O.useForm(),b=He.useCallback((async()=>{u(!0);try{const e=await an({page:1,size:100});e&&e.data?c(e.data):c([])}catch(n){c([]),t.error(e("common.error.fetch"))}finally{u(!1)}}),[t,e]),w=He.useCallback((async e=>{await on(Number(e))}),[]),j=async()=>{var n,r,a,o,i,s;u(!0);try{const n=await x.validateFields().catch((n=>{if(n&&n.errorFields&&n.errorFields.length>0){const e=n.errorFields[0];t.error(`${e.name[0]} ${e.errors[0]}`)}else t.error(e("common.validation.form_has_errors"));throw n})),r={...n,display_order:parseInt(n.sort_order)||0,calculation_method:n.calculation_method||"FIXED_AMOUNT"};delete r.sort_order,_?(await sn(_.id,r),m(!1),y(null),b(),t.success(e("payroll_components.update_success"))):(await ln(r),m(!1),b(),t.success(e("payroll_components.create_success")))}catch(l){let c=e(_?"payroll_components.update_failed":"payroll_components.create_failed");if(422===(null==(n=l.response)?void 0:n.status)){const t=null==(a=null==(r=l.response)?void 0:r.data)?void 0:a.detail;if("string"==typeof t)c=t;else if(null==(o=null==t?void 0:t.error)?void 0:o.details)c=t.error.details;else if(null==t?void 0:t.details)c=t.details;else{const t=JSON.stringify(l.response.data).toLowerCase();if(t.includes(e("payroll:auto_text_e5b7b2"))||t.includes("duplicate")||t.includes("unique")){const t=x.getFieldsValue();c=(null==t?void 0:t.code)?`编码 "${t.code}" 已存在，请使用不同的编码`:e("payroll:auto___e7bc96")}}}else 400===(null==(i=l.response)?void 0:i.status)?c=e("payroll:auto___e8afb7"):500===(null==(s=l.response)?void 0:s.status)?c=e("payroll:auto___e69c8d"):l.message&&(c=l.message);t.error(c)}finally{u(!1)}},k={translationNamespaces:["payroll_components","common"],pageTitleKey:"payroll_components.title",addButtonTextKey:"payroll_components.add",dataSource:l,loadingData:d,permissions:a,lookupMaps:o,loadingLookups:i,errorLookups:s,fetchData:b,deleteItem:w,onAddClick:()=>{y(null),x.resetFields();const e=(null==o?void 0:o.typeInfo)?Object.keys(o.typeInfo)[0]:"EARNING",t=(new Date).toISOString().split("T")[0];x.setFieldsValue({type:e,is_active:!0,is_taxable:!0,is_social_security_base:!1,is_housing_fund_base:!1,sort_order:0,effective_date:t}),m(!0)},onEditClick:e=>{y(e),x.setFieldsValue({...e,type:e.type,is_active:e.is_active,is_taxable:e.is_taxable,is_social_security_base:e.is_social_security_base,is_housing_fund_base:e.is_housing_fund_base,sort_order:e.sort_order||0}),m(!0)},onViewDetailsClick:n=>{const r=l.find((e=>String(e.id)===n));r?(v(r),h(!0)):t.error(e("payroll:auto_text_e69caa"))},generateTableColumns:Ix,deleteConfirmConfig:{titleKey:"common.confirmDelete",contentKey:"common.confirmDeleteContent",okTextKey:"common.yes",cancelTextKey:"common.no",successMessageKey:"payroll_components.delete_success",errorMessageKey:"common.error.delete"},batchDeleteConfig:{enabled:!0,buttonText:e("payroll:auto_text_e689b9"),confirmTitle:e("payroll:auto_text_e7a1ae"),confirmContent:e("payroll:auto____e7a1ae"),confirmOkText:e("payroll:auto_text_e7a1ae"),confirmCancelText:e("payroll:auto_text_e58f96"),successMessage:e("payroll:auto_text_e689b9"),errorMessage:e("payroll:auto_text_e689b9"),noSelectionMessage:e("payroll:auto_text_e8afb7"),onBatchDelete:async e=>{await Promise.all(e.map((e=>on(Number(e))))),b()}},exportConfig:{filenamePrefix:e("payroll:auto_text_e896aa"),sheetName:e("payroll:auto_text_e896aa"),buttonText:e("payroll:auto_excel_e5afbc"),successMessage:e("payroll:auto_text_e896aa")},lookupErrorMessageKey:"common.error.fetch",lookupLoadingMessageKey:"common.loading",lookupDataErrorMessageKey:"common.error.loadData",rowKey:"id"};return n.jsxs(n.Fragment,{children:[n.jsx(wm,{...k}),n.jsx(B,{title:e(_?"payroll_components.edit":"payroll_components.add"),open:p,onOk:j,onCancel:()=>m(!1),width:700,children:n.jsxs(O,{form:x,layout:"vertical",children:[n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"code",label:e("payroll_components.code"),rules:[{required:!0,message:e("common.validation.required")}],children:n.jsx(R,{disabled:!!_})})}),n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"name",label:e("payroll_components.name"),rules:[{required:!0,message:e("common.validation.required")}],children:n.jsx(R,{})})})]}),n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"type",label:e("payroll_components.type"),rules:[{required:!0,message:e("common.validation.required")}],children:n.jsx(q,{placeholder:e("payroll_components.placeholders.type"),loading:i,disabled:i,options:o&&o.typeMap&&o.typeMap.size>0?Array.from(o.typeMap.entries()).map((([e,t])=>({value:e,label:t}))):[],showSearch:!0,optionFilterProp:"label"})})}),n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"sort_order",label:e("payroll_components.sort_order"),rules:[{required:!0,message:e("common.validation.required")}],children:n.jsx(R,{type:"number",min:0})})})]}),n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"effective_date",label:e("payroll:auto_text_e7949f"),rules:[{required:!0,message:e("common.validation.required")}],children:n.jsx(R,{type:"date"})})}),n.jsx(D,{span:12,children:n.jsx(O.Item,{name:"end_date",label:e("payroll:auto_text_e7bb93"),children:n.jsx(R,{type:"date"})})})]}),n.jsx(ye,{children:e("payroll_components.options")}),n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:8,children:n.jsx(O.Item,{name:"is_active",label:e("common.status"),valuePropName:"checked",children:n.jsx(U,{checkedChildren:e("common.active"),unCheckedChildren:e("common.inactive")})})}),n.jsx(D,{span:8,children:n.jsx(O.Item,{name:"is_taxable",label:e("payroll_components.is_taxable"),valuePropName:"checked",children:n.jsx(U,{})})}),n.jsx(D,{span:8,children:n.jsx(O.Item,{name:"is_social_security_base",label:e("payroll_components.is_social_security_base"),valuePropName:"checked",children:n.jsx(U,{})})})]}),n.jsxs(M,{gutter:16,children:[n.jsx(D,{span:8,children:n.jsx(O.Item,{name:"is_housing_fund_base",label:e("payroll_components.is_housing_fund_base"),valuePropName:"checked",children:n.jsx(U,{})})}),n.jsx(D,{span:16,children:n.jsx(O.Item,{name:"description",label:e("common.description"),children:n.jsx(R.TextArea,{rows:2})})})]})]})}),n.jsx(B,{title:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[n.jsx("div",{style:{width:40,height:40,borderRadius:"50%",backgroundColor:"green"===(null==(E=null==(S=null==o?void 0:o.typeInfo)?void 0:S[(null==g?void 0:g.type)||""])?void 0:E.color)?"#f6ffed":"blue"===(null==(I=null==(T=null==o?void 0:o.typeInfo)?void 0:T[(null==g?void 0:g.type)||""])?void 0:I.color)?"#f0f5ff":"red"===(null==(N=null==(P=null==o?void 0:o.typeInfo)?void 0:P[(null==g?void 0:g.type)||""])?void 0:N.color)?"#fff2f0":"#fafafa",border:"2px solid "+("green"===(null==(L=null==(A=null==o?void 0:o.typeInfo)?void 0:A[(null==g?void 0:g.type)||""])?void 0:L.color)?"#52c41a":"blue"===(null==($=null==(z=null==o?void 0:o.typeInfo)?void 0:z[(null==g?void 0:g.type)||""])?void 0:$.color)?"#1890ff":"red"===(null==(V=null==(F=null==o?void 0:o.typeInfo)?void 0:F[(null==g?void 0:g.type)||""])?void 0:V.color)?"#ff4d4f":"#d9d9d9"),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px"},children:"EARNING"===(null==g?void 0:g.type)||"Earning"===(null==g?void 0:g.type)?"💰":"DEDUCTION"===(null==g?void 0:g.type)||"Deduction"===(null==g?void 0:g.type)?"📉":"PERSONAL_DEDUCTION"===(null==g?void 0:g.type)?"👤":"EMPLOYER_DEDUCTION"===(null==g?void 0:g.type)?"🏢":"⚙️"}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"16px",fontWeight:600,color:"#262626"},children:(null==g?void 0:g.name)||""}),n.jsxs("div",{style:{fontSize:"12px",color:"#8c8c8c",marginTop:2},children:["t('common.view_details') • ",null==g?void 0:g.code]})]})]}),open:f,onCancel:()=>{h(!1),v(null)},footer:[n.jsx(C,{type:"primary",onClick:()=>{h(!1),v(null)},children:"t('common.button.close')"},"close")],width:800,styles:{body:{padding:"24px 0"}},children:g&&n.jsxs("div",{style:{padding:"0 24px"},children:[n.jsxs("div",{style:{backgroundColor:"#fafafa",borderRadius:8,padding:20,marginBottom:20,border:"1px solid #f0f0f0"},children:[n.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#262626",marginBottom:16,display:"flex",alignItems:"center",gap:8},children:"📋 基本信息"}),n.jsxs(M,{gutter:[24,16],children:[n.jsxs(D,{span:8,children:[n.jsx("div",{style:{marginBottom:4},children:n.jsx("span",{style:{fontSize:"12px",color:"#8c8c8c"},children:"组件代码"})}),n.jsx("div",{style:{fontSize:"14px",fontWeight:500,color:"#262626",fontFamily:"Monaco, Consolas, monospace",backgroundColor:"#f5f5f5",padding:"4px 8px",borderRadius:4,border:"1px solid #e8e8e8"},children:g.code})]}),n.jsxs(D,{span:8,children:[n.jsx("div",{style:{marginBottom:4},children:n.jsx("span",{style:{fontSize:"12px",color:"#8c8c8c"},children:"组件名称"})}),n.jsx("div",{style:{fontSize:"14px",fontWeight:500,color:"#262626"},children:g.name})]}),n.jsxs(D,{span:8,children:[n.jsx("div",{style:{marginBottom:4},children:n.jsx("span",{style:{fontSize:"12px",color:"#8c8c8c"},children:"组件类型"})}),n.jsx(Y,{color:(null==(K=null==(H=null==o?void 0:o.typeInfo)?void 0:H[g.type])?void 0:K.color)||"default",style:{fontSize:"12px",fontWeight:500},children:(null==(W=null==(Z=null==o?void 0:o.typeInfo)?void 0:Z[g.type])?void 0:W.text)||g.type})]}),n.jsxs(D,{span:8,children:[n.jsx("div",{style:{marginBottom:4},children:n.jsx("span",{style:{fontSize:"12px",color:"#8c8c8c"},children:"排序顺序"})}),n.jsx("div",{style:{fontSize:"14px",fontWeight:500,color:"#262626",backgroundColor:"#e6f7ff",padding:"4px 8px",borderRadius:4,display:"inline-block",border:"1px solid #91d5ff"},children:g.sort_order||0})]}),n.jsxs(D,{span:8,children:[n.jsx("div",{style:{marginBottom:4},children:n.jsx("span",{style:{fontSize:"12px",color:"#8c8c8c"},children:"状态"})}),n.jsx(Y,{color:g.is_active?"success":"error",style:{fontSize:"12px",fontWeight:500},children:g.is_active?e("payroll:auto___e29c85"):e("payroll:auto___e29d8c")})]})]})]}),n.jsxs("div",{style:{backgroundColor:"#f9f9f9",borderRadius:8,padding:20,marginBottom:20,border:"1px solid #f0f0f0"},children:[n.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#262626",marginBottom:16,display:"flex",alignItems:"center",gap:8},children:"🧮 计算属性"}),n.jsxs(M,{gutter:[24,16],children:[n.jsx(D,{span:8,children:n.jsxs("div",{style:{textAlign:"center",padding:16,backgroundColor:g.is_taxable?"#f6ffed":"#fff2f0",borderRadius:8,border:"1px solid "+(g.is_taxable?"#b7eb8f":"#ffb3b3")},children:[n.jsx("div",{style:{fontSize:"24px",marginBottom:8},children:g.is_taxable?"💸":"🚫"}),n.jsx("div",{style:{fontSize:"12px",color:"#8c8c8c",marginBottom:4},children:"是否计税"}),n.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:g.is_taxable?"#52c41a":"#ff4d4f"},children:g.is_taxable?e("payroll:auto_text_e8aea1"):e("payroll:auto_text_e4b88d")})]})}),n.jsx(D,{span:8,children:n.jsxs("div",{style:{textAlign:"center",padding:16,backgroundColor:g.is_social_security_base?"#f6ffed":"#fff2f0",borderRadius:8,border:"1px solid "+(g.is_social_security_base?"#b7eb8f":"#ffb3b3")},children:[n.jsx("div",{style:{fontSize:"24px",marginBottom:8},children:g.is_social_security_base?"🛡️":"🚫"}),n.jsx("div",{style:{fontSize:"12px",color:"#8c8c8c",marginBottom:4},children:"社保基数"}),n.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:g.is_social_security_base?"#52c41a":"#ff4d4f"},children:g.is_social_security_base?e("payroll:auto_text_e8aea1"):e("payroll:auto_text_e4b88d")})]})}),n.jsx(D,{span:8,children:n.jsxs("div",{style:{textAlign:"center",padding:16,backgroundColor:g.is_housing_fund_base?"#f6ffed":"#fff2f0",borderRadius:8,border:"1px solid "+(g.is_housing_fund_base?"#b7eb8f":"#ffb3b3")},children:[n.jsx("div",{style:{fontSize:"24px",marginBottom:8},children:g.is_housing_fund_base?"🏠":"🚫"}),n.jsx("div",{style:{fontSize:"12px",color:"#8c8c8c",marginBottom:4},children:"公积金基数"}),n.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:g.is_housing_fund_base?"#52c41a":"#ff4d4f"},children:g.is_housing_fund_base?e("payroll:auto_text_e8aea1"):e("payroll:auto_text_e4b88d")})]})})]})]}),g.description&&n.jsxs("div",{style:{backgroundColor:"#f0f5ff",borderRadius:8,padding:20,marginBottom:20,border:"1px solid #adc6ff"},children:[n.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#262626",marginBottom:12,display:"flex",alignItems:"center",gap:8},children:"📝 描述信息"}),n.jsx("div",{style:{fontSize:"14px",lineHeight:"1.6",color:"#595959",backgroundColor:"#ffffff",padding:16,borderRadius:6,border:"1px solid #e6f7ff"},children:g.description})]}),n.jsxs("div",{style:{backgroundColor:"#f5f5f5",borderRadius:8,padding:20,border:"1px solid #e8e8e8"},children:[n.jsx("div",{style:{fontSize:"14px",fontWeight:600,color:"#262626",marginBottom:16,display:"flex",alignItems:"center",gap:8},children:"⏰ 系统信息"}),n.jsxs(M,{gutter:[24,12],children:[n.jsx(D,{span:12,children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("span",{style:{fontSize:"16px"},children:"📅"}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"12px",color:"#8c8c8c"},children:"创建时间"}),n.jsx("div",{style:{fontSize:"13px",color:"#595959",fontFamily:"Monaco, Consolas, monospace"},children:g.created_at?new Date(g.created_at).toLocaleString("zh-CN"):"-"})]})]})}),n.jsx(D,{span:12,children:n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("span",{style:{fontSize:"16px"},children:"🔄"}),n.jsxs("div",{children:[n.jsx("div",{style:{fontSize:"12px",color:"#8c8c8c"},children:"更新时间"}),n.jsx("div",{style:{fontSize:"13px",color:"#595959",fontFamily:"Monaco, Consolas, monospace"},children:g.updated_at?new Date(g.updated_at).toLocaleString("zh-CN"):"-"})]})]})})]})]})]})})]});var S,E,T,I,P,N,A,L,z,$,F,V,H,K,Z,W}))),meta:{title:"payroll:page_title.payroll_components",requiredPermissions:[mn]}},{path:"calculation-config",element:Ge.createElement(Ge.Suspense,{fallback:Ge.createElement("div",null,"Loading Calculation Config...")},Ge.createElement((()=>{const{t:e}=Cn(["payroll","common"]),[t,r]=He.useState(!1),[o,i]=He.useState("rules"),[l,d]=He.useState([]),[p,m]=He.useState([]),[f,h]=He.useState([]),_=async()=>{try{r(!0);const e=await Pf(),t=Array.isArray(e)?e:e.data||[];d(t)}catch(t){V.error(e("common:error.load_failed"))}finally{r(!1)}},y=async()=>{try{r(!0);const e=await Df(),t=Array.isArray(e)?e:e.data||[];m(t)}catch(t){V.error(e("common:error.load_failed"))}finally{r(!1)}},g=async()=>{try{r(!0);const e=await zf(),t=Array.isArray(e)?e:e.data||[];h(t)}catch(t){V.error(e("common:error.load_failed"))}finally{r(!1)}};He.useEffect((()=>{_(),y(),g()}),[]);const v=He.useMemo((()=>{const t=l.length,r=l.filter((e=>e.is_active)).length,a=p.length,o=f.length;return[{title:e("payroll:calculation_config.total_rule_sets"),value:t,icon:n.jsx(s,{}),color:"var(--color-primary)",status:t>0?"success":"default"},{title:e("payroll:calculation_config.active_rule_sets"),value:r,icon:n.jsx(Q,{}),color:"var(--color-success)",status:r>0?"success":"warning"},{title:e("payroll:calculation_config.social_insurance_configs"),value:a,icon:n.jsx(S,{}),color:"var(--color-info)",status:a>0?"success":"default"},{title:e("payroll:calculation_config.tax_configs"),value:o,icon:n.jsx(c,{}),color:"var(--color-warning)",status:o>0?"success":"default"}]}),[l,p,f,e]),x=[{key:"rules",label:n.jsxs(k,{children:[n.jsx(s,{}),e("payroll:calculation_config.rule_sets"),n.jsx(Y,{color:"blue",children:l.length})]}),children:n.jsx(Cf,{ruleSets:l,onCreateRuleSet:async t=>{try{await Nf(t),V.success(e("common:success.create")),_()}catch(n){V.error(e("common:error.create_failed"))}},onUpdateRuleSet:async(t,n)=>{try{await Af(t,n),V.success(e("common:success.update")),_()}catch(r){V.error(e("common:error.update_failed"))}},onActivateRuleSet:async t=>{try{await Of(t),V.success(e("payroll:calculation_config.rule_set_activated")),_()}catch(n){V.error(e("common:error.operation_failed"))}},onDeactivateRuleSet:async t=>{try{await Mf(t),V.success(e("payroll:calculation_config.rule_set_deactivated")),_()}catch(n){V.error(e("common:error.operation_failed"))}}})},{key:"social",label:n.jsxs(k,{children:[n.jsx(S,{}),e("payroll:calculation_config.social_insurance"),n.jsx(Y,{color:"green",children:p.length})]}),children:n.jsx(Ef,{configs:p,onCreateConfig:async t=>{try{await Lf(t),V.success(e("common:success.create")),y()}catch(n){V.error(e("common:error.create_failed"))}},onUpdateConfig:async(t,n)=>{try{await Rf(t,n),V.success(e("common:success.update")),y()}catch(r){V.error(e("common:error.update_failed"))}}})},{key:"tax",label:n.jsxs(k,{children:[n.jsx(c,{}),e("payroll:calculation_config.tax_config"),n.jsx(Y,{color:"orange",children:f.length})]}),children:n.jsx(Tf,{configs:f,onCreateConfig:async t=>{try{await $f(t),V.success(e("common:success.create")),g()}catch(n){V.error(e("common:error.create_failed"))}},onUpdateConfig:async(t,n)=>{try{await Ff(t,n),V.success(e("common:success.update")),g()}catch(r){V.error(e("common:error.update_failed"))}}})}];return n.jsxs(mf,{title:e("payroll:calculation_config.page_title"),headerExtra:n.jsx(C,{icon:n.jsx(u,{}),onClick:()=>{_(),y(),g()},loading:t,children:e("common:refresh")}),children:[n.jsx(M,{gutter:[16,16],style:{marginBottom:24},children:v.map(((t,r)=>n.jsx(D,{xs:24,sm:12,lg:6,children:n.jsx(ff,{title:t.title,icon:t.icon,children:n.jsxs("div",{className:"statistic-content",children:[n.jsx("div",{className:"statistic-value",style:{color:t.color},children:t.value}),n.jsx("div",{className:"statistic-status",children:"success"===t.status?n.jsx(Y,{color:"success",icon:n.jsx(Q,{}),children:e("common:status.normal")}):"warning"===t.status?n.jsx(Y,{color:"warning",icon:n.jsx(J,{}),children:e("common:status.needs_attention")}):n.jsx(Y,{color:"default",children:e("common:status.not_configured")})})]})})},r)))}),n.jsx(ff,{children:n.jsx(a,{spinning:t,children:n.jsx(Rm,{items:x,activeKey:o,onChange:i,size:"large",type:"card"})})})]})}))),meta:{title:"payroll:calculation_config.page_title",requiredPermissions:[mn]}},{path:"attendance",element:Ge.createElement(Ge.Suspense,{fallback:Ge.createElement("div",null,"Loading Attendance Management...")},Ge.createElement((()=>{const{t:e}=Cn(["payroll","common"]),[t,r]=He.useState("periods"),a=[{key:"periods",label:n.jsxs("span",{children:[n.jsx(ae,{}),e("payroll:attendance_periods")]}),children:n.jsx(Jx,{})},{key:"records",label:n.jsxs("span",{children:[n.jsx(m,{}),e("payroll:attendance_records")]}),children:n.jsx(eb,{})},{key:"daily",label:n.jsxs("span",{children:[n.jsx(W,{}),e("payroll:daily_attendance")]}),children:n.jsx(rb,{})},{key:"rules",label:n.jsxs("span",{children:[n.jsx(u,{}),e("payroll:attendance_rules")]}),children:n.jsx(ab,{})}];return n.jsx("div",{className:"attendance-management-page",children:n.jsxs(L,{children:[n.jsx("div",{style:{marginBottom:24},children:n.jsx(ob,{level:4,style:{margin:0},children:e("payroll:attendance_management")})}),n.jsx(K,{activeKey:t,onChange:r,items:a,size:"large"})]})})}))),meta:{title:"payroll:attendance.page_title",requiredPermissions:[mn]}},{path:"calculation-logs",element:Ge.createElement(Ge.Suspense,{fallback:Ge.createElement("div",null,"Loading Calculation Logs...")},Ge.createElement((()=>{const{t:e}=Cn(["payroll","common"]),[t,r]=He.useState([]),[a,o]=He.useState(!1),[i,s]=He.useState({current:1,pageSize:20,total:0}),[l,c]=He.useState({payroll_run_id:void 0,employee_id:void 0,component_code:"",status:void 0}),d=He.useCallback((async()=>{o(!0);try{const e=new URLSearchParams;e.append("page",i.current.toString()),e.append("size",i.pageSize.toString()),l.payroll_run_id&&e.append("payroll_run_id",l.payroll_run_id.toString()),l.employee_id&&e.append("employee_id",l.employee_id.toString()),l.component_code&&e.append("component_code",l.component_code),l.status&&e.append("status",l.status);const t=await bt.get(`/calculation-logs?${e}`);r(t.data.data),s((e=>({...e,total:t.data.meta.total})))}catch(e){V.error("获取计算日志失败")}finally{o(!1)}}),[i.current,i.pageSize,l]),u=async(e,t)=>{var n,r,a,o;try{const n=new URLSearchParams;n.append("confirm","true"),e&&n.append("payroll_run_id",e.toString()),t&&n.append("employee_id",t.toString()),await bt.delete(`/calculation-logs?${n}`),V.success("计算日志删除成功"),d()}catch(i){let e="删除计算日志失败";(null==(o=null==(a=null==(r=null==(n=null==i?void 0:i.response)?void 0:n.data)?void 0:r.detail)?void 0:a.error)?void 0:o.details)&&(e=i.response.data.detail.error.details),V.error(e)}},p=[{title:"日志ID",dataIndex:"calculation_log_id",key:"calculation_log_id",width:80},{title:"薪资运行ID",dataIndex:"payroll_run_id",key:"payroll_run_id",width:100,render:e=>e||"-"},{title:"员工",key:"employee",width:120,render:(e,t,r)=>n.jsxs("div",{children:[n.jsx("div",{children:t.employee_name}),n.jsxs(db,{type:"secondary",style:{fontSize:12},children:["ID: ",t.employee_id]})]})},{title:"组件代码",dataIndex:"component_code",key:"component_code",width:120},{title:"计算方法",dataIndex:"calculation_method",key:"calculation_method",width:100},{title:"结果金额",dataIndex:"result_amount",key:"result_amount",width:100,render:e=>`¥${Number(e).toFixed(2)}`},{title:"状态",dataIndex:"status",key:"status",width:80,render:e=>{switch(e){case"SUCCESS":return n.jsx(Y,{color:"green",children:"成功"});case"ERROR":return n.jsx(Y,{color:"red",children:"错误"});case"WARNING":return n.jsx(Y,{color:"orange",children:"警告"});default:return n.jsx(Y,{children:e})}}},{title:"错误信息",dataIndex:"error_message",key:"error_message",width:200,render:e=>e?n.jsx(ne,{title:e,children:n.jsx(db,{ellipsis:!0,style:{maxWidth:180},children:e})}):"-"},{title:"执行时间",dataIndex:"execution_time_ms",key:"execution_time_ms",width:100,render:e=>e?`${e}ms`:"-"},{title:"创建时间",dataIndex:"created_at",key:"created_at",width:160,render:e=>new Date(e).toLocaleString("zh-CN")},{title:"操作",key:"actions",width:120,fixed:"right",render:(e,t,r)=>n.jsxs(k,{size:"small",children:[t.payroll_run_id&&n.jsx(Fe,{title:"确认删除",description:`确定要删除薪资运行 ${t.payroll_run_id} 的所有计算日志吗？`,onConfirm:()=>u(t.payroll_run_id),okText:"确认",cancelText:"取消",children:n.jsx(Pt,{icon:n.jsx(ve,{}),danger:!0,size:"small",tooltipTitle:"删除该薪资运行的所有日志"})}),n.jsx(Fe,{title:"确认删除",description:`确定要删除员工 ${t.employee_name} 的所有计算日志吗？`,onConfirm:()=>u(void 0,t.employee_id),okText:"确认",cancelText:"取消",children:n.jsx(Pt,{icon:n.jsx(ve,{}),danger:!0,size:"small",tooltipTitle:"删除该员工的所有日志"})})]})}],m=(e,t)=>{c((n=>({...n,[e]:t})))};return He.useEffect((()=>{d()}),[d]),n.jsx("div",{className:"calculation-logs-page",children:n.jsxs(L,{children:[n.jsxs("div",{style:{marginBottom:16},children:[n.jsxs(cb,{level:4,style:{margin:0,marginBottom:16},children:[n.jsx(_e,{style:{marginRight:8}}),"计算日志管理"]}),n.jsx(F,{message:"关于计算日志",description:"计算日志记录了薪资计算引擎的详细执行过程和结果。当删除薪资运行时如果遇到外键约束错误，需要先删除相关的计算日志记录。",type:"info",showIcon:!0,style:{marginBottom:16}}),n.jsxs(M,{gutter:16,style:{marginBottom:16},children:[n.jsx(D,{span:4,children:n.jsx(R,{placeholder:"薪资运行ID",value:l.payroll_run_id,onChange:e=>m("payroll_run_id",e.target.value?parseInt(e.target.value):void 0),type:"number"})}),n.jsx(D,{span:4,children:n.jsx(R,{placeholder:"员工ID",value:l.employee_id,onChange:e=>m("employee_id",e.target.value?parseInt(e.target.value):void 0),type:"number"})}),n.jsx(D,{span:4,children:n.jsx(R,{placeholder:"组件代码",value:l.component_code,onChange:e=>m("component_code",e.target.value),prefix:n.jsx($e,{})})}),n.jsx(D,{span:4,children:n.jsxs(q,{placeholder:"选择状态",value:l.status,onChange:e=>m("status",e),allowClear:!0,style:{width:"100%"},children:[n.jsx(ub,{value:"SUCCESS",children:"成功"}),n.jsx(ub,{value:"ERROR",children:"错误"}),n.jsx(ub,{value:"WARNING",children:"警告"})]})}),n.jsx(D,{span:8,children:n.jsxs(k,{children:[n.jsx(C,{type:"primary",icon:n.jsx($e,{}),onClick:d,loading:a,children:"搜索"}),n.jsx(C,{icon:n.jsx(Ie,{}),onClick:()=>{c({payroll_run_id:void 0,employee_id:void 0,component_code:"",status:void 0})},children:"重置"}),n.jsx(C,{icon:n.jsx(Ie,{}),onClick:d,loading:a,children:"刷新"})]})})]})]}),n.jsx(he,{columns:p,dataSource:t,rowKey:"calculation_log_id",loading:a,pagination:{current:i.current,pageSize:i.pageSize,total:i.total,showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,t)=>`第 ${t[0]}-${t[1]} 条，共 ${e} 条`,pageSizeOptions:["10","20","50","100"]},onChange:e=>{s((t=>({...t,current:e.current,pageSize:e.pageSize})))},scroll:{x:1200},size:"small"})]})})}))),meta:{title:"payroll:calculation_logs.page_title",requiredPermissions:[un]}}],mb=()=>{const{t:e}=Cn(),t=Je(),r=!!nt((e=>e.auth.authToken));return n.jsx(Oe,{status:"404",title:"404",subTitle:e("common:page_title.not_found"),extra:n.jsx(C,{type:"primary",onClick:()=>{t(r?"/simple-payroll":"/login")},children:e(r?"common:return_home":"common:return_login")})})},fb=()=>{const{t:e}=Cn(),t=Je(),r=!!nt((e=>e.auth.authToken));return n.jsx(Oe,{status:"403",title:"403",subTitle:e("common:auto____e68ab1"),extra:n.jsx(C,{type:"primary",onClick:()=>{t(r?"/simple-payroll":"/login")},children:e(r?"common:auto_text_e8bf94":"common:auto_text_e58ebb")})})},hb=He.lazy((()=>_n((()=>import("./admin-management-B_B4TQCC.js").then((e=>e.O))),__vite__mapDeps([11,1,3,4,5,6,7,8,9,12,13,14])))),_b=He.lazy((()=>_n((()=>import("./hr-management-Bxz25n3J.js").then((e=>e.h))),__vite__mapDeps([4,1,3,5,6,7,8,9])))),yb=He.lazy((()=>_n((()=>import("./EmployeeManagementPage-BNCtQ-sV.js")),__vite__mapDeps([23,3,1,24,4,5,6,7,8,9])))),gb=He.lazy((()=>_n((()=>import("./EmployeeDetailPage-CKUjPZ9d.js")),__vite__mapDeps([25,3,1,4,5,6,7,8,9])))),vb=He.lazy((()=>_n((()=>import("./CreateEmployeePage-CqcH9p5v.js")),__vite__mapDeps([26,3,1,27,4,5,6,7,8,9,24])))),xb=He.lazy((()=>_n((()=>import("./EditEmployeePage-X_Z9Nsny.js")),__vite__mapDeps([28,3,1,27,4,5,6,7,8,9,24]))));He.lazy((()=>_n((()=>import("./admin-management-B_B4TQCC.js").then((e=>e.R))),__vite__mapDeps([11,1,3,4,5,6,7,8,9,12,13,14]))));const bb=[{path:"/login",element:n.jsx(Sp,{}),meta:{title:"auth:login"}},{path:"/unauthorized",element:n.jsx(fb,{}),meta:{title:"auth:unauthorized"}},{path:"/",element:n.jsx(gu,{children:n.jsx(Mu,{})}),children:[{index:!0,element:n.jsx(We,{to:"/simple-payroll",replace:!0})},{path:"admin",element:n.jsx(gu,{allowedRoles:["SUPER_ADMIN","ADMIN"],children:n.jsx(Ge.Suspense,{fallback:n.jsx("div",{className:"page-loading-suspense",children:"Loading Admin Section..."}),children:n.jsx(Xe,{})})}),meta:{title:"menu:admin.title",allowedRoles:["SUPER_ADMIN","ADMIN"]},children:[{index:!0,element:n.jsx(We,{to:"users",replace:!0})},{path:"users",element:n.jsx(Tm,{}),meta:{title:"menu:admin.users",requiredPermissions:["user:list"]}},{path:"roles",element:n.jsx(Om,{}),meta:{title:"menu:admin.roles",requiredPermissions:["role:list"]}},{path:"permissions",element:n.jsx(Dm,{}),meta:{title:"menu:admin.permissions",requiredPermissions:["permission:list"]}},{path:"config",element:n.jsx(Wm,{}),meta:{title:"menu:admin.systemSettings",requiredPermissions:["config:view"]}},{path:"organization",element:n.jsx(Xe,{}),meta:{title:"menu:organization.title",requiredPermissions:["department:list"]},children:[{index:!0,element:n.jsx(We,{to:"management-v2",replace:!0})},{path:"management-v2",element:n.jsx(Ge.Suspense,{fallback:n.jsx("div",{className:"page-loading-suspense",children:"Loading Organization Management..."}),children:n.jsx(hb,{})}),meta:{title:"menu:organization.managementV2",requiredPermissions:["department:list"]}}]}]},{path:"hr",element:n.jsxs(gu,{allowedRoles:["HR_MANAGER","HR_SPECIALIST","SUPER_ADMIN"],children:[" ",n.jsx(Ge.Suspense,{fallback:n.jsx("div",{className:"page-loading-suspense",children:"Loading HR Section..."}),children:n.jsx(Xe,{})})]}),meta:{title:"menu:hr.title",allowedRoles:["HR_MANAGER","HR_SPECIALIST","SUPER_ADMIN"]},children:[...nf.map((e=>"employees"===e.path?{...e,meta:{title:"menu:hr.employees",requiredPermissions:["employee:list"],...e.meta}}:"employees/new"===e.path?{...e,meta:{title:"menu:hr.employeesNew",requiredPermissions:["employee:create"],...e.meta}}:"employees/:employeeId"===e.path?{...e,meta:{title:"menu:hr.employeesDetail",requiredPermissions:["employee:view"],hideInBreadcrumbIfParentOfNext:!0,...e.meta}}:"employees/:employeeId/edit"===e.path?{...e,meta:{title:"menu:hr.employeesEdit",requiredPermissions:["employee:edit"],...e.meta}}:e)),{path:"leave",element:n.jsx(Gm,{}),meta:{title:"menu:hr.leaveManagement",requiredPermissions:["leave:manage"]}}]},{path:"finance",element:n.jsx(gu,{allowedRoles:["FINANCE_MANAGER","ACCOUNTANT","SUPER_ADMIN"],children:n.jsx(Ge.Suspense,{fallback:n.jsx("div",{className:"page-loading-suspense",children:"Loading Finance Section..."}),children:n.jsx(Xe,{})})}),meta:{title:"menu:payroll.title",allowedRoles:["FINANCE_MANAGER","ACCOUNTANT","SUPER_ADMIN"]},children:[{path:"payroll",element:n.jsx(Xe,{}),meta:{title:"menu:payroll.title",requiredPermissions:["payroll_run:view"]},children:pb}]},{path:"simple-payroll",element:n.jsx(gu,{allowedRoles:["FINANCE_MANAGER","ACCOUNTANT","SUPER_ADMIN","HR_MANAGER"],children:n.jsx(Ge.Suspense,{fallback:n.jsx("div",{className:"page-loading-suspense",children:"Loading Simple Payroll..."}),children:Ge.createElement(He.lazy((()=>_n((()=>import("./index-BV2Mekaf.js")),__vite__mapDeps([29,3,1,5,6,7,8,4,9,12,13,11,14,16,17,18,30])))))})}),meta:{title:"menu:simplePayroll.title",allowedRoles:["FINANCE_MANAGER","ACCOUNTANT","SUPER_ADMIN","HR_MANAGER"],requiredPermissions:["payroll_period:view","payroll_run:view"],permissionMatchMode:"any"}},{path:"employee-management",element:n.jsx(gu,{allowedRoles:["HR","SUPER_ADMIN"],children:n.jsx(Ge.Suspense,{fallback:n.jsx("div",{className:"page-loading-suspense",children:"Loading Employee Management..."}),children:n.jsx(Xe,{})})}),meta:{title:"menu:employeeManagement.title",allowedRoles:["HR","SUPER_ADMIN"],requiredPermissions:["employee:view_list"],permissionMatchMode:"any"},children:[{index:!0,element:n.jsx(We,{to:"list",replace:!0})},{path:"list",element:n.jsx(Ge.Suspense,{fallback:n.jsx("div",{className:"page-loading-suspense",children:"Loading Employee List..."}),children:n.jsx(yb,{})}),meta:{title:"menu:employeeManagement.list",requiredPermissions:["employee:view_list"]}},{path:"create",element:n.jsx(Ge.Suspense,{fallback:n.jsx("div",{className:"page-loading-suspense",children:"Loading Create Employee..."}),children:n.jsx(vb,{})}),meta:{title:"menu:employeeManagement.create",requiredPermissions:["employee:create"]}},{path:":id",element:n.jsx(Ge.Suspense,{fallback:n.jsx("div",{className:"page-loading-suspense",children:"Loading Employee Detail..."}),children:n.jsx(gb,{})}),meta:{title:"menu:employeeManagement.detail",requiredPermissions:["employee:view_detail"],hideInBreadcrumbIfParentOfNext:!0}},{path:":id/edit",element:n.jsx(Ge.Suspense,{fallback:n.jsx("div",{className:"page-loading-suspense",children:"Loading Edit Employee..."}),children:n.jsx(xb,{})}),meta:{title:"menu:employeeManagement.edit",requiredPermissions:["employee:update"]}}]},{path:"manager",element:n.jsx(gu,{allowedRoles:["MANAGER","SUPER_ADMIN"],children:n.jsx(Ge.Suspense,{fallback:n.jsx("div",{className:"page-loading-suspense",children:"Loading Manager Section..."}),children:n.jsx(Xe,{})})}),meta:{title:"menu:manager.title",allowedRoles:["MANAGER","SUPER_ADMIN"]},children:wu},{path:"view-reports",element:n.jsx(We,{to:"/admin/report-config",replace:!0}),meta:{title:"menu:reports.title",allowedRoles:["SUPER_ADMIN","ADMIN","HR_MANAGER","FINANCE_MANAGER"],requiredPermissions:["report:view_reports"]}},{path:"batch-reports",element:n.jsx(We,{to:"/admin/report-config?tab=batch-reports",replace:!0}),meta:{title:"menu:batchReports.title",allowedRoles:["SUPER_ADMIN","ADMIN","HR_MANAGER","FINANCE_MANAGER"],requiredPermissions:["report:export","payroll_run:view"],permissionMatchMode:"any"}},{path:"/test",element:n.jsx(gu,{allowedRoles:["SUPER_ADMIN"],children:n.jsx(Ge.Suspense,{fallback:n.jsx("div",{className:"page-loading-suspense",children:"Loading Test Section..."}),children:n.jsx(Xe,{})})}),meta:{title:"menu:test.title",allowedRoles:["SUPER_ADMIN"]},children:[{index:!0,element:n.jsx(We,{to:"employee-list-v3",replace:!0})},{path:"employee-list-v3",element:n.jsx(Ge.Suspense,{fallback:n.jsx("div",{className:"page-loading-suspense",children:"Loading Employee List V3..."}),children:n.jsx(_b,{})}),meta:{title:"menu:test.employeeListV3"}}]}]},{path:"*",element:n.jsx(mb,{}),meta:{title:"common:not_found"}}],wb=(e,t="")=>{let n=[];return e.forEach((e=>{const r=`${t}/${e.path||""}`.replace(/\/+/g,"/").replace(/\/$/,""),a={...e,path:r};e.meta&&n.push(a),e.children&&(n=n.concat(wb(e.children,r)))})),n};wb(bb);var jb,kb={},Sb={};var Cb,Eb,Tb={},Ib={},Pb={},Nb={};function Ab(){return Cb||(Cb=1,Object.defineProperty(Nb,"__esModule",{value:!0}),Nb.commonLocale=void 0,Nb.commonLocale={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0}),Nb}var Ob,Mb,Db,Lb,Rb,zb,$b={};function Fb(){if(Ob)return $b;Ob=1,Object.defineProperty($b,"__esModule",{value:!0}),$b.default=void 0;return $b.default={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},$b}function qb(){if(Mb)return Ib;Mb=1;var e=qe().default;Object.defineProperty(Ib,"__esModule",{value:!0}),Ib.default=void 0;var t=e(function(){if(Eb)return Pb;Eb=1;var e=qe().default;Object.defineProperty(Pb,"__esModule",{value:!0}),Pb.default=void 0;var t=e(Be()),n=Ab(),r=(0,t.default)((0,t.default)({},n.commonLocale),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",week:"Week",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"});return Pb.default=r,Pb}()),n=e(Fb());const r={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},t.default),timePickerLocale:Object.assign({},n.default)};return Ib.default=r,Ib}function Bb(){if(Db)return Tb;Db=1;var e=qe().default;Object.defineProperty(Tb,"__esModule",{value:!0}),Tb.default=void 0;var t=e(qb());return Tb.default=t.default,Tb}function Ub(){if(Lb)return kb;Lb=1;var e=qe().default;Object.defineProperty(kb,"__esModule",{value:!0}),kb.default=void 0;var t=e((jb||(jb=1,Object.defineProperty(Sb,"__esModule",{value:!0}),Sb.default=void 0,Sb.default={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"}),Sb)),n=e(Bb()),r=e(qb()),a=e(Fb());const o="${label} is not a valid ${type}",i={locale:"en",Pagination:t.default,DatePicker:r.default,TimePicker:a.default,Calendar:n.default,global:{placeholder:"Please select",close:"Close"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckAll:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:o,method:o,array:o,object:o,number:o,date:o,boolean:o,integer:o,float:o,regexp:o,email:o,url:o,hex:o},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}};return kb.default=i,kb}function Vb(){return zb?Rb:(zb=1,Rb=Ub())}const Yb=Ye(Vb());var Hb,Kb={},Zb={};var Wb,Gb={},Jb={},Xb={};var Qb,ew,tw,nw,rw,aw,ow={};function iw(){if(Qb)return ow;Qb=1,Object.defineProperty(ow,"__esModule",{value:!0}),ow.default=void 0;return ow.default={placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]},ow}function sw(){if(ew)return Jb;ew=1;var e=qe().default;Object.defineProperty(Jb,"__esModule",{value:!0}),Jb.default=void 0;var t=e(function(){if(Wb)return Xb;Wb=1;var e=qe().default;Object.defineProperty(Xb,"__esModule",{value:!0}),Xb.default=void 0;var t=e(Be()),n=Ab(),r=(0,t.default)((0,t.default)({},n.commonLocale),{},{locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",week:"周",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪",yearFormat:"YYYY年",cellDateFormat:"D",monthBeforeYear:!1});return Xb.default=r,Xb}()),n=e(iw());const r={lang:Object.assign({placeholder:"请选择日期",yearPlaceholder:"请选择年份",quarterPlaceholder:"请选择季度",monthPlaceholder:"请选择月份",weekPlaceholder:"请选择周",rangePlaceholder:["开始日期","结束日期"],rangeYearPlaceholder:["开始年份","结束年份"],rangeMonthPlaceholder:["开始月份","结束月份"],rangeQuarterPlaceholder:["开始季度","结束季度"],rangeWeekPlaceholder:["开始周","结束周"]},t.default),timePickerLocale:Object.assign({},n.default)};return r.lang.ok="确定",Jb.default=r,Jb}function lw(){if(tw)return Gb;tw=1;var e=qe().default;Object.defineProperty(Gb,"__esModule",{value:!0}),Gb.default=void 0;var t=e(sw());return Gb.default=t.default,Gb}function cw(){if(nw)return Kb;nw=1;var e=qe().default;Object.defineProperty(Kb,"__esModule",{value:!0}),Kb.default=void 0;var t=e((Hb||(Hb=1,Object.defineProperty(Zb,"__esModule",{value:!0}),Zb.default=void 0,Zb.default={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"}),Zb)),n=e(lw()),r=e(sw()),a=e(iw());const o="${label}不是一个有效的${type}",i={locale:"zh-cn",Pagination:t.default,DatePicker:r.default,TimePicker:a.default,Calendar:n.default,global:{placeholder:"请选择",close:"关闭"},Table:{filterTitle:"筛选",filterConfirm:"确定",filterReset:"重置",filterEmptyText:"无筛选项",filterCheckAll:"全选",filterSearchPlaceholder:"在筛选项中搜索",emptyText:"暂无数据",selectAll:"全选当页",selectInvert:"反选当页",selectNone:"清空所有",selectionAll:"全选所有",sortTitle:"排序",expand:"展开行",collapse:"关闭行",triggerDesc:"点击降序",triggerAsc:"点击升序",cancelSort:"取消排序"},Modal:{okText:"确定",cancelText:"取消",justOkText:"知道了"},Tour:{Next:"下一步",Previous:"上一步",Finish:"结束导览"},Popconfirm:{cancelText:"取消",okText:"确定"},Transfer:{titles:["",""],searchPlaceholder:"请输入搜索内容",itemUnit:"项",itemsUnit:"项",remove:"删除",selectCurrent:"全选当页",removeCurrent:"删除当页",selectAll:"全选所有",deselectAll:"取消全选",removeAll:"删除全部",selectInvert:"反选当页"},Upload:{uploading:"文件上传中",removeFile:"删除文件",uploadError:"上传错误",previewFile:"预览文件",downloadFile:"下载文件"},Empty:{description:"暂无数据"},Icon:{icon:"图标"},Text:{edit:"编辑",copy:"复制",copied:"复制成功",expand:"展开",collapse:"收起"},Form:{optional:"（可选）",defaultValidateMessages:{default:"字段验证错误${label}",required:"请输入${label}",enum:"${label}必须是其中一个[${enum}]",whitespace:"${label}不能为空字符",date:{format:"${label}日期格式无效",parse:"${label}不能转换为日期",invalid:"${label}是一个无效日期"},types:{string:o,method:o,array:o,object:o,number:o,date:o,boolean:o,integer:o,float:o,regexp:o,email:o,url:o,hex:o},string:{len:"${label}须为${len}个字符",min:"${label}最少${min}个字符",max:"${label}最多${max}个字符",range:"${label}须在${min}-${max}字符之间"},number:{len:"${label}必须等于${len}",min:"${label}最小值为${min}",max:"${label}最大值为${max}",range:"${label}须在${min}-${max}之间"},array:{len:"须为${len}个${label}",min:"最少${min}个${label}",max:"最多${max}个${label}",range:"${label}数量须在${min}-${max}之间"},pattern:{mismatch:"${label}与模式不匹配${pattern}"}}},Image:{preview:"预览"},QRCode:{expired:"二维码过期",refresh:"点击刷新",scanned:"已扫描"},ColorPicker:{presetEmpty:"暂无",transparent:"无色",singleColor:"单色",gradientColor:"渐变色"}};return Kb.default=i,Kb}function dw(){return aw?rw:(aw=1,rw=cw())}const uw={en:Yb,zh:Ye(dw())},pw={token:{colorPrimary:"#0052cc",colorError:"#e85a71",colorSuccess:"#52c41a",colorWarning:"#faad14",colorTextBase:"#333333",colorTextSecondary:"#595959",colorTextTertiary:"#8c8c8c",colorBgLayout:"#f0f2f5",colorBgContainer:"#ffffff",colorBgElevated:"#ffffff",colorBorder:"#d9d9d9",colorSplit:"rgba(5, 5, 5, 0.06)",borderRadius:6,borderRadiusLG:8,borderRadiusSM:4,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.09)",boxShadowSecondary:"0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 3px 6px -4px rgba(0, 0, 0, 0.12), 0 9px 28px 8px rgba(0, 0, 0, 0.05)",fontFamily:'"SourceHanSerifCN", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',fontSize:14,fontSizeLG:16,fontSizeSM:12,lineHeight:1.5715,marginXS:8,marginSM:12,margin:16,marginLG:24,marginXL:32,paddingXS:8,paddingSM:12,padding:16,paddingLG:24,paddingXL:32,tableExpandIconFontSize:10},components:{Layout:{siderBg:"#ffffff",headerBg:"#ffffff",bodyBg:"#f0f2f5"},Menu:{itemColor:"rgba(0, 0, 0, 0.88)",itemHoverColor:"#0052cc",itemSelectedColor:"#ffffff",itemSelectedBg:"#0052cc",itemHoverBg:"rgba(0, 82, 204, 0.06)",darkItemColor:"rgba(255, 255, 255, 0.65)",darkItemHoverColor:"#ffffff",darkItemSelectedColor:"#ffffff",darkItemSelectedBg:"#0052cc"},Card:{headerBg:"transparent",paddingLG:24,borderRadiusLG:8,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.09)",colorBorderSecondary:"rgba(5, 5, 5, 0.06)"},Button:{borderRadius:8,linkHoverBg:"transparent"},Pagination:{itemSize:32,colorPrimary:"#0052cc",colorPrimaryHover:"#003f9e",borderRadius:4},Breadcrumb:{},Spin:{},Table:{headerBg:"#fafafa",headerColor:"rgba(0, 0, 0, 0.88)",rowHoverBg:"rgba(0, 82, 204, 0.04)",borderColor:"rgba(5, 5, 5, 0.06)",borderRadius:8,padding:12,paddingLG:16,paddingSM:8},Tag:{borderRadiusSM:4},Form:{itemMarginBottom:20},Input:{},Select:{}},algorithm:x.defaultAlgorithm},mw=({children:e})=>{const t=e=>{if(e&&"string"==typeof e){const t=e.split("-")[0];return uw[t]||Yb}return Yb},[r,o]=He.useState((()=>t(En.options.lng||En.language)));return He.useEffect((()=>{const e=e=>{(e=>{o(t(e))})(e),"zh-CN"===e?A.locale("zh-cn"):"en"===e?A.locale("en"):A.locale("zh-cn")};return En.isInitialized?e(En.language):En.on("initialized",(t=>{e(En.language)})),En.on("languageChanged",e),()=>{En.off("initialized",e),En.off("languageChanged",e)}}),[]),n.jsx(He.Suspense,{fallback:n.jsx(a,{size:"large",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"}}),children:n.jsx(Ue,{locale:r,theme:{...pw,token:{...pw.token}},csp:{nonce:window.__CSP_NONCE__||""},children:e})})};window.VITE_ENV_DEBUG={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"http://10.10.10.11:8080",VITE_API_PATH_PREFIX:"/v2"};const fw=et(bb),hw=new Et({defaultOptions:{queries:{staleTime:3e5,gcTime:6e5,retry:2,retryDelay:e=>Math.min(1e3*2**e,3e4),refetchOnWindowFocus:!1,refetchOnReconnect:!0},mutations:{retry:1}}}),_w=document.getElementById("root");if(!_w)throw new Error("Could not find root element with id 'root'");Nn.createRoot(_w).render(n.jsxs(Tt,{client:hw,children:[n.jsx(rt,{store:Ct,children:n.jsx(mw,{children:n.jsx(Ge.Suspense,{fallback:n.jsx("div",{children:"Loading translations..."}),children:n.jsxs(r,{children:[" ",n.jsx(yu,{router:fw})]})})})}),!1]}));export{mf as M,nh as P,ff as a,Gf as s};
