import{aq as e,Z as l,j as a,C as s,r as i,t,I as r,b8 as n,u as d,T as o,aA as c,aw as h}from"./antd-vendor-C1V4cVms.js";import{b as _}from"./react-vendor-D9vUlElp.js";import{e as p}from"./hr-management-Bxz25n3J.js";import{u as m}from"./i18n-vendor-DF0Yg0Xi.js";const{Title:j}=o,{TextArea:x}=r,u=_.forwardRef((({initialValues:o,onSubmit:u,loading:g=!1,mode:b="create"},v)=>{const{t:I}=m(["employeeManagement","common"]),[y]=e.useForm();_.useImperativeHandle(v,(()=>({submit:()=>y.submit(),getForm:()=>y})),[y]);const[f,w]=_.useState([]),[k,Y]=_.useState([]),[L,S]=_.useState([]),[C,E]=_.useState([]),[O,T]=_.useState([]),[V,A]=_.useState([]),[M,D]=_.useState([]),[P,N]=_.useState([]),[R,F]=_.useState([]),[q,B]=_.useState([]),[U,G]=_.useState([]),[H,J]=_.useState([]),[Z,z]=_.useState([]),[K,Q]=_.useState(!1);_.useEffect((()=>{(async()=>{Q(!0);try{const[e,l,a,s,i,t,r,n,d,o,c,h,_]=await Promise.all([p.getDepartments(),p.getPersonnelCategories(),p.getPositions(),p.getLookupValues("GENDER"),p.getLookupValues("EMPLOYEE_STATUS"),p.getLookupValues("EMPLOYMENT_TYPE"),p.getLookupValues("EDUCATION_LEVEL"),p.getLookupValues("MARITAL_STATUS"),p.getLookupValues("POLITICAL_STATUS"),p.getLookupValues("CONTRACT_TYPE"),p.getLookupValues("SALARY_LEVEL"),p.getLookupValues("SALARY_GRADE"),p.getLookupValues("JOB_POSITION_LEVEL")]);w(e),Y(l),S(a),E(s),T(i),A(t),D(r),N(n),F(d),B(o),G(c),J(h),z(_)}catch(e){}finally{Q(!1)}})()}),[]);_.useEffect((()=>{if(o){const e={...o,hire_date:o.hire_date?l(o.hire_date):void 0,date_of_birth:o.date_of_birth?l(o.date_of_birth):void 0,first_work_date:o.first_work_date?l(o.first_work_date):void 0,career_position_level_date:o.career_position_level_date?l(o.career_position_level_date):void 0,current_position_start_date:o.current_position_start_date?l(o.current_position_start_date):void 0};y.setFieldsValue(e)}}),[o,y]);return a.jsxs(e,{form:y,layout:"vertical",onFinish:async e=>{try{const l={...e,hire_date:e.hire_date?e.hire_date.format("YYYY-MM-DD"):void 0,date_of_birth:e.date_of_birth?e.date_of_birth.format("YYYY-MM-DD"):void 0,first_work_date:e.first_work_date?e.first_work_date.format("YYYY-MM-DD"):void 0,career_position_level_date:e.career_position_level_date?e.career_position_level_date.format("YYYY-MM-DD"):void 0,current_position_start_date:e.current_position_start_date?e.current_position_start_date.format("YYYY-MM-DD"):void 0};"edit"===b&&(null==o?void 0:o.id)&&(l.id=o.id),await u(l)}catch(l){}},initialValues:{is_active:!0,interrupted_service_years:0},children:[a.jsxs(s,{title:a.jsx(j,{level:4,children:"基本信息"}),style:{marginBottom:16},children:[a.jsxs(i,{gutter:16,children:[a.jsx(t,{span:8,children:a.jsx(e.Item,{name:"employee_code",label:"员工编号",children:a.jsx(r,{placeholder:"请输入员工编号"})})}),a.jsx(t,{span:8,children:a.jsx(e.Item,{name:"first_name",label:"姓",rules:[{required:!0,message:"请输入姓"}],children:a.jsx(r,{placeholder:"请输入姓"})})}),a.jsx(t,{span:8,children:a.jsx(e.Item,{name:"last_name",label:"名",rules:[{required:!0,message:"请输入名"}],children:a.jsx(r,{placeholder:"请输入名"})})})]}),a.jsxs(i,{gutter:16,children:[a.jsx(t,{span:8,children:a.jsx(e.Item,{name:"email",label:"邮箱",rules:[{type:"email",message:"请输入有效的邮箱地址"}],children:a.jsx(r,{placeholder:"请输入邮箱"})})}),a.jsx(t,{span:8,children:a.jsx(e.Item,{name:"phone_number",label:"电话号码",children:a.jsx(r,{placeholder:"请输入电话号码"})})}),a.jsx(t,{span:8,children:a.jsx(e.Item,{name:"id_number",label:"身份证号",children:a.jsx(r,{placeholder:"请输入身份证号"})})})]}),a.jsxs(i,{gutter:16,children:[a.jsx(t,{span:8,children:a.jsx(e.Item,{name:"date_of_birth",label:"出生日期",children:a.jsx(n,{style:{width:"100%"},placeholder:"请选择出生日期"})})}),a.jsx(t,{span:8,children:a.jsx(e.Item,{name:"gender_lookup_value_id",label:"性别",children:a.jsx(d,{placeholder:"请选择性别",loading:K,allowClear:!0,children:C.map((e=>a.jsx(d.Option,{value:e.id,children:e.label},e.id)))})})}),a.jsx(t,{span:8,children:a.jsx(e.Item,{name:"nationality",label:"国籍",children:a.jsx(r,{placeholder:"请输入国籍"})})})]}),a.jsxs(i,{gutter:16,children:[a.jsx(t,{span:8,children:a.jsx(e.Item,{name:"ethnicity",label:"民族",children:a.jsx(r,{placeholder:"请输入民族"})})}),a.jsx(t,{span:8,children:a.jsx(e.Item,{name:"marital_status_lookup_value_id",label:"婚姻状况",children:a.jsx(d,{placeholder:"请选择婚姻状况",loading:K,allowClear:!0,children:P.map((e=>a.jsx(d.Option,{value:e.id,children:e.label},e.id)))})})}),a.jsx(t,{span:8,children:a.jsx(e.Item,{name:"political_status_lookup_value_id",label:"政治面貌",children:a.jsx(d,{placeholder:"请选择政治面貌",loading:K,allowClear:!0,children:R.map((e=>a.jsx(d.Option,{value:e.id,children:e.label},e.id)))})})})]}),a.jsx(i,{gutter:16,children:a.jsx(t,{span:24,children:a.jsx(e.Item,{name:"home_address",label:"家庭住址",children:a.jsx(x,{rows:3,placeholder:"请输入家庭住址",maxLength:500,showCount:!0})})})}),a.jsxs(i,{gutter:16,children:[a.jsx(t,{span:12,children:a.jsx(e.Item,{name:"emergency_contact_name",label:"紧急联系人",children:a.jsx(r,{placeholder:"请输入紧急联系人姓名"})})}),a.jsx(t,{span:12,children:a.jsx(e.Item,{name:"emergency_contact_phone",label:"紧急联系人电话",children:a.jsx(r,{placeholder:"请输入紧急联系人电话"})})})]})]}),a.jsxs(s,{title:a.jsx(j,{level:4,children:"工作信息"}),style:{marginBottom:16},children:[a.jsxs(i,{gutter:16,children:[a.jsx(t,{span:8,children:a.jsx(e.Item,{name:"hire_date",label:"入职日期",rules:[{required:!0,message:"请选择入职日期"}],children:a.jsx(n,{style:{width:"100%"},placeholder:"请选择入职日期"})})}),a.jsx(t,{span:8,children:a.jsx(e.Item,{name:"first_work_date",label:"首次工作日期",children:a.jsx(n,{style:{width:"100%"},placeholder:"请选择首次工作日期"})})}),a.jsx(t,{span:8,children:a.jsx(e.Item,{name:"status_lookup_value_id",label:"员工状态",rules:[{required:!0,message:"请选择员工状态"}],children:a.jsx(d,{placeholder:"请选择员工状态",loading:K,children:O.map((e=>a.jsx(d.Option,{value:e.id,children:e.label},e.id)))})})})]}),a.jsxs(i,{gutter:16,children:[a.jsx(t,{span:8,children:a.jsx(e.Item,{name:"employment_type_lookup_value_id",label:"雇佣类型",children:a.jsx(d,{placeholder:"请选择雇佣类型",loading:K,allowClear:!0,children:V.map((e=>a.jsx(d.Option,{value:e.id,children:e.label},e.id)))})})}),a.jsx(t,{span:8,children:a.jsx(e.Item,{name:"contract_type_lookup_value_id",label:"合同类型",children:a.jsx(d,{placeholder:"请选择合同类型",loading:K,allowClear:!0,children:q.map((e=>a.jsx(d.Option,{value:e.id,children:e.label},e.id)))})})}),a.jsx(t,{span:8,children:a.jsx(e.Item,{name:"education_level_lookup_value_id",label:"教育水平",children:a.jsx(d,{placeholder:"请选择教育水平",loading:K,allowClear:!0,children:M.map((e=>a.jsx(d.Option,{value:e.id,children:e.label},e.id)))})})})]}),a.jsxs(i,{gutter:16,children:[a.jsx(t,{span:8,children:a.jsx(e.Item,{name:"department_id",label:"部门",children:a.jsx(d,{placeholder:"请选择部门",loading:K,allowClear:!0,onChange:async e=>{try{const l=await p.getPersonnelCategories(e);Y(l),y.setFieldValue("personnel_category_id",void 0)}catch(l){}},children:f.map((e=>a.jsx(d.Option,{value:e.id,children:e.name},e.id)))})})}),a.jsx(t,{span:8,children:a.jsx(e.Item,{name:"personnel_category_id",label:"人员类别",children:a.jsx(d,{placeholder:"请选择人员类别",loading:K,allowClear:!0,children:k.map((e=>a.jsx(d.Option,{value:e.id,children:e.name},e.id)))})})}),a.jsx(t,{span:8,children:a.jsx(e.Item,{name:"actual_position_id",label:"职位",children:a.jsx(d,{placeholder:"请选择职位",loading:K,allowClear:!0,children:L.map((e=>a.jsx(d.Option,{value:e.id,children:e.name},e.id)))})})})]}),a.jsxs(i,{gutter:16,children:[a.jsx(t,{span:8,children:a.jsx(e.Item,{name:"current_position_start_date",label:"当前职位开始日期",children:a.jsx(n,{style:{width:"100%"},placeholder:"请选择当前职位开始日期"})})}),a.jsx(t,{span:8,children:a.jsx(e.Item,{name:"career_position_level_date",label:"职位等级日期",children:a.jsx(n,{style:{width:"100%"},placeholder:"请选择职位等级日期"})})}),a.jsx(t,{span:8,children:a.jsx(e.Item,{name:"interrupted_service_years",label:"中断服务年限",children:a.jsx(c,{style:{width:"100%"},min:0,max:50,precision:1,placeholder:"请输入中断服务年限"})})})]})]}),a.jsxs(s,{title:a.jsx(j,{level:4,children:"薪资等级信息"}),style:{marginBottom:16},children:[a.jsxs(i,{gutter:16,children:[a.jsx(t,{span:8,children:a.jsx(e.Item,{name:"salary_level_lookup_value_id",label:"薪资等级",children:a.jsx(d,{placeholder:"请选择薪资等级",loading:K,allowClear:!0,children:U.map((e=>a.jsx(d.Option,{value:e.id,children:e.label},e.id)))})})}),a.jsx(t,{span:8,children:a.jsx(e.Item,{name:"salary_grade_lookup_value_id",label:"薪资档次",children:a.jsx(d,{placeholder:"请选择薪资档次",loading:K,allowClear:!0,children:H.map((e=>a.jsx(d.Option,{value:e.id,children:e.label},e.id)))})})}),a.jsx(t,{span:8,children:a.jsx(e.Item,{name:"job_position_level_lookup_value_id",label:"职位等级",children:a.jsx(d,{placeholder:"请选择职位等级",loading:K,allowClear:!0,children:Z.map((e=>a.jsx(d.Option,{value:e.id,children:e.label},e.id)))})})})]}),a.jsxs(i,{gutter:16,children:[a.jsx(t,{span:12,children:a.jsx(e.Item,{name:"social_security_client_number",label:"社保客户号",children:a.jsx(r,{placeholder:"请输入社保客户号"})})}),a.jsx(t,{span:12,children:a.jsx(e.Item,{name:"housing_fund_client_number",label:"公积金客户号",children:a.jsx(r,{placeholder:"请输入公积金客户号"})})})]})]}),a.jsx(s,{title:a.jsx(j,{level:4,children:"状态设置"}),style:{marginBottom:16},children:a.jsx(i,{gutter:16,children:a.jsx(t,{span:24,children:a.jsx(e.Item,{name:"is_active",label:"是否激活",valuePropName:"checked",children:a.jsx(h,{})})})})})]})}));u.displayName="EmployeeForm";export{u as E};
