import{s as e,j as s,n as t,m as o,S as l,B as a,ba as n,e as r,F as i,a0 as m,_ as c,cz as d,cm as p,v as y,r as h,t as x,b2 as j,T as u,H as f,J as b,bn as g,q as v,o as N,Z as k}from"./antd-vendor-DWzn6iQK.js";import{k as S,u as z,b as C}from"./react-vendor-D9vUlElp.js";import{M as I,a as w}from"./index-Rv_gV0PU.js";import{e as E}from"./employee-service-D8n0hVPx.js";import{f as $,g as _}from"./hr-management-D97vxp0y.js";import{u as B}from"./i18n-vendor-DF0Yg0Xi.js";import"./state-vendor-BIBp6L7x.js";import"./admin-management-CYhSgojJ.js";import"./payroll-management-BvFUgCwh.js";import"./utils-vendor-CFhz7Dje.js";const M=({title:e})=>s.jsx("div",{className:"p-6 text-center",children:s.jsxs("p",{className:"typography-body text-secondary",children:[e," 内容将在此处显示"]})}),{Title:D,Text:H}=u,F=()=>{var u,F;const{t:Y}=B(["employee","common","hr"]),{employeeId:T}=S(),W=z(),[q,J]=C.useState(null),[K,L]=C.useState(!0),[U,V]=C.useState(null),[Z,A]=C.useState("basic"),{lookupMaps:G,loading:O}=$(),{permissions:P}=_(),Q=C.useCallback((async()=>{if(!T)return V(Y("employee:invalidEmployeeId")),void L(!1);try{L(!0),V(null);const e=await E.getEmployeeByIdFromView(T);J(e)}catch(s){V(Y("employee:fetchError")),e.error(Y("employee:fetchError"))}finally{L(!1)}}),[T,Y]);C.useEffect((()=>{Q()}),[Q]);const R=e=>{if(!e)return Y("employee:unknownEmployee");const s=[e.last_name,e.first_name].filter(Boolean);return s.length>0?s.join(""):e.employee_code||Y("employee:unknownEmployee")},X=C.useCallback((()=>{q&&W(`/hr/employees/${q.id}/edit`)}),[q,W]),ee=C.useCallback((()=>{W("/hr/employees")}),[W]);if(K||O)return s.jsx(I,{title:Y("employee:employeeDetail"),subtitle:Y("employee:loading"),children:s.jsx("div",{className:"loading-container d-flex justify-center items-center",style:{height:"400px"},children:s.jsx(t,{size:"large"})})});if(U||!q)return s.jsx(I,{title:Y("employee:employeeDetail"),subtitle:Y("employee:employeeNotFound"),children:s.jsx(w,{children:s.jsx(o,{message:Y("employee:error"),description:U||Y("employee:employeeNotFound"),type:"error",showIcon:!0,action:s.jsxs(l,{children:[s.jsx(a,{size:"small",onClick:ee,children:Y("common:back")}),s.jsx(a,{size:"small",type:"primary",onClick:Q,children:Y("common:retry")})]})})})});const se=s.jsxs(l,{children:[s.jsx(a,{icon:s.jsx(n,{}),onClick:ee,className:"modern-button variant-ghost",children:Y("common:back")}),P.canUpdate&&s.jsx(a,{type:"primary",icon:s.jsx(r,{}),onClick:X,className:"modern-button variant-primary",children:Y("common:edit")})]}),te=[{title:Y("common:home"),href:"/"},{title:Y("common:hrManagement"),href:"/hr"},{title:Y("employee:employeeManagement"),href:"/hr/employees"},{title:R(q)}],oe=[{key:"basic",label:s.jsxs(l,{children:[s.jsx(i,{}),Y("employee:basicInfo")]}),children:s.jsx(M,{title:Y("employee:basicInfo")})},{key:"job",label:s.jsxs(l,{children:[s.jsx(m,{}),Y("employee:jobInfo")]}),children:s.jsx(M,{title:Y("employee:jobInfo")})},{key:"compensation",label:s.jsxs(l,{children:[s.jsx(c,{}),Y("employee:compensationHistory")]}),children:s.jsx(M,{title:Y("employee:compensationHistory")})},{key:"contract",label:s.jsxs(l,{children:[s.jsx(d,{}),Y("employee:contractInfo")]}),children:s.jsx(M,{title:Y("employee:contractInfo")})},{key:"history",label:s.jsxs(l,{children:[s.jsx(p,{}),Y("employee:jobHistory")]}),children:s.jsx(M,{title:Y("employee:jobHistory")})},{key:"leave",label:s.jsxs(l,{children:[s.jsx(y,{}),Y("employee:leaveBalance")]}),children:s.jsx(M,{title:Y("employee:leaveBalance")})}];return s.jsxs(I,{title:R(q),subtitle:`${Y("employee:employeeCode")}: ${q.employee_code||Y("common:notSet")}`,headerExtra:se,showBreadcrumb:!0,breadcrumbItems:te,children:[s.jsx(w,{className:"mb-6",children:s.jsxs(h,{gutter:[24,24],align:"middle",children:[s.jsx(x,{xs:24,sm:12,md:8,children:s.jsxs("div",{className:"d-flex items-center gap-4",children:[s.jsx(j,{size:80,icon:s.jsx(i,{}),className:"shadow-md",style:{backgroundColor:"#3b82f6",fontSize:"32px"}}),s.jsxs("div",{children:[s.jsx(D,{level:3,className:"typography-heading-2 mb-1",children:R(q)}),s.jsxs(l,{direction:"vertical",size:"small",children:[(e=>{const t=e.toLowerCase();let o="default";return t.includes("active")||t.includes("在职")?o="success":t.includes("probation")||t.includes("试用")?o="warning":(t.includes("terminated")||t.includes("离职"))&&(o="error"),s.jsx(N,{color:o,className:"typography-caption-strong",children:e})})(q.employee_status||"在职"),s.jsx(H,{className:"typography-caption text-secondary",children:q.department_name||q.departmentName||Y("common:notSet")})]})]})]})}),s.jsx(x,{xs:24,sm:12,md:8,children:s.jsxs(h,{gutter:16,children:[s.jsx(x,{span:12,children:s.jsx(f,{title:Y("employee:seniority"),value:(e=>{if(!e)return Y("common:notSet");try{const s=k(e),t=k(),o=t.diff(s,"year"),l=t.diff(s.add(o,"year"),"month");return o>0?`${o}${Y("common:years")}${l}${Y("common:months")}`:`${l}${Y("common:months")}`}catch{return Y("common:calculateError")}})(null==(u=q.hire_date)?void 0:u.toString()),prefix:s.jsx(y,{}),valueStyle:{fontSize:"18px",fontWeight:"600",color:"#059669"}})}),s.jsx(x,{span:12,children:s.jsx(f,{title:Y("employee:position"),value:q.position_name||Y("common:notSet"),prefix:s.jsx(b,{}),valueStyle:{fontSize:"14px",fontWeight:"500",color:"#3b82f6"}})})]})}),s.jsx(x,{xs:24,sm:24,md:8,children:s.jsx("div",{className:"text-right",children:s.jsxs(l,{direction:"vertical",size:"small",className:"w-full",children:[q.email&&s.jsxs("div",{className:"d-flex items-center gap-2 justify-end",children:[s.jsx(g,{className:"text-accent"}),s.jsx(H,{className:"typography-body",children:s.jsx("a",{href:`mailto:${q.email}`,className:"text-accent",children:q.email})})]}),s.jsxs("div",{className:"d-flex items-center gap-2 justify-end",children:[s.jsx(y,{className:"text-tertiary"}),s.jsxs(H,{className:"typography-caption",children:[Y("employee:hireDate"),": ",(e=>{if(!e)return Y("common:notSet");try{return k(e).format("YYYY-MM-DD")}catch{return Y("common:formatError")}})(null==(F=q.hire_date)?void 0:F.toString())]})]})]})})})]})}),s.jsx(w,{children:s.jsx(v,{activeKey:Z,onChange:A,items:oe,className:"modern-tabs",size:"large"})})]})};export{F as default};
