# Payrollæ¨¡å—ä»£ç è´¨é‡ä¼˜åŒ–ä»»åŠ¡è®¡åˆ’

## ğŸ“Š é¡¹ç›®æ¦‚è¿°

### é¡¹ç›®èƒŒæ™¯
Payrollæ¨¡å—ä½œä¸ºè–ªèµ„ç®¡ç†ç³»ç»Ÿçš„æ ¸å¿ƒæ¨¡å—ï¼Œæ‰¿æ‹…ç€è–ªèµ„è®¡ç®—ã€æ•°æ®å¯¼å…¥ã€æŠ¥è¡¨ç”Ÿæˆç­‰å…³é”®ä¸šåŠ¡åŠŸèƒ½ã€‚ç»è¿‡æ·±å…¥çš„ä»£ç è´¨é‡è¯„ä¼°ï¼Œå‘ç°è¯¥æ¨¡å—åœ¨ä»£ç å¯è¯»æ€§ã€æµ‹è¯•è¦†ç›–ç‡ã€å¼‚å¸¸å¤„ç†ç­‰æ–¹é¢å­˜åœ¨æ˜¾è‘—æ”¹è¿›ç©ºé—´ï¼ŒäºŸéœ€è¿›è¡Œç³»ç»Ÿæ€§çš„ä¼˜åŒ–é‡æ„ã€‚

### é¡¹ç›®ç›®æ ‡
- **æå‡ä»£ç è´¨é‡**ï¼šå°†æ•´ä½“ä»£ç è´¨é‡ä»6.2/10æå‡è‡³8.5/10
- **å¢å¼ºç³»ç»Ÿç¨³å®šæ€§**ï¼šå‡å°‘ç”Ÿäº§ç¯å¢ƒBug 60%ä»¥ä¸Š
- **æé«˜å¼€å‘æ•ˆç‡**ï¼šæ–°åŠŸèƒ½å¼€å‘æ—¶é—´å‡å°‘30%
- **å»ºç«‹è´¨é‡æ ‡å‡†**ï¼šå»ºç«‹å¯æŒç»­çš„ä»£ç è´¨é‡ä¿éšœä½“ç³»

### é¡¹ç›®èŒƒå›´
- **æ ¸å¿ƒæ¨¡å—**ï¼š`src/pages/Payroll/` å®Œæ•´ç›®å½•
- **æ–‡ä»¶æ•°é‡**ï¼šçº¦150ä¸ªæºä»£ç æ–‡ä»¶
- **ä»£ç è¡Œæ•°**ï¼šä¼°è®¡30,000+è¡Œä»£ç 
- **åŠŸèƒ½åŸŸ**ï¼šè–ªèµ„è®¡ç®—ã€æ‰¹é‡å¯¼å…¥ã€å·¥ä½œæµç®¡ç†ã€æŠ¥è¡¨ç”Ÿæˆ

---

## ğŸ” ä»£ç è´¨é‡è¯„ä¼°ç»“æœ

### ç»¼åˆè¯„åˆ†ï¼š6.2/10 (ä¸­ç­‰åä¸Š)

| è¯„ä¼°ç»´åº¦ | å½“å‰å¾—åˆ† | ç›®æ ‡å¾—åˆ† | é—®é¢˜ç¨‹åº¦ | ä¼˜å…ˆçº§ |
|---------|---------|---------|----------|-------|
| **ä»£ç å¯è¯»æ€§** | 6/10 | 8.5/10 | ğŸŸ¡ ä¸­ç­‰ | P1 |
| **ä»£ç é‡å¤æ€§** | 5/10 | 8/10 | ğŸ”´ ä¸¥é‡ | P1 |
| **ç¼–ç æ ‡å‡†éµå¾ª** | 7/10 | 8.5/10 | ğŸŸ¡ ä¸­ç­‰ | P2 |
| **æ€§èƒ½è¡¨ç°** | 6/10 | 8/10 | ğŸŸ¡ ä¸­ç­‰ | P2 |
| **å•å…ƒæµ‹è¯•è¦†ç›–ç‡** | 1/10 | 8/10 | ğŸ”´ ä¸¥é‡ | P1 |
| **å¼‚å¸¸å¤„ç†æœºåˆ¶** | 5/10 | 8/10 | ğŸ”´ ä¸¥é‡ | P1 |
| **å®‰å…¨æ€§å®¡æŸ¥** | 6/10 | 8/10 | ğŸŸ¡ ä¸­ç­‰ | P2 |

---

## ğŸ”§ é—®é¢˜åˆ†æè¯¦æƒ…

### 1. ä»£ç å¯è¯»æ€§é—®é¢˜ (ä¼˜å…ˆçº§ï¼šP1)

#### ä¸»è¦é—®é¢˜
- **è¶…é•¿å‡½æ•°**ï¼š`useImportFlow.ts` æ ¸å¿ƒå‡½æ•°è¶…è¿‡200è¡Œ
- **å¤æ‚æ¡ä»¶è¯­å¥**ï¼š`dataProcessing.ts` ä¸­å­˜åœ¨å¤šå±‚åµŒå¥—åˆ¤æ–­
- **å‘½åä¸ä¸€è‡´**ï¼šæ··ç”¨camelCaseå’Œsnake_caseå‘½åè§„èŒƒ
- **æ³¨é‡Šä¸è¶³**ï¼šå…³é”®ä¸šåŠ¡é€»è¾‘ç¼ºä¹è§£é‡Šæ€§æ³¨é‡Š

#### å…·ä½“ç¤ºä¾‹
```typescript
// âŒ é—®é¢˜ä»£ç ï¼šå¤æ‚çš„æ¡ä»¶åˆ¤æ–­é€»è¾‘
if (rawIdentity.includes(t('payroll:auto_text_e59ca8')) || 
    rawIdentity.includes(t('payroll:auto_text_e7bc96')) || 
    rawIdentity.includes(t('payroll:auto_text_e59198'))) {
  personnelType = 'REGULAR';
} else if (rawIdentity.includes(t('payroll:auto_text_e88198')) || 
           rawIdentity.includes(t('payroll:auto_text_e59088')) || 
           rawIdentity.includes(t('payroll:auto_text_e6b4be'))) {
  personnelType = 'HIRED';
}

// âœ… æ”¹è¿›åï¼šæ¸…æ™°çš„é€»è¾‘åˆ†ç¦»
const PERSONNEL_TYPE_PATTERNS = {
  REGULAR: ['åœ¨èŒ', 'ç¼–åˆ¶', 'å‘˜å·¥'],
  HIRED: ['è˜ç”¨', 'åˆåŒ', 'æ´¾é£', 'ä¸´æ—¶']
} as const;

const determinePersonnelType = (identity: string): PersonnelType => {
  // å…·ä½“å®ç°...
};
```

### 2. ä»£ç é‡å¤æ€§é—®é¢˜ (ä¼˜å…ˆçº§ï¼šP1)

#### é‡å¤åº¦ç»Ÿè®¡
- **APIé”™è¯¯å¤„ç†**ï¼š63ä¸ªæ–‡ä»¶ä¸­é‡å¤ç›¸åŒçš„try-catchæ¨¡å¼ (é‡å¤åº¦ï¼š~80%)
- **LoadingçŠ¶æ€ç®¡ç†**ï¼šç›¸ä¼¼çš„loadingçŠ¶æ€å¤„ç†åˆ†æ•£åœ¨å„å¤„ (é‡å¤åº¦ï¼š~70%)
- **æ•°æ®éªŒè¯é€»è¾‘**ï¼šå¤šä¸ªç»„ä»¶é‡å¤ç±»ä¼¼çš„éªŒè¯é€»è¾‘ (é‡å¤åº¦ï¼š~60%)
- **è¡¨æ ¼é…ç½®**ï¼šProTableé…ç½®åœ¨å¤šä¸ªé¡µé¢é‡å¤ (é‡å¤åº¦ï¼š~50%)

#### æ”¹è¿›ç­–ç•¥
- æŠ½å–é€šç”¨Hookï¼š`useApiCall`ã€`useLoadingState`
- åˆ›å»ºç»Ÿä¸€éªŒè¯å™¨ï¼š`payrollDataValidator`
- æ ‡å‡†åŒ–è¡¨æ ¼é…ç½®ï¼š`useTableConfig`

### 3. å•å…ƒæµ‹è¯•è¦†ç›–ç‡é—®é¢˜ (ä¼˜å…ˆçº§ï¼šP1)

#### å½“å‰çŠ¶æ€
- **æµ‹è¯•æ–‡ä»¶æ•°é‡**ï¼š0ä¸ª
- **ä»£ç è¦†ç›–ç‡**ï¼š0%
- **å…³é”®åŠŸèƒ½æµ‹è¯•**ï¼šæ— è‡ªåŠ¨åŒ–æµ‹è¯•ä¿éšœ

#### æµ‹è¯•ç›®æ ‡
- **å•å…ƒæµ‹è¯•è¦†ç›–ç‡**ï¼šâ‰¥80%
- **é›†æˆæµ‹è¯•è¦†ç›–ç‡**ï¼šâ‰¥60%
- **å…³é”®è·¯å¾„æµ‹è¯•**ï¼š100%è¦†ç›–

### 4. å¼‚å¸¸å¤„ç†é—®é¢˜ (ä¼˜å…ˆçº§ï¼šP1)

#### ä¸»è¦é—®é¢˜
- **Silent Catch**ï¼šå¤šå¤„é”™è¯¯è¢«æ•è·ä½†æœªæ­£ç¡®å¤„ç†
- **é”™è¯¯è¾¹ç•Œç¼ºå¤±**ï¼šReactç»„ä»¶ç¼ºä¹é”™è¯¯è¾¹ç•Œä¿æŠ¤
- **ç”¨æˆ·ä½“éªŒå·®**ï¼šAPIå¤±è´¥æ—¶ç¼ºä¹å‹å¥½çš„é”™è¯¯æç¤º

#### æ”¹è¿›æ–¹æ¡ˆ
```typescript
// æ–°å»ºï¼šç»Ÿä¸€é”™è¯¯å¤„ç†æœºåˆ¶
export class PayrollError extends Error {
  constructor(
    message: string,
    public code: string,
    public context?: Record<string, any>
  ) {
    super(message);
    this.name = 'PayrollError';
  }
}

// é”™è¯¯è¾¹ç•Œç»„ä»¶
export class PayrollErrorBoundary extends React.Component {
  // å®ç°é”™è¯¯è¾¹ç•Œé€»è¾‘
}
```

### 5. æ€§èƒ½é—®é¢˜ (ä¼˜å…ˆçº§ï¼šP2)

#### æ€§èƒ½ç“¶é¢ˆ
- **è¿‡åº¦è°ƒè¯•æ—¥å¿—**ï¼š55ä¸ªæ–‡ä»¶åŒ…å«console.logï¼Œå½±å“ç”Ÿäº§æ€§èƒ½
- **æœªä¼˜åŒ–æ¸²æŸ“**ï¼šå¤æ‚ç»„ä»¶ç¼ºä¹React.memoä¼˜åŒ–
- **å¤§æ•°æ®å¤„ç†**ï¼šæ‰¹é‡å¯¼å…¥é¡µé¢å¤„ç†å¤§é‡æ•°æ®æ—¶æ€§èƒ½å·®
- **å†…å­˜æ³„æ¼é£é™©**ï¼šuseEffectç¼ºä¹æ¸…ç†å‡½æ•°

#### ä¼˜åŒ–ç­–ç•¥
```typescript
// Reactæ€§èƒ½ä¼˜åŒ–ç¤ºä¾‹
export const PayrollEntriesTable = React.memo(({ data, ...props }) => {
  const memoizedColumns = useMemo(() => 
    generateTableColumns(props.columnConfig), [props.columnConfig]
  );
  
  return <ProTable columns={memoizedColumns} data={data} />;
});
```

---

## ğŸ¯ ä¼˜åŒ–å®æ–½æ–¹æ¡ˆ

### æ•´ä½“æ¶æ„ä¼˜åŒ–ç­–ç•¥

#### 1. åˆ†å±‚æ¶æ„é‡æ„
```
src/pages/Payroll/
â”œâ”€â”€ components/          # è§†å›¾å±‚ç»„ä»¶
â”‚   â”œâ”€â”€ common/         # é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ forms/          # è¡¨å•ç»„ä»¶
â”‚   â””â”€â”€ tables/         # è¡¨æ ¼ç»„ä»¶
â”œâ”€â”€ hooks/              # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ api/           # APIè°ƒç”¨Hook
â”‚   â”œâ”€â”€ state/         # çŠ¶æ€ç®¡ç†Hook
â”‚   â””â”€â”€ utils/         # å·¥å…·Hook
â”œâ”€â”€ services/           # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ api/           # APIæœåŠ¡
â”‚   â”œâ”€â”€ validators/    # æ•°æ®éªŒè¯
â”‚   â””â”€â”€ transformers/  # æ•°æ®è½¬æ¢
â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°å±‚
â”‚   â”œâ”€â”€ constants/     # å¸¸é‡å®šä¹‰
â”‚   â”œâ”€â”€ helpers/       # è¾…åŠ©å‡½æ•°
â”‚   â””â”€â”€ formatters/    # æ ¼å¼åŒ–å·¥å…·
â”œâ”€â”€ types/              # ç±»å‹å®šä¹‰å±‚
â””â”€â”€ __tests__/          # æµ‹è¯•æ–‡ä»¶å±‚
```

#### 2. æ ¸å¿ƒç»„ä»¶é‡æ„

##### PayrollEntryDetailModal ç»„ä»¶æ‹†åˆ†
```typescript
// å½“å‰ï¼š500+è¡Œå•ä¸€ç»„ä»¶
// ç›®æ ‡ï¼šæ‹†åˆ†ä¸ºå¤šä¸ªèŒè´£æ˜ç¡®çš„å­ç»„ä»¶

PayrollEntryDetailModal/
â”œâ”€â”€ index.tsx              // ä¸»ç»„ä»¶ (50è¡Œ)
â”œâ”€â”€ EmployeeInfoSection.tsx // å‘˜å·¥ä¿¡æ¯å±•ç¤º
â”œâ”€â”€ PayrollItemsSection.tsx // è–ªèµ„é¡¹ç›®åˆ—è¡¨  
â”œâ”€â”€ PayrollSummaryCard.tsx  // æ±‡æ€»ä¿¡æ¯å¡ç‰‡
â””â”€â”€ PayrollDetailTable.tsx  // æ˜ç»†æ•°æ®è¡¨æ ¼
```

##### useImportFlow Hook é‡æ„
```typescript
// å½“å‰ï¼š200+è¡Œå¤æ‚Hook
// ç›®æ ‡ï¼šæ‹†åˆ†ä¸ºå¤šä¸ªä¸“ç”¨Hook

â”œâ”€â”€ useImportFlow.ts        // ä¸»æµç¨‹ç¼–æ’ (50è¡Œ)
â”œâ”€â”€ useImportData.ts        // æ•°æ®ç®¡ç†
â”œâ”€â”€ useImportValidation.ts  // éªŒè¯é€»è¾‘
â”œâ”€â”€ useImportExecution.ts   // æ‰§è¡Œæ§åˆ¶
â””â”€â”€ useImportProgress.ts    // è¿›åº¦ç®¡ç†
```

#### 3. é€šç”¨æ¨¡å—æŠ½å–

##### APIè°ƒç”¨æ ‡å‡†åŒ–
```typescript
// æ–°å»ºï¼šhooks/api/useApiCall.ts
export const useApiCall = <T>(
  apiFunction: (...args: any[]) => Promise<T>,
  options?: ApiCallOptions
) => {
  // ç»Ÿä¸€çš„APIè°ƒç”¨ã€é”™è¯¯å¤„ç†ã€LoadingçŠ¶æ€ç®¡ç†
};

// ä½¿ç”¨ç¤ºä¾‹
const { data, loading, error, execute } = useApiCall(payrollApi.getEntries);
```

##### è¡¨å•éªŒè¯ç»Ÿä¸€åŒ–
```typescript
// æ–°å»ºï¼šservices/validators/
export const payrollEntryValidator = {
  validateEmployeeId: (id: number) => id > 0,
  validateSalaryAmount: (amount: number) => amount >= 0,
  validatePayrollData: (data: PayrollEntryData) => {
    // å®Œæ•´æ•°æ®éªŒè¯é€»è¾‘
  }
};
```

---

## ğŸ“… åˆ†é˜¶æ®µæ‰§è¡Œè®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€è®¾æ–½å»ºè®¾ (ç¬¬1-2å‘¨)

#### ç›®æ ‡
å»ºç«‹ä»£ç è´¨é‡ä¿éšœåŸºç¡€è®¾æ–½ï¼Œä¸ºåç»­ä¼˜åŒ–å·¥ä½œå¥ å®šåŸºç¡€ã€‚

#### å…·ä½“ä»»åŠ¡

##### Week 1: æµ‹è¯•æ¡†æ¶å»ºè®¾
- **ä»»åŠ¡1.1**ï¼šé…ç½®Jestå’ŒReact Testing Library
  - åˆ›å»ºæµ‹è¯•é…ç½®æ–‡ä»¶
  - è®¾ç½®æµ‹è¯•ç¯å¢ƒå˜é‡
  - é…ç½®æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
  - **äº¤ä»˜ç‰©**ï¼šå®Œæ•´çš„æµ‹è¯•æ¡†æ¶é…ç½®

- **ä»»åŠ¡1.2**ï¼šæ ¸å¿ƒæœåŠ¡å•å…ƒæµ‹è¯•
  - `payrollApi.test.ts` - APIæœåŠ¡æµ‹è¯•
  - `payrollUtils.test.ts` - å·¥å…·å‡½æ•°æµ‹è¯•
  - `payrollValidators.test.ts` - éªŒè¯å™¨æµ‹è¯•
  - **äº¤ä»˜ç‰©**ï¼š30ä¸ªæ ¸å¿ƒå‡½æ•°çš„å•å…ƒæµ‹è¯•

##### Week 2: å¼‚å¸¸å¤„ç†æ ‡å‡†åŒ–
- **ä»»åŠ¡2.1**ï¼šåˆ›å»ºé”™è¯¯å¤„ç†æœºåˆ¶
  ```typescript
  // æ–°å»ºæ–‡ä»¶
  â””â”€â”€ utils/errorHandling.ts
  â””â”€â”€ components/PayrollErrorBoundary.tsx
  â””â”€â”€ hooks/useErrorHandler.ts
  ```
  - **äº¤ä»˜ç‰©**ï¼šç»Ÿä¸€çš„é”™è¯¯å¤„ç†ä½“ç³»

- **ä»»åŠ¡2.2**ï¼šé”™è¯¯è¾¹ç•Œé›†æˆ
  - åœ¨å…³é”®ç»„ä»¶æ·»åŠ é”™è¯¯è¾¹ç•Œ
  - å®ç°ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º
  - å»ºç«‹é”™è¯¯ç›‘æ§æœºåˆ¶
  - **äº¤ä»˜ç‰©**ï¼šå®Œæ•´çš„é”™è¯¯ä¿æŠ¤æœºåˆ¶

#### éªŒæ”¶æ ‡å‡†
- [ ] æµ‹è¯•æ¡†æ¶æ­£å¸¸è¿è¡Œ
- [ ] æ ¸å¿ƒæœåŠ¡æµ‹è¯•è¦†ç›–ç‡è¾¾åˆ°60%
- [ ] é”™è¯¯å¤„ç†æœºåˆ¶å®Œæ•´éƒ¨ç½²
- [ ] æ‰€æœ‰ç°æœ‰åŠŸèƒ½æ­£å¸¸è¿è¡Œ

---

### ç¬¬äºŒé˜¶æ®µï¼šä»£ç é‡æ„ä¼˜åŒ– (ç¬¬3-4å‘¨)

#### ç›®æ ‡
æ¶ˆé™¤ä»£ç é‡å¤ï¼Œæå‡ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

#### å…·ä½“ä»»åŠ¡

##### Week 3: é€šç”¨HookæŠ½å–
- **ä»»åŠ¡3.1**ï¼šAPIè°ƒç”¨Hookæ ‡å‡†åŒ–
  ```typescript
  // æ–°å»ºæ–‡ä»¶
  â””â”€â”€ hooks/api/
      â”œâ”€â”€ useApiCall.ts
      â”œâ”€â”€ usePayrollQueries.ts
      â””â”€â”€ usePayrollMutations.ts
  ```
  - ç»Ÿä¸€APIè°ƒç”¨æ¨¡å¼
  - æ ‡å‡†åŒ–Loadingå’ŒErrorçŠ¶æ€
  - **äº¤ä»˜ç‰©**ï¼šé€šç”¨APIè°ƒç”¨Hook

- **ä»»åŠ¡3.2**ï¼šè¡¨å•å’ŒéªŒè¯Hook
  ```typescript
  // æ–°å»ºæ–‡ä»¶
  â””â”€â”€ hooks/forms/
      â”œâ”€â”€ useFormValidation.ts
      â”œâ”€â”€ usePayrollForm.ts
      â””â”€â”€ useImportForm.ts
  ```
  - æŠ½å–è¡¨å•é€»è¾‘
  - ç»Ÿä¸€éªŒè¯è§„åˆ™
  - **äº¤ä»˜ç‰©**ï¼šå¯å¤ç”¨çš„è¡¨å•Hook

##### Week 4: ç»„ä»¶æ‹†åˆ†é‡æ„
- **ä»»åŠ¡4.1**ï¼šå¤§å‹ç»„ä»¶æ‹†åˆ†
  - `PayrollEntryDetailModal` æ‹†åˆ†ä¸º5ä¸ªå­ç»„ä»¶
  - `PayrollBulkImportPageV3` ä¼˜åŒ–ç»„ä»¶ç»“æ„
  - `useImportFlow` æ‹†åˆ†ä¸º4ä¸ªä¸“ç”¨Hook
  - **äº¤ä»˜ç‰©**ï¼šé‡æ„åçš„ç»„ä»¶åº“

- **ä»»åŠ¡4.2**ï¼šä»£ç é‡å¤æ¶ˆé™¤
  - æå–é‡å¤çš„ä¸šåŠ¡é€»è¾‘
  - ç»Ÿä¸€æ ·å¼å’Œé…ç½®
  - ä¼˜åŒ–importè¯­å¥
  - **äº¤ä»˜ç‰©**ï¼šä»£ç é‡å¤ç‡é™ä½è‡³30%ä»¥ä¸‹

#### éªŒæ”¶æ ‡å‡†
- [ ] å•ä¸ªæ–‡ä»¶ä»£ç è¡Œæ•° â‰¤ 300è¡Œ
- [ ] å‡½æ•°å¤æ‚åº¦ â‰¤ 10
- [ ] ä»£ç é‡å¤ç‡ â‰¤ 30%
- [ ] æ‰€æœ‰é‡æ„ç»„ä»¶åŠŸèƒ½æ­£å¸¸

---

### ç¬¬ä¸‰é˜¶æ®µï¼šæ€§èƒ½ä¼˜åŒ– (ç¬¬5å‘¨)

#### ç›®æ ‡
æå‡ç»„ä»¶æ¸²æŸ“æ€§èƒ½ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€‚

#### å…·ä½“ä»»åŠ¡

##### Week 5: Reactæ€§èƒ½ä¼˜åŒ–
- **ä»»åŠ¡5.1**ï¼šç»„ä»¶æ¸²æŸ“ä¼˜åŒ–
  ```typescript
  // ä¼˜åŒ–ç­–ç•¥
  - æ·»åŠ React.memoåŒ…è£…
  - ä½¿ç”¨useMemoä¼˜åŒ–è®¡ç®—
  - ä½¿ç”¨useCallbackä¼˜åŒ–å‡½æ•°ä¼ é€’
  - å®ç°è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¤§æ•°æ®è¡¨æ ¼ï¼‰
  ```
  - **äº¤ä»˜ç‰©**ï¼šæ€§èƒ½ä¼˜åŒ–çš„ç»„ä»¶åº“

- **ä»»åŠ¡5.2**ï¼šç”Ÿäº§ç¯å¢ƒä¼˜åŒ–
  - ç§»é™¤æ‰€æœ‰console.logè°ƒè¯•ä»£ç 
  - å®ç°æ¡ä»¶æ€§æ—¥å¿—ç³»ç»Ÿ
  - ä¼˜åŒ–Bundleå¤§å°
  - **äº¤ä»˜ç‰©**ï¼šç”Ÿäº§ç¯å¢ƒä¼˜åŒ–æ–¹æ¡ˆ

- **ä»»åŠ¡5.3**ï¼šå†…å­˜æ³„æ¼ä¿®å¤
  - æ·»åŠ useEffectæ¸…ç†å‡½æ•°
  - ä¼˜åŒ–äº‹ä»¶ç›‘å¬å™¨ç®¡ç†
  - ä¿®å¤è®¢é˜…æ³„æ¼é—®é¢˜
  - **äº¤ä»˜ç‰©**ï¼šå†…å­˜å®‰å…¨çš„ä»£ç åº“

#### éªŒæ”¶æ ‡å‡†
- [ ] é¡µé¢åŠ è½½æ—¶é—´å‡å°‘ â‰¥ 20%
- [ ] å¤§æ•°æ®è¡¨æ ¼æ¸²æŸ“æµç•…
- [ ] æ— å†…å­˜æ³„æ¼é—®é¢˜
- [ ] ç”Ÿäº§ç¯å¢ƒæ— è°ƒè¯•ä»£ç 

---

### ç¬¬å››é˜¶æ®µï¼šå®‰å…¨æ€§åŠ å›º (ç¬¬6å‘¨)

#### ç›®æ ‡
å¢å¼ºæ•°æ®å®‰å…¨æ€§ï¼Œå®Œå–„æƒé™æ§åˆ¶ã€‚

#### å…·ä½“ä»»åŠ¡

##### Week 6: å®‰å…¨æ€§åŠ å›º
- **ä»»åŠ¡6.1**ï¼šæ•°æ®éªŒè¯å¢å¼º
  ```typescript
  // ä½¿ç”¨Zodè¿›è¡Œè¿è¡Œæ—¶éªŒè¯
  export const PayrollEntrySchema = z.object({
    employeeId: z.number().positive(),
    grossPay: z.number().min(0),
    deductions: z.record(z.number().min(0))
  });
  ```
  - **äº¤ä»˜ç‰©**ï¼šå®Œæ•´çš„æ•°æ®éªŒè¯ä½“ç³»

- **ä»»åŠ¡6.2**ï¼šæƒé™æ£€æŸ¥å®Œå–„
  ```typescript
  // æƒé™å®ˆå«ç»„ä»¶
  export const withPayrollPermission = (
    Component: React.ComponentType,
    permission: string
  ) => {
    // æƒé™æ£€æŸ¥é€»è¾‘
  };
  ```
  - **äº¤ä»˜ç‰©**ï¼šç»†ç²’åº¦æƒé™æ§åˆ¶ç³»ç»Ÿ

- **ä»»åŠ¡6.3**ï¼šå®‰å…¨å®¡è®¡
  - æ£€æŸ¥æ•°æ®è¾“å‡ºå®‰å…¨æ€§
  - å®¡æŸ¥ç”¨æˆ·è¾“å…¥å¤„ç†
  - éªŒè¯APIè°ƒç”¨å®‰å…¨æ€§
  - **äº¤ä»˜ç‰©**ï¼šå®‰å…¨å®¡è®¡æŠ¥å‘Š

#### éªŒæ”¶æ ‡å‡†
- [ ] æ‰€æœ‰ç”¨æˆ·è¾“å…¥ç»è¿‡éªŒè¯
- [ ] æ•æ„Ÿæ•°æ®ä¿æŠ¤åˆ°ä½
- [ ] æƒé™æ§åˆ¶è¦†ç›–æ‰€æœ‰æ“ä½œ
- [ ] é€šè¿‡å®‰å…¨å®¡è®¡

---

### ç¬¬äº”é˜¶æ®µï¼šè´¨é‡ç›‘æ§å»ºè®¾ (ç¬¬7å‘¨)

#### ç›®æ ‡
å»ºç«‹å¯æŒç»­çš„ä»£ç è´¨é‡ä¿éšœæœºåˆ¶ã€‚

#### å…·ä½“ä»»åŠ¡

##### Week 7: è´¨é‡ä¿éšœä½“ç³»
- **ä»»åŠ¡7.1**ï¼šé™æ€ä»£ç åˆ†æé…ç½®
  ```json
  // .eslintrc.payroll.json
  {
    "rules": {
      "max-lines": ["error", 300],
      "max-complexity": ["error", 10],
      "no-console": "error"
    }
  }
  ```
  - **äº¤ä»˜ç‰©**ï¼šä»£ç è´¨é‡æ£€æŸ¥è§„åˆ™

- **ä»»åŠ¡7.2**ï¼šæŒç»­é›†æˆé…ç½®
  - é…ç½®GitHub Actions
  - é›†æˆæµ‹è¯•è¦†ç›–ç‡æ£€æŸ¥
  - è®¾ç½®è´¨é‡é—¨ç¦
  - **äº¤ä»˜ç‰©**ï¼šCI/CDæµæ°´çº¿

- **ä»»åŠ¡7.3**ï¼šæ–‡æ¡£å®Œå–„
  - ç»„ä»¶ä½¿ç”¨æ–‡æ¡£
  - APIæ¥å£æ–‡æ¡£
  - å¼€å‘è§„èŒƒæ–‡æ¡£
  - **äº¤ä»˜ç‰©**ï¼šå®Œæ•´çš„é¡¹ç›®æ–‡æ¡£

#### éªŒæ”¶æ ‡å‡†
- [ ] æµ‹è¯•è¦†ç›–ç‡ â‰¥ 80%
- [ ] æ‰€æœ‰ESLintè§„åˆ™é€šè¿‡
- [ ] CI/CDæµæ°´çº¿æ­£å¸¸è¿è¡Œ
- [ ] æ–‡æ¡£å®Œæ•´ä¸”å‡†ç¡®

---

## ğŸ‘¥ èµ„æºé…ç½®ä¸äººå‘˜å®‰æ’

### å›¢é˜Ÿé…ç½®

#### æ ¸å¿ƒå›¢é˜Ÿæˆå‘˜
- **é¡¹ç›®è´Ÿè´£äºº** (1äºº)ï¼šæ•´ä½“ç»Ÿç­¹å’ŒæŠ€æœ¯å†³ç­–
- **é«˜çº§å‰ç«¯å¼€å‘** (2äºº)ï¼šæ ¸å¿ƒé‡æ„å’Œæ¶æ„è®¾è®¡
- **ä¸­çº§å‰ç«¯å¼€å‘** (1äºº)ï¼šæµ‹è¯•ç¼–å†™å’Œæ–‡æ¡£æ•´ç†
- **QAå·¥ç¨‹å¸ˆ** (1äºº)ï¼šè´¨é‡ä¿è¯å’Œæµ‹è¯•éªŒè¯

#### æŠ€èƒ½è¦æ±‚
| è§’è‰² | å¿…éœ€æŠ€èƒ½ | åŠ åˆ†æŠ€èƒ½ |
|------|---------|----------|
| é¡¹ç›®è´Ÿè´£äºº | Reactæ¶æ„è®¾è®¡ã€é¡¹ç›®ç®¡ç† | è–ªèµ„ä¸šåŠ¡ç†è§£ |
| é«˜çº§å¼€å‘ | React/TypeScriptç²¾é€šã€é‡æ„ç»éªŒ | Jestæµ‹è¯•ã€æ€§èƒ½ä¼˜åŒ– |
| ä¸­çº§å¼€å‘ | ReactåŸºç¡€ã€æµ‹è¯•æ¡†æ¶ | æ–‡æ¡£å†™ä½œèƒ½åŠ› |
| QAå·¥ç¨‹å¸ˆ | å‰ç«¯æµ‹è¯•ã€è‡ªåŠ¨åŒ–æµ‹è¯• | æ€§èƒ½æµ‹è¯•ç»éªŒ |

### å·¥ä½œé‡åˆ†é…

#### å„é˜¶æ®µäººåŠ›æŠ•å…¥ (äººå¤©)
| é˜¶æ®µ | é¡¹ç›®è´Ÿè´£äºº | é«˜çº§å¼€å‘ | ä¸­çº§å¼€å‘ | QAå·¥ç¨‹å¸ˆ | åˆè®¡ |
|------|-----------|----------|----------|----------|------|
| ç¬¬1-2å‘¨ | 4 | 16 | 8 | 4 | 32 |
| ç¬¬3-4å‘¨ | 4 | 20 | 8 | 4 | 36 |
| ç¬¬5å‘¨ | 2 | 8 | 2 | 3 | 15 |
| ç¬¬6å‘¨ | 2 | 6 | 4 | 3 | 15 |
| ç¬¬7å‘¨ | 3 | 4 | 6 | 2 | 15 |
| **æ€»è®¡** | 15 | 54 | 28 | 16 | **113äººå¤©** |

### æŠ€æœ¯æ ˆå’Œå·¥å…·

#### å¼€å‘å·¥å…·
- **IDE**: VS Code + ç›¸å…³æ’ä»¶
- **ç‰ˆæœ¬æ§åˆ¶**: Git + GitHub
- **åŒ…ç®¡ç†**: npm/yarn
- **æ„å»ºå·¥å…·**: Vite

#### æµ‹è¯•å·¥å…·
- **å•å…ƒæµ‹è¯•**: Jest + React Testing Library
- **E2Eæµ‹è¯•**: Playwright (å·²æœ‰)
- **è¦†ç›–ç‡**: Jest Coverage
- **æ€§èƒ½æµ‹è¯•**: React DevTools Profiler

#### è´¨é‡ä¿è¯å·¥å…·
- **ä»£ç æ£€æŸ¥**: ESLint + TypeScript
- **ä»£ç æ ¼å¼**: Prettier
- **é™æ€åˆ†æ**: SonarQube (å¯é€‰)
- **CI/CD**: GitHub Actions

---

## âš ï¸ é£é™©è¯„ä¼°ä¸åº”å¯¹ç­–ç•¥

### æŠ€æœ¯é£é™©

#### é£é™©1ï¼šé‡æ„è¿‡ç¨‹ä¸­åŠŸèƒ½å›å½’
- **é£é™©ç­‰çº§**ï¼šğŸ”´ é«˜
- **å½±å“èŒƒå›´**ï¼šæ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½
- **åº”å¯¹ç­–ç•¥**ï¼š
  - å®æ–½æ¸è¿›å¼é‡æ„ï¼Œæ¯æ¬¡åªæ”¹åŠ¨ä¸€ä¸ªæ¨¡å—
  - å®Œå–„çš„å›å½’æµ‹è¯•è¦†ç›–
  - ä¿ç•™åŸæœ‰ä»£ç å¤‡ä»½
  - åˆ†æ”¯å¼€å‘ï¼Œé€æ­¥åˆå¹¶

#### é£é™©2ï¼šæ€§èƒ½ä¼˜åŒ–åå…¼å®¹æ€§é—®é¢˜
- **é£é™©ç­‰çº§**ï¼šğŸŸ¡ ä¸­
- **å½±å“èŒƒå›´**ï¼šç‰¹å®šæµè§ˆå™¨ç‰ˆæœ¬
- **åº”å¯¹ç­–ç•¥**ï¼š
  - å»ºç«‹å…¼å®¹æ€§æµ‹è¯•çŸ©é˜µ
  - ä½¿ç”¨Polyfillç¡®ä¿å‘åå…¼å®¹
  - æ¸è¿›å¼å¢å¼ºç­–ç•¥

#### é£é™©3ï¼šå›¢é˜ŸæŠ€èƒ½å·®å¼‚å¯¼è‡´è´¨é‡ä¸ä¸€è‡´
- **é£é™©ç­‰çº§**ï¼šğŸŸ¡ ä¸­
- **å½±å“èŒƒå›´**ï¼šä»£ç è´¨é‡ä¸€è‡´æ€§
- **åº”å¯¹ç­–ç•¥**ï¼š
  - åˆ¶å®šè¯¦ç»†çš„ç¼–ç è§„èŒƒ
  - å®æ–½Code Reviewåˆ¶åº¦
  - å®šæœŸæŠ€æœ¯åˆ†äº«å’ŒåŸ¹è®­

### è¿›åº¦é£é™©

#### é£é™©4ï¼šä»»åŠ¡å¤æ‚åº¦è¢«ä½ä¼°
- **é£é™©ç­‰çº§**ï¼šğŸŸ¡ ä¸­
- **å½±å“èŒƒå›´**ï¼šé¡¹ç›®è¿›åº¦
- **åº”å¯¹ç­–ç•¥**ï¼š
  - é¢„ç•™20%çš„ç¼“å†²æ—¶é—´
  - æ¯å‘¨è¿›åº¦è¯„ä¼°å’Œè°ƒæ•´
  - å…³é”®è·¯å¾„ä»»åŠ¡ä¼˜å…ˆä¿éšœ

#### é£é™©5ï¼šå¤–éƒ¨ä¾èµ–å˜æ›´
- **é£é™©ç­‰çº§**ï¼šğŸŸ¢ ä½
- **å½±å“èŒƒå›´**ï¼šæ„å»ºå’Œéƒ¨ç½²
- **åº”å¯¹ç­–ç•¥**ï¼š
  - é”å®šä¾èµ–ç‰ˆæœ¬
  - å»ºç«‹ä¾èµ–ç®¡ç†ç­–ç•¥
  - åŠæ—¶è·Ÿè¸ªä¾èµ–æ›´æ–°

### ä¸šåŠ¡é£é™©

#### é£é™©6ï¼šä¼˜åŒ–æœŸé—´ä¸šåŠ¡éœ€æ±‚å˜æ›´
- **é£é™©ç­‰çº§**ï¼šğŸŸ¡ ä¸­
- **å½±å“èŒƒå›´**ï¼šé¡¹ç›®èŒƒå›´å’Œè¿›åº¦
- **åº”å¯¹ç­–ç•¥**ï¼š
  - ä¸ä¸šåŠ¡æ–¹æ˜ç¡®ä¼˜åŒ–æœŸé—´çš„å˜æ›´æµç¨‹
  - å»ºç«‹éœ€æ±‚å˜æ›´è¯„ä¼°æœºåˆ¶
  - ä¼˜å…ˆä¿éšœæ ¸å¿ƒåŠŸèƒ½ç¨³å®š

### é£é™©ç›‘æ§å’Œé¢„è­¦

#### ç›‘æ§æŒ‡æ ‡
- **ä»£ç è´¨é‡æŒ‡æ ‡**ï¼šæ¯æ—¥ESLinté”™è¯¯æ•°é‡
- **æµ‹è¯•è¦†ç›–ç‡**ï¼šæ¯å‘¨è¦†ç›–ç‡è¶‹åŠ¿
- **æ€§èƒ½æŒ‡æ ‡**ï¼šå…³é”®é¡µé¢åŠ è½½æ—¶é—´
- **Bugæ•°é‡**ï¼šæ–°å¼•å…¥çš„Bugç»Ÿè®¡

#### é¢„è­¦æœºåˆ¶
- ğŸ”´ **çº¢è‰²é¢„è­¦**ï¼šæµ‹è¯•è¦†ç›–ç‡ä¸‹é™è¶…è¿‡10%
- ğŸŸ¡ **é»„è‰²é¢„è­¦**ï¼šæ–°å¢ESLinté”™è¯¯è¶…è¿‡50ä¸ª
- ğŸŸ¢ **ç»¿è‰²çŠ¶æ€**ï¼šæ‰€æœ‰æŒ‡æ ‡æ­£å¸¸

---

## ğŸ“ æˆåŠŸæŒ‡æ ‡ä¸éªŒæ”¶æ ‡å‡†

### ä»£ç è´¨é‡æŒ‡æ ‡

#### ä¸»è¦æŒ‡æ ‡
| æŒ‡æ ‡ç±»åˆ« | å½“å‰å€¼ | ç›®æ ‡å€¼ | è¡¡é‡æ–¹å¼ |
|---------|--------|--------|----------|
| **ä»£ç å¯è¯»æ€§** | 6/10 | 8.5/10 | ä»£ç å®¡æŸ¥è¯„åˆ† |
| **æµ‹è¯•è¦†ç›–ç‡** | 0% | â‰¥80% | Jestè¦†ç›–ç‡æŠ¥å‘Š |
| **ä»£ç é‡å¤ç‡** | ~70% | â‰¤10% | SonarQubeåˆ†æ |
| **å‡½æ•°å¤æ‚åº¦** | >15 | â‰¤10 | ESLintå¤æ‚åº¦æ£€æŸ¥ |
| **æ–‡ä»¶è¡Œæ•°** | >500è¡Œ | â‰¤300è¡Œ | é™æ€åˆ†æç»Ÿè®¡ |

#### è¯¦ç»†éªŒæ”¶æ ‡å‡†

##### ä»£ç è´¨é‡æ ‡å‡†
- [ ] **å¯è¯»æ€§è¦æ±‚**
  - æ‰€æœ‰å‡½æ•°éƒ½æœ‰æ¸…æ™°çš„æ³¨é‡Š
  - å˜é‡å’Œå‡½æ•°å‘½åè¯­ä¹‰åŒ–
  - å¤æ‚é€»è¾‘æœ‰å……åˆ†çš„ä»£ç æ³¨é‡Š
  - æ–‡ä»¶ç»“æ„æ¸…æ™°ï¼ŒèŒè´£æ˜ç¡®

- [ ] **ä»£ç è§„èŒƒè¦æ±‚**
  - ESLintè§„åˆ™100%é€šè¿‡
  - TypeScriptç¼–è¯‘0é”™è¯¯0è­¦å‘Š
  - Prettieræ ¼å¼åŒ–ä¸€è‡´æ€§
  - å¯¼å…¥è¯­å¥è§„èŒƒåŒ–

- [ ] **æ¶æ„è®¾è®¡è¦æ±‚**
  - ç»„ä»¶å•ä¸€èŒè´£åŸåˆ™
  - Hooké€»è¾‘æ¸…æ™°åˆ†ç¦»
  - æœåŠ¡å±‚æŠ½è±¡åˆç†
  - ç±»å‹å®šä¹‰å®Œæ•´å‡†ç¡®

### æ€§èƒ½æŒ‡æ ‡

#### å…³é”®æ€§èƒ½æŒ‡æ ‡
| æ€§èƒ½æŒ‡æ ‡ | å½“å‰å€¼ | ç›®æ ‡å€¼ | æµ‹è¯•æ–¹æ³• |
|---------|--------|--------|----------|
| **é¦–å±åŠ è½½æ—¶é—´** | ~2.5s | â‰¤2.0s | Lighthouseæµ‹è¯• |
| **è¡¨æ ¼æ¸²æŸ“æ—¶é—´** | ~1.2s | â‰¤0.8s | Performance API |
| **å†…å­˜ä½¿ç”¨å³°å€¼** | ~85MB | â‰¤70MB | DevToolsç›‘æ§ |
| **Bundleä½“ç§¯** | ~1.8MB | â‰¤1.5MB | æ„å»ºåˆ†ææŠ¥å‘Š |

##### æ€§èƒ½éªŒæ”¶æ ‡å‡†
- [ ] **æ¸²æŸ“æ€§èƒ½**
  - å¤§æ•°æ®è¡¨æ ¼(1000+è¡Œ)æ¸²æŸ“ â‰¤1ç§’
  - ç»„ä»¶é‡æ¸²æŸ“æ¬¡æ•°ä¼˜åŒ–50%
  - æ— æ˜æ˜¾å¡é¡¿å’Œå»¶è¿Ÿ

- [ ] **èµ„æºä½¿ç”¨**
  - ç”Ÿäº§ç¯å¢ƒæ— console.logè¾“å‡º
  - æ— å†…å­˜æ³„æ¼é—®é¢˜
  - äº‹ä»¶ç›‘å¬å™¨æ­£ç¡®æ¸…ç†

### åŠŸèƒ½å®Œæ•´æ€§æŒ‡æ ‡

#### åŠŸèƒ½éªŒæ”¶æ¸…å•
- [ ] **æ ¸å¿ƒåŠŸèƒ½éªŒè¯**
  - è–ªèµ„æ•°æ®å¯¼å…¥åŠŸèƒ½æ­£å¸¸
  - è–ªèµ„è®¡ç®—å¼•æ“è¿è¡Œæ­£ç¡®
  - æŠ¥è¡¨ç”ŸæˆåŠŸèƒ½å®Œæ•´
  - å·¥ä½œæµçŠ¶æ€ç®¡ç†æ­£ç¡®

- [ ] **ç”¨æˆ·ä½“éªŒéªŒè¯**
  - é”™è¯¯æç¤ºä¿¡æ¯å‹å¥½
  - LoadingçŠ¶æ€åé¦ˆåŠæ—¶
  - æ“ä½œæµç¨‹æµç•…è‡ªç„¶
  - å“åº”å¼å¸ƒå±€é€‚é…è‰¯å¥½

### æµ‹è¯•è´¨é‡æŒ‡æ ‡

#### æµ‹è¯•è¦†ç›–è¦æ±‚
| æµ‹è¯•ç±»å‹ | è¦†ç›–ç‡ç›®æ ‡ | é‡ç‚¹è¦†ç›–èŒƒå›´ |
|---------|-----------|-------------|
| **å•å…ƒæµ‹è¯•** | â‰¥80% | ä¸šåŠ¡é€»è¾‘ã€å·¥å…·å‡½æ•° |
| **é›†æˆæµ‹è¯•** | â‰¥60% | APIè°ƒç”¨ã€æ•°æ®æµ |
| **E2Eæµ‹è¯•** | â‰¥40% | å…³é”®ç”¨æˆ·è·¯å¾„ |

##### æµ‹è¯•è´¨é‡æ ‡å‡†
- [ ] **æµ‹è¯•å®Œæ•´æ€§**
  - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘100%è¦†ç›–
  - è¾¹ç•Œæ¡ä»¶å’Œå¼‚å¸¸æƒ…å†µè¦†ç›–
  - å…³é”®ç”¨æˆ·è·¯å¾„E2Eæµ‹è¯•

- [ ] **æµ‹è¯•è´¨é‡**
  - æµ‹è¯•ç”¨ä¾‹å¯è¯»æ€§å¼º
  - Mockæ•°æ®çœŸå®å¯é 
  - æµ‹è¯•ç»´æŠ¤æ€§è‰¯å¥½

### å®‰å…¨æ€§æŒ‡æ ‡

#### å®‰å…¨éªŒæ”¶æ ‡å‡†
- [ ] **æ•°æ®å®‰å…¨**
  - ç”¨æˆ·è¾“å…¥100%éªŒè¯
  - æ•æ„Ÿæ•°æ®è„±æ•å¤„ç†
  - XSSé˜²æŠ¤æœºåˆ¶å®Œæ•´

- [ ] **æƒé™æ§åˆ¶**
  - åŠŸèƒ½çº§æƒé™æ£€æŸ¥
  - æ•°æ®çº§æƒé™éš”ç¦»
  - æ“ä½œæ—¥å¿—è®°å½•å®Œæ•´

---

## ğŸ“š é™„å½•ä¸å‚è€ƒèµ„æ–™

### æŠ€æœ¯å‚è€ƒæ–‡æ¡£

#### Reactæœ€ä½³å®è·µ
- [Reactå®˜æ–¹æ–‡æ¡£ - æ€§èƒ½ä¼˜åŒ–](https://react.dev/learn/render-and-commit)
- [React Testing Libraryæœ€ä½³å®è·µ](https://testing-library.com/docs/react-testing-library/intro/)
- [TypeScript Reactæœ€ä½³å®è·µ](https://react-typescript-cheatsheet.netlify.app/)

#### ä»£ç è´¨é‡æ ‡å‡†
- [Airbnb JavaScript Style Guide](https://github.com/airbnb/javascript)
- [Clean Code JavaScript](https://github.com/ryanmcdermott/clean-code-javascript)
- [ESLint React Hooksè§„åˆ™](https://www.npmjs.com/package/eslint-plugin-react-hooks)

#### æµ‹è¯•æ¡†æ¶æ–‡æ¡£
- [Jestå®˜æ–¹æ–‡æ¡£](https://jestjs.io/docs/getting-started)
- [React Testing Libraryæ–‡æ¡£](https://testing-library.com/docs/)
- [Playwright E2Eæµ‹è¯•æŒ‡å—](https://playwright.dev/docs/intro)

### é¡¹ç›®æ¨¡æ¿å’Œç¤ºä¾‹

#### ä»£ç é‡æ„ç¤ºä¾‹
```typescript
// é‡æ„å‰ï¼šå¤æ‚çš„useEffect
useEffect(() => {
  if (visible) {
    setComponentDefinitionsLoaded(false);
    if (payrollConfig.componentDefinitions.length > 0) {
      setComponentDefinitionsLoaded(true);
      return;
    }
    const loadComponentDefinitions = async () => {
      try {
        await payrollConfig.fetchComponentDefinitions();
        setComponentDefinitionsLoaded(true);
      } catch (err) {
        setComponentDefinitionsLoaded(true);
      }
    };
    loadComponentDefinitions();
  }
}, [visible]);

// é‡æ„åï¼šæ¸…æ™°çš„é€»è¾‘åˆ†ç¦»
const { componentDefinitions, isLoading, error } = usePayrollConfig();
useEffect(() => {
  if (visible && !componentDefinitions) {
    loadComponentDefinitions();
  }
}, [visible, componentDefinitions]);
```

#### æµ‹è¯•ç”¨ä¾‹æ¨¡æ¿
```typescript
describe('PayrollEntryDetailModal', () => {
  const mockProps = {
    entryId: '123',
    visible: true,
    onClose: jest.fn()
  };

  beforeEach(() => {
    jest.clearAllMocks();
  });

  it('should render employee information correctly', async () => {
    render(<PayrollEntryDetailModal {...mockProps} />);
    expect(screen.getByText('å‘˜å·¥ä¿¡æ¯')).toBeInTheDocument();
  });

  it('should handle error states gracefully', async () => {
    // æµ‹è¯•é”™è¯¯å¤„ç†é€»è¾‘
  });
});
```

### å·¥å…·é…ç½®ç¤ºä¾‹

#### ESLinté…ç½®
```json
{
  "extends": [
    "eslint:recommended",
    "@typescript-eslint/recommended",
    "plugin:react/recommended",
    "plugin:react-hooks/recommended"
  ],
  "rules": {
    "max-lines": ["error", 300],
    "max-complexity": ["error", 10],
    "no-console": "error",
    "react-hooks/exhaustive-deps": "error"
  }
}
```

#### Jesté…ç½®
```json
{
  "collectCoverageFrom": [
    "src/pages/Payroll/**/*.{ts,tsx}",
    "!src/pages/Payroll/**/*.d.ts",
    "!src/pages/Payroll/**/__tests__/**"
  ],
  "coverageThreshold": {
    "global": {
      "lines": 80,
      "functions": 80,
      "statements": 80,
      "branches": 70
    }
  }
}
```

### è”ç³»æ–¹å¼å’Œæ”¯æŒ

#### é¡¹ç›®å›¢é˜Ÿè”ç³»æ–¹å¼
- **é¡¹ç›®è´Ÿè´£äºº**ï¼š[å§“å] - [é‚®ç®±]
- **æŠ€æœ¯æ¶æ„å¸ˆ**ï¼š[å§“å] - [é‚®ç®±]
- **QAè´Ÿè´£äºº**ï¼š[å§“å] - [é‚®ç®±]

#### æŠ€æœ¯æ”¯æŒèµ„æº
- **å†…éƒ¨æ–‡æ¡£åº“**ï¼š[é“¾æ¥åœ°å€]
- **æŠ€æœ¯è®¨è®ºç¾¤**ï¼š[ç¾¤å·/é“¾æ¥]
- **ä»£ç ä»“åº“**ï¼š[GitHubé“¾æ¥]

---

## ğŸ“ ç‰ˆæœ¬è®°å½•

| ç‰ˆæœ¬ | æ—¥æœŸ | ä¿®æ”¹å†…å®¹ | ä¿®æ”¹äºº |
|------|------|----------|--------|
| v1.0 | 2024-12-23 | åˆå§‹ç‰ˆæœ¬åˆ›å»º | Claude |
| v1.1 | - | å¾…æ›´æ–° | - |

---

**æ–‡æ¡£ç»“æŸ**

*æœ¬æ–‡æ¡£ä½œä¸ºPayrollæ¨¡å—ä»£ç è´¨é‡ä¼˜åŒ–é¡¹ç›®çš„æ ¸å¿ƒæŒ‡å¯¼æ–‡æ¡£ï¼Œå°†æ ¹æ®é¡¹ç›®è¿›å±•æŒç»­æ›´æ–°å’Œå®Œå–„ã€‚*